var _A=Object.defineProperty;var wA=(i,t,e)=>t in i?_A(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var bt=(i,t,e)=>(wA(i,typeof t!="symbol"?t+"":t,e),e),xA=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var If=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)};var iu=(i,t,e)=>(xA(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function ut(){}function SA(i,t){for(const e in t)i[e]=t[e];return i}function bA(i){return!!i&&(typeof i=="object"||typeof i=="function")&&typeof i.then=="function"}function Hx(i){return i()}function $y(){return Object.create(null)}function Cl(i){i.forEach(Hx)}function uv(i){return typeof i=="function"}function Ca(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function TA(i){return Object.keys(i).length===0}function CA(i,...t){if(i==null)return ut;const e=i.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function EA(i,t,e){i.$$.on_destroy.push(CA(t,e))}function IA(i,t,e,n){if(i){const r=Ux(i,t,e,n);return i[0](r)}}function Ux(i,t,e,n){return i[1]&&n?SA(e.ctx.slice(),i[1](n(t))):e.ctx}function AA(i,t,e,n){if(i[2]&&n){const r=i[2](n(e));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],a=Math.max(t.dirty.length,r.length);for(let o=0;o<a;o+=1)s[o]=t.dirty[o]|r[o];return s}return t.dirty|r}return t.dirty}function RA(i,t,e,n,r,s){if(r){const a=Ux(t,e,n,s);i.p(a,r)}}function MA(i){if(i.ctx.length>32){const t=[],e=i.ctx.length/32;for(let n=0;n<e;n++)t[n]=-1;return t}return-1}function Xx(i){return i&&uv(i.destroy)?i.destroy:ut}function $e(i,t){i.appendChild(t)}function le(i,t,e){i.insertBefore(t,e||null)}function Jt(i){i.parentNode&&i.parentNode.removeChild(i)}function LA(i,t){for(let e=0;e<i.length;e+=1)i[e]&&i[e].d(t)}function ue(i){return document.createElement(i)}function kA(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Yo(i){return document.createTextNode(i)}function Zs(){return Yo(" ")}function bc(){return Yo("")}function ge(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function DA(i){return Array.from(i.childNodes)}function Vy(i,t){t=""+t,i.data!==t&&(i.data=t)}function Wy(i,t,e){i.classList[e?"add":"remove"](t)}class PA{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=kA(e.nodeName):this.e=ue(e.nodeType===11?"TEMPLATE":e.nodeName),this.t=e.tagName!=="TEMPLATE"?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)le(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Jt)}}let Ho;function an(i){Ho=i}function Kx(){if(!Ho)throw new Error("Function called outside component initialization");return Ho}function OA(i){Kx().$$.on_mount.push(i)}const Ps=[],Lh=[];let qs=[];const wg=[],FA=Promise.resolve();let xg=!1;function NA(){xg||(xg=!0,FA.then(hv))}function Sg(i){qs.push(i)}function BA(i){wg.push(i)}const Af=new Set;let cs=0;function hv(){if(cs!==0)return;const i=Ho;do{try{for(;cs<Ps.length;){const t=Ps[cs];cs++,an(t),zA(t.$$)}}catch(t){throw Ps.length=0,cs=0,t}for(an(null),Ps.length=0,cs=0;Lh.length;)Lh.pop()();for(let t=0;t<qs.length;t+=1){const e=qs[t];Af.has(e)||(Af.add(e),e())}qs.length=0}while(Ps.length);for(;wg.length;)wg.pop()();xg=!1,Af.clear(),an(i)}function zA(i){if(i.fragment!==null){i.update(),Cl(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(Sg)}}function GA(i){const t=[],e=[];qs.forEach(n=>i.indexOf(n)===-1?t.push(n):e.push(n)),e.forEach(n=>n()),qs=t}const ch=new Set;let Lr;function jx(){Lr={r:0,c:[],p:Lr}}function Zx(){Lr.r||Cl(Lr.c),Lr=Lr.p}function Ae(i,t){i&&i.i&&(ch.delete(i),i.i(t))}function oi(i,t,e,n){if(i&&i.o){if(ch.has(i))return;ch.add(i),Lr.c.push(()=>{ch.delete(i),n&&(e&&i.d(1),n())}),i.o(t)}else n&&n()}function $A(i,t){const e=t.token={};function n(r,s,a,o){if(t.token!==e)return;t.resolved=o;let l=t.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const u=r&&(t.current=r)(l);let h=!1;t.block&&(t.blocks?t.blocks.forEach((c,f)=>{f!==s&&c&&(jx(),oi(c,1,1,()=>{t.blocks[f]===c&&(t.blocks[f]=null)}),Zx())}):t.block.d(1),u.c(),Ae(u,1),u.m(t.mount(),t.anchor),h=!0),t.block=u,t.blocks&&(t.blocks[s]=u),h&&hv()}if(bA(i)){const r=Kx();if(i.then(s=>{an(r),n(t.then,1,t.value,s),an(null)},s=>{if(an(r),n(t.catch,2,t.error,s),an(null),!t.hasCatch)throw s}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,i),!0;t.resolved=i}}function VA(i,t,e){const n=t.slice(),{resolved:r}=i;i.current===i.then&&(n[i.value]=r),i.current===i.catch&&(n[i.error]=r),i.block.p(n,e)}function WA(i,t,e){const n=i.$$.props[t];n!==void 0&&(i.$$.bound[n]=e,e(i.$$.ctx[n]))}function kh(i){i&&i.c()}function Uo(i,t,e,n){const{fragment:r,after_update:s}=i.$$;r&&r.m(t,e),n||Sg(()=>{const a=i.$$.on_mount.map(Hx).filter(uv);i.$$.on_destroy?i.$$.on_destroy.push(...a):Cl(a),i.$$.on_mount=[]}),s.forEach(Sg)}function Xo(i,t){const e=i.$$;e.fragment!==null&&(GA(e.after_update),Cl(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function YA(i,t){i.$$.dirty[0]===-1&&(Ps.push(i),NA(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function El(i,t,e,n,r,s,a,o=[-1]){const l=Ho;an(i);const u=i.$$={fragment:null,ctx:[],props:s,update:ut,not_equal:r,bound:$y(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:$y(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let h=!1;if(u.ctx=e?e(i,t.props||{},(c,f,...d)=>{const g=d.length?d[0]:f;return u.ctx&&r(u.ctx[c],u.ctx[c]=g)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](g),h&&YA(i,c)),f}):[],u.update(),h=!0,Cl(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const c=DA(t.target);u.fragment&&u.fragment.l(c),c.forEach(Jt)}else u.fragment&&u.fragment.c();t.intro&&Ae(i.$$.fragment),Uo(i,t.target,t.anchor,t.customElement),hv()}an(l)}class Il{$destroy(){Xo(this,1),this.$destroy=ut}$on(t,e){if(!uv(e))return ut;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const r=n.indexOf(e);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!TA(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const cv=Symbol.for("yaml.alias"),bg=Symbol.for("yaml.document"),Wn=Symbol.for("yaml.map"),qx=Symbol.for("yaml.pair"),dn=Symbol.for("yaml.scalar"),Ea=Symbol.for("yaml.seq"),hi=Symbol.for("yaml.node.type"),Ia=i=>!!i&&typeof i=="object"&&i[hi]===cv,Tc=i=>!!i&&typeof i=="object"&&i[hi]===bg,Al=i=>!!i&&typeof i=="object"&&i[hi]===Wn,$t=i=>!!i&&typeof i=="object"&&i[hi]===qx,At=i=>!!i&&typeof i=="object"&&i[hi]===dn,Rl=i=>!!i&&typeof i=="object"&&i[hi]===Ea;function Gt(i){if(i&&typeof i=="object")switch(i[hi]){case Wn:case Ea:return!0}return!1}function Ht(i){if(i&&typeof i=="object")switch(i[hi]){case cv:case Wn:case dn:case Ea:return!0}return!1}const HA=i=>(At(i)||Gt(i))&&!!i.anchor,Er=Symbol("break visit"),UA=Symbol("skip children"),To=Symbol("remove node");function Xr(i,t){const e=XA(t);Tc(i)?$s(null,i.contents,e,Object.freeze([i]))===To&&(i.contents=null):$s(null,i,e,Object.freeze([]))}Xr.BREAK=Er;Xr.SKIP=UA;Xr.REMOVE=To;function $s(i,t,e,n){const r=KA(i,t,e,n);if(Ht(r)||$t(r))return jA(i,n,r),$s(i,r,e,n);if(typeof r!="symbol"){if(Gt(t)){n=Object.freeze(n.concat(t));for(let s=0;s<t.items.length;++s){const a=$s(s,t.items[s],e,n);if(typeof a=="number")s=a-1;else{if(a===Er)return Er;a===To&&(t.items.splice(s,1),s-=1)}}}else if($t(t)){n=Object.freeze(n.concat(t));const s=$s("key",t.key,e,n);if(s===Er)return Er;s===To&&(t.key=null);const a=$s("value",t.value,e,n);if(a===Er)return Er;a===To&&(t.value=null)}}return r}function XA(i){return typeof i=="object"&&(i.Collection||i.Node||i.Value)?Object.assign({Alias:i.Node,Map:i.Node,Scalar:i.Node,Seq:i.Node},i.Value&&{Map:i.Value,Scalar:i.Value,Seq:i.Value},i.Collection&&{Map:i.Collection,Seq:i.Collection},i):i}function KA(i,t,e,n){var r,s,a,o,l;if(typeof e=="function")return e(i,t,n);if(Al(t))return(r=e.Map)==null?void 0:r.call(e,i,t,n);if(Rl(t))return(s=e.Seq)==null?void 0:s.call(e,i,t,n);if($t(t))return(a=e.Pair)==null?void 0:a.call(e,i,t,n);if(At(t))return(o=e.Scalar)==null?void 0:o.call(e,i,t,n);if(Ia(t))return(l=e.Alias)==null?void 0:l.call(e,i,t,n)}function jA(i,t,e){const n=t[t.length-1];if(Gt(n))n.items[i]=e;else if($t(n))i==="key"?n.key=e:n.value=e;else if(Tc(n))n.contents=e;else{const r=Ia(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const ZA={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},qA=i=>i.replace(/[!,[\]{}]/g,t=>ZA[t]);class fe{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},fe.defaultYaml,t),this.tags=Object.assign({},fe.defaultTags,e)}clone(){const t=new fe(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new fe(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:fe.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},fe.defaultTags);break}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:fe.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},fe.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(n.length!==2&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[s,a]=n;return this.tags[s]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return e(0,"%YAML directive should contain exactly one part"),!1;const[s]=n;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const a=/^\d+\.\d+$/.test(s);return e(6,`Unsupported YAML version ${s}`,a),!1}}default:return e(0,`Unknown directive ${r}`,!0),!1}}tagName(t,e){if(t==="!")return"!";if(t[0]!=="!")return e(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const a=t.slice(2,-1);return a==="!"||a==="!!"?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&e("Verbatim tags must end with a >"),a)}const[,n,r]=t.match(/^(.*!)([^!]*)$/);r||e(`The ${t} tag has no suffix`);const s=this.tags[n];return s?s+decodeURIComponent(r):n==="!"?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+qA(t.substring(n.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(t&&n.length>0&&Ht(t.contents)){const s={};Xr(t.contents,(a,o)=>{Ht(o)&&o.tag&&(s[o.tag]=!0)}),r=Object.keys(s)}else r=[];for(const[s,a]of n)s==="!!"&&a==="tag:yaml.org,2002:"||(!t||r.some(o=>o.startsWith(a)))&&e.push(`%TAG ${s} ${a}`);return e.join(`
`)}}fe.defaultYaml={explicit:!1,version:"1.2"};fe.defaultTags={"!!":"tag:yaml.org,2002:"};function Jx(i){if(/[\x00-\x19\s,[\]{}]/.test(i)){const e=`Anchor must not contain whitespace or control characters: ${JSON.stringify(i)}`;throw new Error(e)}return!0}function Qx(i){const t=new Set;return Xr(i,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function tS(i,t){for(let e=1;;++e){const n=`${i}${e}`;if(!t.has(n))return n}}function JA(i,t){const e=[],n=new Map;let r=null;return{onAnchor:s=>{e.push(s),r||(r=Qx(i));const a=tS(t,r);return r.add(a),a},setAnchors:()=>{for(const s of e){const a=n.get(s);if(typeof a=="object"&&a.anchor&&(At(a.node)||Gt(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=s,o}}},sourceObjects:n}}function Vs(i,t,e,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let r=0,s=n.length;r<s;++r){const a=n[r],o=Vs(i,n,String(r),a);o===void 0?delete n[r]:o!==a&&(n[r]=o)}else if(n instanceof Map)for(const r of Array.from(n.keys())){const s=n.get(r),a=Vs(i,n,r,s);a===void 0?n.delete(r):a!==s&&n.set(r,a)}else if(n instanceof Set)for(const r of Array.from(n)){const s=Vs(i,n,r,r);s===void 0?n.delete(r):s!==r&&(n.delete(r),n.add(s))}else for(const[r,s]of Object.entries(n)){const a=Vs(i,n,r,s);a===void 0?delete n[r]:a!==s&&(n[r]=a)}return i.call(t,e,n)}function li(i,t,e){if(Array.isArray(i))return i.map((n,r)=>li(n,String(r),e));if(i&&typeof i.toJSON=="function"){if(!e||!HA(i))return i.toJSON(t,e);const n={aliasCount:0,count:1,res:void 0};e.anchors.set(i,n),e.onCreate=s=>{n.res=s,delete e.onCreate};const r=i.toJSON(t,e);return e.onCreate&&e.onCreate(r),r}return typeof i=="bigint"&&!(e!=null&&e.keep)?Number(i):i}class fv{constructor(t){Object.defineProperty(this,hi,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:n,onAnchor:r,reviver:s}={}){if(!Tc(t))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:t,keep:!0,mapAsMap:e===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},o=li(this,"",a);if(typeof r=="function")for(const{count:l,res:u}of a.anchors.values())r(u,l);return typeof s=="function"?Vs(s,{"":o},"",o):o}}class dv extends fv{constructor(t){super(cv),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return Xr(t,{Node:(n,r)=>{if(r===this)return Xr.BREAK;r.anchor===this.source&&(e=r)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:s}=e,a=this.resolve(r);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=n.get(a);if(o||(li(a,null,e),o=n.get(a)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=fh(r,a,n)),o.count*o.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(t,e,n){const r=`*${this.source}`;if(t){if(Jx(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(t.implicitKey)return`${r} `}return r}}function fh(i,t,e){if(Ia(t)){const n=t.resolve(i),r=e&&n&&e.get(n);return r?r.count*r.aliasCount:0}else if(Gt(t)){let n=0;for(const r of t.items){const s=fh(i,r,e);s>n&&(n=s)}return n}else if($t(t)){const n=fh(i,t.key,e),r=fh(i,t.value,e);return Math.max(n,r)}return 1}const eS=i=>!i||typeof i!="function"&&typeof i!="object";class Q extends fv{constructor(t){super(dn),this.value=t}toJSON(t,e){return e!=null&&e.keep?this.value:li(this.value,t,e)}toString(){return String(this.value)}}Q.BLOCK_FOLDED="BLOCK_FOLDED";Q.BLOCK_LITERAL="BLOCK_LITERAL";Q.PLAIN="PLAIN";Q.QUOTE_DOUBLE="QUOTE_DOUBLE";Q.QUOTE_SINGLE="QUOTE_SINGLE";const QA="tag:yaml.org,2002:";function tR(i,t,e){if(t){const n=e.filter(s=>s.tag===t),r=n.find(s=>!s.format)??n[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return e.find(n=>{var r;return((r=n.identify)==null?void 0:r.call(n,i))&&!n.format})}function Ko(i,t,e){var c,f,d;if(Tc(i)&&(i=i.contents),Ht(i))return i;if($t(i)){const g=(f=(c=e.schema[Wn]).createNode)==null?void 0:f.call(c,e.schema,null,e);return g.items.push(i),g}(i instanceof String||i instanceof Number||i instanceof Boolean||typeof BigInt<"u"&&i instanceof BigInt)&&(i=i.valueOf());const{aliasDuplicateObjects:n,onAnchor:r,onTagObj:s,schema:a,sourceObjects:o}=e;let l;if(n&&i&&typeof i=="object"){if(l=o.get(i),l)return l.anchor||(l.anchor=r(i)),new dv(l.anchor);l={anchor:null,node:null},o.set(i,l)}t!=null&&t.startsWith("!!")&&(t=QA+t.slice(2));let u=tR(i,t,a.tags);if(!u){if(i&&typeof i.toJSON=="function"&&(i=i.toJSON()),!i||typeof i!="object"){const g=new Q(i);return l&&(l.node=g),g}u=i instanceof Map?a[Wn]:Symbol.iterator in Object(i)?a[Ea]:a[Wn]}s&&(s(u),delete e.onTagObj);const h=u!=null&&u.createNode?u.createNode(e.schema,i,e):typeof((d=u==null?void 0:u.nodeClass)==null?void 0:d.from)=="function"?u.nodeClass.from(e.schema,i,e):new Q(i);return t?h.tag=t:u.default||(h.tag=u.tag),l&&(l.node=h),h}function Dh(i,t,e){let n=e;for(let r=t.length-1;r>=0;--r){const s=t[r];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const a=[];a[s]=n,n=a}else n=new Map([[s,n]])}return Ko(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:i,sourceObjects:new Map})}const fo=i=>i==null||typeof i=="object"&&!!i[Symbol.iterator]().next().done;let Cc=class extends fv{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map(n=>Ht(n)||$t(n)?n.clone(t):n),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(fo(t))this.add(e);else{const[n,...r]=t,s=this.get(n,!0);if(Gt(s))s.addIn(r,e);else if(s===void 0&&this.schema)this.set(n,Dh(this.schema,r,e));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}deleteIn(t){const[e,...n]=t;if(n.length===0)return this.delete(e);const r=this.get(e,!0);if(Gt(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...r]=t,s=this.get(n,!0);return r.length===0?!e&&At(s)?s.value:s:Gt(s)?s.getIn(r,e):void 0}hasAllNullValues(t){return this.items.every(e=>{if(!$t(e))return!1;const n=e.value;return n==null||t&&At(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){const[e,...n]=t;if(n.length===0)return this.has(e);const r=this.get(e,!0);return Gt(r)?r.hasIn(n):!1}setIn(t,e){const[n,...r]=t;if(r.length===0)this.set(n,e);else{const s=this.get(n,!0);if(Gt(s))s.setIn(r,e);else if(s===void 0&&this.schema)this.set(n,Dh(this.schema,r,e));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}};Cc.maxFlowStringSingleLineLength=60;const eR=i=>i.replace(/^(?!$)(?: $)?/gm,"#");function on(i,t){return/^\n+$/.test(i)?i.substring(1):t?i.replace(/^(?! *$)/gm,t):i}const Bn=(i,t,e)=>i.endsWith(`
`)?on(e,t):e.includes(`
`)?`
`+on(e,t):(i.endsWith(" ")?"":" ")+e,iS="flow",Tg="block",dh="quoted";function Ec(i,t,e="flow",{indentAtStart:n,lineWidth:r=80,minContentWidth:s=20,onFold:a,onOverflow:o}={}){if(!r||r<0)return i;const l=Math.max(1+s,1+r-t.length);if(i.length<=l)return i;const u=[],h={};let c=r-t.length;typeof n=="number"&&(n>r-Math.max(2,s)?u.push(0):c=r-n);let f,d,g=!1,p=-1,v=-1,m=-1;e===Tg&&(p=Yy(i,p),p!==-1&&(c=p+l));for(let _;_=i[p+=1];){if(e===dh&&_==="\\"){switch(v=p,i[p+1]){case"x":p+=3;break;case"u":p+=5;break;case"U":p+=9;break;default:p+=1}m=p}if(_===`
`)e===Tg&&(p=Yy(i,p)),c=p+l,f=void 0;else{if(_===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){const w=i[p+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(f=p)}if(p>=c)if(f)u.push(f),c=f+l,f=void 0;else if(e===dh){for(;d===" "||d==="	";)d=_,_=i[p+=1],g=!0;const w=p>m+1?p-2:v-1;if(h[w])return i;u.push(w),h[w]=!0,c=w+l,f=void 0}else g=!0}d=_}if(g&&o&&o(),u.length===0)return i;a&&a();let y=i.slice(0,u[0]);for(let _=0;_<u.length;++_){const w=u[_],S=u[_+1]||i.length;w===0?y=`
${t}${i.slice(0,S)}`:(e===dh&&h[w]&&(y+=`${i[w]}\\`),y+=`
${t}${i.slice(w+1,S)}`)}return y}function Yy(i,t){let e=i[t+1];for(;e===" "||e==="	";){do e=i[t+=1];while(e&&e!==`
`);e=i[t+1]}return t}const Ic=(i,t)=>({indentAtStart:t?i.indent.length:i.indentAtStart,lineWidth:i.options.lineWidth,minContentWidth:i.options.minContentWidth}),Ac=i=>/^(%|---|\.\.\.)/m.test(i);function iR(i,t,e){if(!t||t<0)return!1;const n=t-e,r=i.length;if(r<=n)return!1;for(let s=0,a=0;s<r;++s)if(i[s]===`
`){if(s-a>n)return!0;if(a=s+1,r-a<=n)return!1}return!0}function Co(i,t){const e=JSON.stringify(i);if(t.options.doubleQuotedAsJSON)return e;const{implicitKey:n}=t,r=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(Ac(i)?"  ":"");let a="",o=0;for(let l=0,u=e[l];u;u=e[++l])if(u===" "&&e[l+1]==="\\"&&e[l+2]==="n"&&(a+=e.slice(o,l)+"\\ ",l+=1,o=l,u="\\"),u==="\\")switch(e[l+1]){case"u":{a+=e.slice(o,l);const h=e.substr(l+2,4);switch(h){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:h.substr(0,2)==="00"?a+="\\x"+h.substr(2):a+=e.substr(l,6)}l+=5,o=l+1}break;case"n":if(n||e[l+2]==='"'||e.length<r)l+=1;else{for(a+=e.slice(o,l)+`

`;e[l+2]==="\\"&&e[l+3]==="n"&&e[l+4]!=='"';)a+=`
`,l+=2;a+=s,e[l+2]===" "&&(a+="\\"),l+=1,o=l+1}break;default:l+=1}return a=o?a+e.slice(o):e,n?a:Ec(a,s,dh,Ic(t,!1))}function Cg(i,t){if(t.options.singleQuote===!1||t.implicitKey&&i.includes(`
`)||/[ \t]\n|\n[ \t]/.test(i))return Co(i,t);const e=t.indent||(Ac(i)?"  ":""),n="'"+i.replace(/'/g,"''").replace(/\n+/g,`$&
${e}`)+"'";return t.implicitKey?n:Ec(n,e,iS,Ic(t,!1))}function Ws(i,t){const{singleQuote:e}=t.options;let n;if(e===!1)n=Co;else{const r=i.includes('"'),s=i.includes("'");r&&!s?n=Cg:s&&!r?n=Co:n=e?Cg:Co}return n(i,t)}let Eg;try{Eg=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Eg=/\n+(?!\n|$)/g}function gh({comment:i,type:t,value:e},n,r,s){const{blockQuote:a,commentString:o,lineWidth:l}=n.options;if(!a||/\n[\t ]+$/.test(e)||/^\s*$/.test(e))return Ws(e,n);const u=n.indent||(n.forceBlockIndent||Ac(e)?"  ":""),h=a==="literal"?!0:a==="folded"||t===Q.BLOCK_FOLDED?!1:t===Q.BLOCK_LITERAL?!0:!iR(e,l,u.length);if(!e)return h?`|
`:`>
`;let c,f;for(f=e.length;f>0;--f){const x=e[f-1];if(x!==`
`&&x!=="	"&&x!==" ")break}let d=e.substring(f);const g=d.indexOf(`
`);g===-1?c="-":e===d||g!==d.length-1?(c="+",s&&s()):c="",d&&(e=e.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(Eg,`$&${u}`));let p=!1,v,m=-1;for(v=0;v<e.length;++v){const x=e[v];if(x===" ")p=!0;else if(x===`
`)m=v;else break}let y=e.substring(0,m<v?m+1:v);y&&(e=e.substring(y.length),y=y.replace(/\n+/g,`$&${u}`));let w=(h?"|":">")+(p?u?"2":"1":"")+c;if(i&&(w+=" "+o(i.replace(/ ?[\r\n]+/g," ")),r&&r()),h)return e=e.replace(/\n+/g,`$&${u}`),`${w}
${u}${y}${e}${d}`;e=e.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);const S=Ec(`${y}${e}${d}`,u,Tg,Ic(n,!0));return`${w}
${u}${S}`}function nR(i,t,e,n){const{type:r,value:s}=i,{actualString:a,implicitKey:o,indent:l,indentStep:u,inFlow:h}=t;if(o&&s.includes(`
`)||h&&/[[\]{},]/.test(s))return Ws(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return o||h||!s.includes(`
`)?Ws(s,t):gh(i,t,e,n);if(!o&&!h&&r!==Q.PLAIN&&s.includes(`
`))return gh(i,t,e,n);if(Ac(s)){if(l==="")return t.forceBlockIndent=!0,gh(i,t,e,n);if(o&&l===u)return Ws(s,t)}const c=s.replace(/\n+/g,`$&
${l}`);if(a){const f=p=>{var v;return p.default&&p.tag!=="tag:yaml.org,2002:str"&&((v=p.test)==null?void 0:v.test(c))},{compat:d,tags:g}=t.doc.schema;if(g.some(f)||d!=null&&d.some(f))return Ws(s,t)}return o?c:Ec(c,l,iS,Ic(t,!1))}function gv(i,t,e,n){const{implicitKey:r,inFlow:s}=t,a=typeof i.value=="string"?i:Object.assign({},i,{value:String(i.value)});let{type:o}=i;o!==Q.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=Q.QUOTE_DOUBLE);const l=h=>{switch(h){case Q.BLOCK_FOLDED:case Q.BLOCK_LITERAL:return r||s?Ws(a.value,t):gh(a,t,e,n);case Q.QUOTE_DOUBLE:return Co(a.value,t);case Q.QUOTE_SINGLE:return Cg(a.value,t);case Q.PLAIN:return nR(a,t,e,n);default:return null}};let u=l(o);if(u===null){const{defaultKeyType:h,defaultStringType:c}=t.options,f=r&&h||c;if(u=l(f),u===null)throw new Error(`Unsupported default string type ${f}`)}return u}function nS(i,t){const e=Object.assign({blockQuote:!0,commentString:eR,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},i.schema.toStringOptions,t);let n;switch(e.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:i,flowCollectionPadding:e.flowCollectionPadding?" ":"",indent:"",indentStep:typeof e.indent=="number"?" ".repeat(e.indent):"  ",inFlow:n,options:e}}function rR(i,t){var r;if(t.tag){const s=i.filter(a=>a.tag===t.tag);if(s.length>0)return s.find(a=>a.format===t.format)??s[0]}let e,n;if(At(t)){n=t.value;const s=i.filter(a=>{var o;return(o=a.identify)==null?void 0:o.call(a,n)});e=s.find(a=>a.format===t.format)??s.find(a=>!a.format)}else n=t,e=i.find(s=>s.nodeClass&&n instanceof s.nodeClass);if(!e){const s=((r=n==null?void 0:n.constructor)==null?void 0:r.name)??typeof n;throw new Error(`Tag not resolved for ${s} value`)}return e}function sR(i,t,{anchors:e,doc:n}){if(!n.directives)return"";const r=[],s=(At(i)||Gt(i))&&i.anchor;s&&Jx(s)&&(e.add(s),r.push(`&${s}`));const a=i.tag?i.tag:t.default?null:t.tag;return a&&r.push(n.directives.tagString(a)),r.join(" ")}function ca(i,t,e,n){var l;if($t(i))return i.toString(t,e,n);if(Ia(i)){if(t.doc.directives)return i.toString(t);if((l=t.resolvedAliases)!=null&&l.has(i))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(i):t.resolvedAliases=new Set([i]),i=i.resolve(t.doc)}let r;const s=Ht(i)?i:t.doc.createNode(i,{onTagObj:u=>r=u});r||(r=rR(t.doc.schema.tags,s));const a=sR(s,r,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);const o=typeof r.stringify=="function"?r.stringify(s,t,e,n):At(s)?gv(s,t,e,n):s.toString(t,e,n);return a?At(s)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${t.indent}${o}`:o}function aR({key:i,value:t},e,n,r){const{allNullValues:s,doc:a,indent:o,indentStep:l,options:{commentString:u,indentSeq:h,simpleKeys:c}}=e;let f=Ht(i)&&i.comment||null;if(c){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Gt(i)){const b="With simple keys, collection cannot be used as a key value";throw new Error(b)}}let d=!c&&(!i||f&&t==null&&!e.inFlow||Gt(i)||(At(i)?i.type===Q.BLOCK_FOLDED||i.type===Q.BLOCK_LITERAL:typeof i=="object"));e=Object.assign({},e,{allNullValues:!1,implicitKey:!d&&(c||!s),indent:o+l});let g=!1,p=!1,v=ca(i,e,()=>g=!0,()=>p=!0);if(!d&&!e.inFlow&&v.length>1024){if(c)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(e.inFlow){if(s||t==null)return g&&n&&n(),v===""?"?":d?`? ${v}`:v}else if(s&&!c||t==null&&d)return v=`? ${v}`,f&&!g?v+=Bn(v,e.indent,u(f)):p&&r&&r(),v;g&&(f=null),d?(f&&(v+=Bn(v,e.indent,u(f))),v=`? ${v}
${o}:`):(v=`${v}:`,f&&(v+=Bn(v,e.indent,u(f))));let m,y,_;Ht(t)?(m=!!t.spaceBefore,y=t.commentBefore,_=t.comment):(m=!1,y=null,_=null,t&&typeof t=="object"&&(t=a.createNode(t))),e.implicitKey=!1,!d&&!f&&At(t)&&(e.indentAtStart=v.length+1),p=!1,!h&&l.length>=2&&!e.inFlow&&!d&&Rl(t)&&!t.flow&&!t.tag&&!t.anchor&&(e.indent=e.indent.substring(2));let w=!1;const S=ca(t,e,()=>w=!0,()=>p=!0);let x=" ";if(f||m||y){if(x=m?`
`:"",y){const b=u(y);x+=`
${on(b,e.indent)}`}S===""&&!e.inFlow?x===`
`&&(x=`

`):x+=`
${e.indent}`}else if(!d&&Gt(t)){const b=S[0],T=S.indexOf(`
`),C=T!==-1,I=e.inFlow??t.flow??t.items.length===0;if(C||!I){let E=!1;if(C&&(b==="&"||b==="!")){let R=S.indexOf(" ");b==="&"&&R!==-1&&R<T&&S[R+1]==="!"&&(R=S.indexOf(" ",R+1)),(R===-1||T<R)&&(E=!0)}E||(x=`
${e.indent}`)}}else(S===""||S[0]===`
`)&&(x="");return v+=x+S,e.inFlow?w&&n&&n():_&&!w?v+=Bn(v,e.indent,u(_)):p&&r&&r(),v}function rS(i,t){(i==="debug"||i==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(t):console.warn(t))}const Hy="<<";function sS(i,t,{key:e,value:n}){if(i!=null&&i.doc.schema.merge&&oR(e))if(n=Ia(n)?n.resolve(i.doc):n,Rl(n))for(const r of n.items)Rf(i,t,r);else if(Array.isArray(n))for(const r of n)Rf(i,t,r);else Rf(i,t,n);else{const r=li(e,"",i);if(t instanceof Map)t.set(r,li(n,r,i));else if(t instanceof Set)t.add(r);else{const s=lR(e,r,i),a=li(n,s,i);s in t?Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[s]=a}}return t}const oR=i=>i===Hy||At(i)&&i.value===Hy&&(!i.type||i.type===Q.PLAIN);function Rf(i,t,e){const n=i&&Ia(e)?e.resolve(i.doc):e;if(!Al(n))throw new Error("Merge sources must be maps or map aliases");const r=n.toJSON(null,i,Map);for(const[s,a]of r)t instanceof Map?t.has(s)||t.set(s,a):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0});return t}function lR(i,t,e){if(t===null)return"";if(typeof t!="object")return String(t);if(Ht(i)&&(e!=null&&e.doc)){const n=nS(e.doc,{});n.anchors=new Set;for(const s of e.anchors.keys())n.anchors.add(s.anchor);n.inFlow=!0,n.inStringifyKey=!0;const r=i.toString(n);if(!e.mapKeyWarned){let s=JSON.stringify(r);s.length>40&&(s=s.substring(0,36)+'..."'),rS(e.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),e.mapKeyWarned=!0}return r}return JSON.stringify(t)}function pv(i,t,e){const n=Ko(i,void 0,e),r=Ko(t,void 0,e);return new pe(n,r)}class pe{constructor(t,e=null){Object.defineProperty(this,hi,{value:qx}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return Ht(e)&&(e=e.clone(t)),Ht(n)&&(n=n.clone(t)),new pe(e,n)}toJSON(t,e){const n=e!=null&&e.mapAsMap?new Map:{};return sS(e,n,this)}toString(t,e,n){return t!=null&&t.doc?aR(this,t,e,n):JSON.stringify(this)}}function aS(i,t,e){return(t.inFlow??i.flow?hR:uR)(i,t,e)}function uR({comment:i,items:t},e,{blockItemPrefix:n,flowChars:r,itemIndent:s,onChompKeep:a,onComment:o}){const{indent:l,options:{commentString:u}}=e,h=Object.assign({},e,{indent:s,type:null});let c=!1;const f=[];for(let g=0;g<t.length;++g){const p=t[g];let v=null;if(Ht(p))!c&&p.spaceBefore&&f.push(""),Ph(e,f,p.commentBefore,c),p.comment&&(v=p.comment);else if($t(p)){const y=Ht(p.key)?p.key:null;y&&(!c&&y.spaceBefore&&f.push(""),Ph(e,f,y.commentBefore,c))}c=!1;let m=ca(p,h,()=>v=null,()=>c=!0);v&&(m+=Bn(m,s,u(v))),c&&v&&(c=!1),f.push(n+m)}let d;if(f.length===0)d=r.start+r.end;else{d=f[0];for(let g=1;g<f.length;++g){const p=f[g];d+=p?`
${l}${p}`:`
`}}return i?(d+=`
`+on(u(i),l),o&&o()):c&&a&&a(),d}function hR({comment:i,items:t},e,{flowChars:n,itemIndent:r,onComment:s}){const{indent:a,indentStep:o,flowCollectionPadding:l,options:{commentString:u}}=e;r+=o;const h=Object.assign({},e,{indent:r,inFlow:!0,type:null});let c=!1,f=0;const d=[];for(let m=0;m<t.length;++m){const y=t[m];let _=null;if(Ht(y))y.spaceBefore&&d.push(""),Ph(e,d,y.commentBefore,!1),y.comment&&(_=y.comment);else if($t(y)){const S=Ht(y.key)?y.key:null;S&&(S.spaceBefore&&d.push(""),Ph(e,d,S.commentBefore,!1),S.comment&&(c=!0));const x=Ht(y.value)?y.value:null;x?(x.comment&&(_=x.comment),x.commentBefore&&(c=!0)):y.value==null&&(S!=null&&S.comment)&&(_=S.comment)}_&&(c=!0);let w=ca(y,h,()=>_=null);m<t.length-1&&(w+=","),_&&(w+=Bn(w,r,u(_))),!c&&(d.length>f||w.includes(`
`))&&(c=!0),d.push(w),f=d.length}let g;const{start:p,end:v}=n;if(d.length===0)g=p+v;else if(c||(c=d.reduce((y,_)=>y+_.length+2,2)>Cc.maxFlowStringSingleLineLength),c){g=p;for(const m of d)g+=m?`
${o}${a}${m}`:`
`;g+=`
${a}${v}`}else g=`${p}${l}${d.join(" ")}${l}${v}`;return i&&(g+=Bn(g,a,u(i)),s&&s()),g}function Ph({indent:i,options:{commentString:t}},e,n,r){if(n&&r&&(n=n.replace(/^\n+/,"")),n){const s=on(t(n),i);e.push(s.trimStart())}}function kr(i,t){const e=At(t)?t.value:t;for(const n of i)if($t(n)&&(n.key===t||n.key===e||At(n.key)&&n.key.value===e))return n}class si extends Cc{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(Wn,t),this.items=[]}static from(t,e,n){const{keepUndefined:r,replacer:s}=n,a=new this(t),o=(l,u)=>{if(typeof s=="function")u=s.call(e,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||r)&&a.items.push(pv(l,u,n))};if(e instanceof Map)for(const[l,u]of e)o(l,u);else if(e&&typeof e=="object")for(const l of Object.keys(e))o(l,e[l]);return typeof t.sortMapEntries=="function"&&a.items.sort(t.sortMapEntries),a}add(t,e){var a;let n;$t(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new pe(t,t==null?void 0:t.value):n=new pe(t.key,t.value);const r=kr(this.items,n.key),s=(a=this.schema)==null?void 0:a.sortMapEntries;if(r){if(!e)throw new Error(`Key ${n.key} already set`);At(r.value)&&eS(n.value)?r.value.value=n.value:r.value=n.value}else if(s){const o=this.items.findIndex(l=>s(n,l)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(t){const e=kr(this.items,t);return e?this.items.splice(this.items.indexOf(e),1).length>0:!1}get(t,e){const n=kr(this.items,t),r=n==null?void 0:n.value;return(!e&&At(r)?r.value:r)??void 0}has(t){return!!kr(this.items,t)}set(t,e){this.add(new pe(t,e),!0)}toJSON(t,e,n){const r=n?new n:e!=null&&e.mapAsMap?new Map:{};e!=null&&e.onCreate&&e.onCreate(r);for(const s of this.items)sS(e,r,s);return r}toString(t,e,n){if(!t)return JSON.stringify(this);for(const r of this.items)if(!$t(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),aS(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}const Aa={collection:"map",default:!0,nodeClass:si,tag:"tag:yaml.org,2002:map",resolve(i,t){return Al(i)||t("Expected a mapping for this tag"),i},createNode:(i,t,e)=>si.from(i,t,e)};class Kr extends Cc{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(Ea,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=nu(t);return typeof e!="number"?!1:this.items.splice(e,1).length>0}get(t,e){const n=nu(t);if(typeof n!="number")return;const r=this.items[n];return!e&&At(r)?r.value:r}has(t){const e=nu(t);return typeof e=="number"&&e<this.items.length}set(t,e){const n=nu(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);const r=this.items[n];At(r)&&eS(e)?r.value=e:this.items[n]=e}toJSON(t,e){const n=[];e!=null&&e.onCreate&&e.onCreate(n);let r=0;for(const s of this.items)n.push(li(s,String(r++),e));return n}toString(t,e,n){return t?aS(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}static from(t,e,n){const{replacer:r}=n,s=new this(t);if(e&&Symbol.iterator in Object(e)){let a=0;for(let o of e){if(typeof r=="function"){const l=e instanceof Set?o:String(a++);o=r.call(e,l,o)}s.items.push(Ko(o,void 0,n))}}return s}}function nu(i){let t=At(i)?i.value:i;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const Ra={collection:"seq",default:!0,nodeClass:Kr,tag:"tag:yaml.org,2002:seq",resolve(i,t){return Rl(i)||t("Expected a sequence for this tag"),i},createNode:(i,t,e)=>Kr.from(i,t,e)},Rc={identify:i=>typeof i=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:i=>i,stringify(i,t,e,n){return t=Object.assign({actualString:!0},t),gv(i,t,e,n)}},Mc={identify:i=>i==null,createNode:()=>new Q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Q(null),stringify:({source:i},t)=>typeof i=="string"&&Mc.test.test(i)?i:t.options.nullStr},vv={identify:i=>typeof i=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:i=>new Q(i[0]==="t"||i[0]==="T"),stringify({source:i,value:t},e){if(i&&vv.test.test(i)){const n=i[0]==="t"||i[0]==="T";if(t===n)return i}return t?e.options.trueStr:e.options.falseStr}};function bi({format:i,minFractionDigits:t,tag:e,value:n}){if(typeof n=="bigint")return String(n);const r=typeof n=="number"?n:Number(n);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(n);if(!i&&t&&(!e||e==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let a=s.indexOf(".");a<0&&(a=s.length,s+=".");let o=t-(s.length-a-1);for(;o-- >0;)s+="0"}return s}const oS={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:i=>i.slice(-3).toLowerCase()==="nan"?NaN:i[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:bi},lS={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:i=>parseFloat(i),stringify(i){const t=Number(i.value);return isFinite(t)?t.toExponential():bi(i)}},uS={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(i){const t=new Q(parseFloat(i)),e=i.indexOf(".");return e!==-1&&i[i.length-1]==="0"&&(t.minFractionDigits=i.length-e-1),t},stringify:bi},Lc=i=>typeof i=="bigint"||Number.isInteger(i),mv=(i,t,e,{intAsBigInt:n})=>n?BigInt(i):parseInt(i.substring(t),e);function hS(i,t,e){const{value:n}=i;return Lc(n)&&n>=0?e+n.toString(t):bi(i)}const cS={identify:i=>Lc(i)&&i>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(i,t,e)=>mv(i,2,8,e),stringify:i=>hS(i,8,"0o")},fS={identify:Lc,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(i,t,e)=>mv(i,0,10,e),stringify:bi},dS={identify:i=>Lc(i)&&i>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(i,t,e)=>mv(i,2,16,e),stringify:i=>hS(i,16,"0x")},cR=[Aa,Ra,Rc,Mc,vv,cS,fS,dS,oS,lS,uS];function Uy(i){return typeof i=="bigint"||Number.isInteger(i)}const ru=({value:i})=>JSON.stringify(i),fR=[{identify:i=>typeof i=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:i=>i,stringify:ru},{identify:i=>i==null,createNode:()=>new Q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ru},{identify:i=>typeof i=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:i=>i==="true",stringify:ru},{identify:Uy,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(i,t,{intAsBigInt:e})=>e?BigInt(i):parseInt(i,10),stringify:({value:i})=>Uy(i)?i.toString():JSON.stringify(i)},{identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:i=>parseFloat(i),stringify:ru}],dR={default:!0,tag:"",test:/^/,resolve(i,t){return t(`Unresolved plain scalar ${JSON.stringify(i)}`),i}},gR=[Aa,Ra].concat(fR,dR),yv={identify:i=>i instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(i,t){if(typeof Buffer=="function")return Buffer.from(i,"base64");if(typeof atob=="function"){const e=atob(i.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),i},stringify({comment:i,type:t,value:e},n,r,s){const a=e;let o;if(typeof Buffer=="function")o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t||(t=Q.BLOCK_LITERAL),t!==Q.QUOTE_DOUBLE){const l=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),u=Math.ceil(o.length/l),h=new Array(u);for(let c=0,f=0;c<u;++c,f+=l)h[c]=o.substr(f,l);o=h.join(t===Q.BLOCK_LITERAL?`
`:" ")}return gv({comment:i,type:t,value:o},n,r,s)}};function gS(i,t){if(Rl(i))for(let e=0;e<i.items.length;++e){let n=i.items[e];if(!$t(n)){if(Al(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");const r=n.items[0]||new pe(new Q(null));if(n.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${n.commentBefore}
${r.key.commentBefore}`:n.commentBefore),n.comment){const s=r.value??r.key;s.comment=s.comment?`${n.comment}
${s.comment}`:n.comment}n=r}i.items[e]=$t(n)?n:new pe(n)}}else t("Expected a sequence for this tag");return i}function pS(i,t,e){const{replacer:n}=e,r=new Kr(i);r.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let a of t){typeof n=="function"&&(a=n.call(t,String(s++),a));let o,l;if(Array.isArray(a))if(a.length===2)o=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const u=Object.keys(a);if(u.length===1)o=u[0],l=a[o];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else o=a;r.items.push(pv(o,l,e))}return r}const _v={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:gS,createNode:pS};class Js extends Kr{constructor(){super(),this.add=si.prototype.add.bind(this),this.delete=si.prototype.delete.bind(this),this.get=si.prototype.get.bind(this),this.has=si.prototype.has.bind(this),this.set=si.prototype.set.bind(this),this.tag=Js.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e!=null&&e.onCreate&&e.onCreate(n);for(const r of this.items){let s,a;if($t(r)?(s=li(r.key,"",e),a=li(r.value,s,e)):s=li(r,"",e),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,a)}return n}static from(t,e,n){const r=pS(t,e,n),s=new this;return s.items=r.items,s}}Js.tag="tag:yaml.org,2002:omap";const wv={collection:"seq",identify:i=>i instanceof Map,nodeClass:Js,default:!1,tag:"tag:yaml.org,2002:omap",resolve(i,t){const e=gS(i,t),n=[];for(const{key:r}of e.items)At(r)&&(n.includes(r.value)?t(`Ordered maps must not include duplicate keys: ${r.value}`):n.push(r.value));return Object.assign(new Js,e)},createNode:(i,t,e)=>Js.from(i,t,e)};function vS({value:i,source:t},e){return t&&(i?mS:yS).test.test(t)?t:i?e.options.trueStr:e.options.falseStr}const mS={identify:i=>i===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Q(!0),stringify:vS},yS={identify:i=>i===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Q(!1),stringify:vS},pR={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:i=>i.slice(-3).toLowerCase()==="nan"?NaN:i[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:bi},vR={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:i=>parseFloat(i.replace(/_/g,"")),stringify(i){const t=Number(i.value);return isFinite(t)?t.toExponential():bi(i)}},mR={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(i){const t=new Q(parseFloat(i.replace(/_/g,""))),e=i.indexOf(".");if(e!==-1){const n=i.substring(e+1).replace(/_/g,"");n[n.length-1]==="0"&&(t.minFractionDigits=n.length)}return t},stringify:bi},Ml=i=>typeof i=="bigint"||Number.isInteger(i);function kc(i,t,e,{intAsBigInt:n}){const r=i[0];if((r==="-"||r==="+")&&(t+=1),i=i.substring(t).replace(/_/g,""),n){switch(e){case 2:i=`0b${i}`;break;case 8:i=`0o${i}`;break;case 16:i=`0x${i}`;break}const a=BigInt(i);return r==="-"?BigInt(-1)*a:a}const s=parseInt(i,e);return r==="-"?-1*s:s}function xv(i,t,e){const{value:n}=i;if(Ml(n)){const r=n.toString(t);return n<0?"-"+e+r.substr(1):e+r}return bi(i)}const yR={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(i,t,e)=>kc(i,2,2,e),stringify:i=>xv(i,2,"0b")},_R={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(i,t,e)=>kc(i,1,8,e),stringify:i=>xv(i,8,"0")},wR={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(i,t,e)=>kc(i,0,10,e),stringify:bi},xR={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(i,t,e)=>kc(i,2,16,e),stringify:i=>xv(i,16,"0x")};class Qs extends si{constructor(t){super(t),this.tag=Qs.tag}add(t){let e;$t(t)?e=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?e=new pe(t.key,null):e=new pe(t,null),kr(this.items,e.key)||this.items.push(e)}get(t,e){const n=kr(this.items,t);return!e&&$t(n)?At(n.key)?n.key.value:n.key:n}set(t,e){if(typeof e!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof e}`);const n=kr(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new pe(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}static from(t,e,n){const{replacer:r}=n,s=new this(t);if(e&&Symbol.iterator in Object(e))for(let a of e)typeof r=="function"&&(a=r.call(e,a,a)),s.items.push(pv(a,null,n));return s}}Qs.tag="tag:yaml.org,2002:set";const Sv={collection:"map",identify:i=>i instanceof Set,nodeClass:Qs,default:!1,tag:"tag:yaml.org,2002:set",createNode:(i,t,e)=>Qs.from(i,t,e),resolve(i,t){if(Al(i)){if(i.hasAllNullValues(!0))return Object.assign(new Qs,i);t("Set items must all have null values")}else t("Expected a mapping for this tag");return i}};function bv(i,t){const e=i[0],n=e==="-"||e==="+"?i.substring(1):i,r=a=>t?BigInt(a):Number(a),s=n.replace(/_/g,"").split(":").reduce((a,o)=>a*r(60)+r(o),r(0));return e==="-"?r(-1)*s:s}function _S(i){let{value:t}=i,e=a=>a;if(typeof t=="bigint")e=a=>BigInt(a);else if(isNaN(t)||!isFinite(t))return bi(i);let n="";t<0&&(n="-",t*=e(-1));const r=e(60),s=[t%r];return t<60?s.unshift(0):(t=(t-s[0])/r,s.unshift(t%r),t>=60&&(t=(t-s[0])/r,s.unshift(t))),n+s.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const wS={identify:i=>typeof i=="bigint"||Number.isInteger(i),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(i,t,{intAsBigInt:e})=>bv(i,e),stringify:_S},xS={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:i=>bv(i,!1),stringify:_S},Dc={identify:i=>i instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(i){const t=i.match(Dc.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,e,n,r,s,a,o]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let u=Date.UTC(e,n-1,r,s||0,a||0,o||0,l);const h=t[8];if(h&&h!=="Z"){let c=bv(h,!1);Math.abs(c)<30&&(c*=60),u-=6e4*c}return new Date(u)},stringify:({value:i})=>i.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Xy=[Aa,Ra,Rc,Mc,mS,yS,yR,_R,wR,xR,pR,vR,mR,yv,wv,_v,Sv,wS,xS,Dc],Ky=new Map([["core",cR],["failsafe",[Aa,Ra,Rc]],["json",gR],["yaml11",Xy],["yaml-1.1",Xy]]),jy={binary:yv,bool:vv,float:uS,floatExp:lS,floatNaN:oS,floatTime:xS,int:fS,intHex:dS,intOct:cS,intTime:wS,map:Aa,null:Mc,omap:wv,pairs:_v,seq:Ra,set:Sv,timestamp:Dc},SR={"tag:yaml.org,2002:binary":yv,"tag:yaml.org,2002:omap":wv,"tag:yaml.org,2002:pairs":_v,"tag:yaml.org,2002:set":Sv,"tag:yaml.org,2002:timestamp":Dc};function Mf(i,t){let e=Ky.get(t);if(!e)if(Array.isArray(i))e=[];else{const n=Array.from(Ky.keys()).filter(r=>r!=="yaml11").map(r=>JSON.stringify(r)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${n} or define customTags array`)}if(Array.isArray(i))for(const n of i)e=e.concat(n);else typeof i=="function"&&(e=i(e.slice()));return e.map(n=>{if(typeof n!="string")return n;const r=jy[n];if(r)return r;const s=Object.keys(jy).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${s}`)})}const bR=(i,t)=>i.key<t.key?-1:i.key>t.key?1:0;class Tv{constructor({compat:t,customTags:e,merge:n,resolveKnownTags:r,schema:s,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(t)?Mf(t,"compat"):t?Mf(null,t):null,this.merge=!!n,this.name=typeof s=="string"&&s||"core",this.knownTags=r?SR:{},this.tags=Mf(e,this.name),this.toStringOptions=o??null,Object.defineProperty(this,Wn,{value:Aa}),Object.defineProperty(this,dn,{value:Rc}),Object.defineProperty(this,Ea,{value:Ra}),this.sortMapEntries=typeof a=="function"?a:a===!0?bR:null}clone(){const t=Object.create(Tv.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function TR(i,t){var l;const e=[];let n=t.directives===!0;if(t.directives!==!1&&i.directives){const u=i.directives.toString(i);u?(e.push(u),n=!0):i.directives.docStart&&(n=!0)}n&&e.push("---");const r=nS(i,t),{commentString:s}=r.options;if(i.commentBefore){e.length!==1&&e.unshift("");const u=s(i.commentBefore);e.unshift(on(u,""))}let a=!1,o=null;if(i.contents){if(Ht(i.contents)){if(i.contents.spaceBefore&&n&&e.push(""),i.contents.commentBefore){const c=s(i.contents.commentBefore);e.push(on(c,""))}r.forceBlockIndent=!!i.comment,o=i.contents.comment}const u=o?void 0:()=>a=!0;let h=ca(i.contents,r,()=>o=null,u);o&&(h+=Bn(h,"",s(o))),(h[0]==="|"||h[0]===">")&&e[e.length-1]==="---"?e[e.length-1]=`--- ${h}`:e.push(h)}else e.push(ca(i.contents,r));if((l=i.directives)!=null&&l.docEnd)if(i.comment){const u=s(i.comment);u.includes(`
`)?(e.push("..."),e.push(on(u,""))):e.push(`... ${u}`)}else e.push("...");else{let u=i.comment;u&&a&&(u=u.replace(/^\n+/,"")),u&&((!a||o)&&e[e.length-1]!==""&&e.push(""),e.push(on(s(u),"")))}return e.join(`
`)+`
`}class Pc{constructor(t,e,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,hi,{value:bg});let r=null;typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e,e=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=s;let{version:a}=s;n!=null&&n._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new fe({version:a}),this.setSchema(a,n),this.contents=t===void 0?null:this.createNode(t,r,n)}clone(){const t=Object.create(Pc.prototype,{[hi]:{value:bg}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=Ht(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){fs(this.contents)&&this.contents.add(t)}addIn(t,e){fs(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const n=Qx(this);t.anchor=!e||n.has(e)?tS(e||"a",n):e}return new dv(t.anchor)}createNode(t,e,n){let r;if(typeof e=="function")t=e.call({"":t},"",t),r=e;else if(Array.isArray(e)){const v=y=>typeof y=="number"||y instanceof String||y instanceof Number,m=e.filter(v).map(String);m.length>0&&(e=e.concat(m)),r=e}else n===void 0&&e&&(n=e,e=void 0);const{aliasDuplicateObjects:s,anchorPrefix:a,flow:o,keepUndefined:l,onTagObj:u,tag:h}=n??{},{onAnchor:c,setAnchors:f,sourceObjects:d}=JA(this,a||"a"),g={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:c,onTagObj:u,replacer:r,schema:this.schema,sourceObjects:d},p=Ko(t,h,g);return o&&Gt(p)&&(p.flow=!0),f(),p}createPair(t,e,n={}){const r=this.createNode(t,null,n),s=this.createNode(e,null,n);return new pe(r,s)}delete(t){return fs(this.contents)?this.contents.delete(t):!1}deleteIn(t){return fo(t)?this.contents==null?!1:(this.contents=null,!0):fs(this.contents)?this.contents.deleteIn(t):!1}get(t,e){return Gt(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return fo(t)?!e&&At(this.contents)?this.contents.value:this.contents:Gt(this.contents)?this.contents.getIn(t,e):void 0}has(t){return Gt(this.contents)?this.contents.has(t):!1}hasIn(t){return fo(t)?this.contents!==void 0:Gt(this.contents)?this.contents.hasIn(t):!1}set(t,e){this.contents==null?this.contents=Dh(this.schema,[t],e):fs(this.contents)&&this.contents.set(t,e)}setIn(t,e){fo(t)?this.contents=e:this.contents==null?this.contents=Dh(this.schema,Array.from(t),e):fs(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){typeof t=="number"&&(t=String(t));let n;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new fe({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new fe({version:t}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const r=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(e.schema instanceof Object)this.schema=e.schema;else if(n)this.schema=new Tv(Object.assign(n,e));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:r,onAnchor:s,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!t,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=li(this.contents,e??"",o);if(typeof s=="function")for(const{count:u,res:h}of o.anchors.values())s(h,u);return typeof a=="function"?Vs(a,{"":l},"",l):l}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return TR(this,t)}}function fs(i){if(Gt(i))return!0;throw new Error("Expected a YAML collection as document contents")}class SS extends Error{constructor(t,e,n,r){super(),this.name=t,this.code=n,this.message=r,this.pos=e}}class go extends SS{constructor(t,e,n){super("YAMLParseError",t,e,n)}}class CR extends SS{constructor(t,e,n){super("YAMLWarning",t,e,n)}}const Zy=(i,t)=>e=>{if(e.pos[0]===-1)return;e.linePos=e.pos.map(o=>t.linePos(o));const{line:n,col:r}=e.linePos[0];e.message+=` at line ${n}, column ${r}`;let s=r-1,a=i.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(s>=60&&a.length>80){const o=Math.min(s-39,a.length-79);a="…"+a.substring(o),s-=o-1}if(a.length>80&&(a=a.substring(0,79)+"…"),n>1&&/^ *$/.test(a.substring(0,s))){let o=i.substring(t.lineStarts[n-2],t.lineStarts[n-1]);o.length>80&&(o=o.substring(0,79)+`…
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const l=e.linePos[1];l&&l.line===n&&l.col>r&&(o=Math.max(1,Math.min(l.col-r,80-s)));const u=" ".repeat(s)+"^".repeat(o);e.message+=`:

${a}
${u}
`}};function fa(i,{flow:t,indicator:e,next:n,offset:r,onError:s,startOnNewline:a}){let o=!1,l=a,u=a,h="",c="",f=!1,d=!1,g=!1,p=null,v=null,m=null,y=null,_=null;for(const x of i)switch(g&&(x.type!=="space"&&x.type!=="newline"&&x.type!=="comma"&&s(x.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g=!1),x.type){case"space":!t&&l&&e!=="doc-start"&&x.source[0]==="	"&&s(x,"TAB_AS_INDENT","Tabs are not allowed as indentation"),u=!0;break;case"comment":{u||s(x,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const b=x.source.substring(1)||" ";h?h+=c+b:h=b,c="",l=!1;break}case"newline":l?h?h+=x.source:o=!0:c+=x.source,l=!0,f=!0,(p||v)&&(d=!0),u=!0;break;case"anchor":p&&s(x,"MULTIPLE_ANCHORS","A node can have at most one anchor"),x.source.endsWith(":")&&s(x.offset+x.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),p=x,_===null&&(_=x.offset),l=!1,u=!1,g=!0;break;case"tag":{v&&s(x,"MULTIPLE_TAGS","A node can have at most one tag"),v=x,_===null&&(_=x.offset),l=!1,u=!1,g=!0;break}case e:(p||v)&&s(x,"BAD_PROP_ORDER",`Anchors and tags must be after the ${x.source} indicator`),y&&s(x,"UNEXPECTED_TOKEN",`Unexpected ${x.source} in ${t??"collection"}`),y=x,l=!1,u=!1;break;case"comma":if(t){m&&s(x,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),m=x,l=!1,u=!1;break}default:s(x,"UNEXPECTED_TOKEN",`Unexpected ${x.type} token`),l=!1,u=!1}const w=i[i.length-1],S=w?w.offset+w.source.length:r;return g&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&s(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:m,found:y,spaceBefore:o,comment:h,hasNewline:f,hasNewlineAfterProp:d,anchor:p,tag:v,end:S,start:_??S}}function jo(i){if(!i)return null;switch(i.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(i.source.includes(`
`))return!0;if(i.end){for(const t of i.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of i.items){for(const e of t.start)if(e.type==="newline")return!0;if(t.sep){for(const e of t.sep)if(e.type==="newline")return!0}if(jo(t.key)||jo(t.value))return!0}return!1;default:return!0}}function Ig(i,t,e){if((t==null?void 0:t.type)==="flow-collection"){const n=t.end[0];n.indent===i&&(n.source==="]"||n.source==="}")&&jo(t)&&e(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function bS(i,t,e){const{uniqueKeys:n}=i.options;if(n===!1)return!1;const r=typeof n=="function"?n:(s,a)=>s===a||At(s)&&At(a)&&s.value===a.value&&!(s.value==="<<"&&i.schema.merge);return t.some(s=>r(s.key,e))}const qy="All mapping items must start at the same column";function ER({composeNode:i,composeEmptyNode:t},e,n,r,s){var h;const a=(s==null?void 0:s.nodeClass)??si,o=new a(e.schema);e.atRoot&&(e.atRoot=!1);let l=n.offset,u=null;for(const c of n.items){const{start:f,key:d,sep:g,value:p}=c,v=fa(f,{indicator:"explicit-key-ind",next:d??(g==null?void 0:g[0]),offset:l,onError:r,startOnNewline:!0}),m=!v.found;if(m){if(d&&(d.type==="block-seq"?r(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in d&&d.indent!==n.indent&&r(l,"BAD_INDENT",qy)),!v.anchor&&!v.tag&&!g){u=v.end,v.comment&&(o.comment?o.comment+=`
`+v.comment:o.comment=v.comment);continue}(v.hasNewlineAfterProp||jo(d))&&r(d??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((h=v.found)==null?void 0:h.indent)!==n.indent&&r(l,"BAD_INDENT",qy);const y=v.end,_=d?i(e,d,v,r):t(e,y,f,null,v,r);e.schema.compat&&Ig(n.indent,d,r),bS(e,o.items,_)&&r(y,"DUPLICATE_KEY","Map keys must be unique");const w=fa(g??[],{indicator:"map-value-ind",next:p,offset:_.range[2],onError:r,startOnNewline:!d||d.type==="block-scalar"});if(l=w.end,w.found){m&&((p==null?void 0:p.type)==="block-map"&&!w.hasNewline&&r(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),e.options.strict&&v.start<w.found.offset-1024&&r(_.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const S=p?i(e,p,w,r):t(e,l,g,null,w,r);e.schema.compat&&Ig(n.indent,p,r),l=S.range[2];const x=new pe(_,S);e.options.keepSourceTokens&&(x.srcToken=c),o.items.push(x)}else{m&&r(_.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),w.comment&&(_.comment?_.comment+=`
`+w.comment:_.comment=w.comment);const S=new pe(_);e.options.keepSourceTokens&&(S.srcToken=c),o.items.push(S)}}return u&&u<l&&r(u,"IMPOSSIBLE","Map comment with trailing content"),o.range=[n.offset,l,u??l],o}function IR({composeNode:i,composeEmptyNode:t},e,n,r,s){const a=(s==null?void 0:s.nodeClass)??Kr,o=new a(e.schema);e.atRoot&&(e.atRoot=!1);let l=n.offset,u=null;for(const{start:h,value:c}of n.items){const f=fa(h,{indicator:"seq-item-ind",next:c,offset:l,onError:r,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||c)c&&c.type==="block-seq"?r(f.end,"BAD_INDENT","All sequence items must start at the same column"):r(l,"MISSING_CHAR","Sequence item without - indicator");else{u=f.end,f.comment&&(o.comment=f.comment);continue}const d=c?i(e,c,f,r):t(e,f.end,h,null,f,r);e.schema.compat&&Ig(n.indent,c,r),l=d.range[2],o.items.push(d)}return o.range=[n.offset,l,u??l],o}function Ll(i,t,e,n){let r="";if(i){let s=!1,a="";for(const o of i){const{source:l,type:u}=o;switch(u){case"space":s=!0;break;case"comment":{e&&!s&&n(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const h=l.substring(1)||" ";r?r+=a+h:r=h,a="";break}case"newline":r&&(a+=l),s=!0;break;default:n(o,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}t+=l.length}}return{comment:r,offset:t}}const Lf="Block collections are not allowed within flow collections",kf=i=>i&&(i.type==="block-map"||i.type==="block-seq");function AR({composeNode:i,composeEmptyNode:t},e,n,r,s){const a=n.start.source==="{",o=a?"flow map":"flow sequence",l=(s==null?void 0:s.nodeClass)??(a?si:Kr),u=new l(e.schema);u.flow=!0;const h=e.atRoot;h&&(e.atRoot=!1);let c=n.offset+n.start.source.length;for(let v=0;v<n.items.length;++v){const m=n.items[v],{start:y,key:_,sep:w,value:S}=m,x=fa(y,{flow:o,indicator:"explicit-key-ind",next:_??(w==null?void 0:w[0]),offset:c,onError:r,startOnNewline:!1});if(!x.found){if(!x.anchor&&!x.tag&&!w&&!S){v===0&&x.comma?r(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):v<n.items.length-1&&r(x.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),x.comment&&(u.comment?u.comment+=`
`+x.comment:u.comment=x.comment),c=x.end;continue}!a&&e.options.strict&&jo(_)&&r(_,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(v===0)x.comma&&r(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(x.comma||r(x.start,"MISSING_CHAR",`Missing , between ${o} items`),x.comment){let b="";t:for(const T of y)switch(T.type){case"comma":case"space":break;case"comment":b=T.source.substring(1);break t;default:break t}if(b){let T=u.items[u.items.length-1];$t(T)&&(T=T.value??T.key),T.comment?T.comment+=`
`+b:T.comment=b,x.comment=x.comment.substring(b.length+1)}}if(!a&&!w&&!x.found){const b=S?i(e,S,x,r):t(e,x.end,w,null,x,r);u.items.push(b),c=b.range[2],kf(S)&&r(b.range,"BLOCK_IN_FLOW",Lf)}else{const b=x.end,T=_?i(e,_,x,r):t(e,b,y,null,x,r);kf(_)&&r(T.range,"BLOCK_IN_FLOW",Lf);const C=fa(w??[],{flow:o,indicator:"map-value-ind",next:S,offset:T.range[2],onError:r,startOnNewline:!1});if(C.found){if(!a&&!x.found&&e.options.strict){if(w)for(const R of w){if(R===C.found)break;if(R.type==="newline"){r(R,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}x.start<C.found.offset-1024&&r(C.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else S&&("source"in S&&S.source&&S.source[0]===":"?r(S,"MISSING_CHAR",`Missing space after : in ${o}`):r(C.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const I=S?i(e,S,C,r):C.found?t(e,C.end,w,null,C,r):null;I?kf(S)&&r(I.range,"BLOCK_IN_FLOW",Lf):C.comment&&(T.comment?T.comment+=`
`+C.comment:T.comment=C.comment);const E=new pe(T,I);if(e.options.keepSourceTokens&&(E.srcToken=m),a){const R=u;bS(e,R.items,T)&&r(b,"DUPLICATE_KEY","Map keys must be unique"),R.items.push(E)}else{const R=new si(e.schema);R.flow=!0,R.items.push(E),u.items.push(R)}c=I?I.range[2]:C.end}}const f=a?"}":"]",[d,...g]=n.end;let p=c;if(d&&d.source===f)p=d.offset+d.source.length;else{const v=o[0].toUpperCase()+o.substring(1),m=h?`${v} must end with a ${f}`:`${v} in block collection must be sufficiently indented and end with a ${f}`;r(c,h?"MISSING_CHAR":"BAD_INDENT",m),d&&d.source.length!==1&&g.unshift(d)}if(g.length>0){const v=Ll(g,p,e.options.strict,r);v.comment&&(u.comment?u.comment+=`
`+v.comment:u.comment=v.comment),u.range=[n.offset,p,v.offset]}else u.range=[n.offset,p,p];return u}function Df(i,t,e,n,r,s){const a=e.type==="block-map"?ER(i,t,e,n,s):e.type==="block-seq"?IR(i,t,e,n,s):AR(i,t,e,n,s),o=a.constructor;return r==="!"||r===o.tagName?(a.tag=o.tagName,a):(r&&(a.tag=r),a)}function RR(i,t,e,n,r){var c;const s=n?t.directives.tagName(n.source,f=>r(n,"TAG_RESOLVE_FAILED",f)):null,a=e.type==="block-map"?"map":e.type==="block-seq"?"seq":e.start.source==="{"?"map":"seq";if(!n||!s||s==="!"||s===si.tagName&&a==="map"||s===Kr.tagName&&a==="seq"||!a)return Df(i,t,e,r,s);let o=t.schema.tags.find(f=>f.tag===s&&f.collection===a);if(!o){const f=t.schema.knownTags[s];if(f&&f.collection===a)t.schema.tags.push(Object.assign({},f,{default:!1})),o=f;else return f!=null&&f.collection?r(n,"BAD_COLLECTION_TYPE",`${f.tag} used for ${a} collection, but expects ${f.collection}`,!0):r(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),Df(i,t,e,r,s)}const l=Df(i,t,e,r,s,o),u=((c=o.resolve)==null?void 0:c.call(o,l,f=>r(n,"TAG_RESOLVE_FAILED",f),t.options))??l,h=Ht(u)?u:new Q(u);return h.range=l.range,h.tag=s,o!=null&&o.format&&(h.format=o.format),h}function MR(i,t,e){const n=i.offset,r=LR(i,t,e);if(!r)return{value:"",type:null,comment:"",range:[n,n,n]};const s=r.mode===">"?Q.BLOCK_FOLDED:Q.BLOCK_LITERAL,a=i.source?kR(i.source):[];let o=a.length;for(let p=a.length-1;p>=0;--p){const v=a[p][1];if(v===""||v==="\r")o=p;else break}if(o===0){const p=r.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let v=n+r.length;return i.source&&(v+=i.source.length),{value:p,type:s,comment:r.comment,range:[n,v,v]}}let l=i.indent+r.indent,u=i.offset+r.length,h=0;for(let p=0;p<o;++p){const[v,m]=a[p];if(m===""||m==="\r")r.indent===0&&v.length>l&&(l=v.length);else{if(v.length<l){const y="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";e(u+v.length,"MISSING_CHAR",y)}r.indent===0&&(l=v.length),h=p;break}u+=v.length+m.length+1}for(let p=a.length-1;p>=o;--p)a[p][0].length>l&&(o=p+1);let c="",f="",d=!1;for(let p=0;p<h;++p)c+=a[p][0].slice(l)+`
`;for(let p=h;p<o;++p){let[v,m]=a[p];u+=v.length+m.length+1;const y=m[m.length-1]==="\r";if(y&&(m=m.slice(0,-1)),m&&v.length<l){const w=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;e(u-m.length-(y?2:1),"BAD_INDENT",w),v=""}s===Q.BLOCK_LITERAL?(c+=f+v.slice(l)+m,f=`
`):v.length>l||m[0]==="	"?(f===" "?f=`
`:!d&&f===`
`&&(f=`

`),c+=f+v.slice(l)+m,f=`
`,d=!0):m===""?f===`
`?c+=`
`:f=`
`:(c+=f+m,f=" ",d=!1)}switch(r.chomp){case"-":break;case"+":for(let p=o;p<a.length;++p)c+=`
`+a[p][0].slice(l);c[c.length-1]!==`
`&&(c+=`
`);break;default:c+=`
`}const g=n+r.length+i.source.length;return{value:c,type:s,comment:r.comment,range:[n,g,g]}}function LR({offset:i,props:t},e,n){if(t[0].type!=="block-scalar-header")return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=t[0],s=r[0];let a=0,o="",l=-1;for(let f=1;f<r.length;++f){const d=r[f];if(!o&&(d==="-"||d==="+"))o=d;else{const g=Number(d);!a&&g?a=g:l===-1&&(l=i+f)}}l!==-1&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let u=!1,h="",c=r.length;for(let f=1;f<t.length;++f){const d=t[f];switch(d.type){case"space":u=!0;case"newline":c+=d.source.length;break;case"comment":e&&!u&&n(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),c+=d.source.length,h=d.source.substring(1);break;case"error":n(d,"UNEXPECTED_TOKEN",d.message),c+=d.source.length;break;default:{const g=`Unexpected token in block scalar header: ${d.type}`;n(d,"UNEXPECTED_TOKEN",g);const p=d.source;p&&typeof p=="string"&&(c+=p.length)}}}return{mode:s,indent:a,chomp:o,comment:h,length:c}}function kR(i){const t=i.split(/\n( *)/),e=t[0],n=e.match(/^( *)/),s=[n!=null&&n[1]?[n[1],e.slice(n[1].length)]:["",e]];for(let a=1;a<t.length;a+=2)s.push([t[a],t[a+1]]);return s}function DR(i,t,e){const{offset:n,type:r,source:s,end:a}=i;let o,l;const u=(f,d,g)=>e(n+f,d,g);switch(r){case"scalar":o=Q.PLAIN,l=PR(s,u);break;case"single-quoted-scalar":o=Q.QUOTE_SINGLE,l=OR(s,u);break;case"double-quoted-scalar":o=Q.QUOTE_DOUBLE,l=FR(s,u);break;default:return e(i,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[n,n+s.length,n+s.length]}}const h=n+s.length,c=Ll(a,h,t,e);return{value:l,type:o,comment:c.comment,range:[n,h,c.offset]}}function PR(i,t){let e="";switch(i[0]){case"	":e="a tab character";break;case",":e="flow indicator character ,";break;case"%":e="directive indicator character %";break;case"|":case">":{e=`block scalar indicator ${i[0]}`;break}case"@":case"`":{e=`reserved character ${i[0]}`;break}}return e&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${e}`),TS(i)}function OR(i,t){return(i[i.length-1]!=="'"||i.length===1)&&t(i.length,"MISSING_CHAR","Missing closing 'quote"),TS(i.slice(1,-1)).replace(/''/g,"'")}function TS(i){let t,e;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),e=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,e=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(i);if(!n)return i;let r=n[1],s=" ",a=t.lastIndex;for(e.lastIndex=a;n=e.exec(i);)n[1]===""?s===`
`?r+=s:s=`
`:(r+=s+n[1],s=" "),a=e.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,n=o.exec(i),r+s+((n==null?void 0:n[1])??"")}function FR(i,t){let e="";for(let n=1;n<i.length-1;++n){const r=i[n];if(!(r==="\r"&&i[n+1]===`
`))if(r===`
`){const{fold:s,offset:a}=NR(i,n);e+=s,n=a}else if(r==="\\"){let s=i[++n];const a=BR[s];if(a)e+=a;else if(s===`
`)for(s=i[n+1];s===" "||s==="	";)s=i[++n+1];else if(s==="\r"&&i[n+1]===`
`)for(s=i[++n+1];s===" "||s==="	";)s=i[++n+1];else if(s==="x"||s==="u"||s==="U"){const o={x:2,u:4,U:8}[s];e+=zR(i,n+1,o,t),n+=o}else{const o=i.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),e+=o}}else if(r===" "||r==="	"){const s=n;let a=i[n+1];for(;a===" "||a==="	";)a=i[++n+1];a!==`
`&&!(a==="\r"&&i[n+2]===`
`)&&(e+=n>s?i.slice(s,n+1):r)}else e+=r}return(i[i.length-1]!=='"'||i.length===1)&&t(i.length,"MISSING_CHAR",'Missing closing "quote'),e}function NR(i,t){let e="",n=i[t+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&i[t+2]!==`
`);)n===`
`&&(e+=`
`),t+=1,n=i[t+1];return e||(e=" "),{fold:e,offset:t}}const BR={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function zR(i,t,e,n){const r=i.substr(t,e),a=r.length===e&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(a)){const o=i.substr(t-2,e+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function CS(i,t,e,n){const{value:r,type:s,comment:a,range:o}=t.type==="block-scalar"?MR(t,i.options.strict,n):DR(t,i.options.strict,n),l=e?i.directives.tagName(e.source,c=>n(e,"TAG_RESOLVE_FAILED",c)):null,u=e&&l?GR(i.schema,r,l,e,n):t.type==="scalar"?$R(i,r,t,n):i.schema[dn];let h;try{const c=u.resolve(r,f=>n(e??t,"TAG_RESOLVE_FAILED",f),i.options);h=At(c)?c:new Q(c)}catch(c){const f=c instanceof Error?c.message:String(c);n(e??t,"TAG_RESOLVE_FAILED",f),h=new Q(r)}return h.range=o,h.source=r,s&&(h.type=s),l&&(h.tag=l),u.format&&(h.format=u.format),a&&(h.comment=a),h}function GR(i,t,e,n,r){var o;if(e==="!")return i[dn];const s=[];for(const l of i.tags)if(!l.collection&&l.tag===e)if(l.default&&l.test)s.push(l);else return l;for(const l of s)if((o=l.test)!=null&&o.test(t))return l;const a=i.knownTags[e];return a&&!a.collection?(i.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(r(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${e}`,e!=="tag:yaml.org,2002:str"),i[dn])}function $R({directives:i,schema:t},e,n,r){const s=t.tags.find(a=>{var o;return a.default&&((o=a.test)==null?void 0:o.test(e))})||t[dn];if(t.compat){const a=t.compat.find(o=>{var l;return o.default&&((l=o.test)==null?void 0:l.test(e))})??t[dn];if(s.tag!==a.tag){const o=i.tagString(s.tag),l=i.tagString(a.tag),u=`Value may be parsed as either ${o} or ${l}`;r(n,"TAG_RESOLVE_FAILED",u,!0)}}return s}function VR(i,t,e){if(t){e===null&&(e=t.length);for(let n=e-1;n>=0;--n){let r=t[n];switch(r.type){case"space":case"comment":case"newline":i-=r.source.length;continue}for(r=t[++n];(r==null?void 0:r.type)==="space";)i+=r.source.length,r=t[++n];break}}return i}const WR={composeNode:ES,composeEmptyNode:Cv};function ES(i,t,e,n){const{spaceBefore:r,comment:s,anchor:a,tag:o}=e;let l,u=!0;switch(t.type){case"alias":l=YR(i,t,n),(a||o)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=CS(i,t,o,n),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=RR(WR,i,t,o,n),a&&(l.anchor=a.source.substring(1));break;default:{const h=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;n(t,"UNEXPECTED_TOKEN",h),l=Cv(i,t.offset,void 0,null,e,n),u=!1}}return a&&l.anchor===""&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(l.spaceBefore=!0),s&&(t.type==="scalar"&&t.source===""?l.comment=s:l.commentBefore=s),i.options.keepSourceTokens&&u&&(l.srcToken=t),l}function Cv(i,t,e,n,{spaceBefore:r,comment:s,anchor:a,tag:o,end:l},u){const h={type:"scalar",offset:VR(t,e,n),indent:-1,source:""},c=CS(i,h,o,u);return a&&(c.anchor=a.source.substring(1),c.anchor===""&&u(a,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(c.spaceBefore=!0),s&&(c.comment=s,c.range[2]=l),c}function YR({options:i},{offset:t,source:e,end:n},r){const s=new dv(e.substring(1));s.source===""&&r(t,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&r(t+e.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=t+e.length,o=Ll(n,a,i.strict,r);return s.range=[t,a,o.offset],o.comment&&(s.comment=o.comment),s}function HR(i,t,{offset:e,start:n,value:r,end:s},a){const o=Object.assign({_directives:t},i),l=new Pc(void 0,o),u={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=fa(n,{indicator:"doc-start",next:r??(s==null?void 0:s[0]),offset:e,onError:a,startOnNewline:!0});h.found&&(l.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!h.hasNewline&&a(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?ES(u,r,h,a):Cv(u,h.end,n,null,h,a);const c=l.contents.range[2],f=Ll(s,c,!1,a);return f.comment&&(l.comment=f.comment),l.range=[e,c,f.offset],l}function Va(i){if(typeof i=="number")return[i,i+1];if(Array.isArray(i))return i.length===2?i:[i[0],i[1]];const{offset:t,source:e}=i;return[t,t+(typeof e=="string"?e.length:1)]}function Jy(i){var r;let t="",e=!1,n=!1;for(let s=0;s<i.length;++s){const a=i[s];switch(a[0]){case"#":t+=(t===""?"":n?`

`:`
`)+(a.substring(1)||" "),e=!0,n=!1;break;case"%":((r=i[s+1])==null?void 0:r[0])!=="#"&&(s+=1),e=!1;break;default:e||(n=!0),e=!1}}return{comment:t,afterEmptyLine:n}}class UR{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,n,r,s)=>{const a=Va(e);s?this.warnings.push(new CR(a,n,r)):this.errors.push(new go(a,n,r))},this.directives=new fe({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:n,afterEmptyLine:r}=Jy(this.prelude);if(n){const s=t.contents;if(e)t.comment=t.comment?`${t.comment}
${n}`:n;else if(r||t.directives.docStart||!s)t.commentBefore=n;else if(Gt(s)&&!s.flow&&s.items.length>0){let a=s.items[0];$t(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${n}
${o}`:n}else{const a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Jy(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,n=-1){for(const r of t)yield*this.next(r);yield*this.end(e,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(e,n,r)=>{const s=Va(t);s[0]+=e,this.onError(s,"BAD_DIRECTIVE",n,r)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=HR(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new go(Va(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const n="Unexpected doc-end without preceding document";this.errors.push(new go(Va(t),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;const e=Ll(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const n=this.doc.comment;this.doc.comment=n?`${n}
${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new go(Va(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const n=Object.assign({_directives:this.directives},this.options),r=new Pc(void 0,n);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,e,e],this.decorate(r,!1),yield r}}}const IS="\uFEFF",AS="",RS="",Ag="";function XR(i){switch(i){case IS:return"byte-order-mark";case AS:return"doc-mode";case RS:return"flow-error-end";case Ag:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(i[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Ke(i){switch(i){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Qy="0123456789ABCDEFabcdef".split(""),KR="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),Pf=",[]{}".split(""),jR=` ,[]{}
\r	`.split(""),Of=i=>!i||jR.includes(i);class ZR{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){t&&(this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null),this.atEnd=!e;let n=this.next??"stream";for(;n&&(e||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;e===" "||e==="	";)e=this.buffer[++t];return!e||e==="#"||e===`
`?!0:e==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;e===" ";)e=this.buffer[++n+t];if(e==="\r"){const r=this.buffer[n+t+1];if(r===`
`||!r&&!this.atEnd)return t+n+1}return e===`
`||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if(e==="-"||e==="."){const n=this.buffer.substr(t,3);if((n==="---"||n==="...")&&Ke(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===IS&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let e=t.length;const n=t.indexOf("#");if(n!==-1){const s=t[n-1];(s===" "||s==="	")&&(e=n-1)}for(;;){const s=t[e-1];if(s===" "||s==="	")e-=1;else break}const r=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield AS,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if(e==="---"&&Ke(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(e==="..."&&Ke(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Ke(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&Ke(e)){const n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Of),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=yield*this.parseBlockScalarHeader(),e+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,n=-1;do t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=n=e):e=0,e+=yield*this.pushSpaces(!0);while(t+e>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&r[0]!=="#"||n===0&&(r.startsWith("---")||r.startsWith("..."))&&Ke(r[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield RS,yield*this.parseLineStart();let s=0;for(;r[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),r[s]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Of),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||Ke(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;e!==-1&&this.buffer[e+1]==="'";)e=this.buffer.indexOf("'",e+2);else for(;e!==-1;){let s=0;for(;this.buffer[e-1-s]==="\\";)s+=1;if(s%2===0)break;e=this.buffer.indexOf('"',e+1)}const n=this.buffer.substring(0,e);let r=n.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const s=this.continueScalar(r+1);if(s===-1)break;r=n.indexOf(`
`,s)}r!==-1&&(e=r-(n[r-1]==="\r"?2:1))}if(e===-1){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if(e==="+")this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if(e!=="-")break}return yield*this.pushUntil(e=>Ke(e)||e==="#")}*parseBlockScalar(){let t=this.pos-1,e=0,n;t:for(let r=this.pos;n=this.buffer[r];++r)switch(n){case" ":e+=1;break;case`
`:t=r,e=0;break;case"\r":{const s=this.buffer[r+1];if(!s&&!this.atEnd)return this.setNext("block-scalar");if(s===`
`)break}default:break t}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(e>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=e:this.indentNext+=this.blockScalarIndent;do{const r=this.continueScalar(t+1);if(r===-1)break;t=this.buffer.indexOf(`
`,r)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)do{let r=t-1,s=this.buffer[r];s==="\r"&&(s=this.buffer[--r]);const a=r;for(;s===" "||s==="	";)s=this.buffer[--r];if(s===`
`&&r>=this.pos&&r+1+e>a)t=r;else break}while(!0);return yield Ag,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e=this.pos-1,n=this.pos-1,r;for(;r=this.buffer[++n];)if(r===":"){const s=this.buffer[n+1];if(Ke(s)||t&&s===",")break;e=n}else if(Ke(r)){let s=this.buffer[n+1];if(r==="\r"&&(s===`
`?(n+=1,r=`
`,s=this.buffer[n+1]):e=n),s==="#"||t&&Pf.includes(s))break;if(r===`
`){const a=this.continueScalar(n+1);if(a===-1)break;n=Math.max(n,a-2)}}else{if(t&&Pf.includes(r))break;e=n}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Ag,yield*this.pushToIndex(e+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Of))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(Ke(e)||t&&Pf.includes(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,e=this.buffer[t];for(;!Ke(e)&&e!==">";)e=this.buffer[++t];return yield*this.pushToIndex(e===">"?t+1:t,!1)}else{let t=this.pos+1,e=this.buffer[t];for(;e;)if(KR.includes(e))e=this.buffer[++t];else if(e==="%"&&Qy.includes(this.buffer[t+1])&&Qy.includes(this.buffer[t+2]))e=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let e=this.pos-1,n;do n=this.buffer[++e];while(n===" "||t&&n==="	");const r=e-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=e),r}*pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class qR{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const s=e+n>>1;this.lineStarts[s]<t?e=s+1:n=s}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(e===0)return{line:0,col:t};const r=this.lineStarts[e-1];return{line:e,col:t-r+1}}}}function _i(i,t){for(let e=0;e<i.length;++e)if(i[e].type===t)return!0;return!1}function t_(i){for(let t=0;t<i.length;++t)switch(i[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function MS(i){switch(i==null?void 0:i.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function su(i){switch(i.type){case"document":return i.start;case"block-map":{const t=i.items[i.items.length-1];return t.sep??t.start}case"block-seq":return i.items[i.items.length-1].start;default:return[]}}function ds(i){var e;if(i.length===0)return[];let t=i.length;t:for(;--t>=0;)switch(i[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;((e=i[++t])==null?void 0:e.type)==="space";);return i.splice(t,i.length)}function e_(i){if(i.start.type==="flow-seq-start")for(const t of i.items)t.sep&&!t.value&&!_i(t.start,"explicit-key-ind")&&!_i(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,MS(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class JR{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new ZR,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const n of this.lexer.lex(t,e))yield*this.next(n);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const e=XR(t);if(e)if(e==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const n=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(this.stack.length===0)yield e;else{const n=this.peek(1);switch(e.type==="block-scalar"?e.indent="indent"in n?n.indent:0:e.type==="flow-collection"&&n.type==="document"&&(e.indent=0),e.type==="flow-collection"&&e_(e),n.type){case"document":n.value=e;break;case"block-scalar":n.props.push(e);break;case"block-map":{const r=n.items[n.items.length-1];if(r.value){n.items.push({start:[],key:e,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=e;else{Object.assign(r,{key:e,sep:[]}),this.onKeyLine=!_i(r.start,"explicit-key-ind");return}break}case"block-seq":{const r=n.items[n.items.length-1];r.value?n.items.push({start:[],value:e}):r.value=e;break}case"flow-collection":{const r=n.items[n.items.length-1];!r||r.value?n.items.push({start:[],key:e,sep:[]}):r.sep?r.value=e:Object.assign(r,{key:e,sep:[]});return}default:yield*this.pop(),yield*this.pop(e)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(e.type==="block-map"||e.type==="block-seq")){const r=e.items[e.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&t_(r.start)===-1&&(e.indent===0||r.start.every(s=>s.type!=="comment"||s.indent<e.indent))&&(n.type==="document"?n.end=r.start:n.items.push({start:r.start}),e.items.splice(-1,1))}}else{const n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{t_(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const e=su(this.peek(2)),n=ds(e);let r;t.end?(r=t.end,r.push(this.sourceToken),delete t.end):r=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;e!==0;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){var n;const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const r="end"in e.value?e.value.end:void 0,s=Array.isArray(r)?r[r.length-1]:void 0;(s==null?void 0:s.type)==="comment"?r==null||r.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const r=t.items[t.items.length-2],s=(n=r==null?void 0:r.value)==null?void 0:n.end;if(Array.isArray(s)){Array.prototype.push.apply(s,e.start),s.push(this.sourceToken),t.items.pop();return}}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const r=!this.onKeyLine&&this.indent===t.indent&&e.sep;let s=[];if(r&&e.sep&&!e.value){const a=[];for(let o=0;o<e.sep.length;++o){const l=e.sep[o];switch(l.type){case"newline":a.push(o);break;case"space":break;case"comment":l.indent>t.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(s=e.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":r||e.value?(s.push(this.sourceToken),t.items.push({start:s}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"explicit-key-ind":!e.sep&&!_i(e.start,"explicit-key-ind")?e.start.push(this.sourceToken):r||e.value?(s.push(this.sourceToken),t.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(_i(e.start,"explicit-key-ind"))if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(_i(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(MS(e.key)&&!_i(e.sep,"newline")){const a=ds(e.start),o=e.key,l=e.sep;l.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:o,sep:l}]})}else s.length>0?e.sep=e.sep.concat(s,this.sourceToken):e.sep.push(this.sourceToken);else if(_i(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const a=ds(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||r?t.items.push({start:s,key:null,sep:[this.sourceToken]}):_i(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);r||e.value?(t.items.push({start:s,key:a,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(a):(Object.assign(e,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(t);if(a){r&&a.type!=="block-seq"&&_i(e.start,"explicit-key-ind")&&t.items.push({start:s}),this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){var n;const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const r="end"in e.value?e.value.end:void 0,s=Array.isArray(r)?r[r.length-1]:void 0;(s==null?void 0:s.type)==="comment"?r==null||r.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const r=t.items[t.items.length-2],s=(n=r==null?void 0:r.value)==null?void 0:n.end;if(Array.isArray(s)){Array.prototype.push.apply(s,e.start),s.push(this.sourceToken),t.items.pop();return}}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;e.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;e.value||_i(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken);return}if(this.indent>t.indent){const r=this.startBlockValue(t);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken);return;case"map-value-ind":!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!e||e.value?t.items.push({start:[],key:r,sep:[]}):e.sep?this.stack.push(r):Object.assign(e,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===t.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){const r=su(n),s=ds(r);e_(t);const a=t.end.splice(1,t.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:s,key:t,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;e!==0;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=su(t),n=ds(e);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;const e=su(t),n=ds(e);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return this.type!=="comment"||this.indent<=e?!1:t.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function QR(i){const t=i.prettyErrors!==!1;return{lineCounter:i.lineCounter||t&&new qR||null,prettyErrors:t}}function tM(i,t={}){const{lineCounter:e,prettyErrors:n}=QR(t),r=new JR(e==null?void 0:e.addNewLine),s=new UR(t);let a=null;for(const o of s.compose(r.parse(i),!0,i.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new go(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&e&&(a.errors.forEach(Zy(i,e)),a.warnings.forEach(Zy(i,e))),a}function eM(i,t,e){let n;typeof t=="function"?n=t:e===void 0&&t&&typeof t=="object"&&(e=t);const r=tM(i,e);if(!r)return null;if(r.warnings.forEach(s=>rS(r.options.logLevel,s)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:n},e))}function iM(i){let t,e;const n=i[7].default,r=IA(n,i,i[6],null);return{c(){t=ue("div"),r&&r.c()},m(s,a){le(s,t,a),r&&r.m(t,null),i[8](t),e=!0},p(s,[a]){r&&r.p&&(!e||a&64)&&RA(r,n,s,s[6],e?AA(n,s[6],a,null):MA(s[6]),null)},i(s){e||(Ae(r,s),e=!0)},o(s){oi(r,s),e=!1},d(s){s&&Jt(t),r&&r.d(s),i[8](null)}}}function nM(i,t,e){let{$$slots:n={},$$scope:r}=t,{root:s=null}=t,{top:a=0}=t,{bottom:o=0}=t,{increments:l=100}=t,{value:u=0}=t;const h=[],c=[];let f=[],d=[],g;const p=()=>{f.length&&f.forEach(m)},v=()=>{let _=0,w=0;for(let S=0;S<h.length;S++)h[S]>_&&(_=h[S],w=S);_>0?e(1,u=w):e(1,u=0)},m=(_,w)=>{const S=E=>{E[0].isIntersecting;const R=E[0].intersectionRatio;h[w]=R,v()},x=a?a*-1:0,b=o?o*-1:0,T=`${x}px 0px ${b}px 0px`,C={root:s,rootMargin:T,threshold:c};d[w]&&d[w].disconnect();const I=new IntersectionObserver(S,C);I.observe(_),d[w]=I};OA(()=>{for(let _=0;_<l+1;_++)c.push(_/l);f=g.querySelectorAll(":scope > *"),p()});function y(_){Lh[_?"unshift":"push"](()=>{g=_,e(0,g)})}return i.$$set=_=>{"root"in _&&e(2,s=_.root),"top"in _&&e(3,a=_.top),"bottom"in _&&e(4,o=_.bottom),"increments"in _&&e(5,l=_.increments),"value"in _&&e(1,u=_.value),"$$scope"in _&&e(6,r=_.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&p()},[g,u,s,a,o,l,r,n,y]}class rM extends Il{constructor(t){super(),El(this,t,nM,iM,Ca,{root:2,top:3,bottom:4,increments:5,value:1})}}const gs=[];function sM(i,t=ut){let e;const n=new Set;function r(o){if(Ca(i,o)&&(i=o,e)){const l=!gs.length;for(const u of n)u[1](),gs.push(u,i);if(l){for(let u=0;u<gs.length;u+=2)gs[u][0](gs[u+1]);gs.length=0}}}function s(o){r(o(i))}function a(o,l=ut){const u=[o,l];return n.add(u),n.size===1&&(e=t(r)||ut),o(i),()=>{n.delete(u),n.size===0&&e&&(e(),e=null)}}return{set:r,update:s,subscribe:a}}const Rg=sM(0);class aM{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const mn=aM,da={PROPERTYCHANGE:"propertychange"};class oM{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ev=oM;function lM(i,t,e){let n,r;e=e||jr;let s=0,a=i.length,o=!1;for(;s<a;)n=s+(a-s>>1),r=+e(i[n],t),r<0?s=n+1:(a=n,o=!r);return o?s:~s}function jr(i,t){return i>t?1:i<t?-1:0}function Iv(i,t,e){if(i[0]<=t)return 0;const n=i.length;if(t<=i[n-1])return n-1;if(typeof e=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===t)return r;if(s<t)return e(t,i[r-1],s)>0?r-1:r}return n-1}if(e>0){for(let r=1;r<n;++r)if(i[r]<t)return r-1;return n-1}if(e<0){for(let r=1;r<n;++r)if(i[r]<=t)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==t)return r;if(i[r]<t)return i[r-1]-t<t-i[r]?r-1:r}return n-1}function uM(i,t,e){for(;t<e;){const n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function un(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let r=0;r<n;r++)i[i.length]=e[r]}function tr(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function hM(i,t,e){const n=t||jr;return i.every(function(r,s){if(s===0)return!0;const a=n(i[s-1],r);return!(a>0||e&&a===0)})}function Zo(){return!0}function Oc(){return!1}function ga(){}function cM(i){let t=!1,e,n,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!tr(s,n))&&(t=!0,r=this,n=s,e=i.apply(this,arguments)),e}}function kl(i){for(const t in i)delete i[t]}function pa(i){let t;for(t in i)return!1;return!t}class fM extends Ev{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=e?new mn(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,o[n]=0),++a[n];let l;for(let u=0,h=r.length;u<h;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[n]===0){let u=o[n];for(delete o[n];u--;)this.removeEventListener(n,ga);delete a[n]}return l}disposeInternal(){this.listeners_&&kl(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const r=n.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=ga,++this.pendingRemovals_[t]):(n.splice(r,1),n.length===0&&delete this.listeners_[t]))}}}const Fc=fM,q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ot(i,t,e,n,r){if(n&&n!==i&&(e=e.bind(n)),r){const a=e;e=function(){i.removeEventListener(t,e),a.apply(this,arguments)}}const s={target:i,type:t,listener:e};return i.addEventListener(t,e),s}function Oh(i,t,e,n){return ot(i,t,e,n,!0)}function It(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),kl(i))}class Nc extends Fc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(q.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ot(this,t[s],e);return r}return ot(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const r=t.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=Oh(this,t[s],e)}else n=Oh(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)dM(n);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}Nc.prototype.on;Nc.prototype.once;Nc.prototype.un;function dM(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)It(i[t]);else It(i)}const LS=Nc;function X(){throw new Error("Unimplemented abstract method.")}let gM=0;function lt(i){return i.ol_uid||(i.ol_uid=String(++gM))}class i_ extends mn{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class pM extends LS{constructor(t){super(),this.on,this.once,this.un,lt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new i_(n,t,e)),n=da.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new i_(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const r=this.values_||(this.values_={});if(n)r[t]=e;else{const s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],pa(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Ui=pM,vM={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class mM extends Error{constructor(t){const e=vM[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const kS=mM,Se={ADD:"add",REMOVE:"remove"},n_={LENGTH:"length"};class au extends mn{constructor(t,e,n){super(t),this.element=e,this.index=n}}class yM extends Ui{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,r=e.length;n<r;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(n_.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new au(Se.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new au(Se.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new au(Se.REMOVE,r,t)),this.dispatchEvent(new au(Se.ADD,e,t))}updateLength_(){this.set(n_.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new kS(58)}}const Di=yM,Un=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",_M=Un.includes("firefox"),wM=Un.includes("safari")&&!Un.includes("chrom");wM&&(Un.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Un));const xM=Un.includes("webkit")&&!Un.includes("edge"),DS=Un.includes("macintosh"),PS=typeof devicePixelRatio<"u"?devicePixelRatio:1,Av=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,SM=typeof Image<"u"&&Image.prototype.decode,OS=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function tt(i,t){if(!i)throw new kS(t)}new Array(6);function zi(){return[1,0,0,1,0,0]}function bM(i,t,e,n,r,s,a){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=s,i[5]=a,i}function TM(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function jt(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function CM(i,t,e){return bM(i,t,0,0,e,0,0)}function Xn(i,t,e,n,r,s,a,o){const l=Math.sin(s),u=Math.cos(s);return i[0]=n*u,i[1]=r*l,i[2]=-n*l,i[3]=r*u,i[4]=a*n*u-o*n*l+t,i[5]=a*r*l+o*r*u+e,i}function Rv(i,t){const e=EM(t);tt(e!==0,32);const n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5];return i[0]=a/e,i[1]=-r/e,i[2]=-s/e,i[3]=n/e,i[4]=(s*l-a*o)/e,i[5]=-(n*l-r*o)/e,i}function EM(i){return i[0]*i[3]-i[1]*i[2]}let r_;function FS(i){const t="matrix("+i.join(", ")+")";if(Av)return t;const e=r_||(r_=document.createElement("div"));return e.style.transform=t,e.style.transform}const Kt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function s_(i){const t=Me();for(let e=0,n=i.length;e<n;++e)Eo(t,i[e]);return t}function IM(i,t,e){const n=Math.min.apply(null,i),r=Math.min.apply(null,t),s=Math.max.apply(null,i),a=Math.max.apply(null,t);return gn(n,r,s,a,e)}function Zr(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function NS(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function es(i,t,e){let n,r;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?r=i[1]-e:i[3]<e?r=e-i[3]:r=0,n*n+r*r}function Bc(i,t){return Mv(i,t[0],t[1])}function Ys(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function Mv(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function Mg(i,t){const e=i[0],n=i[1],r=i[2],s=i[3],a=t[0],o=t[1];let l=Kt.UNKNOWN;return a<e?l=l|Kt.LEFT:a>r&&(l=l|Kt.RIGHT),o<n?l=l|Kt.BELOW:o>s&&(l=l|Kt.ABOVE),l===Kt.UNKNOWN&&(l=Kt.INTERSECTING),l}function Me(){return[1/0,1/0,-1/0,-1/0]}function gn(i,t,e,n,r){return r?(r[0]=i,r[1]=t,r[2]=e,r[3]=n,r):[i,t,e,n]}function Ma(i){return gn(1/0,1/0,-1/0,-1/0,i)}function BS(i,t){const e=i[0],n=i[1];return gn(e,n,e,n,t)}function zS(i,t,e,n,r){const s=Ma(r);return $S(s,i,t,e,n)}function qo(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function GS(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function Eo(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function $S(i,t,e,n,r){for(;e<n;e+=r)AM(i,t[e],t[e+1]);return i}function AM(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function VS(i,t){let e;return e=t(zc(i)),e||(e=t(Gc(i)),e)||(e=t($c(i)),e)||(e=t(is(i)),e)?e:!1}function Lg(i){let t=0;return Dl(i)||(t=Ct(i)*Vi(i)),t}function zc(i){return[i[0],i[1]]}function Gc(i){return[i[2],i[1]]}function Kn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function RM(i,t){let e;return t==="bottom-left"?e=zc(i):t==="bottom-right"?e=Gc(i):t==="top-left"?e=is(i):t==="top-right"?e=$c(i):tt(!1,13),e}function kg(i,t,e,n,r){const[s,a,o,l,u,h,c,f]=Dg(i,t,e,n);return gn(Math.min(s,o,u,c),Math.min(a,l,h,f),Math.max(s,o,u,c),Math.max(a,l,h,f),r)}function Dg(i,t,e,n){const r=t*n[0]/2,s=t*n[1]/2,a=Math.cos(e),o=Math.sin(e),l=r*a,u=r*o,h=s*a,c=s*o,f=i[0],d=i[1];return[f-l+c,d-u-h,f-l-c,d-u+h,f+l-c,d+u+h,f+l+c,d+u-h,f-l+c,d-u-h]}function Vi(i){return i[3]-i[1]}function Io(i,t,e){const n=e||Me();return Ce(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):Ma(n),n}function is(i){return[i[0],i[3]]}function $c(i){return[i[2],i[3]]}function Ct(i){return i[2]-i[0]}function Ce(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Dl(i){return i[2]<i[0]||i[3]<i[1]}function MM(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function LM(i,t,e){let n=!1;const r=Mg(i,t),s=Mg(i,e);if(r===Kt.INTERSECTING||s===Kt.INTERSECTING)n=!0;else{const a=i[0],o=i[1],l=i[2],u=i[3],h=t[0],c=t[1],f=e[0],d=e[1],g=(d-c)/(f-h);let p,v;s&Kt.ABOVE&&!(r&Kt.ABOVE)&&(p=f-(d-u)/g,n=p>=a&&p<=l),!n&&s&Kt.RIGHT&&!(r&Kt.RIGHT)&&(v=d-(f-l)*g,n=v>=o&&v<=u),!n&&s&Kt.BELOW&&!(r&Kt.BELOW)&&(p=f-(d-o)/g,n=p>=a&&p<=l),!n&&s&Kt.LEFT&&!(r&Kt.LEFT)&&(v=d-(f-a)*g,n=v>=o&&v<=u)}return n}function kM(i,t,e,n){if(Dl(i))return Ma(e);let r=[];if(n>1){const o=i[2]-i[0],l=i[3]-i[1];for(let u=0;u<n;++u)r.push(i[0]+o*u/n,i[1],i[2],i[1]+l*u/n,i[2]-o*u/n,i[3],i[0],i[3]-l*u/n)}else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(r,r,2);const s=[],a=[];for(let o=0,l=r.length;o<l;o+=2)s.push(r[o]),a.push(r[o+1]);return IM(s,a,e)}function WS(i,t){const e=t.getExtent(),n=Kn(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const r=Ct(e),a=Math.floor((n[0]-e[0])/r)*r;i[0]-=a,i[2]-=a}return i}function DM(i,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[e[0],i[1],e[2],i[3]]];WS(i,t);const n=Ct(e);if(Ct(i)>n)return[[e[0],i[1],e[2],i[3]]];if(i[0]<e[0])return[[i[0]+n,i[1],e[2],i[3]],[e[0],i[1],i[2],i[3]]];if(i[2]>e[2])return[[i[0],i[1],e[2],i[3]],[e[0],i[1],i[2]-n,i[3]]]}return[i]}function Vt(i,t,e){return Math.min(Math.max(i,t),e)}function PM(i,t,e,n,r,s){const a=r-e,o=s-n;if(a!==0||o!==0){const l=((i-e)*a+(t-n)*o)/(a*a+o*o);l>1?(e=r,n=s):l>0&&(e+=a*l,n+=o*l)}return Gr(i,t,e,n)}function Gr(i,t,e,n){const r=e-i,s=n-t;return r*r+s*s}function OM(i){const t=i.length;for(let n=0;n<t;n++){let r=n,s=Math.abs(i[n][n]);for(let o=n+1;o<t;o++){const l=Math.abs(i[o][n]);l>s&&(s=l,r=o)}if(s===0)return null;const a=i[r];i[r]=i[n],i[n]=a;for(let o=n+1;o<t;o++){const l=-i[o][n]/i[n][n];for(let u=n;u<t+1;u++)n==u?i[o][u]=0:i[o][u]+=l*i[n][u]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let r=n-1;r>=0;r--)i[r][t]-=i[r][n]*e[n]}return e}function ph(i){return i*Math.PI/180}function $r(i,t){const e=i%t;return e*t<0?e+t:e}function Ge(i,t,e){return i+e*(t-i)}function Lv(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function ou(i,t){return Math.floor(Lv(i,t))}function lu(i,t){return Math.ceil(Lv(i,t))}const FM=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,NM=/^([a-z]*)$|^hsla?\(.*\)$/i;function YS(i){return typeof i=="string"?i:HS(i)}function BM(i){const t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const zM=function(){const t={};let e=0;return function(n){let r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){let s=0;for(const a in t)s++&3||(delete t[a],--e)}r=GM(n),t[n]=r,++e}return r}}();function Fh(i){return Array.isArray(i)?i:zM(i)}function GM(i){let t,e,n,r,s;if(NM.exec(i)&&(i=BM(i)),FM.exec(i)){const a=i.length-1;let o;a<=4?o=1:o=2;const l=a===4||a===8;t=parseInt(i.substr(1+0*o,o),16),e=parseInt(i.substr(1+1*o,o),16),n=parseInt(i.substr(1+2*o,o),16),l?r=parseInt(i.substr(1+3*o,o),16):r=255,o==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(r=(r<<4)+r)),s=[t,e,n,r/255]}else i.startsWith("rgba(")?(s=i.slice(5,-1).split(",").map(Number),a_(s)):i.startsWith("rgb(")?(s=i.slice(4,-1).split(",").map(Number),s.push(1),a_(s)):tt(!1,14);return s}function a_(i){return i[0]=Vt(i[0]+.5|0,0,255),i[1]=Vt(i[1]+.5|0,0,255),i[2]=Vt(i[2]+.5|0,0,255),i[3]=Vt(i[3],0,1),i}function HS(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+t+","+e+","+n+","+r+")"}class $M{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const r=o_(t,e,n);return r in this.cache_?this.cache_[r]:null}set(t,e,n,r){const s=o_(t,e,n);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function o_(i,t,e){const n=e?YS(e):"null";return t+":"+i+":"+n}const Nh=new $M,vt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class VM extends Ui{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[vt.OPACITY]=t.opacity!==void 0?t.opacity:1,tt(typeof e[vt.OPACITY]=="number",64),e[vt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[vt.Z_INDEX]=t.zIndex,e[vt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[vt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[vt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[vt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=Vt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return X()}getLayerStatesArray(t){return X()}getExtent(){return this.get(vt.EXTENT)}getMaxResolution(){return this.get(vt.MAX_RESOLUTION)}getMinResolution(){return this.get(vt.MIN_RESOLUTION)}getMinZoom(){return this.get(vt.MIN_ZOOM)}getMaxZoom(){return this.get(vt.MAX_ZOOM)}getOpacity(){return this.get(vt.OPACITY)}getSourceState(){return X()}getVisible(){return this.get(vt.VISIBLE)}getZIndex(){return this.get(vt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(vt.EXTENT,t)}setMaxResolution(t){this.set(vt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(vt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(vt.MAX_ZOOM,t)}setMinZoom(t){this.set(vt.MIN_ZOOM,t)}setOpacity(t){tt(typeof t=="number",64),this.set(vt.OPACITY,t)}setVisible(t){this.set(vt.VISIBLE,t)}setZIndex(t){this.set(vt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const US=VM,Gi={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ne={ANIMATING:0,INTERACTING:1},gi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},WM=42,kv=256,Jo={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class YM{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Jo[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const XS=YM,Pl=6378137,Hs=Math.PI*Pl,HM=[-Hs,-Hs,Hs,Hs],UM=[-180,-85,180,85],uu=Pl*Math.log(Math.tan(Math.PI/2));class ps extends XS{constructor(t){super({code:t,units:"m",extent:HM,global:!0,worldExtent:UM,getPointResolution:function(e,n){return e/Math.cosh(n[1]/Pl)}})}}const l_=[new ps("EPSG:3857"),new ps("EPSG:102100"),new ps("EPSG:102113"),new ps("EPSG:900913"),new ps("http://www.opengis.net/def/crs/EPSG/0/3857"),new ps("http://www.opengis.net/gml/srs/epsg.xml#3857")];function XM(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let r=0;r<n;r+=e){t[r]=Hs*i[r]/180;let s=Pl*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));s>uu?s=uu:s<-uu&&(s=-uu),t[r+1]=s}return t}function KM(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let r=0;r<n;r+=e)t[r]=180*i[r]/Hs,t[r+1]=360*Math.atan(Math.exp(i[r+1]/Pl))/Math.PI-90;return t}const jM=6378137,u_=[-180,-90,180,90],ZM=Math.PI*jM/180;class ir extends XS{constructor(t,e){super({code:t,units:"degrees",extent:u_,axisOrientation:e,global:!0,metersPerUnit:ZM,worldExtent:u_})}}const h_=[new ir("CRS:84"),new ir("EPSG:4326","neu"),new ir("urn:ogc:def:crs:OGC:1.3:CRS84"),new ir("urn:ogc:def:crs:OGC:2:84"),new ir("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ir("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ir("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Pg={};function qM(i){return Pg[i]||Pg[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function JM(i,t){Pg[i]=t}let ta={};function Bh(i,t,e){const n=i.getCode(),r=t.getCode();n in ta||(ta[n]={}),ta[n][r]=e}function QM(i,t){let e;return i in ta&&t in ta[i]&&(e=ta[i][t]),e}function tL(i,t){const e=(""+i).split("."),n=(""+t).split(".");for(let r=0;r<Math.max(e.length,n.length);r++){const s=parseInt(e[r]||"0",10),a=parseInt(n[r]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function KS(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function zh(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function Dv(i,t){const e=Math.cos(t),n=Math.sin(t),r=i[0]*e-i[1]*n,s=i[1]*e+i[0]*n;return i[0]=r,i[1]=s,i}function jS(i,t){return i[0]*=t,i[1]*=t,i}function ZS(i,t){if(t.canWrapX()){const e=Ct(t.getExtent()),n=eL(i,t,e);n&&(i[0]-=n*e)}return i}function eL(i,t,e){const n=t.getExtent();let r=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||Ct(n),r=Math.floor((i[0]-n[0])/e)),r}const iL=63710088e-1;function c_(i,t,e){e=e||iL;const n=ph(i[1]),r=ph(t[1]),s=(r-n)/2,a=ph(t[0]-i[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const qS={info:1,warn:2,error:3,none:4};let nL=qS.info;function JS(...i){nL>qS.warn||console.warn(...i)}let Og=!0;function rL(i){Og=!(i===void 0?!0:i)}function Pv(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function QS(i,t){if(t!==void 0&&i!==t){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];i=t}return i}function sL(i){JM(i.getCode(),i),Bh(i,i,Pv)}function aL(i){i.forEach(sL)}function Wt(i){return typeof i=="string"?qM(i):i||null}function f_(i,t,e,n){i=Wt(i);let r;const s=i.getPointResolutionFunc();if(s){if(r=s(t,e),n&&n!==i.getUnits()){const a=i.getMetersPerUnit();a&&(r=r*a/Jo[n])}}else{const a=i.getUnits();if(a=="degrees"&&!n||n=="degrees")r=t;else{const o=Fv(i,Wt("EPSG:4326"));if(o===QS&&a!=="degrees")r=t*i.getMetersPerUnit();else{let u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=o(u,u,2);const h=c_(u.slice(0,2),u.slice(2,4)),c=c_(u.slice(4,6),u.slice(6,8));r=(h+c)/2}const l=n?Jo[n]:i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function d_(i){aL(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Bh(t,e,Pv)})})}function oL(i,t,e,n){i.forEach(function(r){t.forEach(function(s){Bh(r,s,e),Bh(s,r,n)})})}function Ov(i,t){return i?typeof i=="string"?Wt(i):i:Wt(t)}function Rr(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Fv(i,t)===Pv)&&e}function Fv(i,t){const e=i.getCode(),n=t.getCode();let r=QM(e,n);return r||(r=QS),r}function Qo(i,t){const e=Wt(i),n=Wt(t);return Fv(e,n)}function tb(i,t,e){return Qo(t,e)(i,void 0,i.length)}function lL(i,t,e,n){const r=Qo(t,e);return kM(i,r,void 0,n)}function Fg(i,t){return i}function nn(i,t){return Og&&!zh(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Og=!1,JS("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function eb(i,t){return i}function Dr(i,t){return i}function uL(){d_(l_),d_(h_),oL(h_,l_,XM,KM)}uL();function g_(i,t,e){return function(n,r,s,a,o){if(!n)return;if(!r&&!t)return n;const l=t?0:s[0]*r,u=t?0:s[1]*r,h=o?o[0]:0,c=o?o[1]:0;let f=i[0]+l/2+h,d=i[2]-l/2+h,g=i[1]+u/2+c,p=i[3]-u/2+c;f>d&&(f=(d+f)/2,d=f),g>p&&(g=(p+g)/2,p=g);let v=Vt(n[0],f,d),m=Vt(n[1],g,p);if(a&&e&&r){const y=30*r;v+=-y*Math.log(1+Math.max(0,f-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-d)/y),m+=-y*Math.log(1+Math.max(0,g-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-p)/y)}return[v,m]}}function hL(i){return i}function Nv(i,t,e,n){const r=Ct(t)/e[0],s=Vi(t)/e[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function Bv(i,t,e){let n=Math.min(i,t);const r=50;return n*=Math.log(1+r*Math.max(0,i/t-1))/r+1,e&&(n=Math.max(n,e),n/=Math.log(1+r*Math.max(0,e/i-1))/r+1),Vt(n,e/2,t*2)}function cL(i,t,e,n){return t=t!==void 0?t:!0,function(r,s,a,o){if(r!==void 0){const l=i[0],u=i[i.length-1],h=e?Nv(l,e,a,n):l;if(o)return t?Bv(r,h,u):Vt(r,u,h);const c=Math.min(h,r),f=Math.floor(Iv(i,c,s));return i[f]>h&&f<i.length-1?i[f+1]:i[f]}}}function fL(i,t,e,n,r,s){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(a,o,l,u){if(a!==void 0){const h=r?Nv(t,r,l,s):t;if(u)return n?Bv(a,h,e):Vt(a,e,h);const c=1e-9,f=Math.ceil(Math.log(t/h)/Math.log(i)-c),d=-o*(.5-c)+.5,g=Math.min(h,a),p=Math.floor(Math.log(t/g)/Math.log(i)+d),v=Math.max(f,p),m=t/Math.pow(i,v);return Vt(m,e,h)}}}function p_(i,t,e,n,r){return e=e!==void 0?e:!0,function(s,a,o,l){if(s!==void 0){const u=n?Nv(i,n,o,r):i;return!e||!l?Vt(s,t,u):Bv(s,u,t)}}}function zv(i){if(i!==void 0)return 0}function v_(i){if(i!==void 0)return i}function dL(i){const t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function gL(i){return i=i||ph(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}function ib(i){return Math.pow(i,3)}function La(i){return 1-ib(1-i)}function Ng(i){return 3*i*i-2*i*i*i}function pL(i){return i}function vL(i){return i<.5?Ng(2*i):1-Ng(2*(i-.5))}function Vr(i,t,e,n,r,s){s=s||[];let a=0;for(let o=t;o<e;o+=n){const l=i[o],u=i[o+1];s[a++]=r[0]*l+r[2]*u+r[4],s[a++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=a&&(s.length=a),s}function nb(i,t,e,n,r,s,a){a=a||[];const o=Math.cos(r),l=Math.sin(r),u=s[0],h=s[1];let c=0;for(let f=t;f<e;f+=n){const d=i[f]-u,g=i[f+1]-h;a[c++]=u+d*o-g*l,a[c++]=h+d*l+g*o;for(let p=f+2;p<f+n;++p)a[c++]=i[p]}return a&&a.length!=c&&(a.length=c),a}function mL(i,t,e,n,r,s,a,o){o=o||[];const l=a[0],u=a[1];let h=0;for(let c=t;c<e;c+=n){const f=i[c]-l,d=i[c+1]-u;o[h++]=l+r*f,o[h++]=u+s*d;for(let g=c+2;g<c+n;++g)o[h++]=i[g]}return o&&o.length!=h&&(o.length=h),o}function yL(i,t,e,n,r,s,a){a=a||[];let o=0;for(let l=t;l<e;l+=n){a[o++]=i[l]+r,a[o++]=i[l+1]+s;for(let u=l+2;u<l+n;++u)a[o++]=i[u]}return a&&a.length!=o&&(a.length=o),a}const m_=zi();class _L extends Ui{constructor(){super(),this.extent_=Me(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=cM(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return X()}closestPointXY(t,e,n,r){return X()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return X()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Ma(e),this.extentRevision_=this.getRevision()}return MM(this.extent_,t)}rotate(t,e){X()}scale(t,e,n){X()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return X()}getType(){return X()}applyTransform(t){X()}intersectsExtent(t){return X()}translate(t,e){X()}transform(t,e){const n=Wt(t),r=n.getUnits()=="tile-pixels"?function(s,a,o){const l=n.getExtent(),u=n.getWorldExtent(),h=Vi(u)/Vi(l);return Xn(m_,u[0],u[3],h,-h,0,0,0),Vr(s,0,s.length,o,m_,a),Qo(n,e)(s,a,o)}:Qo(n,e);return this.applyTransform(r),this}}const rb=_L;class wL extends rb{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return zS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return X()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=y_(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){X()}setLayout(t,e,n){let r;if(t)r=y_(t);else{for(let s=0;s<n;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=xL(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();nb(n,0,n.length,r,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=Kn(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();mL(r,0,r.length,s,t,e,n,r),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();yL(n,0,n.length,r,t,e,n),this.changed()}}}function xL(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function y_(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function SL(i,t,e){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return Vr(n,0,n.length,r,t,e)}const ns=wL;function __(i,t,e,n,r,s,a){const o=i[t],l=i[t+1],u=i[e]-o,h=i[e+1]-l;let c;if(u===0&&h===0)c=t;else{const f=((r-o)*u+(s-l)*h)/(u*u+h*h);if(f>1)c=e;else if(f>0){for(let d=0;d<n;++d)a[d]=Ge(i[t+d],i[e+d],f);a.length=n;return}else c=t}for(let f=0;f<n;++f)a[f]=i[c+f];a.length=n}function Gv(i,t,e,n,r){let s=i[t],a=i[t+1];for(t+=n;t<e;t+=n){const o=i[t],l=i[t+1],u=Gr(s,a,o,l);u>r&&(r=u),s=o,a=l}return r}function $v(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];r=Gv(i,t,o,n,r),t=o}return r}function bL(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];r=$v(i,t,o,n,r),t=o[o.length-1]}return r}function Vv(i,t,e,n,r,s,a,o,l,u,h){if(t==e)return u;let c,f;if(r===0){if(f=Gr(a,o,i[t],i[t+1]),f<u){for(c=0;c<n;++c)l[c]=i[t+c];return l.length=n,f}return u}h=h||[NaN,NaN];let d=t+n;for(;d<e;)if(__(i,d-n,d,n,a,o,h),f=Gr(a,o,h[0],h[1]),f<u){for(u=f,c=0;c<n;++c)l[c]=h[c];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(u))/r|0,1);if(s&&(__(i,e-n,t,n,a,o,h),f=Gr(a,o,h[0],h[1]),f<u)){for(u=f,c=0;c<n;++c)l[c]=h[c];l.length=n}return u}function Wv(i,t,e,n,r,s,a,o,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=Vv(i,t,d,n,r,s,a,o,l,u,h),t=d}return u}function TL(i,t,e,n,r,s,a,o,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=Wv(i,t,d,n,r,s,a,o,l,u,h),t=d[d.length-1]}return u}function CL(i,t,e,n){for(let r=0,s=e.length;r<s;++r)i[t++]=e[r];return t}function Vc(i,t,e,n){for(let r=0,s=e.length;r<s;++r){const a=e[r];for(let o=0;o<n;++o)i[t++]=a[o]}return t}function Yv(i,t,e,n,r){r=r||[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=Vc(i,t,e[a],n);r[s++]=l,t=l}return r.length=s,r}function EL(i,t,e,n,r){r=r||[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=Yv(i,t,e[a],n,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function Hv(i,t,e,n,r,s,a){const o=(e-t)/n;if(o<3){for(;t<e;t+=n)s[a++]=i[t],s[a++]=i[t+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[t,e-n];let h=0;for(;u.length>0;){const c=u.pop(),f=u.pop();let d=0;const g=i[f],p=i[f+1],v=i[c],m=i[c+1];for(let y=f+n;y<c;y+=n){const _=i[y],w=i[y+1],S=PM(_,w,g,p,v,m);S>d&&(h=y,d=S)}d>r&&(l[(h-t)/n]=1,f+n<h&&u.push(f,h),h+n<c&&u.push(h,c))}for(let c=0;c<o;++c)l[c]&&(s[a++]=i[t+c*n],s[a++]=i[t+c*n+1]);return a}function IL(i,t,e,n,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l];a=Hv(i,t,h,n,r,s,a),o.push(a),t=h}return a}function Ir(i,t){return t*Math.round(i/t)}function AL(i,t,e,n,r,s,a){if(t==e)return a;let o=Ir(i[t],r),l=Ir(i[t+1],r);t+=n,s[a++]=o,s[a++]=l;let u,h;do if(u=Ir(i[t],r),h=Ir(i[t+1],r),t+=n,t==e)return s[a++]=u,s[a++]=h,a;while(u==o&&h==l);for(;t<e;){const c=Ir(i[t],r),f=Ir(i[t+1],r);if(t+=n,c==u&&f==h)continue;const d=u-o,g=h-l,p=c-o,v=f-l;if(d*v==g*p&&(d<0&&p<d||d==p||d>0&&p>d)&&(g<0&&v<g||g==v||g>0&&v>g)){u=c,h=f;continue}s[a++]=u,s[a++]=h,o=u,l=h,u=c,h=f}return s[a++]=u,s[a++]=h,a}function sb(i,t,e,n,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l];a=AL(i,t,h,n,r,s,a),o.push(a),t=h}return a}function RL(i,t,e,n,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l],c=[];a=sb(i,t,h,n,r,s,a,c),o.push(c),t=h[h.length-1]}return a}function zn(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let a=t;a<e;a+=n)r[s++]=i.slice(a,a+n);return r.length=s,r}function tl(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a];r[s++]=zn(i,t,l,n,r[s]),t=l}return r.length=s,r}function Bg(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a];r[s++]=l.length===1&&l[0]===t?[]:tl(i,t,l,n,r[s]),t=l[l.length-1]}return r.length=s,r}function ab(i,t,e,n){let r=0,s=i[e-n],a=i[e-n+1];for(;t<e;t+=n){const o=i[t],l=i[t+1];r+=a*o-s*l,s=o,a=l}return r/2}function ob(i,t,e,n){let r=0;for(let s=0,a=e.length;s<a;++s){const o=e[s];r+=ab(i,t,o,n),t=o}return r}function ML(i,t,e,n){let r=0;for(let s=0,a=e.length;s<a;++s){const o=e[s];r+=ob(i,t,o,n),t=o[o.length-1]}return r}class Gh extends ns{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Gh(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,r){return r<es(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))}getArea(){return ab(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Hv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Gh(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}const w_=Gh;let LL=class lb extends ns{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new lb(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){const s=this.flatCoordinates,a=Gr(t,e,s[0],s[1]);if(a<r){const o=this.stride;for(let l=0;l<o;++l)n[l]=s[l];return n.length=o,a}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return BS(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Mv(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=CL(this.flatCoordinates,0,t,this.stride),this.changed()}};const va=LL;function kL(i,t,e,n,r){return!VS(r,function(a){return!Pr(i,t,e,n,a[0],a[1])})}function Pr(i,t,e,n,r,s){let a=0,o=i[e-n],l=i[e-n+1];for(;t<e;t+=n){const u=i[t],h=i[t+1];l<=s?h>s&&(u-o)*(s-l)-(r-o)*(h-l)>0&&a++:h<=s&&(u-o)*(s-l)-(r-o)*(h-l)<0&&a--,o=u,l=h}return a!==0}function Uv(i,t,e,n,r,s){if(e.length===0||!Pr(i,t,e[0],n,r,s))return!1;for(let a=1,o=e.length;a<o;++a)if(Pr(i,e[a-1],e[a],n,r,s))return!1;return!0}function DL(i,t,e,n,r,s){if(e.length===0)return!1;for(let a=0,o=e.length;a<o;++a){const l=e[a];if(Uv(i,t,l,n,r,s))return!0;t=l[l.length-1]}return!1}function ub(i,t,e,n,r,s,a){let o,l,u,h,c,f,d;const g=r[s+1],p=[];for(let y=0,_=e.length;y<_;++y){const w=e[y];for(h=i[w-n],f=i[w-n+1],o=t;o<w;o+=n)c=i[o],d=i[o+1],(g<=f&&d<=g||f<=g&&g<=d)&&(u=(g-f)/(d-f)*(c-h)+h,p.push(u)),h=c,f=d}let v=NaN,m=-1/0;for(p.sort(jr),h=p[0],o=1,l=p.length;o<l;++o){c=p[o];const y=Math.abs(c-h);y>m&&(u=(h+c)/2,Uv(i,t,e,n,u,g)&&(v=u,m=y)),h=c}return isNaN(v)&&(v=r[s]),a?(a.push(v,g,m),a):[v,g,m]}function PL(i,t,e,n,r){let s=[];for(let a=0,o=e.length;a<o;++a){const l=e[a];s=ub(i,t,l,n,r,2*a,s),t=l[l.length-1]}return s}function hb(i,t,e,n,r){let s;for(t+=n;t<e;t+=n)if(s=r(i.slice(t-n,t),i.slice(t,t+n)),s)return s;return!1}function Wc(i,t,e,n,r){const s=$S(Me(),i,t,e,n);return Ce(r,s)?Ys(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:hb(i,t,e,n,function(a,o){return LM(r,a,o)}):!1}function OL(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s){if(Wc(i,t,e[s],n,r))return!0;t=e[s]}return!1}function cb(i,t,e,n,r){return!!(Wc(i,t,e,n,r)||Pr(i,t,e,n,r[0],r[1])||Pr(i,t,e,n,r[0],r[3])||Pr(i,t,e,n,r[2],r[1])||Pr(i,t,e,n,r[2],r[3]))}function fb(i,t,e,n,r){if(!cb(i,t,e[0],n,r))return!1;if(e.length===1)return!0;for(let s=1,a=e.length;s<a;++s)if(kL(i,e[s-1],e[s],n,r)&&!Wc(i,e[s-1],e[s],n,r))return!1;return!0}function FL(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];if(fb(i,t,o,n,r))return!0;t=o[o.length-1]}return!1}function NL(i,t,e,n){for(;t<e-n;){for(let r=0;r<n;++r){const s=i[t+r];i[t+r]=i[e-n+r],i[e-n+r]=s}t+=n,e-=n}}function db(i,t,e,n){let r=0,s=i[e-n],a=i[e-n+1];for(;t<e;t+=n){const o=i[t],l=i[t+1];r+=(o-s)*(l+a),s=o,a=l}return r===0?void 0:r>0}function gb(i,t,e,n,r){r=r!==void 0?r:!1;for(let s=0,a=e.length;s<a;++s){const o=e[s],l=db(i,t,o,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=o}return!0}function BL(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];if(!gb(i,t,o,n,r))return!1;o.length&&(t=o[o.length-1])}return!0}function zg(i,t,e,n,r){r=r!==void 0?r:!1;for(let s=0,a=e.length;s<a;++s){const o=e[s],l=db(i,t,o,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&NL(i,t,o,n),t=o}return t}function x_(i,t,e,n,r){for(let s=0,a=e.length;s<a;++s)t=zg(i,t,e[s],n,r);return t}let el=class Gg extends ns{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Gg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<es(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($v(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))}containsXY(t,e){return Uv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return ob(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),zg(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,tl(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Kn(this.getExtent());this.flatInteriorPoint_=ub(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new va(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new w_(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let a=0,o=n.length;a<o;++a){const l=n[a],u=new w_(e.slice(s,l),t);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;gb(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=zg(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=sb(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Gg(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return fb(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Yv(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}};function $g(i){if(Dl(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],n=i[2],r=i[3],s=[t,e,t,r,n,r,n,e,t,e];return new el(s,"XY",[s.length])}const Ff=0;class zL extends Ui{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Ov(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&rL(),t.center&&(t.center=nn(t.center,this.projection_)),t.extent&&(t.extent=Dr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in gi)delete e[o];this.setProperties(e,!0);const n=$L(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const r=GL(t),s=n.constraint,a=VL(t);this.constraints_={center:r,resolution:s,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const r=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),a=s/2*(r[3]-e[3]+e[1]-r[1]),o=s/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+a,n[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=nn(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=nn(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===e){n&&hu(n,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<e;++r){const h=arguments[r],c={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Ng,callback:n};if(h.center&&(c.sourceCenter=a,c.targetCenter=h.center.slice(),a=c.targetCenter),h.zoom!==void 0?(c.sourceResolution=o,c.targetResolution=this.getResolutionForZoom(h.zoom),o=c.targetResolution):h.resolution&&(c.sourceResolution=o,c.targetResolution=h.resolution,o=c.targetResolution),h.rotation!==void 0){c.sourceRotation=l;const f=$r(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+f,l=c.targetRotation}WL(c)?c.complete=!0:s+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(ne.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ne.ANIMATING]>0}getInteracting(){return this.hints_[ne.INTERACTING]>0}cancelAnimations(){this.setHint(ne.ANIMATING,-this.hints_[ne.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const r=this.animations_[e];if(r[0].callback&&hu(r[0].callback,!1),!t)for(let s=0,a=r.length;s<a;++s){const o=r[s];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l.complete)continue;const u=t-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const c=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const v=f+c*(g-f),m=d+c*(p-d);this.targetCenter_=[v,m]}if(l.sourceResolution&&l.targetResolution){const f=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=c===1?$r(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(ne.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&hu(a,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-e[0],r[1]-e[1]],Dv(n,t-this.getRotation()),KS(n,e)),n}calculateCenterZoom(t,e){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const a=e[0]-t*(e[0]-r[0])/s,o=e[1]-t*(e[1]-r[1])/s;n=[a,o]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Fg(t,this.getProjection())}getCenterInternal(){return this.get(gi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return eb(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();tt(e,1);const n=this.getResolution();tt(n!==void 0,2);const r=this.getRotation();return tt(r!==void 0,3),kg(e,n,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(gi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Dr(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Ct(t)/e[0],r=Vi(t)/e[1];return Math.max(n,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(e/n)/Math.log(t);return function(s){return e/Math.pow(t,s*r)}}getRotation(){return this.get(gi.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/e;return function(a){return Math.log(n/a)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();r=Nf(r,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],e,n)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,r;if(this.resolutions_){const s=Iv(this.resolutions_,t,1);e=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(n/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Vt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Vt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(tt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){tt(!Dl(t),25);const r=Dr(t,this.getProjection());n=$g(r)}else if(t.getType()==="Circle"){const r=Dr(t.getExtent(),this.getProjection());n=$g(r),n.rotate(this.getRotation(),Kn(r))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),s=t.getFlatCoordinates(),a=t.getStride();let o=1/0,l=1/0,u=-1/0,h=-1/0;for(let c=0,f=s.length;c<f;c+=a){const d=s[c]*n-s[c+1]*r,g=s[c]*r+s[c+1]*n;o=Math.min(o,d),l=Math.min(l,g),u=Math.max(u,d),h=Math.max(h,g)}return[o,l,u,h]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const r=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let a;e.minResolution!==void 0?a=e.minResolution:e.maxZoom!==void 0?a=this.getResolutionForZoom(e.maxZoom):a=0;const o=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(o,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),h=Math.sin(u),c=Math.cos(u),f=Kn(o);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const d=f[0]*c-f[1]*h,g=f[1]*c+f[0]*h,p=this.getConstrainedCenter([d,g],l),v=e.callback?e.callback:ga;e.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:e.duration,easing:e.easing},v):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),hu(v,!0))}centerOn(t,e,n){this.centerOnInternal(nn(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(Nf(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,r){let s;const a=this.padding_;if(a&&t){const o=this.getViewportSizeMinusPadding_(-n),l=Nf(t,r,[o[0]/2+a[3],o[1]/2+a[0]],e,n);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Fg(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&nn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=nn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&nn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,s,n),o=this.constraints_.center(this.targetCenter_,a,s,n,this.calculateCenterShift(this.targetCenter_,a,r,s));this.get(gi.ROTATION)!==r&&this.set(gi.ROTATION,r),this.get(gi.RESOLUTION)!==a&&(this.set(gi.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(gi.CENTER)||!zh(this.get(gi.CENTER),o))&&this.set(gi.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const r=e||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!zh(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:t,easing:La,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ne.INTERACTING,1)}endInteraction(t,e,n){n=n&&nn(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(ne.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function hu(i,t){setTimeout(function(){i(t)},0)}function GL(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return g_(i.extent,i.constrainOnlyCenter,e)}const t=Ov(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,g_(e,!1,!1)}return hL}function $L(i){let t,e,n,a=i.minZoom!==void 0?i.minZoom:Ff,o=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,c=i.showFullExtent!==void 0?i.showFullExtent:!1,f=Ov(i.projection,"EPSG:3857"),d=f.getExtent();let g=i.constrainOnlyCenter,p=i.extent;if(!u&&!p&&f.isGlobal()&&(g=!1,p=d),i.resolutions!==void 0){const v=i.resolutions;e=v[a],n=v[o]!==void 0?v[o]:v[v.length-1],i.constrainResolution?t=cL(v,h,!g&&p,c):t=p_(e,n,h,!g&&p,c)}else{const m=(d?Math.max(Ct(d),Vi(d)):360*Jo.degrees/f.getMetersPerUnit())/kv/Math.pow(2,Ff),y=m/Math.pow(2,28-Ff);e=i.maxResolution,e!==void 0?a=0:e=m/Math.pow(l,a),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(l,o):n=m/Math.pow(l,o):n=y),o=a+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,o-a),i.constrainResolution?t=fL(l,e,n,h,!g&&p,c):t=p_(e,n,h,!g&&p,c)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:a,zoomFactor:l}}function VL(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?gL():e===!1?v_:typeof e=="number"?dL(e):v_}return zv}function WL(i){return!(i.sourceCenter&&i.targetCenter&&!zh(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Nf(i,t,e,n,r){const s=Math.cos(-r);let a=Math.sin(-r),o=i[0]*s-i[1]*a,l=i[1]*s+i[0]*a;o+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,a=-a;const u=o*s-l*a,h=l*s+o*a;return[u,h]}const Mi=zL;let YL=class extends US{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(vt.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(vt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(It(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ot(t,q.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof Mi?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;e.layerStatesArray?r=e.layerStatesArray.find(a=>a.layer===this):r=this.getLayerState();const s=this.getExtent();return Xv(r,e.viewState)&&(!s||Ce(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const r=t instanceof Mi?t.getViewStateAndExtent():t;let s=e(r);return Array.isArray(s)||(s=[s]),s}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(vt.MAP,t)}getMapInternal(){return this.get(vt.MAP)}setMap(t){this.mapPrecomposeKey_&&(It(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(It(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ot(t,Gi.PRECOMPOSE,function(e){const r=e.frameState.layerStatesArray,s=this.getLayerState(!1);tt(!r.some(function(a){return a.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=ot(this,q.CHANGE,t.render,t),this.changed())}setSource(t){this.set(vt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Xv(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const Yc=YL;class HL extends Ev{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){X()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Xn(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Rv(r,n)}forEachFeatureAtCoordinate(t,e,n,r,s,a,o,l){let u;const h=e.viewState;function c(w,S,x,b){return s.call(a,S,w?x:null,b)}const f=h.projection,d=ZS(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&r){const w=f.getExtent(),S=Ct(w);g.push([-S,0],[S,0])}const p=e.layerStatesArray,v=p.length,m=[],y=[];for(let w=0;w<g.length;w++)for(let S=v-1;S>=0;--S){const x=p[S],b=x.layer;if(b.hasRenderer()&&Xv(x,h)&&o.call(l,b)){const T=b.getRenderer(),C=b.getSource();if(T&&C){const I=C.getWrapX()?d:t,E=c.bind(null,x.managed);y[0]=I[0]+g[w][0],y[1]=I[1]+g[w][1],u=T.forEachFeatureAtCoordinate(y,e,n,E,m)}if(u)return u}}if(m.length===0)return;const _=1/m.length;return m.forEach((w,S)=>w.distanceSq+=S*_),m.sort((w,S)=>w.distanceSq-S.distanceSq),m.some(w=>u=w.callback(w.feature,w.layer,w.geometry)),u}hasFeatureAtCoordinate(t,e,n,r,s,a){return this.forEachFeatureAtCoordinate(t,e,n,r,Zo,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(t){X()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Nh.canExpireCache()&&t.postRenderFunctions.push(UL)}}function UL(i,t){Nh.expire()}const XL=HL;class KL extends mn{constructor(t,e,n,r){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=r}}const pb=KL,cu="ol-hidden",Hc="ol-unselectable",Kv="ol-control",S_="ol-collapsed",jL=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),b_=["style","variant","weight","size","lineHeight","family"],vb=function(i){const t=i.match(jL);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=b_.length;n<r;++n){const s=t[n+1];s!==void 0&&(e[b_[n]]=s)}return e.families=e.family.split(/,\s?/),e};function me(i,t,e,n){let r;return e&&e.length?r=e.shift():Av?r=new OffscreenCanvas(i||300,t||300):r=document.createElement("canvas"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",n)}function Uc(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function T_(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function Vg(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function ZL(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function qL(i,t){const e=i.childNodes;for(let n=0;;++n){const r=e[n],s=t[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}const mb="10px sans-serif",be="#000",$h="round",hn=[],cn=0,ma="round",il=10,nl="#000",rl="center",Vh="middle",Or=[0,0,0,0],sl=1,rn=new Ui;let Os=null,Wg;const Yg={},JL=function(){const t="32px ",e=["monospace","serif"],n=e.length,r="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(u,h,c){let f=!0;for(let d=0;d<n;++d){const g=e[d];if(a=Wh(u+" "+h+" "+t+g,r),c!=g){const p=Wh(u+" "+h+" "+t+c+","+g,r);f=f&&p!=a}}return!!f}function l(){let u=!0;const h=rn.getKeys();for(let c=0,f=h.length;c<f;++c){const d=h[c];rn.get(d)<100&&(o.apply(this,d.split(`
`))?(kl(Yg),Os=null,Wg=void 0,rn.set(d,100)):(rn.set(d,rn.get(d)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const h=vb(u);if(!h)return;const c=h.families;for(let f=0,d=c.length;f<d;++f){const g=c[f],p=h.style+`
`+h.weight+`
`+g;rn.get(p)===void 0&&(rn.set(p,100,!0),o(h.style,h.weight,g)||(rn.set(p,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),QL=function(){let i;return function(t){let e=Yg[t];if(e==null){if(Av){const n=vb(t),r=yb(t,"Žg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);Yg[t]=e}return e}}();function yb(i,t){return Os||(Os=me(1,1)),i!=Wg&&(Os.font=i,Wg=Os.font),Os.measureText(t)}function Wh(i,t){return yb(i,t).width}function C_(i,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((r,s)=>Math.max(r,Wh(i,s)),0);return e[t]=n,n}function tk(i,t){const e=[],n=[],r=[];let s=0,a=0,o=0,l=0;for(let u=0,h=t.length;u<=h;u+=2){const c=t[u];if(c===`
`||u===h){s=Math.max(s,a),r.push(a),a=0,o+=l;continue}const f=t[u+1]||i.font,d=Wh(f,c);e.push(d),a+=d;const g=QL(f);n.push(g),l=Math.max(l,g)}return{width:s,height:o,widths:e,heights:n,lineWidths:r}}function ek(i,t,e,n,r,s,a,o,l,u,h){i.save(),e!==1&&(i.globalAlpha*=e),t&&i.setTransform.apply(i,t),n.contextInstructions?(i.translate(l,u),i.scale(h[0],h[1]),ik(n,i)):h[0]<0||h[1]<0?(i.translate(l,u),i.scale(h[0],h[1]),i.drawImage(n,r,s,a,o,0,0,a,o)):i.drawImage(n,r,s,a,o,l,u,a*h[0],o*h[1]),i.restore()}function ik(i,t){const e=i.contextInstructions;for(let n=0,r=e.length;n<r;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class nk extends XL{constructor(t){super(t),this.fontChangeListenerKey_=ot(rn,da.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Hc+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const r=new pb(t,void 0,e);n.dispatchEvent(r)}}disposeInternal(){It(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Gi.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(a,o){return a.zIndex-o.zIndex}),n=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let a=0,o=e.length;a<o;++a){const l=e[a];t.layerIndex=a;const u=l.layer,h=u.getSourceState();if(!Xv(l,n)||h!="ready"&&h!="undefined"){u.unrender();continue}const c=u.render(t,s);c&&(c!==s&&(this.children_.push(c),s=c),"getDeclutter"in u&&r.push(u))}this.flushDeclutterItems(t),qL(this.element_,this.children_),this.dispatchRenderEvent(Gi.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let n=e.length-1;n>=0;--n)e[n].renderDeclutter(t);e.length=0}}const rk=nk;class Nn extends mn{constructor(t,e){super(t),this.layer=e}}const Bf={LAYERS:"layers"};class jv extends US{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Bf.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Di(n.slice(),{unique:!0}):tt(typeof n.getArray=="function",43):n=new Di(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(It),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ot(t,Se.ADD,this.handleLayersAdd_,this),ot(t,Se.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(It);kl(this.listenerKeys_);const e=t.getArray();for(let n=0,r=e.length;n<r;n++){const s=e[n];this.registerLayerListeners_(s),this.dispatchEvent(new Nn("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[ot(t,da.PROPERTYCHANGE,this.handleLayerChange_,this),ot(t,q.CHANGE,this.handleLayerChange_,this)];t instanceof jv&&e.push(ot(t,"addlayer",this.handleLayerGroupAdd_,this),ot(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[lt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Nn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Nn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Nn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=lt(e);this.listenerKeys_[n].forEach(It),delete this.listenerKeys_[n],this.dispatchEvent(new Nn("removelayer",e)),this.changed()}getLayers(){return this.get(Bf.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new Nn("removelayer",n[r]))}this.set(Bf.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(e)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let a=n,o=e.length;a<o;a++){const l=e[a];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Io(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}}const Xc=jv;class sk extends mn{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const Fs=sk;class ak extends Fs{constructor(t,e,n,r,s,a){super(t,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Dn=ak,Ft={SINGLECLICK:"singleclick",CLICK:q.CLICK,DBLCLICK:q.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hg={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class ok extends Fc{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=ot(n,Hg.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ot(n,Hg.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(q.TOUCHMOVE,this.boundHandleTouchMove_,OS?{passive:!1}:!1)}emulateClick_(t){let e=new Dn(Ft.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Dn(Ft.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Dn(Ft.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==Ft.POINTERUP||e.type==Ft.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==Ft.POINTERDOWN||e.type==Ft.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Dn(Ft.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(It),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Dn(Ft.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ot(n,Ft.POINTERMOVE,this.handlePointerMove_,this),ot(n,Ft.POINTERUP,this.handlePointerUp_,this),ot(this.element_,Ft.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(ot(this.element_.getRootNode(),Ft.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Dn(Ft.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Dn(Ft.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(It(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(q.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(It(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(It),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const lk=ok,Pn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ie={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Yh=1/0;class uk{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,kl(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(t){tt(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Yh?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,r=e.length,s=e[t],a=n[t],o=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),h=u<r&&n[u]<n[l]?u:l;e[t]=e[h],n[t]=n[h],t=h}e[t]=s,n[t]=a,this.siftDown_(o,t)}siftDown_(t,e){const n=this.elements_,r=this.priorities_,s=n[e],a=r[e];for(;e>t;){const o=this.getParentIndex_(e);if(r[o]>a)n[e]=n[o],r[e]=r[o],e=o;else break}n[e]=s,r[e]=a}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let r=0;const s=e.length;let a,o,l;for(o=0;o<s;++o)a=e[o],l=t(a),l==Yh?delete this.queuedElements_[this.keyFunction_(a)]:(n[r]=l,e[r++]=a);e.length=r,n.length=r,this.heapify_()}}const hk=uk,V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ck extends hk{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(q.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===V.LOADED||n===V.ERROR||n===V.EMPTY){n!==V.ERROR&&e.removeEventListener(q.CHANGE,this.boundHandleTileChange_);const r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,r,s,a;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)s=this.dequeue()[0],a=s.getKey(),r=s.getState(),r===V.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++n,s.load())}}const fk=ck;function dk(i,t,e,n,r){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return Yh;const s=i.viewState.center,a=n[0]-s[0],o=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+o*o)/r}class gk extends Ui{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Vg(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Vg(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)It(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ga&&this.listenerKeys.push(ot(t,Pn.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Zv=gk;class pk extends Zv{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",a=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=t.label!==void 0?t.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(q.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+Hc+" "+Kv+(this.collapsed_&&this.collapsible_?" "+S_:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),n=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!tr(e,this.renderedAttributions_)){ZL(this.ulElement_);for(let r=0,s=e.length;r<s;++r){const a=document.createElement("li");a.innerHTML=e[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(S_),this.collapsed_?T_(this.collapseLabel_,this.label_):T_(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const _b=pk;class vk extends Zv{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(q.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+Hc+" "+Kv,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(cu)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:La}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(cu);!s&&n===0?this.element.classList.add(cu):s&&n!==0&&this.element.classList.remove(cu)}this.label_.style.transform=r}this.rotation_=n}}const mk=vk;class yk extends Zv{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",o=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(q.CLICK,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=u,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(q.CLICK,this.handleClick_.bind(this,-n),!1);const f=e+" "+Hc+" "+Kv,d=this.element;d.className=f,d.appendChild(h),d.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:La})):n.setZoom(s)}}}const _k=yk;function wk(i){i=i||{};const t=new Di;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new _k(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new mk(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new _b(i.attributionOptions)),t}const E_={ACTIVE:"active"};class xk extends Ui{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(E_.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(E_.ACTIVE,t)}setMap(t){this.map_=t}}function Sk(i,t,e){const n=i.getCenterInternal();if(n){const r=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:pL,center:i.getConstrainedCenter(r)})}}function qv(i,t,e,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+t),a=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:a,anchor:e,duration:n!==void 0?n:250,easing:La})}const Ol=xk;class bk extends Ol{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Ft.DBLCLICK){const n=t.originalEvent,r=t.map,s=t.coordinate,a=n.shiftKey?-this.delta_:this.delta_,o=r.getView();qv(o,a,s,this.duration_),n.preventDefault(),e=!0}return!e}}const Tk=bk;class Ck extends Ol{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ft.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ft.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Ft.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Ft.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Jv(i){const t=i.length;let e=0,n=0;for(let r=0;r<t;r++)e+=i[r].clientX,n+=i[r].clientY;return{clientX:e/t,clientY:n/t}}const Fl=Ck;function Ug(i){const t=arguments;return function(e){let n=!0;for(let r=0,s=t.length;r<s&&(n=n&&t[r](e),!!n);++r);return n}}const Ek=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Ik=function(i){const t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)},wb=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?Ik(i):!0},Ak=Zo,xb=function(i){const t=i.originalEvent;return t.button==0&&!(xM&&DS&&t.ctrlKey)},Sb=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Rk=function(i){const t=i.originalEvent;return DS?t.metaKey:t.ctrlKey},Mk=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},bb=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},zf=function(i){const t=i.originalEvent;return tt(t!==void 0,56),t.pointerType=="mouse"},Lk=function(i){const t=i.originalEvent;return tt(t!==void 0,56),t.isPrimary&&t.button===0};class kk extends Fl{constructor(t){super({stopDown:Oc}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Ug(Sb,Lk);this.condition_=t.onFocusOnly?Ug(wb,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,r=e.getEventPixel(Jv(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map.getView();jS(s,o.getResolution()),Dv(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(a),l=e.getCoordinateFromPixelInternal([o[0]-r*Math.cos(s),o[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:La})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const Dk=kk;class Pk extends Fl{constructor(t){t=t||{},super({stopDown:Oc}),this.condition_=t.condition?t.condition:Ek,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!zf(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===zv)return;const r=e.getSize(),s=t.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;n.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(t){return zf(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return zf(t)&&xb(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Ok=Pk;class Fk extends Ev{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new el([r])}getGeometry(){return this.geometry_}}const Nk=Fk,fu={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Gf extends mn{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class Bk extends Fl{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Nk(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:xb,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const r=n[0]-e[0],s=n[1]-e[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Gf(fu.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Gf(e?fu.BOXEND:fu.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gf(fu.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const zk=Bk;class Gk extends zk{constructor(t){t=t||{};const e=t.condition?t.condition:Mk;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),a=n.getResolutionForExtentInternal(s),o=n.getResolution()/a;r=r.clone(),r.scale(o*o)}n.fitInternal(r,{duration:this.duration_,easing:La})}}const $k=Gk,nr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Vk extends Ol{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Sb(e)&&bb(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==q.KEYDOWN){const n=t.originalEvent,r=n.key;if(this.condition_(t)&&(r==nr.DOWN||r==nr.LEFT||r==nr.RIGHT||r==nr.UP)){const a=t.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;r==nr.DOWN?u=-o:r==nr.LEFT?l=-o:r==nr.RIGHT?l=o:u=o;const h=[l,u];Dv(h,a.getRotation()),Sk(a,h,this.duration_),n.preventDefault(),e=!0}}return!e}}const Wk=Vk;class Yk extends Ol{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Rk(e)&&bb(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==q.KEYDOWN||t.type==q.KEYPRESS){const n=t.originalEvent,r=n.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,a=r==="+"?this.delta_:-this.delta_,o=s.getView();qv(o,a,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const Hk=Yk;class Uk{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[e]-this.points_[n],a=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Xk=Uk;class Kk extends Ol{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:Ak;this.condition_=t.onFocusOnly?Ug(wb,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==q.WHEEL)return!0;const n=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==q.WHEEL&&(s=r.deltaY,_M&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=PS),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=n.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Vt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),qv(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const jk=Kk;class Zk extends Fl{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Oc),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=s;const a=t.map,o=a.getView();o.getConstraints().rotation!==zv&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Jv(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const qk=Zk;class Jk extends Fl{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Oc),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,a=n.clientY-r.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(e=this.lastDistance_/o),this.lastDistance_=o;const l=t.map,u=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Jv(this.targetPointers))),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const Qk=Jk;function tD(i){i=i||{};const t=new Di,e=new Xk(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new Ok),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new Tk({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new Dk({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new qk),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new Qk({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new Wk),t.push(new Hk({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new jk({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new $k({duration:i.zoomDuration})),t}function I_(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]+2*t,e[1]=i[1]+2*t,e}function A_(i){return i[0]>0&&i[1]>0}function Tb(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Ie(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}function Cb(i){if(i instanceof Yc){i.setMapInternal(null);return}i instanceof Xc&&i.getLayers().forEach(Cb)}function Eb(i,t){if(i instanceof Yc){i.setMapInternal(t);return}if(i instanceof Xc){const e=i.getLayers().getArray();for(let n=0,r=e.length;n<r;++n)Eb(e[n],t)}}let eD=class extends Ui{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=iD(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:PS,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=zi(),this.pixelToCoordinateTransform_=zi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||wk(),this.interactions=e.interactions||tD({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new fk(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ie.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ie.VIEW,this.handleViewChanged_),this.addChangeListener(ie.SIZE,this.handleSizeChanged_),this.addChangeListener(ie.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof Mi)&&t.view.then(function(r){n.setView(new Mi(r))}),this.controls.addEventListener(Se.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Se.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Se.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Se.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Se.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Se.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Eb(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:Zo,o=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,o,e,null,a,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(r){n.push(r)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(r){r instanceof Xc?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const r=e.layerFilter!==void 0?e.layerFilter:Zo,s=e.hitTolerance!==void 0?e.hitTolerance:0,a=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,a,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],a=n.height/r[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-n.left)/s,(o.clientY-n.top)/a]}getTarget(){return this.get(ie.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Fg(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?jt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ie.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Di){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const r=t[e];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){const e=nn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?jt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ie.SIZE)}getView(){return this.get(ie.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,r){return dk(this.frameState_,t,e,n,r)}handleBrowserEvent(t,e){e=e||t.type;const n=new Dn(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===Hg.POINTERDOWN||n===q.WHEEL||n===q.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=e.target;if(this.overlayContainerStopEvent_.contains(a)||!(s===r?r.documentElement:s).contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const a=t.viewHints;if(a[ne.ANIMATING]||a[ne.INTERACTING]){const o=Date.now()-t.time>8;r=o?0:8,s=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Gi.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Gi.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Fs(Pn.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Fs(Pn.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let r=0,s=n.length;r<s;++r)n[r](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)It(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(q.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Vg(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new rk(this)),this.mapBrowserEventHandler_=new lk(this,this.moveTolerance_);for(const s in Ft)this.mapBrowserEventHandler_.addEventListener(Ft[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(q.WHEEL,this.boundHandleBrowserEvent_,OS?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[ot(n,q.KEYDOWN,this.handleBrowserEvent,this),ot(n,q.KEYPRESS,this.handleBrowserEvent,this)];const r=e.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(It(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(It(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ot(t,da.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ot(t,q.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(It),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Nn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ot(t,da.PROPERTYCHANGE,this.render,this),ot(t,q.CHANGE,this.render,this),ot(t,"addlayer",this.handleLayerAdd_,this),ot(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Cb(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(e!==void 0&&A_(e)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:kg(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:lt(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=kg(o.nextCenter,o.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Dl(this.previousExtent_)&&!qo(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Fs(Pn.MOVESTART,this,r)),this.previousExtent_=Ma(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ne.ANIMATING]&&!s.viewHints[ne.INTERACTING]&&!qo(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Fs(Pn.MOVEEND,this,s)),NS(s.extent,this.previousExtent_))),this.dispatchEvent(new Fs(Pn.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Pn.LOADSTART)||this.hasListener(Pn.LOADEND)||this.hasListener(Gi.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Nn("removelayer",e)),this.set(ie.LAYERGROUP,t)}setSize(t){this.set(ie.SIZE,t)}setTarget(t){this.set(ie.TARGET,t)}setView(t){if(!t||t instanceof Mi){this.set(ie.VIEW,t);return}this.set(ie.VIEW,new Mi);const e=this;t.then(function(n){e.setView(new Mi(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(e=[s,a],!A_(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&JS("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!tr(e,n))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}};function iD(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Xc({layers:i.layers});e[ie.LAYERGROUP]=n,e[ie.TARGET]=i.target,e[ie.VIEW]=i.view instanceof Mi?i.view:new Mi;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new Di(i.controls.slice()):(tt(typeof i.controls.getArray=="function",47),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new Di(i.interactions.slice()):(tt(typeof i.interactions.getArray=="function",48),s=i.interactions));let a;return i.overlays!==void 0?Array.isArray(i.overlays)?a=new Di(i.overlays.slice()):(tt(typeof i.overlays.getArray=="function",49),a=i.overlays):a=new Di,{controls:r,interactions:s,keyboardEventTarget:t,overlays:a,values:e}}const nD=eD,du={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class rD extends Yc{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(du.PRELOAD)}setPreload(t){this.set(du.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(du.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(du.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const sD=rD,Nt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class aD extends LS{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return X()}getData(t){return null}prepareFrame(t){return X()}renderFrame(t,e){return X()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(r,s)=>{const a=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,s,a)}}forEachFeatureAtCoordinate(t,e,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===Nt.LOADED||e.getState()===Nt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Nt.LOADED&&e!=Nt.ERROR&&t.addEventListener(q.CHANGE,this.boundHandleImageChange_),e==Nt.IDLE&&(t.load(),e=t.getState()),e==Nt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const oD=aD,R_=[];let Ns=null;function lD(){Ns=me(1,1,void 0,{willReadFrequently:!0})}class uD extends oD{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=zi(),this.pixelTransform=zi(),this.inversePixelTransform=zi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){Ns||lD(),Ns.clearRect(0,0,1,1);let r;try{Ns.drawImage(t,e,n,1,1,0,0,1,1),r=Ns.getImageData(0,0,1,1).data}catch{return Ns=null,null}return r}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const r=this.getLayer().getClassName();let s,a;if(t&&t.className===r&&(!n||t&&t.style.backgroundColor&&tr(Fh(t.style.backgroundColor),Fh(n)))){const o=t.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===e?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=me();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const r=is(n),s=$c(n),a=Gc(n),o=zc(n);jt(e.coordinateToPixelTransform,r),jt(e.coordinateToPixelTransform,s),jt(e.coordinateToPixelTransform,a),jt(e.coordinateToPixelTransform,o);const l=this.inversePixelTransform;jt(l,r),jt(l,s),jt(l,a),jt(l,o),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,n){const r=this.getLayer();if(r.hasListener(t)){const s=new pb(t,this.inversePixelTransform,n,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Gi.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Gi.POSTRENDER,t,e)}getRenderTransform(t,e,n,r,s,a,o){const l=s/2,u=a/2,h=r/e,c=-h,f=-t[0]+o,d=-t[1];return Xn(this.tempTransform,l,u,h,c,-n,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Ib=uD;class hD extends Fc{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(q.CHANGE)}release(){this.state===V.ERROR&&this.setState(V.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==V.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==V.LOADED){t.interimTile=null;break}else t.getState()==V.LOADING?e=t:t.getState()==V.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==V.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){X()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const r=e-n+1e3/60;return r>=this.transition_?1:ib(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Ab=hD;function Rb(i,t,e){const n=i;let r=!0,s=!1,a=!1;const o=[Oh(n,q.LOAD,function(){a=!0,s||t()})];return n.src&&SM?(s=!0,n.decode().then(function(){r&&t()}).catch(function(l){r&&(a?t():e())})):o.push(Oh(n,q.ERROR,e)),function(){r=!1,o.forEach(It)}}class cD extends Ab{constructor(t,e,n,r,s,a){super(t,e,a),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=V.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=V.ERROR,this.unlistenImage_(),this.image_=fD(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=V.LOADED:this.state=V.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==V.ERROR&&(this.state=V.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==V.IDLE&&(this.state=V.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Rb(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function fD(){const i=me(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const Mb=cD,dD=.5,gD=10,M_=.25;class pD{constructor(t,e,n,r,s,a){this.sourceProj_=t,this.targetProj_=e;let o={};const l=Qo(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const _=y[0]+"/"+y[1];return o[_]||(o[_]=l(y)),o[_]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ct(r)>=Ct(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ct(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ct(this.targetProj_.getExtent()):null;const u=is(n),h=$c(n),c=Gc(n),f=zc(n),d=this.transformInv_(u),g=this.transformInv_(h),p=this.transformInv_(c),v=this.transformInv_(f),m=gD+(a?Math.max(0,Math.ceil(Math.log2(Lg(n)/(a*a*256*256)))):0);if(this.addQuad_(u,h,c,f,d,g,p,v,m),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(_,w,S){y=Math.min(y,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(_=>{if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-y>this.sourceWorldWidth_/2){const w=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];w[0][0]-y>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-y>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-y>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const S=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-S<this.sourceWorldWidth_/2&&(_.source=w)}})}o={}}addTriangle_(t,e,n,r,s,a){this.triangles_.push({source:[r,s,a],target:[t,e,n]})}addQuad_(t,e,n,r,s,a,o,l,u){const h=s_([s,a,o,l]),c=this.sourceWorldWidth_?Ct(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=s_([t,e,n,r]);g=Ct(v)/this.targetWorldWidth_>M_||g}!d&&this.sourceProj_.isGlobal()&&c&&(g=c>M_||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ce(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!g){const v=[(t[0]+n[0])/2,(t[1]+n[1])/2],m=this.transformInv_(v);let y;d?y=($r(s[0],f)+$r(o[0],f))/2-$r(m[0],f):y=(s[0]+o[0])/2-m[0];const _=(s[1]+o[1])/2-m[1];g=y*y+_*_>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const v=[(e[0]+n[0])/2,(e[1]+n[1])/2],m=this.transformInv_(v),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],_=this.transformInv_(y);this.addQuad_(t,e,v,y,s,a,m,_,u-1),this.addQuad_(y,v,n,r,_,m,o,l,u-1)}else{const v=[(t[0]+e[0])/2,(t[1]+e[1])/2],m=this.transformInv_(v),y=[(n[0]+r[0])/2,(n[1]+r[1])/2],_=this.transformInv_(y);this.addQuad_(t,v,y,r,s,m,_,l,u-1),this.addQuad_(v,e,n,y,m,a,o,_,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(t,n,r,s,o,l),p&14||this.addTriangle_(t,n,e,s,o,a),p&&(p&13||this.addTriangle_(e,r,t,a,l,s),p&7||this.addTriangle_(e,r,n,a,l,o))}calculateSourceExtent(){const t=Me();return this.triangles_.forEach(function(e,n,r){const s=e.source;Eo(t,s[0]),Eo(t,s[1]),Eo(t,s[2])}),t}getTriangles(){return this.triangles_}}const vD=pD;let $f;const ea=[];function L_(i,t,e,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,r)),i.restore()}function Vf(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function mD(){if($f===void 0){const i=me(6,6,ea);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",L_(i,4,5,4,0),L_(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;$f=Vf(t,0)||Vf(t,4)||Vf(t,8),Uc(i),ea.push(i.canvas)}return $f}function Xg(i,t,e,n){const r=tb(e,t,i);let s=f_(t,n,e);const a=t.getMetersPerUnit();a!==void 0&&(s*=a);const o=i.getMetersPerUnit();o!==void 0&&(s/=o);const l=i.getExtent();if(!l||Bc(l,r)){const u=f_(i,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function yD(i,t,e,n){const r=Kn(e);let s=Xg(i,t,r,n);return(!isFinite(s)||s<=0)&&VS(e,function(a){return s=Xg(i,t,a,n),isFinite(s)&&s>0}),s}function _D(i,t,e,n,r,s,a,o,l,u,h,c){const f=me(Math.round(e*i),Math.round(e*t),ea);if(c||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(e,e);function d(w){return Math.round(w*e)/e}f.globalCompositeOperation="lighter";const g=Me();l.forEach(function(w,S,x){GS(g,w.extent)});const p=Ct(g),v=Vi(g),m=me(Math.round(e*p/n),Math.round(e*v/n),ea);c||(m.imageSmoothingEnabled=!1);const y=e/n;l.forEach(function(w,S,x){const b=w.extent[0]-g[0],T=-(w.extent[3]-g[3]),C=Ct(w.extent),I=Vi(w.extent);w.image.width>0&&w.image.height>0&&m.drawImage(w.image,u,u,w.image.width-2*u,w.image.height-2*u,b*y,T*y,C*y,I*y)});const _=is(a);return o.getTriangles().forEach(function(w,S,x){const b=w.source,T=w.target;let C=b[0][0],I=b[0][1],E=b[1][0],R=b[1][1],M=b[2][0],k=b[2][1];const L=d((T[0][0]-_[0])/s),D=d(-(T[0][1]-_[1])/s),O=d((T[1][0]-_[0])/s),F=d(-(T[1][1]-_[1])/s),B=d((T[2][0]-_[0])/s),G=d(-(T[2][1]-_[1])/s),K=C,P=I;C=0,I=0,E-=K,R-=P,M-=K,k-=P;const ct=[[E,R,0,0,O-L],[M,k,0,0,B-L],[0,0,E,R,F-D],[0,0,M,k,G-D]],Z=OM(ct);if(Z){if(f.save(),f.beginPath(),mD()||!c){f.moveTo(O,F);const st=4,Qt=L-O,Xt=D-F;for(let Rt=0;Rt<st;Rt++)f.lineTo(O+d((Rt+1)*Qt/st),F+d(Rt*Xt/(st-1))),Rt!=st-1&&f.lineTo(O+d((Rt+1)*Qt/st),F+d((Rt+1)*Xt/(st-1)));f.lineTo(B,G)}else f.moveTo(O,F),f.lineTo(L,D),f.lineTo(B,G);f.clip(),f.transform(Z[0],Z[2],Z[1],Z[3],L,D),f.translate(g[0]-K,g[3]-P),f.scale(n/e,-n/e),f.drawImage(m.canvas,0,0),f.restore()}}),Uc(m),ea.push(m.canvas),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,o.getTriangles().forEach(function(w,S,x){const b=w.target,T=(b[0][0]-_[0])/s,C=-(b[0][1]-_[1])/s,I=(b[1][0]-_[0])/s,E=-(b[1][1]-_[1])/s,R=(b[2][0]-_[0])/s,M=-(b[2][1]-_[1])/s;f.beginPath(),f.moveTo(I,E),f.lineTo(T,C),f.lineTo(R,M),f.closePath(),f.stroke()}),f.restore()),f.canvas}class wD extends Ab{constructor(t,e,n,r,s,a,o,l,u,h,c,f){super(s,V.IDLE,{interpolate:!!f}),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const v=g?Io(d,g):d;if(Lg(v)===0){this.state=V.EMPTY;return}const m=t.getExtent();m&&(p?p=Io(p,m):p=m);const y=r.getResolution(this.wrappedTileCoord_[0]),_=yD(t,n,v,y);if(!isFinite(_)||_<=0){this.state=V.EMPTY;return}const w=h!==void 0?h:dD;if(this.triangulation_=new vD(t,n,v,p,_*w,y),this.triangulation_.getTriangles().length===0){this.state=V.EMPTY;return}this.sourceZ_=e.getZForResolution(_);let S=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(S[1]=Vt(S[1],p[1],p[3]),S[3]=Vt(S[3],p[1],p[3])):S=Io(S,p)),!Lg(S))this.state=V.EMPTY;else{const x=e.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let b=x.minX;b<=x.maxX;b++)for(let T=x.minY;T<=x.maxY;T++){const C=u(this.sourceZ_,b,T,o);C&&this.sourceTiles_.push(C)}this.sourceTiles_.length===0&&(this.state=V.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==V.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=V.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=_D(r,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=V.LOADED}this.changed()}load(){if(this.state==V.IDLE){this.state=V.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const n=e.getState();if(n==V.IDLE||n==V.LOADING){t++;const r=ot(e,q.CHANGE,function(s){const a=e.getState();(a==V.LOADED||a==V.ERROR||a==V.EMPTY)&&(It(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,r){e.getState()==V.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(It),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Uc(this.canvas_.getContext("2d")),ea.push(this.canvas_),this.canvas_=null),super.release()}}const Kg=wD;class Lb{constructor(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function vs(i,t,e,n,r){return r!==void 0?(r.minX=i,r.maxX=t,r.minY=e,r.maxY=n,r):new Lb(i,t,e,n)}const kb=Lb;class xD extends Ib{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Me(),this.tmpTileRange_=new kb(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==V.LOADED||n==V.EMPTY||n==V.ERROR&&!r}getTile(t,e,n,r){const s=r.pixelRatio,a=r.viewState.projection,o=this.getLayer();let u=o.getSource().getTile(t,e,n,s,a);return u.getState()==V.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),r=jt(e.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!Bc(s,r))return null;const a=e.pixelRatio,o=e.viewState.projection,l=e.viewState,u=n.getRenderSource(),h=u.getTileGridForProjection(l.projection),c=u.getTilePixelRatio(e.pixelRatio);for(let f=h.getZForResolution(l.resolution);f>=h.getMinZoom();--f){const d=h.getTileCoordForCoordAndZ(r,f),g=u.getTile(f,d[1],d[2],a,o);if(!(g instanceof Mb||g instanceof Kg)||g instanceof Kg&&g.getState()===V.EMPTY)return null;if(g.getState()!==V.LOADED)continue;const p=h.getOrigin(f),v=Ie(h.getTileSize(f)),m=h.getResolution(f),y=Math.floor(c*((r[0]-p[0])/m-d[1]*v[0])),_=Math.floor(c*((p[1]-r[1])/m-d[2]*v[1])),w=Math.round(c*u.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+w,_+w)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,a=r.resolution,o=r.center,l=r.rotation,u=t.pixelRatio,h=this.getLayer(),c=h.getSource(),f=c.getRevision(),d=c.getTileGridForProjection(s),g=d.getZForResolution(a,c.zDirection),p=d.getResolution(g);let v=t.extent;const m=t.viewState.resolution,y=c.getTilePixelRatio(u),_=Math.round(Ct(v)/m*u),w=Math.round(Vi(v)/m*u),S=n.extent&&Dr(n.extent);S&&(v=Io(v,Dr(n.extent)));const x=p*_/2/y,b=p*w/2/y,T=[o[0]-x,o[1]-b,o[0]+x,o[1]+b],C=d.getTileRangeForExtentAndZ(v,g),I={};I[g]={};const E=this.createLoadedTileFinder(c,s,I),R=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const k=l?Dg(r.center,m,l,t.size):void 0;for(let ct=C.minX;ct<=C.maxX;++ct)for(let Z=C.minY;Z<=C.maxY;++Z){if(l&&!d.tileCoordIntersectsViewport([g,ct,Z],k))continue;const st=this.getTile(g,ct,Z,t);if(this.isDrawableTile(st)){const Rt=lt(this);if(st.getState()==V.LOADED){I[g][st.tileCoord.toString()]=st;let Dt=st.inTransition(Rt);Dt&&n.opacity!==1&&(st.endTransition(Rt),Dt=!1),!this.newTiles_&&(Dt||!this.renderedTiles.includes(st))&&(this.newTiles_=!0)}if(st.getAlpha(Rt,t.time)===1)continue}const Qt=d.getTileCoordChildTileRange(st.tileCoord,M,R);let Xt=!1;Qt&&(Xt=E(g+1,Qt)),Xt||d.forEachTileCoordParentTileRange(st.tileCoord,E,M,R)}const L=p/a*u/y;Xn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,l,-_/2,-w/2);const D=FS(this.pixelTransform);this.useContainer(e,D,this.getBackground(t));const O=this.context,F=O.canvas;Rv(this.inversePixelTransform,this.pixelTransform),Xn(this.tempTransform,_/2,w/2,L,L,0,-_/2,-w/2),F.width!=_||F.height!=w?(F.width=_,F.height=w):this.containerReused||O.clearRect(0,0,_,w),S&&this.clipUnrotated(O,t,S),c.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,t),this.renderedTiles.length=0;let B=Object.keys(I).map(Number);B.sort(jr);let G,K,P;n.opacity===1&&(!this.containerReused||c.getOpaque(t.viewState.projection))?B=B.reverse():(G=[],K=[]);for(let ct=B.length-1;ct>=0;--ct){const Z=B[ct],st=c.getTilePixelSize(Z,u,s),Xt=d.getResolution(Z)/p,Rt=st[0]*Xt*L,Dt=st[1]*Xt*L,Mt=d.getTileCoordForCoordAndZ(is(T),Z),U=d.getTileCoordExtent(Mt),J=jt(this.tempTransform,[y*(U[0]-T[0])/p,y*(T[3]-U[3])/p]),Ye=y*c.getGutterForProjection(s),Lt=I[Z];for(const xn in Lt){const fi=Lt[xn],Zl=fi.tileCoord,ql=Mt[1]-Zl[1],Jl=Math.round(J[0]-(ql-1)*Rt),os=Mt[2]-Zl[2],bf=Math.round(J[1]-(os-1)*Dt),ye=Math.round(J[0]-ql*Rt),He=Math.round(J[1]-os*Dt),di=Jl-ye,ji=bf-He,ls=g===Z,er=ls&&fi.getAlpha(lt(this),t.time)!==1;let Sn=!1;if(!er)if(G){P=[ye,He,ye+di,He,ye+di,He+ji,ye,He+ji];for(let us=0,Ql=G.length;us<Ql;++us)if(g!==Z&&Z<K[us]){const he=G[us];Ce([ye,He,ye+di,He+ji],[he[0],he[3],he[4],he[7]])&&(Sn||(O.save(),Sn=!0),O.beginPath(),O.moveTo(P[0],P[1]),O.lineTo(P[2],P[3]),O.lineTo(P[4],P[5]),O.lineTo(P[6],P[7]),O.moveTo(he[6],he[7]),O.lineTo(he[4],he[5]),O.lineTo(he[2],he[3]),O.lineTo(he[0],he[1]),O.clip())}G.push(P),K.push(Z)}else O.clearRect(ye,He,di,ji);this.drawTileImage(fi,t,ye,He,di,ji,Ye,ls),G&&!er?(Sn&&O.restore(),this.renderedTiles.unshift(fi)):this.renderedTiles.push(fi),this.updateUsedTiles(t.usedTiles,c,fi)}}return this.renderedRevision=f,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!qo(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(t,c,d,u,s,v,g,h.getPreload()),this.scheduleExpireCache(t,c),this.postRender(O,t),n.extent&&O.restore(),O.imageSmoothingEnabled=!0,D!==F.style.transform&&(F.style.transform=D),this.container}drawTileImage(t,e,n,r,s,a,o,l){const u=this.getTileImage(t);if(!u)return;const h=lt(this),c=e.layerStatesArray[e.layerIndex],f=c.opacity*(l?t.getAlpha(h,e.time):1),d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,o,o,u.width-2*o,u.height-2*o,n,r,s,a),d&&this.context.restore(),f!==c.opacity?e.animate=!0:l&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=(function(r,s,a){const o=lt(r);o in a.usedTiles&&r.expireCache(a.viewState.projection,a.usedTiles[o])}).bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const r=lt(e);r in t||(t[r]={}),t[r][n.getKey()]=!0}manageTilePyramid(t,e,n,r,s,a,o,l,u){const h=lt(e);h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],f=t.tileQueue,d=n.getMinZoom(),g=t.viewState.rotation,p=g?Dg(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let v=0,m,y,_,w,S,x;for(x=d;x<=o;++x)for(y=n.getTileRangeForExtentAndZ(a,x,y),_=n.getResolution(x),w=y.minX;w<=y.maxX;++w)for(S=y.minY;S<=y.maxY;++S)g&&!n.tileCoordIntersectsViewport([x,w,S],p)||(o-x<=l?(++v,m=e.getTile(x,w,S,r,s),m.getState()==V.IDLE&&(c[m.getKey()]=!0,f.isKeyQueued(m.getKey())||f.enqueue([m,h,n.getTileCoordCenter(m.tileCoord),_])),u!==void 0&&u(m)):e.useTile(x,w,S,s));e.updateCacheSize(v,s)}}const SD=xD;class bD extends sD{constructor(t){super(t)}createRenderer(){return new SD(this)}}const jg=bD;class TD{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return tt(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return tt(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){tt(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const CD=TD;function k_(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function Kc(i,t,e){return i+"/"+t+"/"+e}function Db(i){return Kc(i[0],i[1],i[2])}function ED(i){return i.split("/").map(Number)}function Pb(i){return(i[1]<<i[0])+i[2]}function ID(i,t){const e=i[0],n=i[1],r=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(n,r):!0}class AD extends CD{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=ED(t)[0];this.forEach(r=>{r.tileCoord[0]!==n&&(this.remove(Db(r.tileCoord)),r.release())})}}const Ob=AD,Wf={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class RD extends Ui{constructor(t){super(),this.projection=Wt(t.projection),this.attributions_=D_(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,r){e.viewResolver=n,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=D_(t),this.changed()}setState(t){this.state_=t,this.changed()}}function D_(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const Fb=RD,ms=[0,0,0],bn=5;class MD{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,tt(hM(this.resolutions_,function(r,s){return s-r},!0),17);let e;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,tt(this.origins_.length==this.resolutions_.length,20));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=is(n)),tt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,tt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:kv,tt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const a=new kb(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const o=this.getTileRangeForExtentAndZ(n,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const r=this.getTileRangeForExtentAndZ(t,e);for(let s=r.minX,a=r.maxX;s<=a;++s)for(let o=r.minY,l=r.maxY;o<=l;++o)n([e,s,o])}forEachTileCoordParentTileRange(t,e,n,r){let s,a,o,l=null,u=t[0]-1;for(this.zoomFactor_===2?(a=t[1],o=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),o=Math.floor(o/2),s=vs(a,a,o,o,n)):s=this.getTileRangeForExtentAndZ(l,u,n),e(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,a=t[2]*2;return vs(s,s+1,a,a+1,e)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],a=t[2];if(e===r)return vs(s,a,s,a,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-r),u=Math.floor(s*l),h=Math.floor(a*l);if(e<r)return vs(u,u,h,h,n);const c=Math.floor(l*(s+1))-1,f=Math.floor(l*(a+1))-1;return vs(u,c,h,f,n)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,ms);const r=ms[1],s=ms[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,ms);const a=ms[1],o=ms[2];return vs(r,a,s,o,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Ie(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ie(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*s[0]*r,o=n[1]-(t[2]+1)*s[1]*r,l=a+s[0]*r,u=o+s[1]*r;return gn(a,o,l,u,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,r,s){const a=this.getZForResolution(n),o=n/this.getResolution(a),l=this.getOrigin(a),u=Ie(this.getTileSize(a),this.tmpSize_);let h=o*(t-l[0])/n/u[0],c=o*(l[1]-e)/n/u[1];return r?(h=lu(h,bn)-1,c=lu(c,bn)-1):(h=ou(h,bn),c=ou(c,bn)),k_(a,h,c,s)}getTileCoordForXYAndZ_(t,e,n,r,s){const a=this.getOrigin(n),o=this.getResolution(n),l=Ie(this.getTileSize(n),this.tmpSize_);let u=(t-a[0])/o/l[0],h=(a[1]-e)/o/l[1];return r?(u=lu(u,bn)-1,h=lu(h,bn)-1):(u=ou(u,bn),h=ou(h,bn)),k_(n,u,h,s)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=Iv(this.resolutions_,t,e||0);return Vt(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return cb(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n}}const Nb=MD;function Bb(i){let t=i.getDefaultTileGrid();return t||(t=PD(i),i.setDefaultTileGrid(t)),t}function LD(i,t,e){const n=t[0],r=i.getTileCoordCenter(t),s=Qv(e);if(!Bc(s,r)){const a=Ct(s),o=Math.ceil((s[0]-r[0])/a);return r[0]+=a*o,i.getTileCoordForCoordAndZ(r,n)}return t}function kD(i,t,e,n){n=n!==void 0?n:"top-left";const r=zb(i,t,e);return new Nb({extent:i,origin:RM(i,n),resolutions:r,tileSize:e})}function DD(i){const t=i||{},e=t.extent||Wt("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:zb(e,t.maxZoom,t.tileSize,t.maxResolution)};return new Nb(n)}function zb(i,t,e,n){t=t!==void 0?t:WM,e=Ie(e!==void 0?e:kv);const r=Vi(i),s=Ct(i);n=n>0?n:Math.max(s/e[0],r/e[1]);const a=t+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=n/Math.pow(2,l);return o}function PD(i,t,e,n){const r=Qv(i);return kD(r,t,e,n)}function Qv(i){i=Wt(i);let t=i.getExtent();if(!t){const e=180*Jo.degrees/i.getMetersPerUnit();t=gn(-e,-e,e,e)}return t}class OD extends Fb{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Ie(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Ob(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let a=!0,o,l,u;for(let h=n.minX;h<=n.maxX;++h)for(let c=n.minY;c<=n.maxY;++c)l=Kc(e,h,c),u=!1,s.containsKey(l)&&(o=s.get(l),u=o.getState()===V.LOADED,u&&(u=r(o)!==!1)),u||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,r,s){return X()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Bb(t)}getTileCacheForProjection(t){const e=this.getProjection();return tt(e===null||Rr(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),a=Ie(r.getTileSize(t),this.tmpSize);return s==1?a:Tb(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=LD(n,t,e)),ID(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,r){}}class FD extends mn{constructor(t,e){super(t),this.tile=e}}const ND=OD;function BD(i,t){const e=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(a,o,l){if(a)return i.replace(e,a[0].toString()).replace(n,a[1].toString()).replace(r,a[2].toString()).replace(s,function(){const u=a[0],h=t.getFullTileRange(u);return tt(h,55),(h.getHeight()-a[2]-1).toString()})}}function zD(i,t){const e=i.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=BD(i[r],t);return GD(n)}function GD(i){return i.length===1?i[0]:function(t,e,n){if(!t)return;const r=Pb(t),s=$r(r,i.length);return i[s](t,e,n)}}function $D(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),r=e[2].charCodeAt(0);let s;for(s=n;s<=r;++s)t.push(i.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=n;r++)t.push(i.replace(e[0],r.toString()));return t}return t.push(i),t}class tm extends ND{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===tm.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=lt(e),r=e.getState();let s;r==V.LOADING?(this.tileLoadingKeys_[n]=!0,s=Wf.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==V.ERROR?Wf.TILELOADERROR:r==V.LOADED?Wf.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new FD(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=$D(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(zD(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const r=Kc(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const VD=tm;class WD extends VD{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:YD,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Mb,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Rr(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Rr(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Rr(e,t)))return this.tileGrid;const n=lt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Bb(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Rr(e,t))return this.tileCache;const n=lt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ob(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,r,s,a){const o=[t,e,n],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(o,u!==void 0?V.IDLE:V.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(q.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,r,s){const a=this.getProjection();if(!a||!s||Rr(a,s))return this.getTileInternal(t,e,n,r,a||s);const o=this.getTileCacheForProjection(s),l=[t,e,n];let u;const h=Db(l);o.containsKey(h)&&(u=o.get(h));const c=this.getKey();if(u&&u.key==c)return u;const f=this.getTileGridForProjection(a),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new Kg(a,f,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(v,m,y,_)=>this.getTileInternal(v,m,y,_,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return p.key=c,u?(p.interimTile=u,p.refreshInterimChain(),o.replace(h,p)):o.set(h,p),p}getTileInternal(t,e,n,r,s){let a=null;const o=Kc(t,e,n),l=this.getKey();if(!this.tileCache.containsKey(o))a=this.createTile_(t,e,n,r,s,l),this.tileCache.set(o,a);else if(a=this.tileCache.get(o),a.key!=l){const u=a;a=this.createTile_(t,e,n,r,s,l),u.getState()==V.IDLE?a.interimTile=u.interimTile:a.interimTile=u,a.refreshInterimChain(),this.tileCache.replace(o,a)}return a}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=Wt(t);if(n){const r=lt(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function YD(i,t){i.getImage().src=t}const Gb=WD,gu="1.3.0";function P_(i,t){const e=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&e.push(r+"="+encodeURIComponent(t[r]))});const n=e.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}class HD extends Gb{constructor(t){t=t||{};const e=Object.assign({},t.params),n="TRANSPARENT"in e?e.TRANSPARENT:!0;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Me(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,r){const s=Wt(n),a=this.getProjection();let o=this.getTileGrid();o||(o=this.getTileGridForProjection(s));const l=o.getZForResolution(e,this.zDirection),u=o.getTileCoordForCoordAndZ(t,l);if(o.getResolutions().length<=u[0])return;let h=o.getResolution(u[0]),c=o.getTileCoordExtent(u,this.tmpExtent_),f=Ie(o.getTileSize(u[0]),this.tmpSize);const d=this.gutter_;d!==0&&(f=I_(f,d,this.tmpSize),c=Zr(c,h*d,c)),a&&a!==s&&(h=Xg(a,s,t,h),c=lL(c,s,a),t=tb(t,s,a));const g={SERVICE:"WMS",VERSION:gu,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,this.params_,r);const p=Math.floor((t[0]-c[0])/h),v=Math.floor((c[3]-t[1])/h);return g[this.v13_?"I":"X"]=p,g[this.v13_?"J":"Y"]=v,this.getRequestUrl_(u,f,c,1,a||s,g)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:gu,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(t!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=t*r/s}return Object.assign(n,e),P_(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,r,s,a){const o=this.urls;if(!o)return;if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),r!=1)switch(this.serverType_){case"geoserver":const c=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+c:a.FORMAT_OPTIONS="dpi:"+c;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:tt(!1,52);break}const l=s.getAxisOrientation(),u=n;if(this.v13_&&l.substr(0,2)=="ne"){let c;c=n[0],u[0]=n[1],u[1]=c,c=n[2],u[2]=n[3],u[3]=c}a.BBOX=u.join(",");let h;if(o.length==1)h=o[0];else{const c=$r(Pb(t),o.length);h=o[c]}return P_(h,a)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||gu;this.v13_=tL(t,"1.3")>=0}tileUrlFunction(t,e,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const s=r.getResolution(t[0]);let a=r.getTileCoordExtent(t,this.tmpExtent_),o=Ie(r.getTileSize(t[0]),this.tmpSize);const l=this.gutter_;l!==0&&(o=I_(o,l,this.tmpSize),a=Zr(a,s*l,a)),e!=1&&(o=Tb(o,e,this.tmpSize));const u={SERVICE:"WMS",VERSION:gu,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(u,this.params_),this.getRequestUrl_(t,o,a,e,n,u)}}const $b=HD,UD=(i,t)=>{const e=t.getSource().getParams();e.LAYERS=i.layers,e.time=i.time,e.version="1.3.0",t.getSource().setUrl(i.url),t.getSource().updateParams(e),t.getSource().setAttributions(i.attribution)},XD=()=>new jg({properties:{name:"topicLayer"},source:new $b,visible:!1});function KD(i,t,e,n,r){Vb(i,t,e||0,n||i.length-1,r||jD)}function Vb(i,t,e,n,r){for(;n>e;){if(n-e>600){var s=n-e+1,a=t-e+1,o=Math.log(s),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1),h=Math.max(e,Math.floor(t-a*l/s+u)),c=Math.min(n,Math.floor(t+(s-a)*l/s+u));Vb(i,t,h,c,r)}var f=i[t],d=e,g=n;for(Wa(i,e,t),r(i[n],f)>0&&Wa(i,e,n);d<g;){for(Wa(i,d,g),d++,g--;r(i[d],f)<0;)d++;for(;r(i[g],f)>0;)g--}r(i[e],f)===0?Wa(i,e,g):(g++,Wa(i,g,n)),g<=t&&(e=g+1),t<=g&&(n=g-1)}}function Wa(i,t,e){var n=i[t];i[t]=i[e],i[e]=n}function jD(i,t){return i<t?-1:i>t?1:0}let Wb=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!vu(t,e))return n;const r=this.toBBox,s=[];for(;e;){for(let a=0;a<e.children.length;a++){const o=e.children[a],l=e.leaf?r(o):o;vu(t,l)&&(e.leaf?n.push(o):Hf(t,l)?this._all(o,n):s.push(o))}e=s.pop()}return n}collides(t){let e=this.data;if(!vu(t,e))return!1;const n=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],a=e.leaf?this.toBBox(s):s;if(vu(t,a)){if(e.leaf||Hf(t,a))return!0;n.push(s)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Bs([]),this}remove(t,e){if(!t)return this;let n=this.data;const r=this.toBBox(t),s=[],a=[];let o,l,u;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),n.leaf){const h=ZD(t,n.children,e);if(h!==-1)return n.children.splice(h,1),s.push(n),this._condense(s),this}!u&&!n.leaf&&Hf(n,r)?(s.push(n),a.push(o),o=0,l=n,n=n.children[0]):l?(o++,n=l.children[o],u=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,r){const s=n-e+1;let a=this._maxEntries,o;if(s<=a)return o=Bs(t.slice(e,n+1)),ys(o,this.toBBox),o;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),o=Bs([]),o.leaf=!1,o.height=r;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));O_(t,e,n,u,this.compareMinX);for(let h=e;h<=n;h+=u){const c=Math.min(h+u-1,n);O_(t,h,c,l,this.compareMinY);for(let f=h;f<=c;f+=l){const d=Math.min(f+l-1,c);o.children.push(this._build(t,f,d,r-1))}}return ys(o,this.toBBox),o}_chooseSubtree(t,e,n,r){for(;r.push(e),!(e.leaf||r.length-1===n);){let s=1/0,a=1/0,o;for(let l=0;l<e.children.length;l++){const u=e.children[l],h=Yf(u),c=QD(t,u)-h;c<a?(a=c,s=h<s?h:s,o=u):c===a&&h<s&&(s=h,o=u)}e=o||e.children[0]}return e}_insert(t,e,n){const r=n?t:this.toBBox(t),s=[],a=this._chooseSubtree(r,this.data,e,s);for(a.children.push(t),vo(a,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)}_split(t,e){const n=t[e],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const a=this._chooseSplitIndex(n,s,r),o=Bs(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,ys(n,this.toBBox),ys(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,e){this.data=Bs([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ys(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,s=1/0,a=1/0;for(let o=e;o<=n-e;o++){const l=po(t,0,o,this.toBBox),u=po(t,o,n,this.toBBox),h=tP(l,u),c=Yf(l)+Yf(u);h<s?(s=h,r=o,a=c<a?c:a):h===s&&c<a&&(a=c,r=o)}return r||n-e}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:qD,s=t.leaf?this.compareMinY:JD,a=this._allDistMargin(t,e,n,r),o=this._allDistMargin(t,e,n,s);a<o&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const s=this.toBBox,a=po(t,0,e,s),o=po(t,n-e,n,s);let l=pu(a)+pu(o);for(let u=e;u<n-e;u++){const h=t.children[u];vo(a,t.leaf?s(h):h),l+=pu(a)}for(let u=n-e-1;u>=e;u--){const h=t.children[u];vo(o,t.leaf?s(h):h),l+=pu(o)}return l}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)vo(e[r],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():ys(t[e],this.toBBox)}};function ZD(i,t,e){if(!e)return t.indexOf(i);for(let n=0;n<t.length;n++)if(e(i,t[n]))return n;return-1}function ys(i,t){po(i,0,i.children.length,t,i)}function po(i,t,e,n,r){r||(r=Bs(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<e;s++){const a=i.children[s];vo(r,i.leaf?n(a):a)}return r}function vo(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function qD(i,t){return i.minX-t.minX}function JD(i,t){return i.minY-t.minY}function Yf(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function pu(i){return i.maxX-i.minX+(i.maxY-i.minY)}function QD(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function tP(i,t){const e=Math.max(i.minX,t.minX),n=Math.max(i.minY,t.minY),r=Math.min(i.maxX,t.maxX),s=Math.min(i.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-n)}function Hf(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function vu(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function Bs(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O_(i,t,e,n,r){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=n)continue;const a=t+Math.ceil((e-t)/n/2)*n;KD(i,a,t,e,r),s.push(t,a,a,e)}}class em{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ie(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new em({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return X()}getImage(t){return X()}getHitDetectionImage(){return X()}getPixelRatio(t){return 1}getImageState(){return X()}getImageSize(){return X()}getOrigin(){return X()}getSize(){return X()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ie(t)}listenImageChange(t){X()}load(){X()}unlistenImageChange(t){X()}}const Yb=em;function Pi(i){return Array.isArray(i)?HS(i):i}class im extends Yb{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new im({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,r=me(n.size*t,n.size*t);this.draw_(n,r,t),e=r.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Nt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const x=r;r=s,s=x}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),h=r-u,c=Math.sqrt(l*l+h*h),f=c/l;if(t==="miter"&&f<=n)return f*e;const d=e/2/f,g=e/2*(h/c),v=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return v*2;const m=r*Math.sin(o),y=Math.sqrt(r*r-m*m),_=s-y,S=Math.sqrt(m*m+_*_)/m;if(S<=n){const x=S*e/2-s-r;return 2*Math.max(v,x)}return v*2}createRenderOptions(){let t=ma,e=0,n=null,r=0,s,a=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=nl),s=Pi(s),a=this.stroke_.getWidth(),a===void 0&&(a=sl),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=ma),e=this.stroke_.getMiterLimit(),e===void 0&&(e=il));const o=this.calculateLineJoinSize_(t,a,e),l=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*l+o);return{strokeStyle:s,strokeWidth:a,size:u,lineDash:n,lineDashOffset:r,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=be),e.fillStyle=Pi(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if(typeof e=="string"&&(e=Fh(e)),e===null?n=1:Array.isArray(e)&&(n=e.length===4?e[3]:1),n===0){const r=me(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let o=0;o<e;o++){const l=s+o*a,u=o%2===0?n:r;t.lineTo(u*Math.cos(l),u*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=be,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const Hb=im;class nm extends Hb{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new nm({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const rm=nm;class sm{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new sm({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const qr=sm;class am{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new am({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const al=am;class jc{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=F_,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new jc({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=F_,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function eP(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(tt(typeof i.getZIndex=="function",41),e=[i]),t=function(){return e}}return t}let Uf=null;function iP(i,t){if(!Uf){const e=new qr({color:"rgba(255,255,255,0.4)"}),n=new al({color:"#3399CC",width:1.25});Uf=[new jc({image:new rm({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return Uf}function F_(i){return i.getGeometry()}const ol=jc;let Ya=null;class nP extends Fc{constructor(t,e,n,r,s,a){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=a,this.unlisten_=null,this.imageState_=s,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Nt.LOADED){Ya||(Ya=me(1,1,void 0,{willReadFrequently:!0})),Ya.drawImage(this.image_,0,0);try{Ya.getImageData(0,0,1,1),this.tainted_=!1}catch{Ya=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(q.CHANGE)}handleImageError_(){this.imageState_=Nt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Nt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=me(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Nt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Nt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Rb(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Nt.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const r=n.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=YS(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function rP(i,t,e,n,r,s){let a=Nh.get(t,n,s);return a||(a=new nP(i,t,e,n,r,s),Nh.set(t,n,s,a)),a}function N_(i,t,e,n){return e!==void 0&&n!==void 0?[e/i,n/t]:e!==void 0?e/i:n!==void 0?n/t:1}class om extends Yb{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const a=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let o=t.src;tt(!(o!==void 0&&a),4),tt(!a||a&&this.imgSize_,5),(o===void 0||o.length===0)&&a&&(o=a.src||lt(a)),tt(o!==void 0&&o.length>0,6),tt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);const l=t.src!==void 0?Nt.IDLE:Nt.LOADED;if(this.color_=t.color!==void 0?Fh(t.color):null,this.iconImage_=rP(a,o,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let u,h;if(t.size)[u,h]=t.size;else{const c=this.getImage(1);if(c instanceof HTMLCanvasElement||c.src&&c.complete)u=c.width,h=c.height;else{this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(N_(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}u!==void 0&&this.setScale(N_(u,h,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new om({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Nt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Nt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(q.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(q.CHANGE,t)}}const Ub=om,sP="#333";class lm{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ie(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new qr({color:sP}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new lm({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ie(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const um=lm;function B_(i){return new ol({fill:ll(i,""),stroke:ul(i,""),text:aP(i),image:oP(i)})}function ll(i,t){const e=i[t+"fill-color"];if(e)return e==="none"?null:new qr({color:e})}function ul(i,t){const e=i[t+"stroke-width"],n=i[t+"stroke-color"];if(!(!e&&!n))return new al({width:e,color:n,lineCap:i[t+"stroke-line-cap"],lineJoin:i[t+"stroke-line-join"],lineDash:i[t+"stroke-line-dash"],lineDashOffset:i[t+"stroke-line-dash-offset"],miterLimit:i[t+"stroke-miter-limit"]})}function aP(i){const t=i["text-value"];return t?new um({text:t,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],repeat:i["text-repeat"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:ll(i,"text-"),backgroundFill:ll(i,"text-background-"),stroke:ul(i,"text-"),backgroundStroke:ul(i,"text-background-")}):void 0}function oP(i){const t=i["icon-src"],e=i["icon-img"];if(t||e)return new Ub({src:t,img:e,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],width:i["icon-width"],height:i["icon-height"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const s="shape-";return new Hb({points:n,fill:ll(i,s),stroke:ul(i,s),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const r=i["circle-radius"];if(r){const s="circle-";return new rm({radius:r,fill:ll(i,s),stroke:ul(i,s),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const z_={RENDER_ORDER:"renderOrder"};class lP extends Yc{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(z_.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Wb(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(z_.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=iP;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof ol)e=t;else if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let s=0;s<n;++s){const a=t[s];a instanceof ol?r[s]=a:r[s]=B_(a)}e=r}else e=B_(t);this.style_=e,this.styleFunction_=t===null?void 0:eP(this.style_),this.changed()}}const uP=lP,Nl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},mu=[Nl.FILL],Gn=[Nl.STROKE],Fr=[Nl.BEGIN_PATH],G_=[Nl.CLOSE_PATH],W=Nl;class hP{drawCustom(t,e,n,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Xb=hP;class cP extends Xb{constructor(t,e,n,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=t.length;o<l;o+=e)r[0]=t[o],r[1]=t[o+1],Bc(n,r)&&(s[a++]=r[0],s[a++]=r[1]);return a}appendFlatLineCoordinates(t,e,n,r,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(e+=r);let h=t[e],c=t[e+1];const f=this.tmpCoordinate_;let d=!0,g,p,v;for(g=e+r;g<n;g+=r)f[0]=t[g],f[1]=t[g+1],v=Mg(u,f),v!==p?(d&&(o[l++]=h,o[l++]=c,d=!1),o[l++]=f[0],o[l++]=f[1]):v===Kt.INTERSECTING?(o[l++]=f[0],o[l++]=f[1],d=!1):d=!0,h=f[0],c=f[1],p=v;return(s&&d||g===e+r)&&(o[l++]=h,o[l++]=c),l}drawCustomCoordinates_(t,e,n,r,s){for(let a=0,o=n.length;a<o;++a){const l=n[a],u=this.appendFlatLineCoordinates(t,e,l,r,!1,!1);s.push(u),e=l}return e}drawCustom(t,e,n,r){this.beginGeometry(t,e);const s=t.getType(),a=t.getStride(),o=this.coordinates.length;let l,u,h,c,f;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),c=[];const d=t.getEndss();f=0;for(let g=0,p=d.length;g<p;++g){const v=[];f=this.drawCustomCoordinates_(l,f,d[g],a,v),c.push(v)}this.instructions.push([W.CUSTOM,o,c,t,n,Bg]),this.hitDetectionInstructions.push([W.CUSTOM,o,c,t,r||n,Bg]);break;case"Polygon":case"MultiLineString":h=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,t.getEnds(),a,h),this.instructions.push([W.CUSTOM,o,h,t,n,tl]),this.hitDetectionInstructions.push([W.CUSTOM,o,h,t,r||n,tl]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,a,!1,!1),this.instructions.push([W.CUSTOM,o,u,t,n,zn]),this.hitDetectionInstructions.push([W.CUSTOM,o,u,t,r||n,zn]);break;case"MultiPoint":l=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,a),u>o&&(this.instructions.push([W.CUSTOM,o,u,t,n,zn]),this.hitDetectionInstructions.push([W.CUSTOM,o,u,t,r||n,zn]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([W.CUSTOM,o,u,t,n]),this.hitDetectionInstructions.push([W.CUSTOM,o,u,t,r||n]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[W.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let r,s,a=-1;for(e=0;e<n;++e)r=t[e],s=r[0],s==W.END_GEOMETRY?a=e:s==W.BEGIN_GEOMETRY&&(r[2]=e,uM(this.hitDetectionInstructions,a,e),a=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const r=t.getColor();n.fillStyle=Pi(r||be)}else n.fillStyle=void 0;if(e){const r=e.getColor();n.strokeStyle=Pi(r||nl);const s=e.getLineCap();n.lineCap=s!==void 0?s:$h;const a=e.getLineDash();n.lineDash=a?a.slice():hn;const o=e.getLineDashOffset();n.lineDashOffset=o||cn;const l=e.getLineJoin();n.lineJoin=l!==void 0?l:ma;const u=e.getWidth();n.lineWidth=u!==void 0?u:sl;const h=e.getMiterLimit();n.miterLimit=h!==void 0?h:il,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[W.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[W.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,r=t.lineCap,s=t.lineDash,a=t.lineDashOffset,o=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||s!=t.currentLineDash&&!tr(t.currentLineDash,s)||t.currentLineDashOffset!=a||t.currentLineJoin!=o||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(n!==void 0&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=a,t.currentLineJoin=o,t.currentLineWidth=l,t.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[W.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=NS(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Zr(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Bl=cP;class fP extends Bl{constructor(t,e,n,r){super(t,e,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(n,r);this.instructions.push([W.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(n,r);this.instructions.push([W.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const dP=fP;class gP extends Bl{constructor(t,e,n,r){super(t,e,n,r)}drawFlatCoordinates_(t,e,n,r){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),o=[W.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(t,e){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,hn,cn],Fr);const a=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(a,0,a.length,o),this.hitDetectionInstructions.push(Gn),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,hn,cn],Fr);const a=t.getEnds(),o=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let h=0,c=a.length;h<c;++h)u=this.drawFlatCoordinates_(o,u,a[h],l);this.hitDetectionInstructions.push(Gn),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Gn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Gn),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Fr)}}const pP=gP;class vP extends Bl{constructor(t,e,n,r){super(t,e,n,r)}drawFlatCoordinatess_(t,e,n,r){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=n.length;this.instructions.push(Fr),this.hitDetectionInstructions.push(Fr);for(let u=0;u<l;++u){const h=n[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,h,r,!0,!o),d=[W.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),o&&(this.instructions.push(G_),this.hitDetectionInstructions.push(G_)),e=h}return a&&(this.instructions.push(mu),this.hitDetectionInstructions.push(mu)),o&&(this.instructions.push(Gn),this.hitDetectionInstructions.push(Gn)),e}drawCircle(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,be]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,hn,cn]);const a=t.getFlatCoordinates(),o=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,o,!1,!1);const u=[W.CIRCLE,l];this.instructions.push(Fr,u),this.hitDetectionInstructions.push(Fr,u),n.fillStyle!==void 0&&(this.instructions.push(mu),this.hitDetectionInstructions.push(mu)),n.strokeStyle!==void 0&&(this.instructions.push(Gn),this.hitDetectionInstructions.push(Gn)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,be]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,hn,cn]);const a=t.getEnds(),o=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(o,0,a,l),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,be]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,hn,cn]);const a=t.getEndss(),o=t.getOrientedFlatCoordinates(),l=t.getStride();let u=0;for(let h=0,c=a.length;h<c;++h)u=this.drawFlatCoordinatess_(o,u,a[h],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,r=e.length;n<r;++n)e[n]=Ir(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const $_=vP;function mP(i,t,e,n,r){const s=[];let a=e,o=0,l=t.slice(e,2);for(;o<i&&a+r<n;){const[u,h]=l.slice(-2),c=t[a+r],f=t[a+r+1],d=Math.sqrt((c-u)*(c-u)+(f-h)*(f-h));if(o+=d,o>=i){const g=(i-o+d)/d,p=Ge(u,c,g),v=Ge(h,f,g);l.push(p,v),s.push(l),l=[p,v],o==i&&(a+=r),o=0}else if(o<i)l.push(t[a+r],t[a+r+1]),a+=r;else{const g=d-o,p=Ge(u,c,g/d),v=Ge(h,f,g/d);l.push(p,v),s.push(l),l=[p,v],o=0,a+=r}}return o>0&&s.push(l),s}function yP(i,t,e,n,r){let s=e,a=e,o=0,l=0,u=e,h,c,f,d,g,p,v,m,y,_;for(c=e;c<n;c+=r){const w=t[c],S=t[c+1];g!==void 0&&(y=w-g,_=S-p,d=Math.sqrt(y*y+_*_),v!==void 0&&(l+=f,h=Math.acos((v*y+m*_)/(f*d)),h>i&&(l>o&&(o=l,s=u,a=c),l=0,u=c-r)),f=d,v=y,m=_),g=w,p=S}return l+=d,l>o?[u,c]:[s,a]}const Hh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class _P extends Bl{constructor(t,e,n,r){super(t,e,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[be]={fillStyle:be},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!n&&!r)return;const a=this.coordinates;let o=a.length;const l=t.getType();let u=null,h=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Ce(this.getBufferedMaxExtent(),t.getExtent()))return;let c;if(u=t.getFlatCoordinates(),l=="LineString")c=[u.length];else if(l=="MultiLineString")c=t.getEnds();else if(l=="Polygon")c=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const p=t.getEndss();c=[];for(let v=0,m=p.length;v<m;++v)c.push(p[v][0])}this.beginGeometry(t,e);const f=s.repeat,d=f?void 0:s.textAlign;let g=0;for(let p=0,v=c.length;p<v;++p){let m;f?m=mP(f*this.resolution,u,g,c[p],h):m=[u.slice(g,c[p])];for(let y=0,_=m.length;y<_;++y){const w=m[y];let S=0,x=w.length;if(d==null){const T=yP(s.maxAngle,w,0,w.length,2);S=T[0],x=T[1]}for(let T=S;T<x;T+=h)a.push(w[T],w[T+1]);const b=a.length;g=c[p],this.drawChars_(o,b),o=b}}this.endGeometry(e)}else{let c=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),h=2;break;case"Polygon":u=t.getFlatInteriorPoint(),s.overflow||c.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const m=t.getFlatInteriorPoints();u=[];for(let y=0,_=m.length;y<_;y+=3)s.overflow||c.push(m[y+2]/this.resolution),u.push(m[y],m[y+1]);if(u.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(u,h);if(f===o)return;if(c&&(f-o)/2!==u.length/h){let m=o/2;c=c.filter((y,_)=>{const w=a[(m+_)*2]===u[_*h]&&a[(m+_)*2+1]===u[_*h+1];return w||--m,w})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let d=s.padding;if(d!=Or&&(s.scale[0]<0||s.scale[1]<0)){let m=s.padding[0],y=s.padding[1],_=s.padding[2],w=s.padding[3];s.scale[0]<0&&(y=-y,w=-w),s.scale[1]<0&&(m=-m,_=-_),d=[m,y,_,w]}const g=this.pixelRatio;this.instructions.push([W.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==Or?Or:d.map(function(m){return m*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);const p=1/g,v=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=be,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([W.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?be:this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),s.backgroundFill&&(this.state.fillStyle=v,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||rl,justify:e.justify,textBaseline:e.textBaseline||Vh,scale:e.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Hh[r.textBaseline],h=this.textOffsetY_*l,c=this.text_,f=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([W.DRAW_CHARS,t,e,u,r.overflow,o,r.maxAngle,l,h,s,f*l,c,a,1]),this.hitDetectionInstructions.push([W.DRAW_CHARS,t,e,u,r.overflow,o&&be,r.maxAngle,1,h,s,f,c,a,1/l])}setTextStyle(t,e){let n,r,s;if(!t)this.text_="";else{const a=t.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Pi(a.getColor()||be)):(r=null,this.textFillState_=r);const o=t.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=o.getLineDash(),p=o.getLineDashOffset(),v=o.getWidth(),m=o.getMiterLimit();s.lineCap=o.getLineCap()||$h,s.lineDash=g?g.slice():hn,s.lineDashOffset=p===void 0?cn:p,s.lineJoin=o.getLineJoin()||ma,s.lineWidth=v===void 0?sl:v,s.miterLimit=m===void 0?il:m,s.strokeStyle=Pi(o.getColor()||nl)}n=this.textState_;const l=t.getFont()||mb;JL(l);const u=t.getScaleArray();n.overflow=t.getOverflow(),n.font=l,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Vh,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Or,n.scale=u===void 0?[1,1]:u;const h=t.getOffsetX(),c=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:lt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+lt(r.fillStyle):""}this.declutterImageWithText_=e}}const wP={Circle:$_,Default:Bl,Image:dP,LineString:pP,Polygon:$_,Text:_P};class xP{constructor(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const r in n){const s=n[r].finish();t[e][r]=s}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[e];if(s===void 0){const a=wP[e];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s}return s}}const V_=xP;function SP(i,t,e,n,r,s,a,o,l,u,h,c){let f=i[t],d=i[t+1],g=0,p=0,v=0,m=0;function y(){g=f,p=d,t+=n,f=i[t],d=i[t+1],m+=v,v=Math.sqrt((f-g)*(f-g)+(d-p)*(d-p))}do y();while(t<e-n&&m+v<s);let _=v===0?0:(s-m)/v;const w=Ge(g,f,_),S=Ge(p,d,_),x=t-n,b=m,T=s+o*l(u,r,h);for(;t<e-n&&m+v<T;)y();_=v===0?0:(T-m)/v;const C=Ge(g,f,_),I=Ge(p,d,_);let E;if(c){const D=[w,S,C,I];nb(D,0,4,2,c,D,D),E=D[0]>D[2]}else E=w>C;const R=Math.PI,M=[],k=x+n===t;t=x,v=0,m=b,f=i[t],d=i[t+1];let L;if(k){y(),L=Math.atan2(d-p,f-g),E&&(L+=L>0?-R:R);const D=(C+w)/2,O=(I+S)/2;return M[0]=[D,O,(T-s)/2,L,r],M}r=r.replace(/\n/g," ");for(let D=0,O=r.length;D<O;){y();let F=Math.atan2(d-p,f-g);if(E&&(F+=F>0?-R:R),L!==void 0){let Z=F-L;if(Z+=Z>R?-2*R:Z<-R?2*R:0,Math.abs(Z)>a)return null}L=F;const B=D;let G=0;for(;D<O;++D){const Z=E?O-D-1:D,st=o*l(u,r[Z],h);if(t+n<e&&m+v<s+G+st/2)break;G+=st}if(D===B)continue;const K=E?r.substring(O-B,O-D):r.substring(B,D);_=v===0?0:(s+G/2-m)/v;const P=Ge(g,f,_),ct=Ge(p,d,_);M.push([P,ct,G/2,F,K]),s+=G}return M}function Kb(i,t,e,n){let r=i[t],s=i[t+1],a=0;for(let o=t+n;o<e;o+=n){const l=i[o],u=i[o+1];a+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return a}const _s=Me(),Tn=[],Ji=[],Qi=[],Cn=[];function W_(i){return i[3].declutterBox}const Y_=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Xf(i,t){return t==="start"?t=Y_.test(i)?"right":"left":t==="end"&&(t=Y_.test(i)?"left":"right"),Hh[t]}function bP(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}class TP{constructor(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=zi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,r){const s=t+e+n+r;if(this.labels_[s])return this.labels_[s];const a=r?this.strokeStates[r]:null,o=n?this.fillStates[n]:null,l=this.textStates[e],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],c=Array.isArray(t),f=l.justify?Hh[l.justify]:Xf(Array.isArray(t)?t[0]:t,l.textAlign||rl),d=r&&a.lineWidth?a.lineWidth:0,g=c?t:t.split(`
`).reduce(bP,[]),{width:p,height:v,widths:m,heights:y,lineWidths:_}=tk(l,g),w=p+d,S=[],x=(w+2)*h[0],b=(v+d)*h[1],T={width:x<0?Math.floor(x):Math.ceil(x),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:S};(h[0]!=1||h[1]!=1)&&S.push("scale",h),r&&(S.push("strokeStyle",a.strokeStyle),S.push("lineWidth",d),S.push("lineCap",a.lineCap),S.push("lineJoin",a.lineJoin),S.push("miterLimit",a.miterLimit),S.push("setLineDash",[a.lineDash]),S.push("lineDashOffset",a.lineDashOffset)),n&&S.push("fillStyle",o.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");const C=.5-f;let I=f*w+C*d;const E=[],R=[];let M=0,k=0,L=0,D=0,O;for(let F=0,B=g.length;F<B;F+=2){const G=g[F];if(G===`
`){k+=M,M=0,I=f*w+C*d,++D;continue}const K=g[F+1]||l.font;K!==O&&(r&&E.push("font",K),n&&R.push("font",K),O=K),M=Math.max(M,y[L]);const P=[G,I+C*m[L]+f*(m[L]-_[D]),.5*(d+M)+k];I+=m[L],r&&E.push("strokeText",P),n&&R.push("fillText",P),++L}return Array.prototype.push.apply(S,E),Array.prototype.push.apply(S,R),this.labels_[s]=T,T}replayTextBackground_(t,e,n,r,s,a,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,r,s,a,o,l,u,h,c,f,d,g,p,v){o*=f[0],l*=f[1];let m=n-o,y=r-l;const _=s+u>t?t-u:s,w=a+h>e?e-h:a,S=g[3]+_*f[0]+g[1],x=g[0]+w*f[1]+g[2],b=m-g[3],T=y-g[0];(p||c!==0)&&(Tn[0]=b,Cn[0]=b,Tn[1]=T,Ji[1]=T,Ji[0]=b+S,Qi[0]=Ji[0],Qi[1]=T+x,Cn[1]=Qi[1]);let C;return c!==0?(C=Xn(zi(),n,r,1,1,c,-n,-r),jt(C,Tn),jt(C,Ji),jt(C,Qi),jt(C,Cn),gn(Math.min(Tn[0],Ji[0],Qi[0],Cn[0]),Math.min(Tn[1],Ji[1],Qi[1],Cn[1]),Math.max(Tn[0],Ji[0],Qi[0],Cn[0]),Math.max(Tn[1],Ji[1],Qi[1],Cn[1]),_s)):gn(Math.min(b,b+S),Math.min(T,T+x),Math.max(b,b+S),Math.max(T,T+x),_s),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:_,drawImageH:w,originX:u,originY:h,declutterBox:{minX:_s[0],minY:_s[1],maxX:_s[2],maxY:_s[3],value:v},canvasTransform:C,scale:f}}replayImageOrLabel_(t,e,n,r,s,a,o){const l=!!(a||o),u=r.declutterBox,h=t.canvas,c=o?o[2]*r.scale[0]/2:0;return u.minX-c<=h.width/e&&u.maxX+c>=0&&u.minY-c<=h.height/e&&u.maxY+c>=0&&(l&&this.replayTextBackground_(t,Tn,Ji,Qi,Cn,a,o),ek(t,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const e=jt(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,r){const s=this.textStates[e],a=this.createLabel(t,e,r,n),o=this.strokeStates[n],l=this.pixelRatio,u=Xf(Array.isArray(t)?t[0]:t,s.textAlign||rl),h=Hh[s.textBaseline||Vh],c=o&&o.lineWidth?o.lineWidth:0,f=a.width/l-2*s.scale[0],d=u*f+2*(.5-u)*c,g=h*a.height/l+2*(.5-h)*c;return{label:a,anchorX:d,anchorY:g}}execute_(t,e,n,r,s,a,o,l){let u;this.pixelCoordinates_&&tr(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Vr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),TM(this.renderedTransform_,n));let h=0;const c=r.length;let f=0,d,g,p,v,m,y,_,w,S,x,b,T,C=0,I=0,E=null,R=null;const M=this.coordinateCache_,k=this.viewRotation_,L=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},O=this.instructions!=r||this.overlaps?0:200;let F,B,G,K;for(;h<c;){const P=r[h];switch(P[0]){case W.BEGIN_GEOMETRY:F=P[1],K=P[3],F.getGeometry()?o!==void 0&&!Ce(o,K.getExtent())?h=P[2]+1:++h:h=P[2];break;case W.BEGIN_PATH:C>O&&(this.fill_(t),C=0),I>O&&(t.stroke(),I=0),!C&&!I&&(t.beginPath(),v=NaN,m=NaN),++h;break;case W.CIRCLE:f=P[1];const Z=u[f],st=u[f+1],Qt=u[f+2],Xt=u[f+3],Rt=Qt-Z,Dt=Xt-st,Mt=Math.sqrt(Rt*Rt+Dt*Dt);t.moveTo(Z+Mt,st),t.arc(Z,st,Mt,0,2*Math.PI,!0),++h;break;case W.CLOSE_PATH:t.closePath(),++h;break;case W.CUSTOM:f=P[1],d=P[2];const U=P[3],J=P[4],Ye=P.length==6?P[5]:void 0;D.geometry=U,D.feature=F,h in M||(M[h]=[]);const Lt=M[h];Ye?Ye(u,f,d,2,Lt):(Lt[0]=u[f],Lt[1]=u[f+1],Lt.length=2),J(Lt,D),++h;break;case W.DRAW_IMAGE:f=P[1],d=P[2],w=P[3],g=P[4],p=P[5];let xn=P[6];const fi=P[7],Zl=P[8],ql=P[9],Jl=P[10];let os=P[11];const bf=P[12];let ye=P[13];const He=P[14],di=P[15];if(!w&&P.length>=20){S=P[19],x=P[20],b=P[21],T=P[22];const Fe=this.drawLabelWithPointPlacement_(S,x,b,T);w=Fe.label,P[3]=w;const hs=P[23];g=(Fe.anchorX-hs)*this.pixelRatio,P[4]=g;const Ue=P[24];p=(Fe.anchorY-Ue)*this.pixelRatio,P[5]=p,xn=w.height,P[6]=xn,ye=w.width,P[13]=ye}let ji;P.length>25&&(ji=P[25]);let ls,er,Sn;P.length>17?(ls=P[16],er=P[17],Sn=P[18]):(ls=Or,er=!1,Sn=!1),Jl&&L?os+=k:!Jl&&!L&&(os-=k);let us=0;for(;f<d;f+=2){if(ji&&ji[us++]<ye/this.pixelRatio)continue;const Fe=this.calculateImageOrLabelDimensions_(w.width,w.height,u[f],u[f+1],ye,xn,g,p,Zl,ql,os,bf,s,ls,er||Sn,F),hs=[t,e,w,Fe,fi,er?E:null,Sn?R:null];if(l){if(He==="none")continue;if(He==="obstacle"){l.insert(Fe.declutterBox);continue}else{let Ue,Zi;if(di){const Ne=d-f;if(!di[Ne]){di[Ne]=hs;continue}if(Ue=di[Ne],delete di[Ne],Zi=W_(Ue),l.collides(Zi))continue}if(l.collides(Fe.declutterBox))continue;Ue&&(l.insert(Zi),this.replayImageOrLabel_.apply(this,Ue)),l.insert(Fe.declutterBox)}}this.replayImageOrLabel_.apply(this,hs)}++h;break;case W.DRAW_CHARS:const Ql=P[1],he=P[2],Tf=P[3],vA=P[4];T=P[5];const mA=P[6],Fy=P[7],Ny=P[8];b=P[9];const Cf=P[10];S=P[11],x=P[12];const By=[P[13],P[13]],Ef=this.textStates[x],za=Ef.font,Ga=[Ef.scale[0]*Fy,Ef.scale[1]*Fy];let $a;za in this.widths_?$a=this.widths_[za]:($a={},this.widths_[za]=$a);const zy=Kb(u,Ql,he,2),Gy=Math.abs(Ga[0])*C_(za,S,$a);if(vA||Gy<=zy){const Fe=this.textStates[x].textAlign,hs=(zy-Gy)*Xf(S,Fe),Ue=SP(u,Ql,he,2,S,hs,mA,Math.abs(Ga[0]),C_,za,$a,L?0:this.viewRotation_);t:if(Ue){const Zi=[];let Ne,tu,eu,_e,Xe;if(b)for(Ne=0,tu=Ue.length;Ne<tu;++Ne){Xe=Ue[Ne],eu=Xe[4],_e=this.createLabel(eu,x,"",b),g=Xe[2]+(Ga[0]<0?-Cf:Cf),p=Tf*_e.height+(.5-Tf)*2*Cf*Ga[1]/Ga[0]-Ny;const qi=this.calculateImageOrLabelDimensions_(_e.width,_e.height,Xe[0],Xe[1],_e.width,_e.height,g,p,0,0,Xe[3],By,!1,Or,!1,F);if(l&&l.collides(qi.declutterBox))break t;Zi.push([t,e,_e,qi,1,null,null])}if(T)for(Ne=0,tu=Ue.length;Ne<tu;++Ne){Xe=Ue[Ne],eu=Xe[4],_e=this.createLabel(eu,x,T,""),g=Xe[2],p=Tf*_e.height-Ny;const qi=this.calculateImageOrLabelDimensions_(_e.width,_e.height,Xe[0],Xe[1],_e.width,_e.height,g,p,0,0,Xe[3],By,!1,Or,!1,F);if(l&&l.collides(qi.declutterBox))break t;Zi.push([t,e,_e,qi,1,null,null])}l&&l.load(Zi.map(W_));for(let qi=0,yA=Zi.length;qi<yA;++qi)this.replayImageOrLabel_.apply(this,Zi[qi])}}++h;break;case W.END_GEOMETRY:if(a!==void 0){F=P[1];const Fe=a(F,K);if(Fe)return Fe}++h;break;case W.FILL:O?C++:this.fill_(t),++h;break;case W.MOVE_TO_LINE_TO:for(f=P[1],d=P[2],B=u[f],G=u[f+1],y=B+.5|0,_=G+.5|0,(y!==v||_!==m)&&(t.moveTo(B,G),v=y,m=_),f+=2;f<d;f+=2)B=u[f],G=u[f+1],y=B+.5|0,_=G+.5|0,(f==d-2||y!==v||_!==m)&&(t.lineTo(B,G),v=y,m=_);++h;break;case W.SET_FILL_STYLE:E=P,this.alignFill_=P[2],C&&(this.fill_(t),C=0,I&&(t.stroke(),I=0)),t.fillStyle=P[1],++h;break;case W.SET_STROKE_STYLE:R=P,I&&(t.stroke(),I=0),this.setStrokeStyle_(t,P),++h;break;case W.STROKE:O?I++:t.stroke(),++h;break;default:++h;break}}C&&this.fill_(t),I&&t.stroke()}execute(t,e,n,r,s,a){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,s,void 0,void 0,a)}executeHitDetection(t,e,n,r,s){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)}}const CP=TP,Kf=["Polygon","Circle","LineString","Image","Text","Default"];class EP{constructor(t,e,n,r,s,a){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=zi(),this.createExecutors_(s)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];n===void 0&&(n={},this.executorsByZIndex_[e]=n);const r=t[e];for(const s in r){const a=r[s];n[s]=new CP(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let r=0,s=t.length;r<s;++r)if(t[r]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,r,s,a){r=Math.round(r);const o=r*2+1,l=Xn(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=me(o,o,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):u||h.clearRect(0,0,o,o);let c;this.renderBuffer_!==void 0&&(c=Me(),Eo(c,t),Zr(c,e*(this.renderBuffer_+r),c));const f=IP(r);let d;function g(S,x){const b=h.getImageData(0,0,o,o).data;for(let T=0,C=f.length;T<C;T++)if(b[f[T]]>0){if(!a||d!=="Image"&&d!=="Text"||a.includes(S)){const I=(f[T]-3)/4,E=r-I%o,R=r-(I/o|0),M=s(S,x,E*E+R*R);if(M)return M}h.clearRect(0,0,o,o);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(jr);let v,m,y,_,w;for(v=p.length-1;v>=0;--v){const S=p[v].toString();for(y=this.executorsByZIndex_[S],m=Kf.length-1;m>=0;--m)if(d=Kf[m],_=y[d],_!==void 0&&(w=_.executeHitDetection(h,l,n,g,c),w))return w}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],r=e[1],s=e[2],a=e[3],o=[n,r,n,a,s,a,s,r];return Vr(o,0,8,2,t,o),o}isEmpty(){return pa(this.executorsByZIndex_)}execute(t,e,n,r,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(jr),this.maxExtent_&&(t.save(),this.clip(t,n)),a=a||Kf;let u,h,c,f,d,g;for(o&&l.reverse(),u=0,h=l.length;u<h;++u){const p=l[u].toString();for(d=this.executorsByZIndex_[p],c=0,f=a.length;c<f;++c){const v=a[c];g=d[v],g!==void 0&&g.execute(t,e,n,r,s,o)}}this.maxExtent_&&t.restore()}}const jf={};function IP(i){if(jf[i]!==void 0)return jf[i];const t=i*2+1,e=i*i,n=new Array(e+1);for(let s=0;s<=i;++s)for(let a=0;a<=i;++a){const o=s*s+a*a;if(o>e)break;let l=n[o];l||(l=[],n[o]=l),l.push(((i+s)*t+(i+a))*4+3),s>0&&l.push(((i-s)*t+(i+a))*4+3),a>0&&(l.push(((i+s)*t+(i-a))*4+3),s>0&&l.push(((i-s)*t+(i-a))*4+3))}const r=[];for(let s=0,a=n.length;s<a;++s)n[s]&&r.push(...n[s]);return jf[i]=r,r}const H_=EP;class AP extends Xb{constructor(t,e,n,r,s,a,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=r,this.transformRotation_=r?Lv(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=zi()}drawImages_(t,e,n,r){if(!this.image_)return;const s=Vr(t,e,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,c=s.length;h<c;h+=2){const f=s[h]-this.imageAnchorX_,d=s[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,p=d+this.imageAnchorY_;Xn(o,g,p,1,1,u,-g,-p),a.setTransform.apply(a,o),a.translate(g,p),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(t,e,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Vr(t,e,n,r,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<n;e+=r){const l=s[e]+this.textOffsetX_,u=s[e+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(t,e,n,r,s){const a=this.context_,o=Vr(t,e,n,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),n}drawRings_(t,e,n,r){for(let s=0,a=n.length;s<a;++s)e=this.moveToLineTo_(t,e,n[s],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ce(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=SL(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],s=Math.sqrt(n*n+r*r),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ce(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ce(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=t.getFlatCoordinates();let s=0;const a=t.getEnds(),o=t.getStride();n.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(r,s,a[l],o,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ce(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ce(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),a=t.getStride();e.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];r=this.drawRings_(n,r,u,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),tr(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:rl;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:Pi(n||be)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),o=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),h=s||hn;this.strokeState_={lineCap:r!==void 0?r:$h,lineDash:this.pixelRatio_===1?h:h.map(c=>c*this.pixelRatio_),lineDashOffset:(a||cn)*this.pixelRatio_,lineJoin:o!==void 0?o:ma,lineWidth:(l!==void 0?l:sl)*this.pixelRatio_,miterLimit:u!==void 0?u:il,strokeStyle:Pi(n||nl)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const d=e.getColor();this.textFillState_={fillStyle:Pi(d||be)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const d=n.getColor(),g=n.getLineCap(),p=n.getLineDash(),v=n.getLineDashOffset(),m=n.getLineJoin(),y=n.getWidth(),_=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:$h,lineDash:p||hn,lineDashOffset:v||cn,lineJoin:m!==void 0?m:ma,lineWidth:y!==void 0?y:sl,miterLimit:_!==void 0?_:il,strokeStyle:Pi(d||nl)}}const r=t.getFont(),s=t.getOffsetX(),a=t.getOffsetY(),o=t.getRotateWithView(),l=t.getRotation(),u=t.getScaleArray(),h=t.getText(),c=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:r!==void 0?r:mb,textAlign:c!==void 0?c:rl,textBaseline:f!==void 0?f:Vh},this.text_=h!==void 0?Array.isArray(h)?h.reduce((d,g,p)=>d+=p%2?" ":g,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const RP=AP,Li=.5;function MP(i,t,e,n,r,s,a){const o=i[0]*Li,l=i[1]*Li,u=me(o,l);u.imageSmoothingEnabled=!1;const h=u.canvas,c=new RP(u,Li,r,null,a),f=e.length,d=Math.floor((256*256*256-1)/f),g={};for(let v=1;v<=f;++v){const m=e[v-1],y=m.getStyleFunction()||n;if(!y)continue;let _=y(m,s);if(!_)continue;Array.isArray(_)||(_=[_]);const S=(v*d).toString(16).padStart(7,"#00000");for(let x=0,b=_.length;x<b;++x){const T=_[x],C=T.getGeometryFunction()(m);if(!C||!Ce(r,C.getExtent()))continue;const I=T.clone(),E=I.getFill();E&&E.setColor(S);const R=I.getStroke();R&&(R.setColor(S),R.setLineDash(null)),I.setText(void 0);const M=T.getImage();if(M){const O=M.getImageSize();if(!O)continue;const F=me(O[0],O[1],void 0,{alpha:!1}),B=F.canvas;F.fillStyle=S,F.fillRect(0,0,B.width,B.height),I.setImage(new Ub({img:B,imgSize:O,anchor:M.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}const k=I.getZIndex()||0;let L=g[k];L||(L={},g[k]=L,L.Polygon=[],L.Circle=[],L.LineString=[],L.Point=[]);const D=C.getType();if(D==="GeometryCollection"){const O=C.getGeometriesArrayRecursive();for(let F=0,B=O.length;F<B;++F){const G=O[F];L[G.getType().replace("Multi","")].push(G,I)}}else L[D.replace("Multi","")].push(C,I)}}const p=Object.keys(g).map(Number).sort(jr);for(let v=0,m=p.length;v<m;++v){const y=g[p[v]];for(const _ in y){const w=y[_];for(let S=0,x=w.length;S<x;S+=2){c.setStyle(w[S+1]);for(let b=0,T=t.length;b<T;++b)c.setTransform(t[b]),c.drawGeometry(w[S])}}}return u.getImageData(0,0,h.width,h.height)}function LP(i,t,e){const n=[];if(e){const r=Math.floor(Math.round(i[0])*Li),s=Math.floor(Math.round(i[1])*Li),a=(Vt(r,0,e.width-1)+Vt(s,0,e.height-1)*e.width)*4,o=e.data[a],l=e.data[a+1],h=e.data[a+2]+256*(l+256*o),c=Math.floor((256*256*256-1)/t.length);h&&h%c===0&&n.push(t[h/c-1])}return n}const kP=.5,jb={Point:$P,LineString:BP,Polygon:WP,MultiPoint:VP,MultiLineString:zP,MultiPolygon:GP,GeometryCollection:NP,Circle:OP};function DP(i,t){return parseInt(lt(i),10)-parseInt(lt(t),10)}function PP(i,t){const e=Zg(i,t);return e*e}function Zg(i,t){return kP*i/t}function OP(i,t,e,n,r){const s=e.getFill(),a=e.getStroke();if(s||a){const l=i.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(t,n)}const o=e.getText();if(o&&o.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,n)}}function U_(i,t,e,n,r,s,a){let o=!1;const l=e.getImage();if(l){const u=l.getImageState();u==Nt.LOADED||u==Nt.ERROR?l.unlistenImageChange(r):(u==Nt.IDLE&&l.load(),l.listenImageChange(r),o=!0)}return FP(i,t,e,n,s,a),o}function FP(i,t,e,n,r,s){const a=e.getGeometryFunction()(t);if(!a)return;const o=a.simplifyTransformed(n,r);if(e.getRenderer())Zb(i,o,e,t);else{const u=jb[o.getType()];u(i,o,e,t,s)}}function Zb(i,t,e,n){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let a=0,o=s.length;a<o;++a)Zb(i,s[a],e,n);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer())}function NP(i,t,e,n,r){const s=t.getGeometriesArray();let a,o;for(a=0,o=s.length;a<o;++a){const l=jb[s[a].getType()];l(i,s[a],e,n,r)}}function BP(i,t,e,n,r){const s=e.getStroke();if(s){const o=i.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,n)}const a=e.getText();if(a&&a.getText()){const o=(r||i).getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,n)}}function zP(i,t,e,n,r){const s=e.getStroke();if(s){const o=i.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,n)}const a=e.getText();if(a&&a.getText()){const o=(r||i).getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,n)}}function GP(i,t,e,n,r){const s=e.getFill(),a=e.getStroke();if(a||s){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(t,n)}const o=e.getText();if(o&&o.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,n)}}function $P(i,t,e,n,r){const s=e.getImage(),a=e.getText();let o;if(s){if(s.getImageState()!=Nt.LOADED)return;let l=i;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const c=i.getBuilder(e.getZIndex(),"Image");c.setImageStyle(s,o),c.drawPoint(t,n)}else a&&a.getText()&&(o={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,o),u.drawPoint(t,n)}if(a&&a.getText()){let l=i;r&&(l=r);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(a,o),u.drawText(t,n)}}function VP(i,t,e,n,r){const s=e.getImage(),a=e.getText();let o;if(s){if(s.getImageState()!=Nt.LOADED)return;let l=i;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const c=i.getBuilder(e.getZIndex(),"Image");c.setImageStyle(s,o),c.drawMultiPoint(t,n)}else a&&a.getText()&&(o={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,o),u.drawMultiPoint(t,n)}if(a&&a.getText()){let l=i;r&&(l=r);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(a,o),u.drawText(t,n)}}function WP(i,t,e,n,r){const s=e.getFill(),a=e.getStroke();if(s||a){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(t,n)}const o=e.getText();if(o&&o.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,n)}}class YP extends Ib{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Me(),this.wrappedRenderedExtent_=Me(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const r=e.extent,s=e.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,h=l.getExtent(),c=this.getLayer().getSource(),f=e.pixelRatio,d=e.viewHints,g=!(d[ne.ANIMATING]||d[ne.INTERACTING]),p=this.compositionContext_,v=Math.round(e.size[0]*f),m=Math.round(e.size[1]*f),y=c.getWrapX()&&l.canWrapX(),_=y?Ct(h):null,w=y?Math.ceil((r[2]-h[2])/_)+1:1;let S=y?Math.floor((r[0]-h[0])/_):0;do{const x=this.getRenderTransform(a,o,u,f,v,m,S*_);t.execute(p,1,x,u,g,void 0,n)}while(++S<w)}setupCompositionContext_(){if(this.opacity_!==1){const t=me(this.context.canvas.width,this.context.canvas.height,R_);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Uc(this.compositionContext_),R_.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];CM(this.pixelTransform,1/n,1/n),Rv(this.inversePixelTransform,this.pixelTransform);const s=FS(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const a=this.context,o=a.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;let h=l&&!l.isEmpty()||u&&!u.isEmpty();if(!h&&!(this.getLayer().hasListener(Gi.PRERENDER)||this.getLayer().hasListener(Gi.POSTRENDER)))return null;const c=Math.round(t.size[0]*n),f=Math.round(t.size[1]*n);o.width!=c||o.height!=f?(o.width=c,o.height=f,o.style.transform!==s&&(o.style.transform=s)):this.containerReused||a.clearRect(0,0,c,f),this.preRender(a,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(h&&r.extent&&this.clipping){const p=Dr(r.extent);h=Ce(p,t.extent),g=h&&!Ys(p,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,p)}return h&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];jt(this.pixelTransform,n);const r=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],c=n[0]*Li,f=n[1]*Li;h.push(this.getRenderTransform(r,s,a,Li,c,f,0).slice());const d=u.getSource(),g=o.getExtent();if(d.getWrapX()&&o.canWrapX()&&!Ys(g,l)){let p=l[0];const v=Ct(g);let m=0,y;for(;p<g[0];)--m,y=v*m,h.push(this.getRenderTransform(r,s,a,Li,c,f,y).slice()),p+=v;for(m=0,p=l[2];p>g[2];)++m,y=v*m,h.push(this.getRenderTransform(r,s,a,Li,c,f,y).slice()),p-=v}this.hitDetectionImageData_=MP(n,h,this.renderedFeatures_,u.getStyleFunction(),l,s,a)}e(LP(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,r,s){if(!this.replayGroup_)return;const a=e.viewState.resolution,o=e.viewState.rotation,l=this.getLayer(),u={},h=function(d,g,p){const v=lt(d),m=u[v];if(m){if(m!==!0&&p<m.distanceSq){if(p===0)return u[v]=!0,s.splice(s.lastIndexOf(m),1),r(d,l,g);m.geometry=g,m.distanceSq=p}}else{if(p===0)return u[v]=!0,r(d,l,g);s.push(u[v]={feature:d,layer:l,geometry:g,distanceSq:p,callback:r})}};let c;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(d=>c=d.forEachFeatureAtCoordinate(t,a,o,n,h,d===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(g=>g.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const r=t.viewHints[ne.ANIMATING],s=t.viewHints[ne.INTERACTING],a=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,u=t.viewState,h=u.projection,c=u.resolution,f=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer();let p=e.getRenderOrder();p===void 0&&(p=DP);const v=u.center.slice(),m=Zr(l,g*c),y=m.slice(),_=[m.slice()],w=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!Ys(w,t.extent)){const L=Ct(w),D=Math.max(Ct(m)/2,L);m[0]=w[0]-D,m[2]=w[2]+D,ZS(v,h);const O=WS(_[0],h);O[0]<w[0]&&O[2]<w[2]?_.push([O[0]+L,O[1],O[2]+L,O[3]]):O[0]>w[0]&&O[2]>w[2]&&_.push([O[0]-L,O[1],O[2]-L,O[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==p&&Ys(this.wrappedRenderedExtent_,m))return tr(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new V_(Zg(c,f),m,c,f);let x;this.getLayer().getDeclutter()&&(x=new V_(Zg(c,f),m,c,f));let b;for(let L=0,D=_.length;L<D;++L)n.loadFeatures(_[L],c,h);const T=PP(c,f);let C=!0;const I=L=>{let D;const O=L.getStyleFunction()||e.getStyleFunction();if(O&&(D=O(L,c)),D){const F=this.renderFeature(L,T,D,S,b,x);C=C&&!F}},E=eb(m),R=n.getFeaturesInExtent(E);p&&R.sort(p);for(let L=0,D=R.length;L<D;++L)I(R[L]);this.renderedFeatures_=R,this.ready=C;const M=S.finish(),k=new H_(m,c,f,n.getOverlaps(),M,e.getRenderBuffer());return x&&(this.declutterExecutorGroup=new H_(m,c,f,n.getOverlaps(),x.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=v,this.renderedProjection_=h,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,r,s,a){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)o=U_(r,t,n[l],e,this.boundHandleStyleImageChange_,s,a)||o;else o=U_(r,t,n,e,this.boundHandleStyleImageChange_,s,a);return o}}const HP=YP;class UP extends uP{constructor(t){super(t)}createRenderer(){return new HP(this)}}const qb=UP;class XP{constructor(t){this.rbush_=new Wb(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[lt(e)]=n}load(t,e){const n=new Array(e.length);for(let r=0,s=e.length;r<s;r++){const a=t[r],o=e[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};n[r]=l,this.items_[lt(o)]=l}this.rbush_.load(n)}remove(t){const e=lt(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[lt(e)],r=[n.minX,n.minY,n.maxX,n.maxY];qo(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let r=0,s=t.length;r<s;r++)if(n=e(t[r]),n)return n;return n}isEmpty(){return pa(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return gn(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const X_=XP,pi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function KP(i,t){return[[-1/0,-1/0,1/0,1/0]]}let jP=!1;function ZP(i,t,e,n,r,s,a){const o=new XMLHttpRequest;o.open("GET",typeof i=="function"?i(e,n,r):i,!0),t.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=jP,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=t.getType();let h;u=="json"||u=="text"?h=o.responseText:u=="xml"?(h=o.responseXML,h||(h=new DOMParser().parseFromString(o.responseText,"application/xml"))):u=="arraybuffer"&&(h=o.response),h?s(t.readFeatures(h,{extent:e,featureProjection:r}),t.readProjection(h)):a()}else a()},o.onerror=a,o.send()}function K_(i,t){return function(e,n,r,s,a){const o=this;ZP(i,t,e,n,r,function(l,u){o.addFeatures(l),s!==void 0&&s(l)},a||ga)}}class En extends mn{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class qP extends Fb{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=ga,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(tt(this.format_,7),this.loader_=K_(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:KP;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new X_:null,this.loadedExtentsRtree_=new X_,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),!e&&n===void 0&&(n=new Di(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=lt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new En(pi.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[ot(e,q.CHANGE,this.handleFeatureChange_,this),ot(e,da.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const r=e.getId();return r!==void 0&&(r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e),n&&(tt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],r=[];for(let s=0,a=t.length;s<a;s++){const o=t[s],l=lt(o);this.addToIndex_(l,o)&&n.push(o)}for(let s=0,a=n.length;s<a;s++){const o=n[s],l=lt(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const h=u.getExtent();e.push(h),r.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(pi.ADDFEATURE))for(let s=0,a=n.length;s<a;s++)this.dispatchEvent(new En(pi.ADDFEATURE,n[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(pi.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(pi.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(Se.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),t.addEventListener(Se.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(It);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new En(pi.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(r){if(r.getGeometry().intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const s=e(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),pa(this.nullGeometryFeatures_)||un(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=DM(t,e);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],r=t[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||Zo,this.featuresRtree_.forEachInExtent(l,function(u){if(e(u)){const h=u.getGeometry(),c=o;if(o=h.closestPointXY(n,r,a,o),o<c){s=u;const f=Math.sqrt(o);l[0]=n-f,l[1]=r-f,l[2]=n+f,l[3]=r+f}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=lt(e),r=e.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const a=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}const s=e.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new En(pi.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:lt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&pa(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const r=this.loadedExtentsRtree_,s=this.strategy_(t,e,n);for(let a=0,o=s.length;a<o;++a){const l=s[a];r.forEachInExtent(l,function(h){return Ys(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new En(pi.FEATURESLOADSTART)),this.loader_.call(this,l,e,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new En(pi.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new En(pi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(r){if(qo(r.extent,t))return n=r,!0}),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=lt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=lt(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(It),delete this.featureChangeKeys_[e];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new En(pi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){tt(this.format_,7),this.url_=t,this.setLoader(K_(t,this.format_))}}const hm=qP;class cm extends Ui{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new cm(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(It(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ot(t,q.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?JP(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function JP(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(tt(typeof i.getZIndex=="function",41),t=[i]),function(){return t}}const fm=cm,QP=(i,t)=>{var o;const e=new va(i.coordinates),n=Zr(e.getExtent(),5e3),r=$g(n),s=(o=t.getSource())==null?void 0:o.getFeatures()[0];s.setGeometry(r);const a=[new ol({stroke:new al({color:i.strokeColor,width:i.strokeWidth}),fill:new qr({color:"rgba(0, 0, 255, 0.1)"}),text:new um({text:i.name,font:"25px Rosario,sans-serif",fill:new qr({color:"#000"}),stroke:new al({color:"#fff",width:4})})})];s.setStyle(a)},t2=()=>{const i=new fm;return new qb({source:new hm({features:[i]}),visible:!1,properties:{name:"highlightLayer"}})},j_=(i,t)=>{!i||!t||t.animate({center:i.center},{zoom:i.zoom},{rotation:i.rotation||0},{easing:vL},{duration:2e3})};class e2 extends hm{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(e){const n=e.getGeometry();return tt(!n||n.getType()==="Point",10),n},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(q.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(q.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const n=t===0?0:Math.min(e,t)/t,r=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=Me(),e=this.distance*this.resolution,n=this.source.getFeatures(),r={};for(let s=0,a=n.length;s<a;s++){const o=n[s];if(!(lt(o)in r)){const l=this.geometryFunction(o);if(l){const u=l.getCoordinates();BS(u,t),Zr(t,e,t);const h=this.source.getFeaturesInExtent(t).filter(function(c){const f=lt(c);return f in r?!1:(r[f]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,e){const n=[0,0];for(let o=t.length-1;o>=0;--o){const l=this.geometryFunction(t[o]);l?KS(n,l.getCoordinates()):t.splice(o,1)}jS(n,1/t.length);const r=Kn(e),s=this.interpolationRatio,a=new va([n[0]*(1-s)+r[0]*s,n[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(a,t):new fm({geometry:a,features:t})}}const i2=e2;class Uh extends rb{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(It),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ot(this.geometries_[t],q.CHANGE,this.changed,this))}clone(){const t=new Uh(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,r){if(r<es(this.getExtent(),t,e))return r;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)r=s[a].closestPointXY(t,e,n,r);return r}containsXY(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(t,e))return!0;return!1}computeExtent(t){Ma(t);const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)GS(t,e[n].getExtent());return t}getGeometries(){return Z_(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let r=!1;for(let s=0,a=n.length;s<a;++s){const o=n[s],l=o.getSimplifiedGeometry(t);e.push(l),l!==o&&(r=!0)}if(r){const s=new Uh(null);return s.setGeometriesArray(e),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Kn(this.getExtent()));const r=this.geometries_;for(let s=0,a=r.length;s<a;++s)r[s].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(Z_(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Z_(i){const t=[];for(let e=0,n=i.length;e<n;++e)t.push(i[e].clone());return t}const n2=Uh;class r2{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?Wt(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Wt(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return X()}readFeature(t,e){return X()}readFeatures(t,e){return X()}readGeometry(t,e){return X()}readProjection(t){return X()}writeFeature(t,e){return X()}writeFeatures(t,e){return X()}writeGeometry(t,e){return X()}}function Jb(i,t,e){const n=e?Wt(e.featureProjection):null,r=e?Wt(e.dataProjection):null;let s;if(n&&r&&!Rr(n,r)?s=(t?i.clone():i).transform(t?n:r,t?r:n):s=i,t&&e&&e.decimals!==void 0){const a=Math.pow(10,e.decimals),o=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*a)/a;return l};s===i&&(s=i.clone()),s.applyTransform(o)}return s}class s2 extends r2{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(yu(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(yu(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return X()}readFeaturesFromObject(t,e){return X()}readGeometry(t,e){return this.readGeometryFromObject(yu(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return X()}readProjection(t){return this.readProjectionFromObject(yu(t))}readProjectionFromObject(t){return X()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return X()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return X()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return X()}}function yu(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}return i!==null?i:null}const a2=s2;function Qb(i,t,e,n,r,s,a){let o,l;const u=(e-t)/n;if(u===1)o=t;else if(u===2)o=t,l=r;else if(u!==0){let h=i[t],c=i[t+1],f=0;const d=[0];for(let v=t+n;v<e;v+=n){const m=i[v],y=i[v+1];f+=Math.sqrt((m-h)*(m-h)+(y-c)*(y-c)),d.push(f),h=m,c=y}const g=r*f,p=lM(d,g);p<0?(l=(g-d[-p-2])/(d[-p-1]-d[-p-2]),o=t+(-p-2)*n):o=t+p*n}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?i[o+h]:Ge(i[o+h],i[o+n+h],l);return s}function qg(i,t,e,n,r,s){if(e==t)return null;let a;if(r<i[t+n-1])return s?(a=i.slice(t,t+n),a[n-1]=r,a):null;if(i[e-1]<r)return s?(a=i.slice(e-n,e),a[n-1]=r,a):null;if(r==i[t+n-1])return i.slice(t,t+n);let o=t/n,l=e/n;for(;o<l;){const f=o+l>>1;r<i[(f+1)*n-1]?l=f:o=f+1}const u=i[o*n-1];if(r==u)return i.slice((o-1)*n,(o-1)*n+n);const h=i[(o+1)*n-1],c=(r-u)/(h-u);a=[];for(let f=0;f<n-1;++f)a.push(Ge(i[(o-1)*n+f],i[o*n+f],c));return a.push(r),a}function o2(i,t,e,n,r,s,a){if(a)return qg(i,t,e[e.length-1],n,r,s);let o;if(r<i[n-1])return s?(o=i.slice(0,n),o[n-1]=r,o):null;if(i[i.length-1]<r)return s?(o=i.slice(i.length-n),o[n-1]=r,o):null;for(let l=0,u=e.length;l<u;++l){const h=e[l];if(t!=h){if(r<i[t+n-1])return null;if(r<=i[h-1])return qg(i,t,h,n,r,!1);t=h}}return null}class Xh extends ns{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?un(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Xh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<es(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))}forEachSegment(t){return hb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,qg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Qb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Kb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Hv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Xh(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Wc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}const Jg=Xh;class Kh extends ns{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let r=this.getLayout();const s=t,a=[],o=[];for(let l=0,u=s.length;l<u;++l){const h=s[l];l===0&&(r=h.getLayout()),un(a,h.getFlatCoordinates()),o.push(a.length)}this.setFlatCoordinates(r,a),this.ends_=o}}appendLineString(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Kh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<es(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($v(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,o2(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return tl(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Jg(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=new Jg(t.slice(s,l),n);r.push(u),s=l}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=Qb(e,n,l,s,.5);un(t,u),n=l}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=IL(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new Kh(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return OL(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Yv(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const l2=Kh;class dm extends ns{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new dm(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){if(r<es(this.getExtent(),t,e))return r;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=Gr(t,e,s[o],s[o+1]);if(u<r){r=u;for(let h=0;h<a;++h)n[h]=s[o+h];n.length=a}}return r}getCoordinates(){return zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new va(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,r=[];for(let s=0,a=t.length;s<a;s+=n){const o=new va(t.slice(s,s+n),e);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let r=0,s=e.length;r<s;r+=n){const a=e[r],o=e[r+1];if(Mv(t,a,o))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}const tT=dm;function u2(i,t,e,n){const r=[];let s=Me();for(let a=0,o=e.length;a<o;++a){const l=e[a];s=zS(i,t,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class jh extends ns{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,a=[],o=[];for(let l=0,u=s.length;l<u;++l){const h=s[l];l===0&&(r=h.getLayout());const c=a.length,f=h.getEnds();for(let d=0,g=f.length;d<g;++d)f[d]+=c;un(a,h.getFlatCoordinates()),o.push(f)}e=r,t=a,n=o}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;un(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,s=e.length;r<s;++r)e[r]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const n=new jh(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,r){return r<es(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bL(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))}containsXY(t,e){return DL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ML(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),x_(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Bg(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=u2(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=PL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new tT(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;BL(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=x_(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=RL(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new jh(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const n=this.endss_[t].slice(),r=n[n.length-1];if(e!==0)for(let s=0,a=n.length;s<a;++s)n[s]-=e;return new el(this.flatCoordinates.slice(e,r),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let a=0,o=n.length;a<o;++a){const l=n[a].slice(),u=l[l.length-1];if(s!==0)for(let c=0,f=l.length;c<f;++c)l[c]-=s;const h=new el(e.slice(s,u),t,l);r.push(h),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return FL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=EL(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const h2=jh;class c2 extends a2{constructor(t){t=t||{},super(),this.dataProjection=Wt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Wt(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const r=Qg(n.geometry,e),s=new fm;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&s.setGeometryName(n.geometry_name),s.setGeometry(r),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,e){const n=t;let r=null;if(n.type==="FeatureCollection"){const s=t;r=[];const a=s.features;for(let o=0,l=a.length;o<l;++o)r.push(this.readFeatureFromObject(a[o],e))}else r=[this.readFeatureFromObject(t,e)];return r}readGeometryFromObject(t,e){return Qg(t,e)}readProjectionFromObject(t){const e=t.crs;let n;return e?e.type=="name"?n=Wt(e.properties.name):e.type==="EPSG"?n=Wt("EPSG:"+e.properties.code):tt(!1,36):n=this.dataProjection,n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(n.id=r),!t.hasProperties())return n;const s=t.getProperties(),a=t.getGeometry();return a&&(n.geometry=tp(a,e),delete s[t.getGeometryName()]),pa(s)||(n.properties=s),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let r=0,s=t.length;r<s;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return tp(t,this.adaptOptions(e))}}function Qg(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=d2(i);break}case"LineString":{e=g2(i);break}case"Polygon":{e=y2(i);break}case"MultiPoint":{e=v2(i);break}case"MultiLineString":{e=p2(i);break}case"MultiPolygon":{e=m2(i);break}case"GeometryCollection":{e=f2(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return Jb(e,!1,t)}function f2(i,t){const e=i.geometries.map(function(n){return Qg(n,t)});return new n2(e)}function d2(i){return new va(i.coordinates)}function g2(i){return new Jg(i.coordinates)}function p2(i){return new l2(i.coordinates)}function v2(i){return new tT(i.coordinates)}function m2(i){return new h2(i.coordinates)}function y2(i){return new el(i.coordinates)}function tp(i,t){i=Jb(i,!0,t);const e=i.getType();let n;switch(e){case"Point":{n=T2(i);break}case"LineString":{n=w2(i);break}case"Polygon":{n=C2(i,t);break}case"MultiPoint":{n=S2(i);break}case"MultiLineString":{n=x2(i);break}case"MultiPolygon":{n=b2(i,t);break}case"GeometryCollection":{n=_2(i,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function _2(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return tp(n,t)})}}function w2(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function x2(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function S2(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function b2(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function T2(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function C2(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const E2=c2,q_=[],I2=(i,t)=>{t.getSource().getSource().setUrl(i.dataLayer.url)},A2=()=>{const i=new hm({format:new E2}),t=new i2({distance:50,minDistance:50,source:i}),e=n=>{const r=n.get("features").length;let s=q_[r];return s||(s=new ol({image:new rm({radius:30,stroke:new al({color:"#e59812",width:2}),fill:new qr({color:"#fff"})}),text:new um({text:r.toString(),font:"25px Rosario,sans-serif",fill:new qr({color:"#e59812"})})}),q_[r]=s),s};return new qb({source:t,style:e,visible:!1,properties:{name:"dataLayer"}})},R2=[{type:"wms",name:"topplus-bkg",url:"https://sgx.geodatenzentrum.de/wms_topplus_open",layers:"web",version:"1.3.0",attributions:`© Bundesamt für Kartographie und Geodäsie (${new Date().getFullYear()})`},{type:"wms",name:"sen2europe",url:"https://sgx.geodatenzentrum.de/wms_sen2europe",layers:"rgb",version:"1.3.0",attributions:`© Europäische Union, enthält veränderte Copernicus Sentinel-Daten (${new Date().getFullYear()})`},{type:"wms",name:"sentinel-rgb",url:"https://geoserver.mundialis.de/geoserver/wms",layers:"sentinelMosaic:art_040302",version:"1.3.0",attributions:"mundialis - Contains modified Copernicus Sentinel data (2015-2017)/ESA"},{type:"wms",name:"sentinel-comp",url:"https://geoserver.mundialis.de/geoserver/wms",layers:"sentinel-rgbMosaic:art_8A1104",version:"1.3.0",attributions:"mundialis - Contains modified Copernicus Sentinel data (2015-2017)/ESA"}];class M2 extends Gb{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:DD({extent:Qv(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const L2=M2,k2='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class D2 extends L2{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[k2];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const P2=D2,J_=i=>{if(i==="osm"){const n=new jg({source:new P2});return n.set("id","baseLayer"),n.set("name",i),n}const t=R2.filter(n=>n.name===i)[0],e=new jg({source:new $b({url:t.url,params:{LAYERS:t.layers,version:t.version},attributions:t.attributions})});return e.set("id","baseLayer"),e.set("name",i),e};function O2(i){let t,e,n;return{c(){t=ue("div"),ge(t,"id",F2),ge(t,"class","map svelte-18czejg")},m(r,s){le(r,t,s),e||(n=Xx(i[0].call(null,t)),e=!0)},p:ut,i:ut,o:ut,d(r){r&&Jt(t),e=!1,n()}}}let F2="scrollymap-1";function N2(i,t,e){let{steps:n}=t,r=null,s,a,o,l;const u=h=>(s=J_("osm"),e(2,r=new nD({controls:[new _b({collapsed:!1})],interactions:[],target:h.id,layers:[s],view:new Mi({center:[0,0],zoom:9})})),{destroy(){r&&(r.setTarget(null),e(2,r=null))}});return Rg.subscribe(h=>{var c;if(h>=0&&r&&n){const f=n[h];if(!f)return;if(f.baseLayer&&f.baseLayer!==s.get("name")){const d=(c=J_(f.baseLayer))===null||c===void 0?void 0:c.getSource(),g=r.getAllLayers().filter(p=>p.get("id")==="baseLayer")[0];g==null||g.setSource(d),g.set("name",f.baseLayer)}f.topicLayer?(UD(f.topicLayer,a),a.setVisible(!0)):a.setVisible(!1),f.dataLayer?(I2(f,l),l.setVisible(!0)):l&&l.setVisible(!1),f.highlight?(QP(f.highlight,o),o.setVisible(!0)):o&&o.setVisible(!1),j_(f,r.getView())}}),i.$$set=h=>{"steps"in h&&e(1,n=h.steps)},i.$$.update=()=>{i.$$.dirty&62&&r&&n&&(j_(n[0],r.getView()),n.some(h=>h.topicLayer)&&(e(3,a=XD()),r.addLayer(a)),n.some(h=>h.highlight)&&(e(4,o=t2()),r.addLayer(o)),n.some(h=>h.dataLayer)&&(e(5,l=A2()),r.addLayer(l)))},[u,n,r,a,o,l]}class B2 extends Il{constructor(t){super(),El(this,t,N2,O2,Ca,{steps:1})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ep=function(i,t){return ep=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},ep(i,t)};function j(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ep(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var z2=function(){function i(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return i}(),G2=function(){function i(){this.browser=new z2,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return i}(),Ar=new G2;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ar.wxa=!0,Ar.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ar.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(Ar.node=!0,Ar.svgSupported=!0):$2(navigator.userAgent,Ar);function $2(i,t){var e=t.browser,n=i.match(/Firefox\/([\d.]+)/),r=i.match(/MSIE\s([\d.]+)/)||i.match(/Trident\/.+?rv:(([\d.]+))/),s=i.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(i);n&&(e.firefox=!0,e.version=n[1]),r&&(e.ie=!0,e.version=r[1]),s&&(e.edge=!0,e.version=s[1],e.newEdge=+s[1].split(".")[0]>18),a&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported=typeof document<"u";var o=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in o||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}const it=Ar;var gm=12,V2="sans-serif",Jr=gm+"px "+V2,W2=20,Y2=100,H2="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function U2(i){var t={};if(typeof JSON>"u")return t;for(var e=0;e<i.length;e++){var n=String.fromCharCode(e+32),r=(i.charCodeAt(e)-W2)/Y2;t[n]=r}return t}var X2=U2(H2),ka={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var i,t;return function(e,n){if(!i){var r=ka.createCanvas();i=r&&r.getContext("2d")}if(i)return t!==n&&(t=i.font=n||Jr),i.measureText(e);e=e||"",n=n||Jr;var s=/(\d+)px/.exec(n),a=s&&+s[1]||gm,o=0;if(n.indexOf("mono")>=0)o=a*e.length;else for(var l=0;l<e.length;l++){var u=X2[e[l]];o+=u==null?a:u*a}return{width:o}}}(),loadImage:function(i,t,e){var n=new Image;return n.onload=t,n.onerror=e,n.src=i,n}},eT=Da(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(i,t){return i["[object "+t+"]"]=!0,i},{}),iT=Da(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(i,t){return i["[object "+t+"Array]"]=!0,i},{}),zl=Object.prototype.toString,Zc=Array.prototype,K2=Zc.forEach,j2=Zc.filter,pm=Zc.slice,Z2=Zc.map,Q_=(function(){}).constructor,_u=Q_?Q_.prototype:null,vm="__proto__",q2=2311;function nT(){return q2++}function mm(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];typeof console<"u"&&console.error.apply(console,i)}function at(i){if(i==null||typeof i!="object")return i;var t=i,e=zl.call(i);if(e==="[object Array]"){if(!Ao(i)){t=[];for(var n=0,r=i.length;n<r;n++)t[n]=at(i[n])}}else if(iT[e]){if(!Ao(i)){var s=i.constructor;if(s.from)t=s.from(i);else{t=new s(i.length);for(var n=0,r=i.length;n<r;n++)t[n]=i[n]}}}else if(!eT[e]&&!Ao(i)&&!hl(i)){t={};for(var a in i)i.hasOwnProperty(a)&&a!==vm&&(t[a]=at(i[a]))}return t}function ht(i,t,e){if(!Y(t)||!Y(i))return e?at(t):i;for(var n in t)if(t.hasOwnProperty(n)&&n!==vm){var r=i[n],s=t[n];Y(s)&&Y(r)&&!z(s)&&!z(r)&&!hl(s)&&!hl(r)&&!t0(s)&&!t0(r)&&!Ao(s)&&!Ao(r)?ht(r,s,e):(e||!(n in i))&&(i[n]=at(t[n]))}return i}function N(i,t){if(Object.assign)Object.assign(i,t);else for(var e in t)t.hasOwnProperty(e)&&e!==vm&&(i[e]=t[e]);return i}function St(i,t,e){for(var n=kt(t),r=0;r<n.length;r++){var s=n[r];(e?t[s]!=null:i[s]==null)&&(i[s]=t[s])}return i}function gt(i,t){if(i){if(i.indexOf)return i.indexOf(t);for(var e=0,n=i.length;e<n;e++)if(i[e]===t)return e}return-1}function J2(i,t){var e=i.prototype;function n(){}n.prototype=t.prototype,i.prototype=new n;for(var r in e)e.hasOwnProperty(r)&&(i.prototype[r]=e[r]);i.prototype.constructor=i,i.superClass=t}function Ti(i,t,e){if(i="prototype"in i?i.prototype:i,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var s=n[r];s!=="constructor"&&(e?t[s]!=null:i[s]==null)&&(i[s]=t[s])}else St(i,t,e)}function Le(i){return!i||typeof i=="string"?!1:typeof i.length=="number"}function A(i,t,e){if(i&&t)if(i.forEach&&i.forEach===K2)i.forEach(t,e);else if(i.length===+i.length)for(var n=0,r=i.length;n<r;n++)t.call(e,i[n],n,i);else for(var s in i)i.hasOwnProperty(s)&&t.call(e,i[s],s,i)}function H(i,t,e){if(!i)return[];if(!t)return ym(i);if(i.map&&i.map===Z2)return i.map(t,e);for(var n=[],r=0,s=i.length;r<s;r++)n.push(t.call(e,i[r],r,i));return n}function Da(i,t,e,n){if(i&&t){for(var r=0,s=i.length;r<s;r++)e=t.call(n,e,i[r],r,i);return e}}function ae(i,t,e){if(!i)return[];if(!t)return ym(i);if(i.filter&&i.filter===j2)return i.filter(t,e);for(var n=[],r=0,s=i.length;r<s;r++)t.call(e,i[r],r,i)&&n.push(i[r]);return n}function kt(i){if(!i)return[];if(Object.keys)return Object.keys(i);var t=[];for(var e in i)i.hasOwnProperty(e)&&t.push(e);return t}function Q2(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return function(){return i.apply(t,e.concat(pm.call(arguments)))}}var Pt=_u&&rt(_u.bind)?_u.call.bind(_u.bind):Q2;function Et(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return i.apply(this,t.concat(pm.call(arguments)))}}function z(i){return Array.isArray?Array.isArray(i):zl.call(i)==="[object Array]"}function rt(i){return typeof i=="function"}function $(i){return typeof i=="string"}function ip(i){return zl.call(i)==="[object String]"}function Ot(i){return typeof i=="number"}function Y(i){var t=typeof i;return t==="function"||!!i&&t==="object"}function t0(i){return!!eT[zl.call(i)]}function ke(i){return!!iT[zl.call(i)]}function hl(i){return typeof i=="object"&&typeof i.nodeType=="number"&&typeof i.ownerDocument=="object"}function qc(i){return i.colorStops!=null}function tO(i){return i.image!=null}function Zh(i){return i!==i}function ya(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];for(var e=0,n=i.length;e<n;e++)if(i[e]!=null)return i[e]}function et(i,t){return i??t}function vh(i,t,e){return i??t??e}function ym(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return pm.apply(i,t)}function rT(i){if(typeof i=="number")return[i,i,i,i];var t=i.length;return t===2?[i[0],i[1],i[0],i[1]]:t===3?[i[0],i[1],i[2],i[1]]:i}function pn(i,t){if(!i)throw new Error(t)}function Oi(i){return i==null?null:typeof i.trim=="function"?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var sT="__ec_primitive__";function np(i){i[sT]=!0}function Ao(i){return i[sT]}var eO=function(){function i(){this.data={}}return i.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},i.prototype.has=function(t){return this.data.hasOwnProperty(t)},i.prototype.get=function(t){return this.data[t]},i.prototype.set=function(t,e){return this.data[t]=e,this},i.prototype.keys=function(){return kt(this.data)},i.prototype.forEach=function(t){var e=this.data;for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},i}(),aT=typeof Map=="function";function iO(){return aT?new Map:new eO}var nO=function(){function i(t){var e=z(t);this.data=iO();var n=this;t instanceof i?t.each(r):t&&A(t,r);function r(s,a){e?n.set(s,a):n.set(a,s)}}return i.prototype.hasKey=function(t){return this.data.has(t)},i.prototype.get=function(t){return this.data.get(t)},i.prototype.set=function(t,e){return this.data.set(t,e),e},i.prototype.each=function(t,e){this.data.forEach(function(n,r){t.call(e,n,r)})},i.prototype.keys=function(){var t=this.data.keys();return aT?Array.from(t):t},i.prototype.removeKey=function(t){this.data.delete(t)},i}();function nt(i){return new nO(i)}function rO(i,t){for(var e=new i.constructor(i.length+t.length),n=0;n<i.length;n++)e[n]=i[n];for(var r=i.length,n=0;n<t.length;n++)e[n+r]=t[n];return e}function Jc(i,t){var e;if(Object.create)e=Object.create(i);else{var n=function(){};n.prototype=i,e=new n}return t&&N(e,t),e}function oT(i){var t=i.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function _a(i,t){return i.hasOwnProperty(t)}function Re(){}var sO=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rp=function(i,t){return rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},rp(i,t)};function yt(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rp(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Pa(i,t){return i==null&&(i=0),t==null&&(t=0),[i,t]}function aO(i){return[i[0],i[1]]}function e0(i,t,e){return i[0]=t[0]+e[0],i[1]=t[1]+e[1],i}function lT(i,t,e){return i[0]=t[0]-e[0],i[1]=t[1]-e[1],i}function oO(i){return Math.sqrt(lO(i))}function lO(i){return i[0]*i[0]+i[1]*i[1]}function Zf(i,t,e){return i[0]=t[0]*e,i[1]=t[1]*e,i}function _m(i,t){var e=oO(t);return e===0?(i[0]=0,i[1]=0):(i[0]=t[0]/e,i[1]=t[1]/e),i}function sp(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1]))}var uO=sp;function hO(i,t){return(i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])}var ia=hO;function ui(i,t,e){var n=t[0],r=t[1];return i[0]=e[0]*n+e[2]*r+e[4],i[1]=e[1]*n+e[3]*r+e[5],i}function Us(i,t,e){return i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i}function Xs(i,t,e){return i[0]=Math.max(t[0],e[0]),i[1]=Math.max(t[1],e[1]),i}var ws=function(){function i(t,e){this.target=t,this.topTarget=e&&e.topTarget}return i}(),cO=function(){function i(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return i.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new ws(e,t),"dragstart",t.event))},i.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,s=n-this._x,a=r-this._y;this._x=n,this._y=r,e.drift(s,a,t),this.handler.dispatchToElement(new ws(e,t),"drag",t.event);var o=this.handler.findHover(n,r,e).target,l=this._dropTarget;this._dropTarget=o,e!==o&&(l&&o!==l&&this.handler.dispatchToElement(new ws(l,t),"dragleave",t.event),o&&o!==l&&this.handler.dispatchToElement(new ws(o,t),"dragenter",t.event))}},i.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new ws(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new ws(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},i}();const fO=cO;var dO=function(){function i(t){t&&(this._$eventProcessor=t)}return i.prototype.on=function(t,e,n,r){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof e=="function"&&(r=n,n=e,e=null),!n||!t)return this;var a=this._$eventProcessor;e!=null&&a&&a.normalizeQuery&&(e=a.normalizeQuery(e)),s[t]||(s[t]=[]);for(var o=0;o<s[t].length;o++)if(s[t][o].h===n)return this;var l={h:n,query:e,ctx:r||this,callAtLast:n.zrEventfulCallAtLast},u=s[t].length-1,h=s[t][u];return h&&h.callAtLast?s[t].splice(u,0,l):s[t].push(l),this},i.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},i.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],s=0,a=n[t].length;s<a;s++)n[t][s].h!==e&&r.push(n[t][s]);n[t]=r}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},i.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[t],s=this._$eventProcessor;if(r)for(var a=e.length,o=r.length,l=0;l<o;l++){var u=r[l];if(!(s&&s.filter&&u.query!=null&&!s.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,e[0]);break;case 2:u.h.call(u.ctx,e[0],e[1]);break;default:u.h.apply(u.ctx,e);break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},i.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[t],s=this._$eventProcessor;if(r)for(var a=e.length,o=e[a-1],l=r.length,u=0;u<l;u++){var h=r[u];if(!(s&&s.filter&&h.query!=null&&!s.filter(t,h.query)))switch(a){case 0:h.h.call(o);break;case 1:h.h.call(o,e[0]);break;case 2:h.h.call(o,e[0],e[1]);break;default:h.h.apply(o,e.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},i}();const Xi=dO;var gO=Math.log(2);function ap(i,t,e,n,r,s){var a=n+"-"+r,o=i.length;if(s.hasOwnProperty(a))return s[a];if(t===1){var l=Math.round(Math.log((1<<o)-1&~r)/gO);return i[e][l]}for(var u=n|1<<e,h=e+1;n&1<<h;)h++;for(var c=0,f=0,d=0;f<o;f++){var g=1<<f;g&r||(c+=(d%2?-1:1)*i[e][f]*ap(i,t-1,h,u,r|g,s),d++)}return s[a]=c,c}function i0(i,t){var e=[[i[0],i[1],1,0,0,0,-t[0]*i[0],-t[0]*i[1]],[0,0,0,i[0],i[1],1,-t[1]*i[0],-t[1]*i[1]],[i[2],i[3],1,0,0,0,-t[2]*i[2],-t[2]*i[3]],[0,0,0,i[2],i[3],1,-t[3]*i[2],-t[3]*i[3]],[i[4],i[5],1,0,0,0,-t[4]*i[4],-t[4]*i[5]],[0,0,0,i[4],i[5],1,-t[5]*i[4],-t[5]*i[5]],[i[6],i[7],1,0,0,0,-t[6]*i[6],-t[6]*i[7]],[0,0,0,i[6],i[7],1,-t[7]*i[6],-t[7]*i[7]]],n={},r=ap(e,8,0,0,0,n);if(r!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*ap(e,7,a===0?1:0,1<<a,1<<o,n)/r*t[a];return function(l,u,h){var c=u*s[6]+h*s[7]+1;l[0]=(u*s[0]+h*s[1]+s[2])/c,l[1]=(u*s[3]+h*s[4]+s[5])/c}}}var n0="___zrEVENTSAVED",qf=[];function pO(i,t,e,n,r){return op(qf,t,n,r,!0)&&op(i,e,qf[0],qf[1])}function op(i,t,e,n,r){if(t.getBoundingClientRect&&it.domSupported&&!uT(t)){var s=t[n0]||(t[n0]={}),a=vO(t,s),o=mO(a,s,r);if(o)return o(i,e,n),!0}return!1}function vO(i,t){var e=t.markers;if(e)return e;e=t.markers=[];for(var n=["left","right"],r=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,u=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",r[u]+":0",n[1-l]+":auto",r[1-u]+":auto",""].join("!important;"),i.appendChild(a),e.push(a)}return e}function mO(i,t,e){for(var n=e?"invTrans":"trans",r=t[n],s=t.srcCoords,a=[],o=[],l=!0,u=0;u<4;u++){var h=i[u].getBoundingClientRect(),c=2*u,f=h.left,d=h.top;a.push(f,d),l=l&&s&&f===s[c]&&d===s[c+1],o.push(i[u].offsetLeft,i[u].offsetTop)}return l&&r?r:(t.srcCoords=a,t[n]=e?i0(o,a):i0(a,o))}function uT(i){return i.nodeName.toUpperCase()==="CANVAS"}var yO=/([&<>"'])/g,_O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ei(i){return i==null?"":(i+"").replace(yO,function(t,e){return _O[e]})}var wO=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Jf=[],xO=it.browser.firefox&&+it.browser.version.split(".")[0]<39;function lp(i,t,e,n){return e=e||{},n?r0(i,t,e):xO&&t.layerX!=null&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):t.offsetX!=null?(e.zrX=t.offsetX,e.zrY=t.offsetY):r0(i,t,e),e}function r0(i,t,e){if(it.domSupported&&i.getBoundingClientRect){var n=t.clientX,r=t.clientY;if(uT(i)){var s=i.getBoundingClientRect();e.zrX=n-s.left,e.zrY=r-s.top;return}else if(op(Jf,i,n,r)){e.zrX=Jf[0],e.zrY=Jf[1];return}}e.zrX=e.zrY=0}function wm(i){return i||window.event}function Je(i,t,e){if(t=wm(t),t.zrX!=null)return t;var n=t.type,r=n&&n.indexOf("touch")>=0;if(r){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&lp(i,a,t,e)}else{lp(i,t,t,e);var s=SO(t);t.zrDelta=s?s/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&wO.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function SO(i){var t=i.wheelDelta;if(t)return t;var e=i.deltaX,n=i.deltaY;if(e==null||n==null)return t;var r=Math.abs(n!==0?n:e),s=n>0?-1:n<0?1:e>0?-1:1;return 3*r*s}function bO(i,t,e,n){i.addEventListener(t,e,n)}function TO(i,t,e,n){i.removeEventListener(t,e,n)}var hT=function(i){i.preventDefault(),i.stopPropagation(),i.cancelBubble=!0},CO=function(){function i(){this._track=[]}return i.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},i.prototype.clear=function(){return this._track.length=0,this},i.prototype._doTrack=function(t,e,n){var r=t.touches;if(r){for(var s={points:[],touches:[],target:e,event:t},a=0,o=r.length;a<o;a++){var l=r[a],u=lp(n,l,{});s.points.push([u.zrX,u.zrY]),s.touches.push(l)}this._track.push(s)}},i.prototype._recognize=function(t){for(var e in Qf)if(Qf.hasOwnProperty(e)){var n=Qf[e](this._track,t);if(n)return n}},i}();function s0(i){var t=i[1][0]-i[0][0],e=i[1][1]-i[0][1];return Math.sqrt(t*t+e*e)}function EO(i){return[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]}var Qf={pinch:function(i,t){var e=i.length;if(e){var n=(i[e-1]||{}).points,r=(i[e-2]||{}).points||n;if(r&&r.length>1&&n&&n.length>1){var s=s0(n)/s0(r);!isFinite(s)&&(s=1),t.pinchScale=s;var a=EO(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:i[0].target,event:t}}}}};function na(){return[1,0,0,1,0,0]}function xm(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i}function IO(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function ra(i,t,e){var n=t[0]*e[0]+t[2]*e[1],r=t[1]*e[0]+t[3]*e[1],s=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],o=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];return i[0]=n,i[1]=r,i[2]=s,i[3]=a,i[4]=o,i[5]=l,i}function up(i,t,e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4]+e[0],i[5]=t[5]+e[1],i}function Sm(i,t,e,n){n===void 0&&(n=[0,0]);var r=t[0],s=t[2],a=t[4],o=t[1],l=t[3],u=t[5],h=Math.sin(e),c=Math.cos(e);return i[0]=r*c+o*h,i[1]=-r*h+o*c,i[2]=s*c+l*h,i[3]=-s*h+c*l,i[4]=c*(a-n[0])+h*(u-n[1])+n[0],i[5]=c*(u-n[1])-h*(a-n[0])+n[1],i}function AO(i,t,e){var n=e[0],r=e[1];return i[0]=t[0]*n,i[1]=t[1]*r,i[2]=t[2]*n,i[3]=t[3]*r,i[4]=t[4]*n,i[5]=t[5]*r,i}function bm(i,t){var e=t[0],n=t[2],r=t[4],s=t[1],a=t[3],o=t[5],l=e*a-s*n;return l?(l=1/l,i[0]=a*l,i[1]=-s*l,i[2]=-n*l,i[3]=e*l,i[4]=(n*o-a*r)*l,i[5]=(s*r-e*o)*l,i):null}var RO=function(){function i(t,e){this.x=t||0,this.y=e||0}return i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.scale=function(t){this.x*=t,this.y*=t},i.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},i.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},i.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},i.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},i.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},i.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},i.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},i.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},i.set=function(t,e,n){t.x=e,t.y=n},i.copy=function(t,e){t.x=e.x,t.y=e.y},i.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.lenSquare=function(t){return t.x*t.x+t.y*t.y},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},i.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},i.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},i.scaleAndAdd=function(t,e,n,r){t.x=e.x+n.x*r,t.y=e.y+n.y*r},i.lerp=function(t,e,n,r){var s=1-r;t.x=s*e.x+r*n.x,t.y=s*e.y+r*n.y},i}();const xt=RO;var wu=Math.min,xu=Math.max,rr=new xt,sr=new xt,ar=new xt,or=new xt,Ha=new xt,Ua=new xt,MO=function(){function i(t,e,n,r){n<0&&(t=t+n,n=-n),r<0&&(e=e+r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}return i.prototype.union=function(t){var e=wu(t.x,this.x),n=wu(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=xu(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=xu(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},i.prototype.applyTransform=function(t){i.applyTransform(this,this,t)},i.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,r=t.height/e.height,s=na();return up(s,s,[-e.x,-e.y]),AO(s,s,[n,r]),up(s,s,[t.x,t.y]),s},i.prototype.intersect=function(t,e){if(!t)return!1;t instanceof i||(t=i.create(t));var n=this,r=n.x,s=n.x+n.width,a=n.y,o=n.y+n.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,f=!(s<l||u<r||o<h||c<a);if(e){var d=1/0,g=0,p=Math.abs(s-l),v=Math.abs(u-r),m=Math.abs(o-h),y=Math.abs(c-a),_=Math.min(p,v),w=Math.min(m,y);s<l||u<r?_>g&&(g=_,p<v?xt.set(Ua,-p,0):xt.set(Ua,v,0)):_<d&&(d=_,p<v?xt.set(Ha,p,0):xt.set(Ha,-v,0)),o<h||c<a?w>g&&(g=w,m<y?xt.set(Ua,0,-m):xt.set(Ua,0,y)):_<d&&(d=_,m<y?xt.set(Ha,0,m):xt.set(Ha,0,-y))}return e&&xt.copy(e,f?Ha:Ua),f},i.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copy=function(t){i.copy(this,t)},i.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},i.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},i.prototype.isZero=function(){return this.width===0||this.height===0},i.create=function(t){return new i(t.x,t.y,t.width,t.height)},i.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},i.applyTransform=function(t,e,n){if(!n){t!==e&&i.copy(t,e);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var r=n[0],s=n[3],a=n[4],o=n[5];t.x=e.x*r+a,t.y=e.y*s+o,t.width=e.width*r,t.height=e.height*s,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}rr.x=ar.x=e.x,rr.y=or.y=e.y,sr.x=or.x=e.x+e.width,sr.y=ar.y=e.y+e.height,rr.transform(n),or.transform(n),sr.transform(n),ar.transform(n),t.x=wu(rr.x,sr.x,ar.x,or.x),t.y=wu(rr.y,sr.y,ar.y,or.y);var l=xu(rr.x,sr.x,ar.x,or.x),u=xu(rr.y,sr.y,ar.y,or.y);t.width=l-t.x,t.height=u-t.y},i}();const pt=MO;var cT="silent";function LO(i,t,e){return{type:i,event:e,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:e.zrX,offsetY:e.zrY,gestureEvent:e.gestureEvent,pinchX:e.pinchX,pinchY:e.pinchY,pinchScale:e.pinchScale,wheelDelta:e.zrDelta,zrByTouch:e.zrByTouch,which:e.which,stop:kO}}function kO(){hT(this.event)}var DO=function(i){yt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.handler=null,e}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Xi),Xa=function(){function i(t,e){this.x=t,this.y=e}return i}(),PO=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],td=new pt(0,0,0,0),fT=function(i){yt(t,i);function t(e,n,r,s,a){var o=i.call(this)||this;return o._hovered=new Xa(0,0),o.storage=e,o.painter=n,o.painterRoot=s,o._pointerSize=a,r=r||new DO,o.proxy=null,o.setHandlerProxy(r),o._draggingMgr=new fO(o),o}return t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(A(PO,function(n){e.on&&e.on(n,this[n],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var n=e.zrX,r=e.zrY,s=dT(this,n,r),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new Xa(n,r):this.findHover(n,r),u=l.target,h=this.proxy;h.setCursor&&h.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(l,"mousemove",e),u&&u!==o&&this.dispatchToElement(l,"mouseover",e)},t.prototype.mouseout=function(e){var n=e.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",e),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Xa(0,0)},t.prototype.dispatch=function(e,n){var r=this[e];r&&r.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var n=this.proxy;n.setCursor&&n.setCursor(e)},t.prototype.dispatchToElement=function(e,n,r){e=e||{};var s=e.target;if(!(s&&s.silent)){for(var a="on"+n,o=LO(n,e,r);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(n,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(n,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(n,o)}))}},t.prototype.findHover=function(e,n,r){var s=this.storage.getDisplayList(),a=new Xa(e,n);if(a0(s,a,e,n,r),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,u=l/2,h=new pt(e-u,n-u,l,l),c=s.length-1;c>=0;c--){var f=s[c];f!==r&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(td.copy(f.getBoundingRect()),f.transform&&td.applyTransform(f.transform),td.intersect(h)&&o.push(f))}if(o.length)for(var d=4,g=Math.PI/12,p=Math.PI*2,v=0;v<u;v+=d)for(var m=0;m<p;m+=g){var y=e+v*Math.cos(m),_=n+v*Math.sin(m);if(a0(o,a,y,_,r),a.target)return a}}return a},t.prototype.processGesture=function(e,n){this._gestureMgr||(this._gestureMgr=new CO);var r=this._gestureMgr;n==="start"&&r.clear();var s=r.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if(n==="end"&&r.clear(),s){var a=s.type;e.gestureEvent=a;var o=new Xa;o.target=s.target,this.dispatchToElement(o,a,s.event)}},t}(Xi);A(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(i){fT.prototype[i]=function(t){var e=t.zrX,n=t.zrY,r=dT(this,e,n),s,a;if((i!=="mouseup"||!r)&&(s=this.findHover(e,n),a=s.target),i==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(i==="mouseup")this._upEl=a;else if(i==="click"){if(this._downEl!==this._upEl||!this._downPoint||uO(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,i,t)}});function OO(i,t,e){if(i[i.rectHover?"rectContain":"contain"](t,e)){for(var n=i,r=void 0,s=!1;n;){if(n.ignoreClip&&(s=!0),!s){var a=n.getClipPath();if(a&&!a.contain(t,e))return!1}n.silent&&(r=!0);var o=n.__hostTarget;n=o||n.parent}return r?cT:!0}return!1}function a0(i,t,e,n,r){for(var s=i.length-1;s>=0;s--){var a=i[s],o=void 0;if(a!==r&&!a.ignore&&(o=OO(a,e,n))&&(!t.topTarget&&(t.topTarget=a),o!==cT)){t.target=a;break}}}function dT(i,t,e){var n=i.painter;return t<0||t>n.getWidth()||e<0||e>n.getHeight()}const FO=fT;var gT=32,Ka=7;function NO(i){for(var t=0;i>=gT;)t|=i&1,i>>=1;return i+t}function o0(i,t,e,n){var r=t+1;if(r===e)return 1;if(n(i[r++],i[t])<0){for(;r<e&&n(i[r],i[r-1])<0;)r++;BO(i,t,r)}else for(;r<e&&n(i[r],i[r-1])>=0;)r++;return r-t}function BO(i,t,e){for(e--;t<e;){var n=i[t];i[t++]=i[e],i[e--]=n}}function l0(i,t,e,n,r){for(n===t&&n++;n<e;n++){for(var s=i[n],a=t,o=n,l;a<o;)l=a+o>>>1,r(s,i[l])<0?o=l:a=l+1;var u=n-a;switch(u){case 3:i[a+3]=i[a+2];case 2:i[a+2]=i[a+1];case 1:i[a+1]=i[a];break;default:for(;u>0;)i[a+u]=i[a+u-1],u--}i[a]=s}}function ed(i,t,e,n,r,s){var a=0,o=0,l=1;if(s(i,t[e+r])>0){for(o=n-r;l<o&&s(i,t[e+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}else{for(o=r+1;l<o&&s(i,t[e+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}for(a++;a<l;){var h=a+(l-a>>>1);s(i,t[e+h])>0?a=h+1:l=h}return l}function id(i,t,e,n,r,s){var a=0,o=0,l=1;if(s(i,t[e+r])<0){for(o=r+1;l<o&&s(i,t[e+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}else{for(o=n-r;l<o&&s(i,t[e+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}for(a++;a<l;){var h=a+(l-a>>>1);s(i,t[e+h])<0?l=h:a=h+1}return l}function zO(i,t){var e=Ka,n,r,s=0,a=[];n=[],r=[];function o(d,g){n[s]=d,r[s]=g,s+=1}function l(){for(;s>1;){var d=s-2;if(d>=1&&r[d-1]<=r[d]+r[d+1]||d>=2&&r[d-2]<=r[d]+r[d-1])r[d-1]<r[d+1]&&d--;else if(r[d]>r[d+1])break;h(d)}}function u(){for(;s>1;){var d=s-2;d>0&&r[d-1]<r[d+1]&&d--,h(d)}}function h(d){var g=n[d],p=r[d],v=n[d+1],m=r[d+1];r[d]=p+m,d===s-3&&(n[d+1]=n[d+2],r[d+1]=r[d+2]),s--;var y=id(i[v],i,g,p,0,t);g+=y,p-=y,p!==0&&(m=ed(i[g+p-1],i,v,m,m-1,t),m!==0&&(p<=m?c(g,p,v,m):f(g,p,v,m)))}function c(d,g,p,v){var m=0;for(m=0;m<g;m++)a[m]=i[d+m];var y=0,_=p,w=d;if(i[w++]=i[_++],--v===0){for(m=0;m<g;m++)i[w+m]=a[y+m];return}if(g===1){for(m=0;m<v;m++)i[w+m]=i[_+m];i[w+v]=a[y];return}for(var S=e,x,b,T;;){x=0,b=0,T=!1;do if(t(i[_],a[y])<0){if(i[w++]=i[_++],b++,x=0,--v===0){T=!0;break}}else if(i[w++]=a[y++],x++,b=0,--g===1){T=!0;break}while((x|b)<S);if(T)break;do{if(x=id(i[_],a,y,g,0,t),x!==0){for(m=0;m<x;m++)i[w+m]=a[y+m];if(w+=x,y+=x,g-=x,g<=1){T=!0;break}}if(i[w++]=i[_++],--v===0){T=!0;break}if(b=ed(a[y],i,_,v,0,t),b!==0){for(m=0;m<b;m++)i[w+m]=i[_+m];if(w+=b,_+=b,v-=b,v===0){T=!0;break}}if(i[w++]=a[y++],--g===1){T=!0;break}S--}while(x>=Ka||b>=Ka);if(T)break;S<0&&(S=0),S+=2}if(e=S,e<1&&(e=1),g===1){for(m=0;m<v;m++)i[w+m]=i[_+m];i[w+v]=a[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)i[w+m]=a[y+m]}}function f(d,g,p,v){var m=0;for(m=0;m<v;m++)a[m]=i[p+m];var y=d+g-1,_=v-1,w=p+v-1,S=0,x=0;if(i[w--]=i[y--],--g===0){for(S=w-(v-1),m=0;m<v;m++)i[S+m]=a[m];return}if(v===1){for(w-=g,y-=g,x=w+1,S=y+1,m=g-1;m>=0;m--)i[x+m]=i[S+m];i[w]=a[_];return}for(var b=e;;){var T=0,C=0,I=!1;do if(t(a[_],i[y])<0){if(i[w--]=i[y--],T++,C=0,--g===0){I=!0;break}}else if(i[w--]=a[_--],C++,T=0,--v===1){I=!0;break}while((T|C)<b);if(I)break;do{if(T=g-id(a[_],i,d,g,g-1,t),T!==0){for(w-=T,y-=T,g-=T,x=w+1,S=y+1,m=T-1;m>=0;m--)i[x+m]=i[S+m];if(g===0){I=!0;break}}if(i[w--]=a[_--],--v===1){I=!0;break}if(C=v-ed(i[y],a,0,v,v-1,t),C!==0){for(w-=C,_-=C,v-=C,x=w+1,S=_+1,m=0;m<C;m++)i[x+m]=a[S+m];if(v<=1){I=!0;break}}if(i[w--]=i[y--],--g===0){I=!0;break}b--}while(T>=Ka||C>=Ka);if(I)break;b<0&&(b=0),b+=2}if(e=b,e<1&&(e=1),v===1){for(w-=g,y-=g,x=w+1,S=y+1,m=g-1;m>=0;m--)i[x+m]=i[S+m];i[w]=a[_]}else{if(v===0)throw new Error;for(S=w-(v-1),m=0;m<v;m++)i[S+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:o}}function mh(i,t,e,n){e||(e=0),n||(n=i.length);var r=n-e;if(!(r<2)){var s=0;if(r<gT){s=o0(i,e,n,t),l0(i,e,n,e+s,t);return}var a=zO(i,t),o=NO(r);do{if(s=o0(i,e,n,t),s<o){var l=r;l>o&&(l=o),l0(i,e,e+l,e+s,t),s=l}a.pushRun(e,s),a.mergeRuns(),r-=s,e+=s}while(r!==0);a.forceMergeRuns()}}var Ve=1,mo=2,zs=4,u0=!1;function nd(){u0||(u0=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function h0(i,t){return i.zlevel===t.zlevel?i.z===t.z?i.z2-t.z2:i.z-t.z:i.zlevel-t.zlevel}var GO=function(){function i(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=h0}return i.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},i.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(e),n},i.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,s=e.length;r<s;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,mh(n,h0)},i.prototype._updateAndAddDisplayable=function(t,e,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var r=t.getClipPath();if(t.ignoreClip)e=null;else if(r){e?e=e.slice():e=[];for(var s=r,a=t;s;)s.parent=a,s.updateTransform(),e.push(s),a=s,s=s.getClipPath()}if(t.childrenRef){for(var o=t.childrenRef(),l=0;l<o.length;l++){var u=o[l];t.__dirty&&(u.__dirty|=Ve),this._updateAndAddDisplayable(u,e,n)}t.__dirty=0}else{var h=t;e&&e.length?h.__clipPaths=e:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(nd(),h.z=0),isNaN(h.z2)&&(nd(),h.z2=0),isNaN(h.zlevel)&&(nd(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,n);var f=t.getTextGuideLine();f&&this._updateAndAddDisplayable(f,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},i.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},i.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);return}var r=gt(this._roots,t);r>=0&&this._roots.splice(r,1)},i.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},i.prototype.getRoots=function(){return this._roots},i.prototype.dispose=function(){this._displayList=null,this._roots=null},i}();const $O=GO;var pT;pT=it.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(i){return setTimeout(i,16)};const hp=pT;var yh={linear:function(i){return i},quadraticIn:function(i){return i*i},quadraticOut:function(i){return i*(2-i)},quadraticInOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)},cubicIn:function(i){return i*i*i},cubicOut:function(i){return--i*i*i+1},cubicInOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)},quarticIn:function(i){return i*i*i*i},quarticOut:function(i){return 1- --i*i*i*i},quarticInOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)},quinticIn:function(i){return i*i*i*i*i},quinticOut:function(i){return--i*i*i*i*i+1},quinticInOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)},sinusoidalIn:function(i){return 1-Math.cos(i*Math.PI/2)},sinusoidalOut:function(i){return Math.sin(i*Math.PI/2)},sinusoidalInOut:function(i){return .5*(1-Math.cos(Math.PI*i))},exponentialIn:function(i){return i===0?0:Math.pow(1024,i-1)},exponentialOut:function(i){return i===1?1:1-Math.pow(2,-10*i)},exponentialInOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)},circularIn:function(i){return 1-Math.sqrt(1-i*i)},circularOut:function(i){return Math.sqrt(1- --i*i)},circularInOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)},elasticIn:function(i){var t,e=.1,n=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/n)))},elasticOut:function(i){var t,e=.1,n=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*i)*Math.sin((i-t)*(2*Math.PI)/n)+1)},elasticInOut:function(i){var t,e=.1,n=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),(i*=2)<1?-.5*(e*Math.pow(2,10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/n)):e*Math.pow(2,-10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/n)*.5+1)},backIn:function(i){var t=1.70158;return i*i*((t+1)*i-t)},backOut:function(i){var t=1.70158;return--i*i*((t+1)*i+t)+1},backInOut:function(i){var t=2.5949095;return(i*=2)<1?.5*(i*i*((t+1)*i-t)):.5*((i-=2)*i*((t+1)*i+t)+2)},bounceIn:function(i){return 1-yh.bounceOut(1-i)},bounceOut:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},bounceInOut:function(i){return i<.5?yh.bounceIn(i*2)*.5:yh.bounceOut(i*2-1)*.5+.5}};const vT=yh;var Su=Math.pow,Yn=Math.sqrt,qh=1e-8,mT=1e-4,c0=Yn(3),bu=1/3,ki=Pa(),ii=Pa(),sa=Pa();function $n(i){return i>-qh&&i<qh}function yT(i){return i>qh||i<-qh}function Zt(i,t,e,n,r){var s=1-r;return s*s*(s*i+3*r*t)+r*r*(r*n+3*s*e)}function f0(i,t,e,n,r){var s=1-r;return 3*(((t-i)*s+2*(e-t)*r)*s+(n-e)*r*r)}function _T(i,t,e,n,r,s){var a=n+3*(t-e)-i,o=3*(e-t*2+i),l=3*(t-i),u=i-r,h=o*o-3*a*l,c=o*l-9*a*u,f=l*l-3*o*u,d=0;if($n(h)&&$n(c))if($n(o))s[0]=0;else{var g=-l/o;g>=0&&g<=1&&(s[d++]=g)}else{var p=c*c-4*h*f;if($n(p)){var v=c/h,g=-o/a+v,m=-v/2;g>=0&&g<=1&&(s[d++]=g),m>=0&&m<=1&&(s[d++]=m)}else if(p>0){var y=Yn(p),_=h*o+1.5*a*(-c+y),w=h*o+1.5*a*(-c-y);_<0?_=-Su(-_,bu):_=Su(_,bu),w<0?w=-Su(-w,bu):w=Su(w,bu);var g=(-o-(_+w))/(3*a);g>=0&&g<=1&&(s[d++]=g)}else{var S=(2*h*o-3*a*c)/(2*Yn(h*h*h)),x=Math.acos(S)/3,b=Yn(h),T=Math.cos(x),g=(-o-2*b*T)/(3*a),m=(-o+b*(T+c0*Math.sin(x)))/(3*a),C=(-o+b*(T-c0*Math.sin(x)))/(3*a);g>=0&&g<=1&&(s[d++]=g),m>=0&&m<=1&&(s[d++]=m),C>=0&&C<=1&&(s[d++]=C)}}return d}function wT(i,t,e,n,r){var s=6*e-12*t+6*i,a=9*t+3*n-3*i-9*e,o=3*t-3*i,l=0;if($n(a)){if(yT(s)){var u=-o/s;u>=0&&u<=1&&(r[l++]=u)}}else{var h=s*s-4*a*o;if($n(h))r[0]=-s/(2*a);else if(h>0){var c=Yn(h),u=(-s+c)/(2*a),f=(-s-c)/(2*a);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function Jh(i,t,e,n,r,s){var a=(t-i)*r+i,o=(e-t)*r+t,l=(n-e)*r+e,u=(o-a)*r+a,h=(l-o)*r+o,c=(h-u)*r+u;s[0]=i,s[1]=a,s[2]=u,s[3]=c,s[4]=c,s[5]=h,s[6]=l,s[7]=n}function VO(i,t,e,n,r,s,a,o,l,u,h){var c,f=.005,d=1/0,g,p,v,m;ki[0]=l,ki[1]=u;for(var y=0;y<1;y+=.05)ii[0]=Zt(i,e,r,a,y),ii[1]=Zt(t,n,s,o,y),v=ia(ki,ii),v<d&&(c=y,d=v);d=1/0;for(var _=0;_<32&&!(f<mT);_++)g=c-f,p=c+f,ii[0]=Zt(i,e,r,a,g),ii[1]=Zt(t,n,s,o,g),v=ia(ii,ki),g>=0&&v<d?(c=g,d=v):(sa[0]=Zt(i,e,r,a,p),sa[1]=Zt(t,n,s,o,p),m=ia(sa,ki),p<=1&&m<d?(c=p,d=m):f*=.5);return h&&(h[0]=Zt(i,e,r,a,c),h[1]=Zt(t,n,s,o,c)),Yn(d)}function WO(i,t,e,n,r,s,a,o,l){for(var u=i,h=t,c=0,f=1/l,d=1;d<=l;d++){var g=d*f,p=Zt(i,e,r,a,g),v=Zt(t,n,s,o,g),m=p-u,y=v-h;c+=Math.sqrt(m*m+y*y),u=p,h=v}return c}function re(i,t,e,n){var r=1-n;return r*(r*i+2*n*t)+n*n*e}function d0(i,t,e,n){return 2*((1-n)*(t-i)+n*(e-t))}function YO(i,t,e,n,r){var s=i-2*t+e,a=2*(t-i),o=i-n,l=0;if($n(s)){if(yT(a)){var u=-o/a;u>=0&&u<=1&&(r[l++]=u)}}else{var h=a*a-4*s*o;if($n(h)){var u=-a/(2*s);u>=0&&u<=1&&(r[l++]=u)}else if(h>0){var c=Yn(h),u=(-a+c)/(2*s),f=(-a-c)/(2*s);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function xT(i,t,e){var n=i+e-2*t;return n===0?.5:(i-t)/n}function Qh(i,t,e,n,r){var s=(t-i)*n+i,a=(e-t)*n+t,o=(a-s)*n+s;r[0]=i,r[1]=s,r[2]=o,r[3]=o,r[4]=a,r[5]=e}function HO(i,t,e,n,r,s,a,o,l){var u,h=.005,c=1/0;ki[0]=a,ki[1]=o;for(var f=0;f<1;f+=.05){ii[0]=re(i,e,r,f),ii[1]=re(t,n,s,f);var d=ia(ki,ii);d<c&&(u=f,c=d)}c=1/0;for(var g=0;g<32&&!(h<mT);g++){var p=u-h,v=u+h;ii[0]=re(i,e,r,p),ii[1]=re(t,n,s,p);var d=ia(ii,ki);if(p>=0&&d<c)u=p,c=d;else{sa[0]=re(i,e,r,v),sa[1]=re(t,n,s,v);var m=ia(sa,ki);v<=1&&m<c?(u=v,c=m):h*=.5}}return l&&(l[0]=re(i,e,r,u),l[1]=re(t,n,s,u)),Yn(c)}function UO(i,t,e,n,r,s,a){for(var o=i,l=t,u=0,h=1/a,c=1;c<=a;c++){var f=c*h,d=re(i,e,r,f),g=re(t,n,s,f),p=d-o,v=g-l;u+=Math.sqrt(p*p+v*v),o=d,l=g}return u}var XO=/cubic-bezier\(([0-9,\.e ]+)\)/;function ST(i){var t=i&&XO.exec(i);if(t){var e=t[1].split(","),n=+Oi(e[0]),r=+Oi(e[1]),s=+Oi(e[2]),a=+Oi(e[3]);if(isNaN(n+r+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:_T(0,n,s,1,l,o)&&Zt(0,r,a,1,o[0])}}}var KO=function(){function i(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Re,this.ondestroy=t.ondestroy||Re,this.onrestart=t.onrestart||Re,t.easing&&this.setEasing(t.easing)}return i.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var n=this._life,r=t-this._startTime-this._pausedTime,s=r/n;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=r%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.prototype.setEasing=function(t){this.easing=t,this.easingFunc=rt(t)?t:vT[t]||ST(t)},i}();const jO=KO;var bT=function(){function i(t){this.value=t}return i}(),ZO=function(){function i(){this._len=0}return i.prototype.insert=function(t){var e=new bT(t);return this.insertEntry(e),e},i.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},i.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},i.prototype.len=function(){return this._len},i.prototype.clear=function(){this.head=this.tail=null,this._len=0},i}(),qO=function(){function i(t){this._list=new ZO,this._maxSize=10,this._map={},this._maxSize=t}return i.prototype.put=function(t,e){var n=this._list,r=this._map,s=null;if(r[t]==null){var a=n.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete r[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=e:o=new bT(e),o.key=t,n.insertEntry(o),r[t]=o}return s},i.prototype.get=function(t){var e=this._map[t],n=this._list;if(e!=null)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},i.prototype.clear=function(){this._list.clear(),this._map={}},i.prototype.len=function(){return this._list.len()},i}();const Gl=qO;var g0={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ro(i){return i=Math.round(i),i<0?0:i>255?255:i}function p0(i){return i<0?0:i>1?1:i}function rd(i){var t=i;return t.length&&t.charAt(t.length-1)==="%"?Ro(parseFloat(t)/100*255):Ro(parseInt(t,10))}function Mo(i){var t=i;return t.length&&t.charAt(t.length-1)==="%"?p0(parseFloat(t)/100):p0(parseFloat(t))}function sd(i,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?i+(t-i)*e*6:e*2<1?t:e*3<2?i+(t-i)*(2/3-e)*6:i}function qe(i,t,e,n,r){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function cp(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i}var TT=new Gl(20),Tu=null;function xs(i,t){Tu&&cp(Tu,t),Tu=TT.put(i,Tu||t.slice())}function Wr(i,t){if(i){t=t||[];var e=TT.get(i);if(e)return cp(t,e);i=i+"";var n=i.replace(/ /g,"").toLowerCase();if(n in g0)return cp(t,g0[n]),xs(i,t),t;var r=n.length;if(n.charAt(0)==="#"){if(r===4||r===5){var s=parseInt(n.slice(1,4),16);if(!(s>=0&&s<=4095)){qe(t,0,0,0,1);return}return qe(t,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,r===5?parseInt(n.slice(4),16)/15:1),xs(i,t),t}else if(r===7||r===9){var s=parseInt(n.slice(1,7),16);if(!(s>=0&&s<=16777215)){qe(t,0,0,0,1);return}return qe(t,(s&16711680)>>16,(s&65280)>>8,s&255,r===9?parseInt(n.slice(7),16)/255:1),xs(i,t),t}return}var a=n.indexOf("("),o=n.indexOf(")");if(a!==-1&&o+1===r){var l=n.substr(0,a),u=n.substr(a+1,o-(a+1)).split(","),h=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?qe(t,+u[0],+u[1],+u[2],1):qe(t,0,0,0,1);h=Mo(u.pop());case"rgb":if(u.length>=3)return qe(t,rd(u[0]),rd(u[1]),rd(u[2]),u.length===3?h:Mo(u[3])),xs(i,t),t;qe(t,0,0,0,1);return;case"hsla":if(u.length!==4){qe(t,0,0,0,1);return}return u[3]=Mo(u[3]),v0(u,t),xs(i,t),t;case"hsl":if(u.length!==3){qe(t,0,0,0,1);return}return v0(u,t),xs(i,t),t;default:return}}qe(t,0,0,0,1)}}function v0(i,t){var e=(parseFloat(i[0])%360+360)%360/360,n=Mo(i[1]),r=Mo(i[2]),s=r<=.5?r*(n+1):r+n-r*n,a=r*2-s;return t=t||[],qe(t,Ro(sd(a,s,e+1/3)*255),Ro(sd(a,s,e)*255),Ro(sd(a,s,e-1/3)*255),1),i.length===4&&(t[3]=i[3]),t}function m0(i,t){var e=Wr(i);if(e){for(var n=0;n<3;n++)t<0?e[n]=e[n]*(1-t)|0:e[n]=(255-e[n])*t+e[n]|0,e[n]>255?e[n]=255:e[n]<0&&(e[n]=0);return Tm(e,e.length===4?"rgba":"rgb")}}function Tm(i,t){if(!(!i||!i.length)){var e=i[0]+","+i[1]+","+i[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(e+=","+i[3]),t+"("+e+")"}}function tc(i,t){var e=Wr(i);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var y0=new Gl(100);function _0(i){if($(i)){var t=y0.get(i);return t||(t=m0(i,-.1),y0.put(i,t)),t}else if(qc(i)){var e=N({},i);return e.colorStops=H(i.colorStops,function(n){return{offset:n.offset,color:m0(n.color,-.1)}}),e}return i}function JO(i){return i.type==="linear"}function QO(i){return i.type==="radial"}(function(){return it.hasGlobalWindow&&rt(window.btoa)?function(i){return window.btoa(unescape(encodeURIComponent(i)))}:typeof Buffer<"u"?function(i){return Buffer.from(i).toString("base64")}:function(i){return null}})();var fp=Array.prototype.slice;function sn(i,t,e){return(t-i)*e+i}function ad(i,t,e,n){for(var r=t.length,s=0;s<r;s++)i[s]=sn(t[s],e[s],n);return i}function tF(i,t,e,n){for(var r=t.length,s=r&&t[0].length,a=0;a<r;a++){i[a]||(i[a]=[]);for(var o=0;o<s;o++)i[a][o]=sn(t[a][o],e[a][o],n)}return i}function Cu(i,t,e,n){for(var r=t.length,s=0;s<r;s++)i[s]=t[s]+e[s]*n;return i}function w0(i,t,e,n){for(var r=t.length,s=r&&t[0].length,a=0;a<r;a++){i[a]||(i[a]=[]);for(var o=0;o<s;o++)i[a][o]=t[a][o]+e[a][o]*n}return i}function eF(i,t){for(var e=i.length,n=t.length,r=e>n?t:i,s=Math.min(e,n),a=r[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(e,n);o++)r.push({offset:a.offset,color:a.color.slice()})}function iF(i,t,e){var n=i,r=t;if(!(!n.push||!r.push)){var s=n.length,a=r.length;if(s!==a){var o=s>a;if(o)n.length=a;else for(var l=s;l<a;l++)n.push(e===1?r[l]:fp.call(r[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(e===1)isNaN(n[l])&&(n[l]=r[l]);else for(var h=0;h<u;h++)isNaN(n[l][h])&&(n[l][h]=r[l][h])}}function _h(i){if(Le(i)){var t=i.length;if(Le(i[0])){for(var e=[],n=0;n<t;n++)e.push(fp.call(i[n]));return e}return fp.call(i)}return i}function wh(i){return i[0]=Math.floor(i[0])||0,i[1]=Math.floor(i[1])||0,i[2]=Math.floor(i[2])||0,i[3]=i[3]==null?1:i[3],"rgba("+i.join(",")+")"}function nF(i){return Le(i&&i[0])?2:1}var Eu=0,xh=1,CT=2,yo=3,dp=4,gp=5,x0=6;function S0(i){return i===dp||i===gp}function Iu(i){return i===xh||i===CT}var ja=[0,0,0,0],rF=function(){function i(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return i.prototype.isFinished=function(){return this._finished},i.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},i.prototype.needsAnimate=function(){return this.keyframes.length>=1},i.prototype.getAdditiveTrack=function(){return this._additiveTrack},i.prototype.addKeyframe=function(t,e,n){this._needsSort=!0;var r=this.keyframes,s=r.length,a=!1,o=x0,l=e;if(Le(e)){var u=nF(e);o=u,(u===1&&!Ot(e[0])||u===2&&!Ot(e[0][0]))&&(a=!0)}else if(Ot(e)&&!Zh(e))o=Eu;else if($(e))if(!isNaN(+e))o=Eu;else{var h=Wr(e);h&&(l=h,o=yo)}else if(qc(e)){var c=N({},l);c.colorStops=H(e.colorStops,function(d){return{offset:d.offset,color:Wr(d.color)}}),JO(e)?o=dp:QO(e)&&(o=gp),l=c}s===0?this.valType=o:(o!==this.valType||o===x0)&&(a=!0),this.discrete=this.discrete||a;var f={time:t,value:l,rawValue:e,percent:0};return n&&(f.easing=n,f.easingFunc=rt(n)?n:vT[n]||ST(n)),r.push(f),f},i.prototype.prepare=function(t,e){var n=this.keyframes;this._needsSort&&n.sort(function(p,v){return p.time-v.time});for(var r=this.valType,s=n.length,a=n[s-1],o=this.discrete,l=Iu(r),u=S0(r),h=0;h<s;h++){var c=n[h],f=c.value,d=a.value;c.percent=c.time/t,o||(l&&h!==s-1?iF(f,d,r):u&&eF(f.colorStops,d.colorStops))}if(!o&&r!==gp&&e&&this.needsAnimate()&&e.needsAnimate()&&r===e.valType&&!e._finished){this._additiveTrack=e;for(var g=n[0].value,h=0;h<s;h++)r===Eu?n[h].additiveValue=n[h].value-g:r===yo?n[h].additiveValue=Cu([],n[h].value,g,-1):Iu(r)&&(n[h].additiveValue=r===xh?Cu([],n[h].value,g,-1):w0([],n[h].value,g,-1))}},i.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,r=n?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,u=s===yo,h,c=this._lastFr,f=Math.min,d,g;if(o===1)d=g=a[0];else{if(e<0)h=0;else if(e<this._lastFrP){var p=f(c+1,o-1);for(h=p;h>=0&&!(a[h].percent<=e);h--);h=f(h,o-2)}else{for(h=c;h<o&&!(a[h].percent>e);h++);h=f(h-1,o-2)}g=a[h+1],d=a[h]}if(d&&g){this._lastFr=h,this._lastFrP=e;var v=g.percent-d.percent,m=v===0?1:f((e-d.percent)/v,1);g.easingFunc&&(m=g.easingFunc(m));var y=n?this._additiveValue:u?ja:t[l];if((Iu(s)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:g.rawValue;else if(Iu(s))s===xh?ad(y,d[r],g[r],m):tF(y,d[r],g[r],m);else if(S0(s)){var _=d[r],w=g[r],S=s===dp;t[l]={type:S?"linear":"radial",x:sn(_.x,w.x,m),y:sn(_.y,w.y,m),colorStops:H(_.colorStops,function(b,T){var C=w.colorStops[T];return{offset:sn(b.offset,C.offset,m),color:wh(ad([],b.color,C.color,m))}}),global:w.global},S?(t[l].x2=sn(_.x2,w.x2,m),t[l].y2=sn(_.y2,w.y2,m)):t[l].r=sn(_.r,w.r,m)}else if(u)ad(y,d[r],g[r],m),n||(t[l]=wh(y));else{var x=sn(d[r],g[r],m);n?this._additiveValue=x:t[l]=x}n&&this._addToTarget(t)}}},i.prototype._addToTarget=function(t){var e=this.valType,n=this.propName,r=this._additiveValue;e===Eu?t[n]=t[n]+r:e===yo?(Wr(t[n],ja),Cu(ja,ja,r,1),t[n]=wh(ja)):e===xh?Cu(t[n],t[n],r,1):e===CT&&w0(t[n],t[n],r,1)},i}(),sF=function(){function i(t,e,n,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&r){mm("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=n}return i.prototype.getMaxTime=function(){return this._maxTime},i.prototype.getDelay=function(){return this._delay},i.prototype.getLoop=function(){return this._loop},i.prototype.getTarget=function(){return this._target},i.prototype.changeTarget=function(t){this._target=t},i.prototype.when=function(t,e,n){return this.whenWithKeys(t,e,kt(e),n)},i.prototype.whenWithKeys=function(t,e,n,r){for(var s=this._tracks,a=0;a<n.length;a++){var o=n[a],l=s[o];if(!l){l=s[o]=new rF(o);var u=void 0,h=this._getAdditiveTrack(o);if(h){var c=h.keyframes,f=c[c.length-1];u=f&&f.value,h.valType===yo&&u&&(u=wh(u))}else u=this._target[o];if(u==null)continue;t>0&&l.addKeyframe(0,_h(u),r),this._trackKeys.push(o)}l.addKeyframe(t,_h(e[o]),r)}return this._maxTime=Math.max(this._maxTime,t),this},i.prototype.pause=function(){this._clip.pause(),this._paused=!0},i.prototype.resume=function(){this._clip.resume(),this._paused=!1},i.prototype.isPaused=function(){return!!this._paused},i.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},i.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},i.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},i.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},i.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var r=0;r<n.length;r++){var s=n[r].getTrack(t);s&&(e=s)}return e},i.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,n=[],r=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),u=o.keyframes,h=u.length;if(o.prepare(r,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var c=u[h-1];c&&(e._target[o.propName]=c.rawValue),o.setFinished()}else n.push(o)}if(n.length||this._force){var f=new jO({life:r,loop:this._loop,delay:this._delay||0,onframe:function(d){e._started=2;var g=e._additiveAnimators;if(g){for(var p=!1,v=0;v<g.length;v++)if(g[v]._clip){p=!0;break}p||(e._additiveAnimators=null)}for(var v=0;v<n.length;v++)n[v].step(e._target,d);var m=e._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](e._target,d)},ondestroy:function(){e._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),t&&f.setEasing(t)}else this._doneCallback();return this}},i.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},i.prototype.delay=function(t){return this._delay=t,this},i.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},i.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},i.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},i.prototype.getClip=function(){return this._clip},i.prototype.getTrack=function(t){return this._tracks[t]},i.prototype.getTracks=function(){var t=this;return H(this._trackKeys,function(e){return t._tracks[e]})},i.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,r=this._trackKeys,s=0;s<t.length;s++){var a=n[t[s]];a&&!a.isFinished()&&(e?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<r.length;s++)if(!n[r[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},i.prototype.saveTo=function(t,e,n){if(t){e=e||this._trackKeys;for(var r=0;r<e.length;r++){var s=e[r],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[n?0:o.length-1];l&&(t[s]=_h(l.rawValue))}}}},i.prototype.__changeFinalValue=function(t,e){e=e||kt(t);for(var n=0;n<e.length;n++){var r=e[n],s=this._tracks[r];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,t[r]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},i}();const Cm=sF;function Ks(){return new Date().getTime()}var aF=function(i){yt(t,i);function t(e){var n=i.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n}return t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var n=e.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(e){if(e.animation){var n=e.prev,r=e.next;n?n.next=r:this._head=r,r?r.prev=n:this._tail=n,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var n=e.getClip();n&&this.removeClip(n),e.animation=null},t.prototype.update=function(e){for(var n=Ks()-this._pausedTime,r=n-this._time,s=this._head;s;){var a=s.next,o=s.step(n,r);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=n,e||(this.trigger("frame",r),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;function n(){e._running&&(hp(n),!e._paused&&e.update())}hp(n)},t.prototype.start=function(){this._running||(this._time=Ks(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Ks(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Ks()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var n=e.next;e.prev=e.next=e.animation=null,e=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(e,n){n=n||{},this.start();var r=new Cm(e,n.loop);return this.addAnimator(r),r},t}(Xi);const oF=aF;var lF=300,od=it.domSupported,ld=function(){var i=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=H(i,function(r){var s=r.replace("mouse","pointer");return e.hasOwnProperty(s)?s:r});return{mouse:i,touch:t,pointer:n}}(),b0={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},T0=!1;function pp(i){var t=i.pointerType;return t==="pen"||t==="touch"}function uF(i){i.touching=!0,i.touchTimer!=null&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)}function ud(i){i&&(i.zrByTouch=!0)}function hF(i,t){return Je(i.dom,new cF(i,t),!0)}function ET(i,t){for(var e=t,n=!1;e&&e.nodeType!==9&&!(n=e.domBelongToZr||e!==t&&e===i.painterRoot);)e=e.parentNode;return n}var cF=function(){function i(t,e){this.stopPropagation=Re,this.stopImmediatePropagation=Re,this.preventDefault=Re,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return i}(),wi={mousedown:function(i){i=Je(this.dom,i),this.__mayPointerCapture=[i.zrX,i.zrY],this.trigger("mousedown",i)},mousemove:function(i){i=Je(this.dom,i);var t=this.__mayPointerCapture;t&&(i.zrX!==t[0]||i.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",i)},mouseup:function(i){i=Je(this.dom,i),this.__togglePointerCapture(!1),this.trigger("mouseup",i)},mouseout:function(i){i=Je(this.dom,i);var t=i.toElement||i.relatedTarget;ET(this,t)||(this.__pointerCapturing&&(i.zrEventControl="no_globalout"),this.trigger("mouseout",i))},wheel:function(i){T0=!0,i=Je(this.dom,i),this.trigger("mousewheel",i)},mousewheel:function(i){T0||(i=Je(this.dom,i),this.trigger("mousewheel",i))},touchstart:function(i){i=Je(this.dom,i),ud(i),this.__lastTouchMoment=new Date,this.handler.processGesture(i,"start"),wi.mousemove.call(this,i),wi.mousedown.call(this,i)},touchmove:function(i){i=Je(this.dom,i),ud(i),this.handler.processGesture(i,"change"),wi.mousemove.call(this,i)},touchend:function(i){i=Je(this.dom,i),ud(i),this.handler.processGesture(i,"end"),wi.mouseup.call(this,i),+new Date-+this.__lastTouchMoment<lF&&wi.click.call(this,i)},pointerdown:function(i){wi.mousedown.call(this,i)},pointermove:function(i){pp(i)||wi.mousemove.call(this,i)},pointerup:function(i){wi.mouseup.call(this,i)},pointerout:function(i){pp(i)||wi.mouseout.call(this,i)}};A(["click","dblclick","contextmenu"],function(i){wi[i]=function(t){t=Je(this.dom,t),this.trigger(i,t)}});var vp={pointermove:function(i){pp(i)||vp.mousemove.call(this,i)},pointerup:function(i){vp.mouseup.call(this,i)},mousemove:function(i){this.trigger("mousemove",i)},mouseup:function(i){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",i),t&&(i.zrEventControl="only_globalout",this.trigger("mouseout",i))}};function fF(i,t){var e=t.domHandlers;it.pointerEventsSupported?A(ld.pointer,function(n){Sh(t,n,function(r){e[n].call(i,r)})}):(it.touchEventsSupported&&A(ld.touch,function(n){Sh(t,n,function(r){e[n].call(i,r),uF(t)})}),A(ld.mouse,function(n){Sh(t,n,function(r){r=wm(r),t.touching||e[n].call(i,r)})}))}function dF(i,t){it.pointerEventsSupported?A(b0.pointer,e):it.touchEventsSupported||A(b0.mouse,e);function e(n){function r(s){s=wm(s),ET(i,s.target)||(s=hF(i,s),t.domHandlers[n].call(i,s))}Sh(t,n,r,{capture:!0})}}function Sh(i,t,e,n){i.mounted[t]=e,i.listenerOpts[t]=n,bO(i.domTarget,t,e,n)}function hd(i){var t=i.mounted;for(var e in t)t.hasOwnProperty(e)&&TO(i.domTarget,e,t[e],i.listenerOpts[e]);i.mounted={}}var C0=function(){function i(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return i}(),gF=function(i){yt(t,i);function t(e,n){var r=i.call(this)||this;return r.__pointerCapturing=!1,r.dom=e,r.painterRoot=n,r._localHandlerScope=new C0(e,wi),od&&(r._globalHandlerScope=new C0(document,vp)),fF(r,r._localHandlerScope),r}return t.prototype.dispose=function(){hd(this._localHandlerScope),od&&hd(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,od&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var n=this._globalHandlerScope;e?dF(this,n):hd(n)}},t}(Xi);const pF=gF;var IT=1;it.hasGlobalWindow&&(IT=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ec=IT,mp=.4,yp="#333",_p="#ccc",vF="#eee",E0=xm,I0=5e-5;function lr(i){return i>I0||i<-I0}var ur=[],Ss=[],cd=na(),fd=Math.abs,Em=function(){function i(){}return i.prototype.getLocalTransform=function(t){return i.getLocalTransform(this,t)},i.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},i.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},i.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},i.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},i.prototype.needLocalTransform=function(){return lr(this.rotation)||lr(this.x)||lr(this.y)||lr(this.scaleX-1)||lr(this.scaleY-1)||lr(this.skewX)||lr(this.skewY)},i.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;if(!(e||t)){n&&(E0(n),this.invTransform=null);return}n=n||na(),e?this.getLocalTransform(n):E0(n),t&&(e?ra(n,t,n):IO(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},i.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(ur);var n=ur[0]<0?-1:1,r=ur[1]<0?-1:1,s=((ur[0]-n)*e+n)/ur[0]||0,a=((ur[1]-r)*e+r)/ur[1]||0;t[0]*=s,t[1]*=s,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||na(),bm(this.invTransform,t)},i.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},i.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=Math.atan2(t[1],t[0]),s=Math.PI/2+r-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(s),e=Math.sqrt(e),this.skewX=s,this.skewY=0,this.rotation=-r,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},i.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||na(),ra(Ss,t.invTransform,e),e=Ss);var n=this.originX,r=this.originY;(n||r)&&(cd[4]=n,cd[5]=r,ra(Ss,e,cd),Ss[4]-=n,Ss[5]-=r,e=Ss),this.setLocalTransform(e)}},i.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},i.prototype.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&ui(n,n,r),n},i.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&ui(n,n,r),n},i.prototype.getLineScale=function(){var t=this.transform;return t&&fd(t[0]-1)>1e-10&&fd(t[3]-1)>1e-10?Math.sqrt(fd(t[0]*t[3]-t[2]*t[1])):1},i.prototype.copyTransform=function(t){mF(this,t)},i.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,r=t.originY||0,s=t.scaleX,a=t.scaleY,o=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,f=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||r||o||l){var g=n+o,p=r+l;e[4]=-g*s-f*p*a,e[5]=-p*a-d*g*s}else e[4]=e[5]=0;return e[0]=s,e[3]=a,e[1]=d*s,e[2]=f*a,u&&Sm(e,e,u),e[4]+=n+h,e[5]+=r+c,e},i.initDefaultProps=function(){var t=i.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),i}(),cl=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function mF(i,t){for(var e=0;e<cl.length;e++){var n=cl[e];i[n]=t[n]}}var A0={};function We(i,t){t=t||Jr;var e=A0[t];e||(e=A0[t]=new Gl(500));var n=e.get(i);return n==null&&(n=ka.measureText(i,t).width,e.put(i,n)),n}function R0(i,t,e,n){var r=We(i,t),s=Am(t),a=_o(0,r,e),o=Gs(0,s,n),l=new pt(a,o,r,s);return l}function Im(i,t,e,n){var r=((i||"")+"").split(`
`),s=r.length;if(s===1)return R0(r[0],t,e,n);for(var a=new pt(0,0,0,0),o=0;o<r.length;o++){var l=R0(r[o],t,e,n);o===0?a.copy(l):a.union(l)}return a}function _o(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function Gs(i,t,e){return e==="middle"?i-=t/2:e==="bottom"&&(i-=t),i}function Am(i){return We("国",i)}function jn(i,t){return typeof i=="string"?i.lastIndexOf("%")>=0?parseFloat(i)/100*t:parseFloat(i):i}function ic(i,t,e){var n=t.position||"inside",r=t.distance!=null?t.distance:5,s=e.height,a=e.width,o=s/2,l=e.x,u=e.y,h="left",c="top";if(n instanceof Array)l+=jn(n[0],e.width),u+=jn(n[1],e.height),h=null,c=null;else switch(n){case"left":l-=r,u+=o,h="right",c="middle";break;case"right":l+=r+a,u+=o,c="middle";break;case"top":l+=a/2,u-=r,h="center",c="bottom";break;case"bottom":l+=a/2,u+=s+r,h="center";break;case"inside":l+=a/2,u+=o,h="center",c="middle";break;case"insideLeft":l+=r,u+=o,c="middle";break;case"insideRight":l+=a-r,u+=o,h="right",c="middle";break;case"insideTop":l+=a/2,u+=r,h="center";break;case"insideBottom":l+=a/2,u+=s-r,h="center",c="bottom";break;case"insideTopLeft":l+=r,u+=r;break;case"insideTopRight":l+=a-r,u+=r,h="right";break;case"insideBottomLeft":l+=r,u+=s-r,c="bottom";break;case"insideBottomRight":l+=a-r,u+=s-r,h="right",c="bottom";break}return i=i||{},i.x=l,i.y=u,i.align=h,i.verticalAlign=c,i}var dd="__zr_normal__",gd=cl.concat(["ignore"]),yF=Da(cl,function(i,t){return i[t]=!0,i},{ignore:!1}),bs={},_F=new pt(0,0,0,0),Rm=function(){function i(t){this.id=nT(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return i.prototype._init=function(t){this.attr(t)},i.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=t,r[5]+=e,this.decomposeTransform(),this.markRedraw()},i.prototype.beforeUpdate=function(){},i.prototype.afterUpdate=function(){},i.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},i.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,r=n.local,s=e.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=r?this:null;var u=!1;if(s.copyTransform(e),n.position!=null){var h=_F;n.layoutRect?h.copy(n.layoutRect):h.copy(this.getBoundingRect()),r||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(bs,n,h):ic(bs,n,h),s.x=bs.x,s.y=bs.y,a=bs.align,o=bs.verticalAlign;var c=n.origin;if(c&&n.rotation!=null){var f=void 0,d=void 0;c==="center"?(f=h.width*.5,d=h.height*.5):(f=jn(c[0],h.width),d=jn(c[1],h.height)),u=!0,s.originX=-s.x+f+(r?0:h.x),s.originY=-s.y+d+(r?0:h.y)}}n.rotation!=null&&(s.rotation=n.rotation);var g=n.offset;g&&(s.x+=g[0],s.y+=g[1],u||(s.originX=-g[0],s.originY=-g[1]));var p=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;p&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||_!==v.autoStroke||a!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=_,v.align=a,v.verticalAlign=o,e.setDefaultTextStyle(v)),e.__dirty|=Ve,l&&e.dirtyStyle(!0)}},i.prototype.canBeInsideText=function(){return!0},i.prototype.getInsideTextFill=function(){return"#fff"},i.prototype.getInsideTextStroke=function(t){return"#000"},i.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?_p:yp},i.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n=typeof e=="string"&&Wr(e);n||(n=[255,255,255,1]);for(var r=n[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*r+(s?0:255)*(1-r);return n[3]=1,Tm(n,"rgba")},i.prototype.traverse=function(t,e){},i.prototype.attrKV=function(t,e){t==="textConfig"?this.setTextConfig(e):t==="textContent"?this.setTextContent(e):t==="clipPath"?this.setClipPath(e):t==="extra"?(this.extra=this.extra||{},N(this.extra,e)):this[t]=e},i.prototype.hide=function(){this.ignore=!0,this.markRedraw()},i.prototype.show=function(){this.ignore=!1,this.markRedraw()},i.prototype.attr=function(t,e){if(typeof t=="string")this.attrKV(t,e);else if(Y(t))for(var n=t,r=kt(n),s=0;s<r.length;s++){var a=r[s];this.attrKV(a,t[a])}return this.markRedraw(),this},i.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var r=this.animators[n],s=r.__fromStateTransition;if(!(r.getLoop()||s&&s!==dd)){var a=r.targetName,o=a?e[a]:e;r.saveTo(o)}}},i.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,gd)},i.prototype._savePrimaryToNormal=function(t,e,n){for(var r=0;r<n.length;r++){var s=n[r];t[s]!=null&&!(s in e)&&(e[s]=this[s])}},i.prototype.hasState=function(){return this.currentStates.length>0},i.prototype.getState=function(t){return this.states[t]},i.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},i.prototype.clearStates=function(t){this.useState(dd,!1,t)},i.prototype.useState=function(t,e,n,r){var s=t===dd,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!(gt(o,t)>=0&&(e||o.length===1))){var u;if(this.stateProxy&&!s&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!s){mm("State "+t+" not exists.");return}s||this.saveCurrentToNormalState(u);var h=!!(u&&u.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,e,!n&&!this.__inHover&&l&&l.duration>0,l);var c=this._textContent,f=this._textGuide;return c&&c.useState(t,e,n,h),f&&f.useState(t,e,n,h),s?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ve),u}}},i.prototype.useStates=function(t,e,n){if(!t.length)this.clearStates();else{var r=[],s=this.currentStates,a=t.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(t[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var u=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(u,t)),h||(h=this.states[u]),h&&r.push(h)}var c=r[a-1],f=!!(c&&c.hoverLayer||n);f&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(r),g=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&g&&g.duration>0,g);var p=this._textContent,v=this._textGuide;p&&p.useStates(t,e,f),v&&v.useStates(t,e,f),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ve)}},i.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},i.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},i.prototype.removeState=function(t){var e=gt(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},i.prototype.replaceState=function(t,e,n){var r=this.currentStates.slice(),s=gt(r,t),a=gt(r,e)>=0;s>=0?a?r.splice(s,1):r[s]=e:n&&!a&&r.push(e),this.useStates(r)},i.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},i.prototype._mergeStates=function(t){for(var e={},n,r=0;r<t.length;r++){var s=t[r];N(e,s),s.textConfig&&(n=n||{},N(n,s.textConfig))}return n&&(e.textConfig=n),e},i.prototype._applyStateObj=function(t,e,n,r,s,a){var o=!(e&&r);e&&e.textConfig?(this.textConfig=N({},r?this.textConfig:n.textConfig),N(this.textConfig,e.textConfig)):o&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,h=0;h<gd.length;h++){var c=gd[h],f=s&&yF[c];e&&e[c]!=null?f?(u=!0,l[c]=e[c]):this[c]=e[c]:o&&n[c]!=null&&(f?(u=!0,l[c]=n[c]):this[c]=n[c])}if(!s)for(var h=0;h<this.animators.length;h++){var d=this.animators[h],g=d.targetName;d.getLoop()||d.__changeFinalValue(g?(e||n)[g]:e||n)}u&&this._transitionState(t,l,a)},i.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},i.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},i.prototype.getClipPath=function(){return this._clipPath},i.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},i.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},i.prototype.getTextContent=function(){return this._textContent},i.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new Em,this._attachComponent(t),this._textContent=t,this.markRedraw())},i.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),N(this.textConfig,t),this.markRedraw()},i.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},i.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},i.prototype.getTextGuideLine=function(){return this._textGuide},i.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},i.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},i.prototype.markRedraw=function(){this.__dirty|=Ve;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},i.prototype.dirty=function(){this.markRedraw()},i.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},i.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},i.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},i.prototype.animate=function(t,e,n){var r=t?this[t]:this,s=new Cm(r,e,n);return t&&(s.targetName=t),this.addAnimator(s,t),s},i.prototype.addAnimator=function(t,e){var n=this.__zr,r=this;t.during(function(){r.updateDuringAnimation(e)}).done(function(){var s=r.animators,a=gt(s,t);a>=0&&s.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},i.prototype.updateDuringAnimation=function(t){this.markRedraw()},i.prototype.stopAnimation=function(t,e){for(var n=this.animators,r=n.length,s=[],a=0;a<r;a++){var o=n[a];!t||t===o.scope?o.stop(e):s.push(o)}return this.animators=s,this},i.prototype.animateTo=function(t,e,n){pd(this,t,e,n)},i.prototype.animateFrom=function(t,e,n){pd(this,t,e,n,!0)},i.prototype._transitionState=function(t,e,n,r){for(var s=pd(this,e,n,r),a=0;a<s.length;a++)s[a].__fromStateTransition=t},i.prototype.getBoundingRect=function(){return null},i.prototype.getPaintRect=function(){return null},i.initDefaultProps=function(){var t=i.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Ve;function e(n,r,s,a){Object.defineProperty(t,n,{get:function(){if(!this[r]){var l=this[r]=[];o(this,l)}return this[r]},set:function(l){this[s]=l[0],this[a]=l[1],this[r]=l,o(this,l)}});function o(l,u){Object.defineProperty(u,0,{get:function(){return l[s]},set:function(h){l[s]=h}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(h){l[a]=h}})}}Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))}(),i}();Ti(Rm,Xi);Ti(Rm,Em);function pd(i,t,e,n,r){e=e||{};var s=[];AT(i,"",i,t,e,n,s,r);var a=s.length,o=!1,l=e.done,u=e.aborted,h=function(){o=!0,a--,a<=0&&(o?l&&l():u&&u())},c=function(){a--,a<=0&&(o?l&&l():u&&u())};a||l&&l(),s.length>0&&e.during&&s[0].during(function(g,p){e.during(p)});for(var f=0;f<s.length;f++){var d=s[f];h&&d.done(h),c&&d.aborted(c),e.force&&d.duration(e.duration),d.start(e.easing)}return s}function vd(i,t,e){for(var n=0;n<e;n++)i[n]=t[n]}function wF(i){return Le(i[0])}function xF(i,t,e){if(Le(t[e]))if(Le(i[e])||(i[e]=[]),ke(t[e])){var n=t[e].length;i[e].length!==n&&(i[e]=new t[e].constructor(n),vd(i[e],t[e],n))}else{var r=t[e],s=i[e],a=r.length;if(wF(r))for(var o=r[0].length,l=0;l<a;l++)s[l]?vd(s[l],r[l],o):s[l]=Array.prototype.slice.call(r[l]);else vd(s,r,a);s.length=r.length}else i[e]=t[e]}function SF(i,t){return i===t||Le(i)&&Le(t)&&bF(i,t)}function bF(i,t){var e=i.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function AT(i,t,e,n,r,s,a,o){for(var l=kt(n),u=r.duration,h=r.delay,c=r.additive,f=r.setToFinal,d=!Y(s),g=i.animators,p=[],v=0;v<l.length;v++){var m=l[v],y=n[m];if(y!=null&&e[m]!=null&&(d||s[m]))if(Y(y)&&!Le(y)&&!qc(y)){if(t){o||(e[m]=y,i.updateDuringAnimation(t));continue}AT(i,m,e[m],y,r,s&&s[m],a,o)}else p.push(m);else o||(e[m]=y,i.updateDuringAnimation(t),p.push(m))}var _=p.length;if(!c&&_)for(var w=0;w<g.length;w++){var S=g[w];if(S.targetName===t){var x=S.stopTracks(p);if(x){var b=gt(g,S);g.splice(b,1)}}}if(r.force||(p=ae(p,function(E){return!SF(n[E],e[E])}),_=p.length),_>0||r.force&&!a.length){var T=void 0,C=void 0,I=void 0;if(o){C={},f&&(T={});for(var w=0;w<_;w++){var m=p[w];C[m]=e[m],f?T[m]=n[m]:e[m]=n[m]}}else if(f){I={};for(var w=0;w<_;w++){var m=p[w];I[m]=_h(e[m]),xF(e,n,m)}}var S=new Cm(e,!1,!1,c?ae(g,function(R){return R.targetName===t}):null);S.targetName=t,r.scope&&(S.scope=r.scope),f&&T&&S.whenWithKeys(0,T,p),I&&S.whenWithKeys(0,I,p),S.whenWithKeys(u??500,o?C:n,p).delay(h||0),i.addAnimator(S,t),a.push(S)}}const RT=Rm;var MT=function(i){yt(t,i);function t(e){var n=i.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var n=this._children,r=0;r<n.length;r++)if(n[r].name===e)return n[r]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,n){if(e&&e!==this&&e.parent!==this&&n&&n.parent===this){var r=this._children,s=r.indexOf(n);s>=0&&(r.splice(s,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,n){var r=gt(this._children,e);return r>=0&&this.replaceAt(n,r),this},t.prototype.replaceAt=function(e,n){var r=this._children,s=r[n];if(e&&e!==this&&e.parent!==this&&e!==s){r[n]=e,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var n=this.__zr;n&&n!==e.__zr&&e.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(e){var n=this.__zr,r=this._children,s=gt(r,e);return s<0?this:(r.splice(s,1),e.parent=null,n&&e.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,n=this.__zr,r=0;r<e.length;r++){var s=e[r];n&&s.removeSelfFromZr(n),s.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,n){for(var r=this._children,s=0;s<r.length;s++){var a=r[s];e.call(n,a,s)}return this},t.prototype.traverse=function(e,n){for(var r=0;r<this._children.length;r++){var s=this._children[r],a=e.call(n,s);s.isGroup&&!a&&s.traverse(e,n)}return this},t.prototype.addSelfToZr=function(e){i.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){var r=this._children[n];r.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){i.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){var r=this._children[n];r.removeSelfFromZr(e)}},t.prototype.getBoundingRect=function(e){for(var n=new pt(0,0,0,0),r=e||this._children,s=[],a=null,o=0;o<r.length;o++){var l=r[o];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),h=l.getLocalTransform(s);h?(pt.applyTransform(n,u,h),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(RT);MT.prototype.type="group";const De=MT;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var bh={},LT={};function TF(i){delete LT[i]}function CF(i){if(!i)return!1;if(typeof i=="string")return tc(i,1)<mp;if(i.colorStops){for(var t=i.colorStops,e=0,n=t.length,r=0;r<n;r++)e+=tc(t[r].color,1);return e/=n,e<mp}return!1}var EF=function(){function i(t,e,n){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var s=new $O,a=n.renderer||"canvas";bh[a]||(a=kt(bh)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var o=new bh[a](e,s,n,t),l=n.ssr||o.ssrOnly;this.storage=s,this.painter=o;var u=!it.node&&!it.worker&&!l?new pF(o.getViewportRoot(),o.root):null,h=n.useCoarsePointer,c=h==null||h==="auto"?it.touchEventsSupported:!!h,f=44,d;c&&(d=et(n.pointerSize,f)),this.handler=new FO(s,o,u,o.root,d),this.animation=new oF({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return i.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},i.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},i.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},i.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=CF(t))},i.prototype.getBackgroundColor=function(){return this._backgroundColor},i.prototype.setDarkMode=function(t){this._darkMode=t},i.prototype.isDarkMode=function(){return this._darkMode},i.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},i.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},i.prototype.flush=function(){this._disposed||this._flush(!1)},i.prototype._flush=function(t){var e,n=Ks();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var r=Ks();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},i.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},i.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},i.prototype.refreshHover=function(){this._needsRefreshHover=!0},i.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},i.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},i.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},i.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},i.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},i.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},i.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},i.prototype.on=function(t,e,n){return this._disposed||this.handler.on(t,e,n),this},i.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},i.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},i.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof De&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},i.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,TF(this.id))},i}();function M0(i,t){var e=new EF(nT(),i,t);return LT[e.id]=e,e}function IF(i,t){bh[i]=t}var L0=1e-4,kT=20;function AF(i){return i.replace(/^\s+|\s+$/g,"")}function k0(i,t,e,n){var r=t[0],s=t[1],a=e[0],o=e[1],l=s-r,u=o-a;if(l===0)return u===0?a:(a+o)/2;if(n)if(l>0){if(i<=r)return a;if(i>=s)return o}else{if(i>=r)return a;if(i<=s)return o}else{if(i===r)return a;if(i===s)return o}return(i-r)/l*u+a}function qt(i,t){switch(i){case"center":case"middle":i="50%";break;case"left":case"top":i="0%";break;case"right":case"bottom":i="100%";break}return $(i)?AF(i).match(/%$/)?parseFloat(i)/100*t:parseFloat(i):i==null?NaN:+i}function Yt(i,t,e){return t==null&&(t=10),t=Math.min(Math.max(0,t),kT),i=(+i).toFixed(t),e?i:+i}function wa(i){if(i=+i,isNaN(i))return 0;if(i>1e-14){for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(i*t)/t===i)return e}return RF(i)}function RF(i){var t=i.toString().toLowerCase(),e=t.indexOf("e"),n=e>0?+t.slice(e+1):0,r=e>0?e:t.length,s=t.indexOf("."),a=s<0?0:r-1-s;return Math.max(0,a-n)}function MF(i,t){var e=Math.log,n=Math.LN10,r=Math.floor(e(i[1]-i[0])/n),s=Math.round(e(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-r+s,0),20);return isFinite(a)?a:20}function LF(i,t){var e=Math.max(wa(i),wa(t)),n=i+t;return e>kT?n:Yt(n,e)}function DT(i){var t=Math.PI*2;return(i%t+t)%t}function nc(i){return i>-L0&&i<L0}var kF=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function vn(i){if(i instanceof Date)return i;if($(i)){var t=kF.exec(i);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(i==null)return new Date(NaN);return new Date(Math.round(i))}function DF(i){return Math.pow(10,Mm(i))}function Mm(i){if(i===0)return 0;var t=Math.floor(Math.log(i)/Math.LN10);return i/Math.pow(10,t)>=10&&t++,t}function PT(i,t){var e=Mm(i),n=Math.pow(10,e),r=i/n,s;return t?r<1.5?s=1:r<2.5?s=2:r<4?s=3:r<7?s=5:s=10:r<1?s=1:r<2?s=2:r<3?s=3:r<5?s=5:s=10,i=s*n,e>=-20?+i.toFixed(e<0?-e:0):i}function rc(i){var t=parseFloat(i);return t==i&&(t!==0||!$(i)||i.indexOf("x")<=0)?t:NaN}function PF(i){return!isNaN(rc(i))}function OT(){return Math.round(Math.random()*9)}function FT(i,t){return t===0?i:FT(t,i%t)}function D0(i,t){return i==null?t:t==null?i:i*t/FT(i,t)}function Te(i){throw new Error(i)}var NT="series\0",OF="\0_ec_\0";function ve(i){return i instanceof Array?i:i==null?[]:[i]}function wp(i,t,e){if(i){i[t]=i[t]||{},i.emphasis=i.emphasis||{},i.emphasis[t]=i.emphasis[t]||{};for(var n=0,r=e.length;n<r;n++){var s=e[n];!i.emphasis[t].hasOwnProperty(s)&&i[t].hasOwnProperty(s)&&(i.emphasis[t][s]=i[t][s])}}}var P0=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function $l(i){return Y(i)&&!z(i)&&!(i instanceof Date)?i.value:i}function FF(i){return Y(i)&&!(i instanceof Array)}function NF(i,t,e){var n=e==="normalMerge",r=e==="replaceMerge",s=e==="replaceAll";i=i||[],t=(t||[]).slice();var a=nt();A(t,function(l,u){if(!Y(l)){t[u]=null;return}});var o=BF(i,a,e);return(n||r)&&zF(o,i,a,t),n&&GF(o,t),n||r?$F(o,t,r):s&&VF(o,t),WF(o),o}function BF(i,t,e){var n=[];if(e==="replaceAll")return n;for(var r=0;r<i.length;r++){var s=i[r];s&&s.id!=null&&t.set(s.id,r),n.push({existing:e==="replaceMerge"||fl(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return n}function zF(i,t,e,n){A(n,function(r,s){if(!(!r||r.id==null)){var a=Lo(r.id),o=e.get(a);if(o!=null){var l=i[o];pn(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=t[o],n[s]=null}}})}function GF(i,t){A(t,function(e,n){if(!(!e||e.name==null))for(var r=0;r<i.length;r++){var s=i[r].existing;if(!i[r].newOption&&s&&(s.id==null||e.id==null)&&!fl(e)&&!fl(s)&&BT("name",s,e)){i[r].newOption=e,t[n]=null;return}}})}function $F(i,t,e){A(t,function(n){if(n){for(var r,s=0;(r=i[s])&&(r.newOption||fl(r.existing)||r.existing&&n.id!=null&&!BT("id",n,r.existing));)s++;r?(r.newOption=n,r.brandNew=e):i.push({newOption:n,brandNew:e,existing:null,keyInfo:null}),s++}})}function VF(i,t){A(t,function(e){i.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function WF(i){var t=nt();A(i,function(e){var n=e.existing;n&&t.set(n.id,e)}),A(i,function(e){var n=e.newOption;pn(!n||n.id==null||!t.get(n.id)||t.get(n.id)===e,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,e),!e.keyInfo&&(e.keyInfo={})}),A(i,function(e,n){var r=e.existing,s=e.newOption,a=e.keyInfo;if(Y(s)){if(a.name=s.name!=null?Lo(s.name):r?r.name:NT+n,r)a.id=Lo(r.id);else if(s.id!=null)a.id=Lo(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(t.get(a.id))}t.set(a.id,e)}})}function BT(i,t,e){var n=$i(t[i],null),r=$i(e[i],null);return n!=null&&r!=null&&n===r}function Lo(i){return $i(i,"")}function $i(i,t){return i==null?t:$(i)?i:Ot(i)||ip(i)?i+"":t}function Lm(i){var t=i.name;return!!(t&&t.indexOf(NT))}function fl(i){return i&&i.id!=null&&Lo(i.id).indexOf(OF)===0}function YF(i,t,e){A(i,function(n){var r=n.newOption;Y(r)&&(n.keyInfo.mainType=t,n.keyInfo.subType=HF(t,r,n.existing,e))})}function HF(i,t,e,n){var r=t.type?t.type:e?e.subType:n.determineSubType(i,t);return r}function Vl(i,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return z(t.dataIndex)?H(t.dataIndex,function(e){return i.indexOfRawIndex(e)}):i.indexOfRawIndex(t.dataIndex);if(t.name!=null)return z(t.name)?H(t.name,function(e){return i.indexOfName(e)}):i.indexOfName(t.name)}function Bt(){var i="__ec_inner_"+UF++;return function(t){return t[i]||(t[i]={})}}var UF=OT();function md(i,t,e){var n=km(t,e),r=n.mainTypeSpecified,s=n.queryOptionMap,a=n.others,o=a,l=e?e.defaultMainType:null;return!r&&l&&s.set(l,{}),s.each(function(u,h){var c=Wl(i,h,u,{useDefault:l===h,enableAll:e&&e.enableAll!=null?e.enableAll:!0,enableNone:e&&e.enableNone!=null?e.enableNone:!0});o[h+"Models"]=c.models,o[h+"Model"]=c.models[0]}),o}function km(i,t){var e;if($(i)){var n={};n[i+"Index"]=0,e=n}else e=i;var r=nt(),s={},a=!1;return A(e,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=u[1],c=(u[2]||"").toLowerCase();if(!(!h||!c||t&&t.includeMainTypes&&gt(t.includeMainTypes,h)<0)){a=a||!!h;var f=r.get(h)||r.set(h,{});f[c]=o}}),{mainTypeSpecified:a,queryOptionMap:r,others:s}}var Si={useDefault:!0,enableAll:!1,enableNone:!1};function Wl(i,t,e,n){n=n||Si;var r=e.index,s=e.id,a=e.name,o={models:null,specified:r!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=n.useDefault&&(l=i.getComponent(t))?[l]:[],o}return r==="none"||r===!1?(pn(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(r==="all"&&(pn(n.enableAll,'`"all"` is not a valid value on index option.'),r=s=a=null),o.models=i.queryComponents({mainType:t,index:r,id:s,name:a}),o)}function zT(i,t,e){i.setAttribute?i.setAttribute(t,e):i[t]=e}function XF(i,t){return i.getAttribute?i.getAttribute(t):i[t]}function KF(i){return i==="auto"?it.domSupported?"html":"richText":i||"html"}var jF=".",hr="___EC__COMPONENT__CONTAINER___",GT="___EC__EXTENDED_CLASS___";function Fi(i){var t={main:"",sub:""};if(i){var e=i.split(jF);t.main=e[0]||"",t.sub=e[1]||""}return t}function ZF(i){pn(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(i),'componentType "'+i+'" illegal')}function qF(i){return!!(i&&i[GT])}function Dm(i,t){i.$constructor=i,i.extend=function(e){var n=this,r;return JF(n)?r=function(s){j(a,s);function a(){return s.apply(this,arguments)||this}return a}(n):(r=function(){(e.$constructor||n).apply(this,arguments)},J2(r,this)),N(r.prototype,e),r[GT]=!0,r.extend=this.extend,r.superCall=eN,r.superApply=iN,r.superClass=n,r}}function JF(i){return rt(i)&&/^class\s/.test(Function.prototype.toString.call(i))}function $T(i,t){i.extend=t.extend}var QF=Math.round(Math.random()*10);function tN(i){var t=["__\0is_clz",QF++].join("_");i.prototype[t]=!0,i.isInstance=function(e){return!!(e&&e[t])}}function eN(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return this.superClass.prototype[t].apply(i,e)}function iN(i,t,e){return this.superClass.prototype[t].apply(i,e)}function Qc(i){var t={};i.registerClass=function(n){var r=n.type||n.prototype.type;if(r){ZF(r),n.prototype.type=r;var s=Fi(r);if(!s.sub)t[s.main]=n;else if(s.sub!==hr){var a=e(s);a[s.sub]=n}}return n},i.getClass=function(n,r,s){var a=t[n];if(a&&a[hr]&&(a=r?a[r]:null),s&&!a)throw new Error(r?"Component "+n+"."+(r||"")+" is used but not imported.":n+".type should be specified.");return a},i.getClassesByMainType=function(n){var r=Fi(n),s=[],a=t[r.main];return a&&a[hr]?A(a,function(o,l){l!==hr&&s.push(o)}):s.push(a),s},i.hasClass=function(n){var r=Fi(n);return!!t[r.main]},i.getAllClassMainTypes=function(){var n=[];return A(t,function(r,s){n.push(s)}),n},i.hasSubTypes=function(n){var r=Fi(n),s=t[r.main];return s&&s[hr]};function e(n){var r=t[n.main];return(!r||!r[hr])&&(r=t[n.main]={},r[hr]=!0),r}}function dl(i,t){for(var e=0;e<i.length;e++)i[e][1]||(i[e][1]=i[e][0]);return t=t||!1,function(n,r,s){for(var a={},o=0;o<i.length;o++){var l=i[o][1];if(!(r&&gt(r,l)>=0||s&&gt(s,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[i[o][0]]=u)}}return a}}var nN=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],rN=dl(nN),sN=function(){function i(){}return i.prototype.getAreaStyle=function(t,e){return rN(this,t,e)},i}(),xp=new Gl(50);function aN(i){if(typeof i=="string"){var t=xp.get(i);return t&&t.image}else return i}function VT(i,t,e,n,r){if(i)if(typeof i=="string"){if(t&&t.__zrImageSrc===i||!e)return t;var s=xp.get(i),a={hostEl:e,cb:n,cbPayload:r};return s?(t=s.image,!tf(t)&&s.pending.push(a)):(t=ka.loadImage(i,O0,O0),t.__zrImageSrc=i,xp.put(i,t.__cachedImgObj={image:t,pending:[a]})),t}else return i;else return t}function O0(){var i=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<i.pending.length;t++){var e=i.pending[t],n=e.cb;n&&n(this,e.cbPayload),e.hostEl.dirty()}i.pending.length=0}function tf(i){return i&&i.width&&i.height}var yd=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function oN(i,t,e,n,r){if(!t)return"";var s=(i+"").split(`
`);r=WT(t,e,n,r);for(var a=0,o=s.length;a<o;a++)s[a]=YT(s[a],r);return s.join(`
`)}function WT(i,t,e,n){n=n||{};var r=N({},n);r.font=t,e=et(e,"..."),r.maxIterations=et(n.maxIterations,2);var s=r.minChar=et(n.minChar,0);r.cnCharWidth=We("国",t);var a=r.ascCharWidth=We("a",t);r.placeholder=et(n.placeholder,"");for(var o=i=Math.max(0,i-1),l=0;l<s&&o>=a;l++)o-=a;var u=We(e,t);return u>o&&(e="",u=0),o=i-u,r.ellipsis=e,r.ellipsisWidth=u,r.contentWidth=o,r.containerWidth=i,r}function YT(i,t){var e=t.containerWidth,n=t.font,r=t.contentWidth;if(!e)return"";var s=We(i,n);if(s<=e)return i;for(var a=0;;a++){if(s<=r||a>=t.maxIterations){i+=t.ellipsis;break}var o=a===0?lN(i,r,t.ascCharWidth,t.cnCharWidth):s>0?Math.floor(i.length*r/s):0;i=i.substr(0,o),s=We(i,n)}return i===""&&(i=t.placeholder),i}function lN(i,t,e,n){for(var r=0,s=0,a=i.length;s<a&&r<t;s++){var o=i.charCodeAt(s);r+=0<=o&&o<=127?e:n}return s}function uN(i,t){i!=null&&(i+="");var e=t.overflow,n=t.padding,r=t.font,s=e==="truncate",a=Am(r),o=et(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",h=t.width,c;h!=null&&(e==="break"||e==="breakAll")?c=i?HT(i,t.font,h,e==="breakAll",0).lines:[]:c=i?i.split(`
`):[];var f=c.length*o,d=et(t.height,f);if(f>d&&u){var g=Math.floor(d/o);c=c.slice(0,g)}if(i&&s&&h!=null)for(var p=WT(h,r,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),v=0;v<c.length;v++)c[v]=YT(c[v],p);for(var m=d,y=0,v=0;v<c.length;v++)y=Math.max(We(c[v],r),y);h==null&&(h=y);var _=y;return n&&(m+=n[0]+n[2],_+=n[1]+n[3],h+=n[1]+n[3]),l&&(_=h),{lines:c,height:d,outerWidth:_,outerHeight:m,lineHeight:o,calculatedLineHeight:a,contentWidth:y,contentHeight:f,width:h}}var hN=function(){function i(){}return i}(),F0=function(){function i(t){this.tokens=[],t&&(this.tokens=t)}return i}(),cN=function(){function i(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return i}();function fN(i,t){var e=new cN;if(i!=null&&(i+=""),!i)return e;for(var n=t.width,r=t.height,s=t.overflow,a=(s==="break"||s==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:s==="breakAll"}:null,o=yd.lastIndex=0,l;(l=yd.exec(i))!=null;){var u=l.index;u>o&&_d(e,i.substring(o,u),t,a),_d(e,l[2],t,a,l[1]),o=yd.lastIndex}o<i.length&&_d(e,i.substring(o,i.length),t,a);var h=[],c=0,f=0,d=t.padding,g=s==="truncate",p=t.lineOverflow==="truncate";function v(F,B,G){F.width=B,F.lineHeight=G,c+=G,f=Math.max(f,B)}t:for(var m=0;m<e.lines.length;m++){for(var y=e.lines[m],_=0,w=0,S=0;S<y.tokens.length;S++){var x=y.tokens[S],b=x.styleName&&t.rich[x.styleName]||{},T=x.textPadding=b.padding,C=T?T[1]+T[3]:0,I=x.font=b.font||t.font;x.contentHeight=Am(I);var E=et(b.height,x.contentHeight);if(x.innerHeight=E,T&&(E+=T[0]+T[2]),x.height=E,x.lineHeight=vh(b.lineHeight,t.lineHeight,E),x.align=b&&b.align||t.align,x.verticalAlign=b&&b.verticalAlign||"middle",p&&r!=null&&c+x.lineHeight>r){S>0?(y.tokens=y.tokens.slice(0,S),v(y,w,_),e.lines=e.lines.slice(0,m+1)):e.lines=e.lines.slice(0,m);break t}var R=b.width,M=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")x.percentWidth=R,h.push(x),x.contentWidth=We(x.text,I);else{if(M){var k=b.backgroundColor,L=k&&k.image;L&&(L=aN(L),tf(L)&&(x.width=Math.max(x.width,L.width*E/L.height)))}var D=g&&n!=null?n-w:null;D!=null&&D<x.width?!M||D<C?(x.text="",x.width=x.contentWidth=0):(x.text=oN(x.text,D-C,I,t.ellipsis,{minChar:t.truncateMinChar}),x.width=x.contentWidth=We(x.text,I)):x.contentWidth=We(x.text,I)}x.width+=C,w+=x.width,b&&(_=Math.max(_,x.lineHeight))}v(y,w,_)}e.outerWidth=e.width=et(n,f),e.outerHeight=e.height=et(r,c),e.contentHeight=c,e.contentWidth=f,d&&(e.outerWidth+=d[1]+d[3],e.outerHeight+=d[0]+d[2]);for(var m=0;m<h.length;m++){var x=h[m],O=x.percentWidth;x.width=parseInt(O,10)/100*e.width}return e}function _d(i,t,e,n,r){var s=t==="",a=r&&e.rich[r]||{},o=i.lines,l=a.font||e.font,u=!1,h,c;if(n){var f=a.padding,d=f?f[1]+f[3]:0;if(a.width!=null&&a.width!=="auto"){var g=jn(a.width,n.width)+d;o.length>0&&g+n.accumWidth>n.width&&(h=t.split(`
`),u=!0),n.accumWidth=g}else{var p=HT(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=p.accumWidth+d,c=p.linesWidths,h=p.lines}}else h=t.split(`
`);for(var v=0;v<h.length;v++){var m=h[v],y=new hN;if(y.styleName=r,y.text=m,y.isLineHolder=!m&&!s,typeof a.width=="number"?y.width=a.width:y.width=c?c[v]:We(m,l),!v&&!u){var _=(o[o.length-1]||(o[0]=new F0)).tokens,w=_.length;w===1&&_[0].isLineHolder?_[0]=y:(m||!w||s)&&_.push(y)}else o.push(new F0([y]))}}function dN(i){var t=i.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var gN=Da(",&?/;] ".split(""),function(i,t){return i[t]=!0,i},{});function pN(i){return dN(i)?!!gN[i]:!0}function HT(i,t,e,n,r){for(var s=[],a=[],o="",l="",u=0,h=0,c=0;c<i.length;c++){var f=i.charAt(c);if(f===`
`){l&&(o+=l,h+=u),s.push(o),a.push(h),o="",l="",u=0,h=0;continue}var d=We(f,t),g=n?!1:!pN(f);if(s.length?h+d>e:r+h+d>e){h?(o||l)&&(g?(o||(o=l,l="",u=0,h=u),s.push(o),a.push(h-u),l+=f,u+=d,o="",h=u):(l&&(o+=l,l="",u=0),s.push(o),a.push(h),o=f,h=d)):g?(s.push(l),a.push(u),l=f,u=d):(s.push(f),a.push(d));continue}h+=d,g?(l+=f,u+=d):(l&&(o+=l,l="",u=0),o+=f)}return!s.length&&!o&&(o=i,l="",u=0),l&&(o+=l),o&&(s.push(o),a.push(h)),s.length===1&&(h+=r),{accumWidth:h,lines:s,linesWidths:a}}var Sp="__zr_style_"+Math.round(Math.random()*10),Yr={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},ef={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Yr[Sp]=!0;var N0=["z","z2","invisible"],vN=["invisible"],mN=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype._init=function(e){for(var n=kt(e),r=0;r<n.length;r++){var s=n[r];s==="style"?this.useStyle(e[s]):i.prototype.attrKV.call(this,s,e[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,n,r,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&yN(this,e,n)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(e,n){return this.rectContain(e,n)},t.prototype.traverse=function(e,n){e.call(n,this)},t.prototype.rectContain=function(e,n){var r=this.transformCoordToLocal(e,n),s=this.getBoundingRect();return s.contain(r[0],r[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,r=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new pt(0,0,0,0)),n?pt.applyTransform(e,r,n):e.copy(r),(a||o||l)&&(e.width+=a*2+Math.abs(o),e.height+=a*2+Math.abs(l),e.x=Math.min(e.x,e.x+o-a),e.y=Math.min(e.y,e.y+l-a));var u=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-u),e.y=Math.floor(e.y-u),e.width=Math.ceil(e.width+1+u*2),e.height=Math.ceil(e.height+1+u*2))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new pt(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(e,n){e!=="style"?i.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(e,n){return typeof e=="string"?this.style[e]=n:N(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=mo,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&mo)},t.prototype.styleUpdated=function(){this.__dirty&=~mo},t.prototype.createStyle=function(e){return Jc(Yr,e)},t.prototype.useStyle=function(e){e[Sp]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[Sp]},t.prototype._innerSaveToNormal=function(e){i.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,N0)},t.prototype._applyStateObj=function(e,n,r,s,a,o){i.prototype._applyStateObj.call(this,e,n,r,s,a,o);var l=!(n&&s),u;if(n&&n.style?a?s?u=n.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(u,n.style)):l&&(u=r.style),u)if(a){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var c=kt(h),f=0;f<c.length;f++){var d=c[f];d in u&&(u[d]=u[d],this.style[d]=h[d])}for(var g=kt(u),f=0;f<g.length;f++){var d=g[f];this.style[d]=this.style[d]}this._transitionState(e,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var p=this.__inHover?vN:N0,f=0;f<p.length;f++){var d=p[f];n&&n[d]!=null?this[d]=n[d]:l&&r[d]!=null&&(this[d]=r[d])}},t.prototype._mergeStates=function(e){for(var n=i.prototype._mergeStates.call(this,e),r,s=0;s<e.length;s++){var a=e[s];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(n.style=r),n},t.prototype._mergeStyle=function(e,n){return N(e,n),e},t.prototype.getAnimationStyleProps=function(){return ef},t.initDefaultProps=function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=Ve|mo}(),t}(RT),wd=new pt(0,0,0,0),xd=new pt(0,0,0,0);function yN(i,t,e){return wd.copy(i.getBoundingRect()),i.transform&&wd.applyTransform(i.transform),xd.width=t,xd.height=e,!wd.intersect(xd)}const Yl=mN;var ni=Math.min,ri=Math.max,Sd=Math.sin,bd=Math.cos,cr=Math.PI*2,Au=Pa(),Ru=Pa(),Mu=Pa();function B0(i,t,e,n,r,s){r[0]=ni(i,e),r[1]=ni(t,n),s[0]=ri(i,e),s[1]=ri(t,n)}var z0=[],G0=[];function _N(i,t,e,n,r,s,a,o,l,u){var h=wT,c=Zt,f=h(i,e,r,a,z0);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<f;d++){var g=c(i,e,r,a,z0[d]);l[0]=ni(g,l[0]),u[0]=ri(g,u[0])}f=h(t,n,s,o,G0);for(var d=0;d<f;d++){var p=c(t,n,s,o,G0[d]);l[1]=ni(p,l[1]),u[1]=ri(p,u[1])}l[0]=ni(i,l[0]),u[0]=ri(i,u[0]),l[0]=ni(a,l[0]),u[0]=ri(a,u[0]),l[1]=ni(t,l[1]),u[1]=ri(t,u[1]),l[1]=ni(o,l[1]),u[1]=ri(o,u[1])}function wN(i,t,e,n,r,s,a,o){var l=xT,u=re,h=ri(ni(l(i,e,r),1),0),c=ri(ni(l(t,n,s),1),0),f=u(i,e,r,h),d=u(t,n,s,c);a[0]=ni(i,r,f),a[1]=ni(t,s,d),o[0]=ri(i,r,f),o[1]=ri(t,s,d)}function xN(i,t,e,n,r,s,a,o,l){var u=Us,h=Xs,c=Math.abs(r-s);if(c%cr<1e-4&&c>1e-4){o[0]=i-e,o[1]=t-n,l[0]=i+e,l[1]=t+n;return}if(Au[0]=bd(r)*e+i,Au[1]=Sd(r)*n+t,Ru[0]=bd(s)*e+i,Ru[1]=Sd(s)*n+t,u(o,Au,Ru),h(l,Au,Ru),r=r%cr,r<0&&(r=r+cr),s=s%cr,s<0&&(s=s+cr),r>s&&!a?s+=cr:r<s&&a&&(r+=cr),a){var f=s;s=r,r=f}for(var d=0;d<s;d+=Math.PI/2)d>r&&(Mu[0]=bd(d)*e+i,Mu[1]=Sd(d)*n+t,u(o,Mu,o),h(l,Mu,l))}var ft={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},fr=[],dr=[],Ei=[],In=[],Ii=[],Ai=[],Td=Math.min,Cd=Math.max,gr=Math.cos,pr=Math.sin,tn=Math.abs,bp=Math.PI,On=bp*2,Ed=typeof Float32Array<"u",Za=[];function Id(i){var t=Math.round(i/bp*1e8)/1e8;return t%2*bp}function SN(i,t){var e=Id(i[0]);e<0&&(e+=On);var n=e-i[0],r=i[1];r+=n,!t&&r-e>=On?r=e+On:t&&e-r>=On?r=e-On:!t&&e>r?r=e+(On-Id(e-r)):t&&e<r&&(r=e-(On-Id(r-e))),i[0]=e,i[1]=r}var bN=function(){function i(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return i.prototype.increaseVersion=function(){this._version++},i.prototype.getVersion=function(){return this._version},i.prototype.setScale=function(t,e,n){n=n||0,n>0&&(this._ux=tn(n/ec/t)||0,this._uy=tn(n/ec/e)||0)},i.prototype.setDPR=function(t){this.dpr=t},i.prototype.setContext=function(t){this._ctx=t},i.prototype.getContext=function(){return this._ctx},i.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},i.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},i.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(ft.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},i.prototype.lineTo=function(t,e){var n=tn(t-this._xi),r=tn(e-this._yi),s=n>this._ux||r>this._uy;if(this.addData(ft.L,t,e),this._ctx&&s&&this._ctx.lineTo(t,e),s)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var a=n*n+r*r;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=a)}return this},i.prototype.bezierCurveTo=function(t,e,n,r,s,a){return this._drawPendingPt(),this.addData(ft.C,t,e,n,r,s,a),this._ctx&&this._ctx.bezierCurveTo(t,e,n,r,s,a),this._xi=s,this._yi=a,this},i.prototype.quadraticCurveTo=function(t,e,n,r){return this._drawPendingPt(),this.addData(ft.Q,t,e,n,r),this._ctx&&this._ctx.quadraticCurveTo(t,e,n,r),this._xi=n,this._yi=r,this},i.prototype.arc=function(t,e,n,r,s,a){this._drawPendingPt(),Za[0]=r,Za[1]=s,SN(Za,a),r=Za[0],s=Za[1];var o=s-r;return this.addData(ft.A,t,e,n,n,r,o,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,r,s,a),this._xi=gr(s)*n+t,this._yi=pr(s)*n+e,this},i.prototype.arcTo=function(t,e,n,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,r,s),this},i.prototype.rect=function(t,e,n,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,r),this.addData(ft.R,t,e,n,r),this},i.prototype.closePath=function(){this._drawPendingPt(),this.addData(ft.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&t.closePath(),this._xi=e,this._yi=n,this},i.prototype.fill=function(t){t&&t.fill(),this.toStatic()},i.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},i.prototype.len=function(){return this._len},i.prototype.setData=function(t){var e=t.length;!(this.data&&this.data.length===e)&&Ed&&(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},i.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,s=0;s<e;s++)n+=t[s].len();Ed&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(var s=0;s<e;s++)for(var a=t[s].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},i.prototype.addData=function(t,e,n,r,s,a,o,l,u){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var c=0;c<arguments.length;c++)h[this._len++]=arguments[c]}},i.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},i.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},i.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Ed&&this._len>11&&(this.data=new Float32Array(t)))}},i.prototype.getBoundingRect=function(){Ei[0]=Ei[1]=Ii[0]=Ii[1]=Number.MAX_VALUE,In[0]=In[1]=Ai[0]=Ai[1]=-Number.MAX_VALUE;var t=this.data,e=0,n=0,r=0,s=0,a;for(a=0;a<this._len;){var o=t[a++],l=a===1;switch(l&&(e=t[a],n=t[a+1],r=e,s=n),o){case ft.M:e=r=t[a++],n=s=t[a++],Ii[0]=r,Ii[1]=s,Ai[0]=r,Ai[1]=s;break;case ft.L:B0(e,n,t[a],t[a+1],Ii,Ai),e=t[a++],n=t[a++];break;case ft.C:_N(e,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Ii,Ai),e=t[a++],n=t[a++];break;case ft.Q:wN(e,n,t[a++],t[a++],t[a],t[a+1],Ii,Ai),e=t[a++],n=t[a++];break;case ft.A:var u=t[a++],h=t[a++],c=t[a++],f=t[a++],d=t[a++],g=t[a++]+d;a+=1;var p=!t[a++];l&&(r=gr(d)*c+u,s=pr(d)*f+h),xN(u,h,c,f,d,g,p,Ii,Ai),e=gr(g)*c+u,n=pr(g)*f+h;break;case ft.R:r=e=t[a++],s=n=t[a++];var v=t[a++],m=t[a++];B0(r,s,r+v,s+m,Ii,Ai);break;case ft.Z:e=r,n=s;break}Us(Ei,Ei,Ii),Xs(In,In,Ai)}return a===0&&(Ei[0]=Ei[1]=In[0]=In[1]=0),new pt(Ei[0],Ei[1],In[0]-Ei[0],In[1]-Ei[1])},i.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,r=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,c=0,f=0;f<e;){var d=t[f++],g=f===1;g&&(s=t[f],a=t[f+1],o=s,l=a);var p=-1;switch(d){case ft.M:s=o=t[f++],a=l=t[f++];break;case ft.L:{var v=t[f++],m=t[f++],y=v-s,_=m-a;(tn(y)>n||tn(_)>r||f===e-1)&&(p=Math.sqrt(y*y+_*_),s=v,a=m);break}case ft.C:{var w=t[f++],S=t[f++],v=t[f++],m=t[f++],x=t[f++],b=t[f++];p=WO(s,a,w,S,v,m,x,b,10),s=x,a=b;break}case ft.Q:{var w=t[f++],S=t[f++],v=t[f++],m=t[f++];p=UO(s,a,w,S,v,m,10),s=v,a=m;break}case ft.A:var T=t[f++],C=t[f++],I=t[f++],E=t[f++],R=t[f++],M=t[f++],k=M+R;f+=1,g&&(o=gr(R)*I+T,l=pr(R)*E+C),p=Cd(I,E)*Td(On,Math.abs(M)),s=gr(k)*I+T,a=pr(k)*E+C;break;case ft.R:{o=s=t[f++],l=a=t[f++];var L=t[f++],D=t[f++];p=L*2+D*2;break}case ft.Z:{var y=o-s,_=l-a;p=Math.sqrt(y*y+_*_),s=o,a=l;break}}p>=0&&(u[c++]=p,h+=p)}return this._pathLen=h,h},i.prototype.rebuildPath=function(t,e){var n=this.data,r=this._ux,s=this._uy,a=this._len,o,l,u,h,c,f,d=e<1,g,p,v=0,m=0,y,_=0,w,S;if(!(d&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,p=this._pathLen,y=e*p,!y)))t:for(var x=0;x<a;){var b=n[x++],T=x===1;switch(T&&(u=n[x],h=n[x+1],o=u,l=h),b!==ft.L&&_>0&&(t.lineTo(w,S),_=0),b){case ft.M:o=u=n[x++],l=h=n[x++],t.moveTo(u,h);break;case ft.L:{c=n[x++],f=n[x++];var C=tn(c-u),I=tn(f-h);if(C>r||I>s){if(d){var E=g[m++];if(v+E>y){var R=(y-v)/E;t.lineTo(u*(1-R)+c*R,h*(1-R)+f*R);break t}v+=E}t.lineTo(c,f),u=c,h=f,_=0}else{var M=C*C+I*I;M>_&&(w=c,S=f,_=M)}break}case ft.C:{var k=n[x++],L=n[x++],D=n[x++],O=n[x++],F=n[x++],B=n[x++];if(d){var E=g[m++];if(v+E>y){var R=(y-v)/E;Jh(u,k,D,F,R,fr),Jh(h,L,O,B,R,dr),t.bezierCurveTo(fr[1],dr[1],fr[2],dr[2],fr[3],dr[3]);break t}v+=E}t.bezierCurveTo(k,L,D,O,F,B),u=F,h=B;break}case ft.Q:{var k=n[x++],L=n[x++],D=n[x++],O=n[x++];if(d){var E=g[m++];if(v+E>y){var R=(y-v)/E;Qh(u,k,D,R,fr),Qh(h,L,O,R,dr),t.quadraticCurveTo(fr[1],dr[1],fr[2],dr[2]);break t}v+=E}t.quadraticCurveTo(k,L,D,O),u=D,h=O;break}case ft.A:var G=n[x++],K=n[x++],P=n[x++],ct=n[x++],Z=n[x++],st=n[x++],Qt=n[x++],Xt=!n[x++],Rt=P>ct?P:ct,Dt=tn(P-ct)>.001,Mt=Z+st,U=!1;if(d){var E=g[m++];v+E>y&&(Mt=Z+st*(y-v)/E,U=!0),v+=E}if(Dt&&t.ellipse?t.ellipse(G,K,P,ct,Qt,Z,Mt,Xt):t.arc(G,K,Rt,Z,Mt,Xt),U)break t;T&&(o=gr(Z)*P+G,l=pr(Z)*ct+K),u=gr(Mt)*P+G,h=pr(Mt)*ct+K;break;case ft.R:o=u=n[x],l=h=n[x+1],c=n[x++],f=n[x++];var J=n[x++],Ye=n[x++];if(d){var E=g[m++];if(v+E>y){var Lt=y-v;t.moveTo(c,f),t.lineTo(c+Td(Lt,J),f),Lt-=J,Lt>0&&t.lineTo(c+J,f+Td(Lt,Ye)),Lt-=Ye,Lt>0&&t.lineTo(c+Cd(J-Lt,0),f+Ye),Lt-=J,Lt>0&&t.lineTo(c,f+Cd(Ye-Lt,0));break t}v+=E}t.rect(c,f,J,Ye);break;case ft.Z:if(d){var E=g[m++];if(v+E>y){var R=(y-v)/E;t.lineTo(u*(1-R)+o*R,h*(1-R)+l*R);break t}v+=E}t.closePath(),u=o,h=l}}},i.prototype.clone=function(){var t=new i,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},i.CMD=ft,i.initDefaultProps=function(){var t=i.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),i}();const xa=bN;function Ts(i,t,e,n,r,s,a){if(r===0)return!1;var o=r,l=0,u=i;if(a>t+o&&a>n+o||a<t-o&&a<n-o||s>i+o&&s>e+o||s<i-o&&s<e-o)return!1;if(i!==e)l=(t-n)/(i-e),u=(i*n-e*t)/(i-e);else return Math.abs(s-i)<=o/2;var h=l*s-a+u,c=h*h/(l*l+1);return c<=o/2*o/2}function TN(i,t,e,n,r,s,a,o,l,u,h){if(l===0)return!1;var c=l;if(h>t+c&&h>n+c&&h>s+c&&h>o+c||h<t-c&&h<n-c&&h<s-c&&h<o-c||u>i+c&&u>e+c&&u>r+c&&u>a+c||u<i-c&&u<e-c&&u<r-c&&u<a-c)return!1;var f=VO(i,t,e,n,r,s,a,o,u,h,null);return f<=c/2}function CN(i,t,e,n,r,s,a,o,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>s+u||l<t-u&&l<n-u&&l<s-u||o>i+u&&o>e+u&&o>r+u||o<i-u&&o<e-u&&o<r-u)return!1;var h=HO(i,t,e,n,r,s,o,l,null);return h<=u/2}var $0=Math.PI*2;function Lu(i){return i%=$0,i<0&&(i+=$0),i}var qa=Math.PI*2;function EN(i,t,e,n,r,s,a,o,l){if(a===0)return!1;var u=a;o-=i,l-=t;var h=Math.sqrt(o*o+l*l);if(h-u>e||h+u<e)return!1;if(Math.abs(n-r)%qa<1e-4)return!0;if(s){var c=n;n=Lu(r),r=Lu(c)}else n=Lu(n),r=Lu(r);n>r&&(r+=qa);var f=Math.atan2(l,o);return f<0&&(f+=qa),f>=n&&f<=r||f+qa>=n&&f+qa<=r}function vr(i,t,e,n,r,s){if(s>t&&s>n||s<t&&s<n||n===t)return 0;var a=(s-t)/(n-t),o=n<t?1:-1;(a===1||a===0)&&(o=n<t?.5:-.5);var l=a*(e-i)+i;return l===r?1/0:l>r?o:0}var An=xa.CMD,mr=Math.PI*2,IN=1e-4;function AN(i,t){return Math.abs(i-t)<IN}var de=[-1,-1,-1],ti=[-1,-1];function RN(){var i=ti[0];ti[0]=ti[1],ti[1]=i}function MN(i,t,e,n,r,s,a,o,l,u){if(u>t&&u>n&&u>s&&u>o||u<t&&u<n&&u<s&&u<o)return 0;var h=_T(t,n,s,o,u,de);if(h===0)return 0;for(var c=0,f=-1,d=void 0,g=void 0,p=0;p<h;p++){var v=de[p],m=v===0||v===1?.5:1,y=Zt(i,e,r,a,v);y<l||(f<0&&(f=wT(t,n,s,o,ti),ti[1]<ti[0]&&f>1&&RN(),d=Zt(t,n,s,o,ti[0]),f>1&&(g=Zt(t,n,s,o,ti[1]))),f===2?v<ti[0]?c+=d<t?m:-m:v<ti[1]?c+=g<d?m:-m:c+=o<g?m:-m:v<ti[0]?c+=d<t?m:-m:c+=o<d?m:-m)}return c}function LN(i,t,e,n,r,s,a,o){if(o>t&&o>n&&o>s||o<t&&o<n&&o<s)return 0;var l=YO(t,n,s,o,de);if(l===0)return 0;var u=xT(t,n,s);if(u>=0&&u<=1){for(var h=0,c=re(t,n,s,u),f=0;f<l;f++){var d=de[f]===0||de[f]===1?.5:1,g=re(i,e,r,de[f]);g<a||(de[f]<u?h+=c<t?d:-d:h+=s<c?d:-d)}return h}else{var d=de[0]===0||de[0]===1?.5:1,g=re(i,e,r,de[0]);return g<a?0:s<t?d:-d}}function kN(i,t,e,n,r,s,a,o){if(o-=t,o>e||o<-e)return 0;var l=Math.sqrt(e*e-o*o);de[0]=-l,de[1]=l;var u=Math.abs(n-r);if(u<1e-4)return 0;if(u>=mr-1e-4){n=0,r=mr;var h=s?1:-1;return a>=de[0]+i&&a<=de[1]+i?h:0}if(n>r){var c=n;n=r,r=c}n<0&&(n+=mr,r+=mr);for(var f=0,d=0;d<2;d++){var g=de[d];if(g+i>a){var p=Math.atan2(o,g),h=s?1:-1;p<0&&(p=mr+p),(p>=n&&p<=r||p+mr>=n&&p+mr<=r)&&(p>Math.PI/2&&p<Math.PI*1.5&&(h=-h),f+=h)}}return f}function UT(i,t,e,n,r){for(var s=i.data,a=i.len(),o=0,l=0,u=0,h=0,c=0,f,d,g=0;g<a;){var p=s[g++],v=g===1;switch(p===An.M&&g>1&&(e||(o+=vr(l,u,h,c,n,r))),v&&(l=s[g],u=s[g+1],h=l,c=u),p){case An.M:h=s[g++],c=s[g++],l=h,u=c;break;case An.L:if(e){if(Ts(l,u,s[g],s[g+1],t,n,r))return!0}else o+=vr(l,u,s[g],s[g+1],n,r)||0;l=s[g++],u=s[g++];break;case An.C:if(e){if(TN(l,u,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],t,n,r))return!0}else o+=MN(l,u,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],n,r)||0;l=s[g++],u=s[g++];break;case An.Q:if(e){if(CN(l,u,s[g++],s[g++],s[g],s[g+1],t,n,r))return!0}else o+=LN(l,u,s[g++],s[g++],s[g],s[g+1],n,r)||0;l=s[g++],u=s[g++];break;case An.A:var m=s[g++],y=s[g++],_=s[g++],w=s[g++],S=s[g++],x=s[g++];g+=1;var b=!!(1-s[g++]);f=Math.cos(S)*_+m,d=Math.sin(S)*w+y,v?(h=f,c=d):o+=vr(l,u,f,d,n,r);var T=(n-m)*w/_+m;if(e){if(EN(m,y,w,S,S+x,b,t,T,r))return!0}else o+=kN(m,y,w,S,S+x,b,T,r);l=Math.cos(S+x)*_+m,u=Math.sin(S+x)*w+y;break;case An.R:h=l=s[g++],c=u=s[g++];var C=s[g++],I=s[g++];if(f=h+C,d=c+I,e){if(Ts(h,c,f,c,t,n,r)||Ts(f,c,f,d,t,n,r)||Ts(f,d,h,d,t,n,r)||Ts(h,d,h,c,t,n,r))return!0}else o+=vr(f,c,f,d,n,r),o+=vr(h,d,h,c,n,r);break;case An.Z:if(e){if(Ts(l,u,h,c,t,n,r))return!0}else o+=vr(l,u,h,c,n,r);l=h,u=c;break}}return!e&&!AN(u,c)&&(o+=vr(l,u,h,c,n,r)||0),o!==0}function DN(i,t,e){return UT(i,0,!1,t,e)}function PN(i,t,e,n){return UT(i,t,!0,e,n)}var XT=St({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Yr),ON={style:St({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ef.style)},Ad=cl.concat(["invisible","culling","z","z2","zlevel","parent"]),FN=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.update=function(){var e=this;i.prototype.update.call(this);var n=this.style;if(n.decal){var r=this._decalEl=this._decalEl||new t;r.buildPath===t.prototype.buildPath&&(r.buildPath=function(l){e.buildPath(l,e.shape)}),r.silent=!0;var s=r.style;for(var a in n)s[a]!==n[a]&&(s[a]=n[a]);s.fill=n.fill?n.decal:null,s.decal=null,s.shadowColor=null,n.strokeFirst&&(s.stroke=null);for(var o=0;o<Ad.length;++o)r[Ad[o]]=this[Ad[o]];r.__dirty|=Ve}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(e){var n=kt(e);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var s=0;s<n.length;s++){var a=n[s],o=e[a];a==="style"?this.style?N(this.style,o):this.useStyle(o):a==="shape"?N(this.shape,o):i.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if(e!=="none"){if($(e)){var n=tc(e,0);return n>.5?yp:n>.2?vF:_p}else if(e)return _p}return yp},t.prototype.getInsideTextStroke=function(e){var n=this.style.fill;if($(n)){var r=this.__zr,s=!!(r&&r.isDarkMode()),a=tc(e,0)<mp;if(s===a)return n}},t.prototype.buildPath=function(e,n,r){},t.prototype.pathUpdated=function(){this.__dirty&=~zs},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new xa(!1)},t.prototype.hasStroke=function(){var e=this.style,n=e.stroke;return!(n==null||n==="none"||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style,n=e.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var e=this._rect,n=this.style,r=!e;if(r){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&zs)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),e=a.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||r){o.copy(e);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;u=Math.max(u,h??4)}l>1e-10&&(o.width+=u/l,o.height+=u/l,o.x-=u/l/2,o.y-=u/l/2)}return o}return e},t.prototype.contain=function(e,n){var r=this.transformCoordToLocal(e,n),s=this.getBoundingRect(),a=this.style;if(e=r[0],n=r[1],s.contain(e,n)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),PN(o,l/u,e,n)))return!0}if(this.hasFill())return DN(o,e,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=zs,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():e==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(e,n){e==="shape"?this.setShape(n):i.prototype.attrKV.call(this,e,n)},t.prototype.setShape=function(e,n){var r=this.shape;return r||(r=this.shape={}),typeof e=="string"?r[e]=n:N(r,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&zs)},t.prototype.createStyle=function(e){return Jc(XT,e)},t.prototype._innerSaveToNormal=function(e){i.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=N({},this.shape))},t.prototype._applyStateObj=function(e,n,r,s,a,o){i.prototype._applyStateObj.call(this,e,n,r,s,a,o);var l=!(n&&s),u;if(n&&n.shape?a?s?u=n.shape:(u=N({},r.shape),N(u,n.shape)):(u=N({},s?this.shape:r.shape),N(u,n.shape)):l&&(u=r.shape),u)if(a){this.shape=N({},this.shape);for(var h={},c=kt(u),f=0;f<c.length;f++){var d=c[f];typeof u[d]=="object"?this.shape[d]=u[d]:h[d]=u[d]}this._transitionState(e,{shape:h},o)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(e){for(var n=i.prototype._mergeStates.call(this,e),r,s=0;s<e.length;s++){var a=e[s];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(n.shape=r),n},t.prototype.getAnimationStyleProps=function(){return ON},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var n=function(s){yt(a,s);function a(o){var l=s.call(this,o)||this;return e.init&&e.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return at(e.style)},a.prototype.getDefaultShape=function(){return at(e.shape)},a}(t);for(var r in e)typeof e[r]=="function"&&(n.prototype[r]=e[r]);return n},t.initDefaultProps=function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=Ve|mo|zs}(),t}(Yl);const _t=FN;var NN=St({strokeFirst:!0,font:Jr,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},XT),KT=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var e=this.style,n=e.stroke;return n!=null&&n!=="none"&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style,n=e.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(e){return Jc(NN,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var n=e.text;n!=null?n+="":n="";var r=Im(n,e.font,e.textAlign,e.textBaseline);if(r.x+=e.x||0,r.y+=e.y||0,this.hasStroke()){var s=e.lineWidth;r.x-=s/2,r.y-=s/2,r.width+=s,r.height+=s}this._rect=r}return this._rect},t.initDefaultProps=function(){var e=t.prototype;e.dirtyRectTolerance=10}(),t}(Yl);KT.prototype.type="tspan";const Tp=KT;var BN=St({x:0,y:0},Yr),zN={style:St({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ef.style)};function GN(i){return!!(i&&typeof i!="string"&&i.width&&i.height)}var jT=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createStyle=function(e){return Jc(BN,e)},t.prototype._getSize=function(e){var n=this.style,r=n[e];if(r!=null)return r;var s=GN(n.image)?n.image:this.__image;if(!s)return 0;var a=e==="width"?"height":"width",o=n[a];return o==null?s[e]:s[e]/s[a]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return zN},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new pt(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Yl);jT.prototype.type="image";const Oa=jT;function $N(i,t){var e=t.x,n=t.y,r=t.width,s=t.height,a=t.r,o,l,u,h;r<0&&(e=e+r,r=-r),s<0&&(n=n+s,s=-s),typeof a=="number"?o=l=u=h=a:a instanceof Array?a.length===1?o=l=u=h=a[0]:a.length===2?(o=u=a[0],l=h=a[1]):a.length===3?(o=a[0],l=h=a[1],u=a[2]):(o=a[0],l=a[1],u=a[2],h=a[3]):o=l=u=h=0;var c;o+l>r&&(c=o+l,o*=r/c,l*=r/c),u+h>r&&(c=u+h,u*=r/c,h*=r/c),l+u>s&&(c=l+u,l*=s/c,u*=s/c),o+h>s&&(c=o+h,o*=s/c,h*=s/c),i.moveTo(e+o,n),i.lineTo(e+r-l,n),l!==0&&i.arc(e+r-l,n+l,l,-Math.PI/2,0),i.lineTo(e+r,n+s-u),u!==0&&i.arc(e+r-u,n+s-u,u,0,Math.PI/2),i.lineTo(e+h,n+s),h!==0&&i.arc(e+h,n+s-h,h,Math.PI/2,Math.PI),i.lineTo(e,n+o),o!==0&&i.arc(e+o,n+o,o,Math.PI,Math.PI*1.5)}var js=Math.round;function ZT(i,t,e){if(t){var n=t.x1,r=t.x2,s=t.y1,a=t.y2;i.x1=n,i.x2=r,i.y1=s,i.y2=a;var o=e&&e.lineWidth;return o&&(js(n*2)===js(r*2)&&(i.x1=i.x2=Nr(n,o,!0)),js(s*2)===js(a*2)&&(i.y1=i.y2=Nr(s,o,!0))),i}}function qT(i,t,e){if(t){var n=t.x,r=t.y,s=t.width,a=t.height;i.x=n,i.y=r,i.width=s,i.height=a;var o=e&&e.lineWidth;return o&&(i.x=Nr(n,o,!0),i.y=Nr(r,o,!0),i.width=Math.max(Nr(n+s,o,!1)-i.x,s===0?0:1),i.height=Math.max(Nr(r+a,o,!1)-i.y,a===0?0:1)),i}}function Nr(i,t,e){if(!t)return i;var n=js(i*2);return(n+js(t))%2===0?n/2:(n+(e?1:-1))/2}var VN=function(){function i(){this.x=0,this.y=0,this.width=0,this.height=0}return i}(),WN={},JT=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new VN},t.prototype.buildPath=function(e,n){var r,s,a,o;if(this.subPixelOptimize){var l=qT(WN,n,this.style);r=l.x,s=l.y,a=l.width,o=l.height,l.r=n.r,n=l}else r=n.x,s=n.y,a=n.width,o=n.height;n.r?$N(e,n):e.rect(r,s,a,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(_t);JT.prototype.type="rect";const Ut=JT;var V0={fill:"#000"},W0=2,YN={style:St({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},ef.style)},QT=function(i){yt(t,i);function t(e){var n=i.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=V0,n.attr(e),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){i.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):i.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):i.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),i.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,jN(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){i.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},t.prototype.removeSelfFromZr=function(e){i.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new pt(0,0,0,0),n=this._children,r=[],s=null,a=0;a<n.length;a++){var o=n[a],l=o.getBoundingRect(),u=o.getLocalTransform(r);u?(e.copy(l),e.applyTransform(u),s=s||e.clone(),s.union(e)):(s=s||l.clone(),s.union(l))}this._rect=s||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||V0},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,n){if(!n)return e;var r=n.rich,s=e.rich||r&&{};return N(e,n),r&&s?(this._mergeRich(s,r),e.rich=s):s&&(e.rich=s),e},t.prototype._mergeRich=function(e,n){for(var r=kt(n),s=0;s<r.length;s++){var a=r[s];e[a]=e[a]||{},N(e[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return YN},t.prototype._getOrCreateChild=function(e){var n=this._children[this._childCursor];return(!n||!(n instanceof e))&&(n=new e),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var e=this.style,n=e.font||Jr,r=e.padding,s=Z0(e),a=uN(s,e),o=Rd(e),l=!!e.backgroundColor,u=a.outerHeight,h=a.outerWidth,c=a.contentWidth,f=a.lines,d=a.lineHeight,g=this._defaultStyle,p=e.x||0,v=e.y||0,m=e.align||g.align||"left",y=e.verticalAlign||g.verticalAlign||"top",_=p,w=Gs(v,a.contentHeight,y);if(o||r){var S=_o(p,h,m),x=Gs(v,u,y);o&&this._renderBackground(e,e,S,x,h,u)}w+=d/2,r&&(_=j0(p,m,r),y==="top"?w+=r[0]:y==="bottom"&&(w-=r[2]));for(var b=0,T=!1,C=K0("fill"in e?e.fill:(T=!0,g.fill)),I=X0("stroke"in e?e.stroke:!l&&(!g.autoStroke||T)?(b=W0,g.stroke):null),E=e.textShadowBlur>0,R=e.width!=null&&(e.overflow==="truncate"||e.overflow==="break"||e.overflow==="breakAll"),M=a.calculatedLineHeight,k=0;k<f.length;k++){var L=this._getOrCreateChild(Tp),D=L.createStyle();L.useStyle(D),D.text=f[k],D.x=_,D.y=w,m&&(D.textAlign=m),D.textBaseline="middle",D.opacity=e.opacity,D.strokeFirst=!0,E&&(D.shadowBlur=e.textShadowBlur||0,D.shadowColor=e.textShadowColor||"transparent",D.shadowOffsetX=e.textShadowOffsetX||0,D.shadowOffsetY=e.textShadowOffsetY||0),D.stroke=I,D.fill=C,I&&(D.lineWidth=e.lineWidth||b,D.lineDash=e.lineDash,D.lineDashOffset=e.lineDashOffset||0),D.font=n,H0(D,e),w+=d,R&&L.setBoundingRect(new pt(_o(D.x,e.width,D.textAlign),Gs(D.y,M,D.textBaseline),c,M))}},t.prototype._updateRichTexts=function(){var e=this.style,n=Z0(e),r=fN(n,e),s=r.width,a=r.outerWidth,o=r.outerHeight,l=e.padding,u=e.x||0,h=e.y||0,c=this._defaultStyle,f=e.align||c.align,d=e.verticalAlign||c.verticalAlign,g=_o(u,a,f),p=Gs(h,o,d),v=g,m=p;l&&(v+=l[3],m+=l[0]);var y=v+s;Rd(e)&&this._renderBackground(e,e,g,p,a,o);for(var _=!!e.backgroundColor,w=0;w<r.lines.length;w++){for(var S=r.lines[w],x=S.tokens,b=x.length,T=S.lineHeight,C=S.width,I=0,E=v,R=y,M=b-1,k=void 0;I<b&&(k=x[I],!k.align||k.align==="left");)this._placeToken(k,e,T,m,E,"left",_),C-=k.width,E+=k.width,I++;for(;M>=0&&(k=x[M],k.align==="right");)this._placeToken(k,e,T,m,R,"right",_),C-=k.width,R-=k.width,M--;for(E+=(s-(E-v)-(y-R)-C)/2;I<=M;)k=x[I],this._placeToken(k,e,T,m,E+k.width/2,"center",_),E+=k.width,I++;m+=T}},t.prototype._placeToken=function(e,n,r,s,a,o,l){var u=n.rich[e.styleName]||{};u.text=e.text;var h=e.verticalAlign,c=s+r/2;h==="top"?c=s+e.height/2:h==="bottom"&&(c=s+r-e.height/2);var f=!e.isLineHolder&&Rd(u);f&&this._renderBackground(u,n,o==="right"?a-e.width:o==="center"?a-e.width/2:a,c-e.height/2,e.width,e.height);var d=!!u.backgroundColor,g=e.textPadding;g&&(a=j0(a,o,g),c-=e.height/2-g[0]-e.innerHeight/2);var p=this._getOrCreateChild(Tp),v=p.createStyle();p.useStyle(v);var m=this._defaultStyle,y=!1,_=0,w=K0("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,m.fill)),S=X0("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||y)?(_=W0,m.stroke):null),x=u.textShadowBlur>0||n.textShadowBlur>0;v.text=e.text,v.x=a,v.y=c,x&&(v.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,v.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",v.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,v.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=e.font||Jr,v.opacity=vh(u.opacity,n.opacity,1),H0(v,u),S&&(v.lineWidth=vh(u.lineWidth,n.lineWidth,_),v.lineDash=et(u.lineDash,n.lineDash),v.lineDashOffset=n.lineDashOffset||0,v.stroke=S),w&&(v.fill=w);var b=e.contentWidth,T=e.contentHeight;p.setBoundingRect(new pt(_o(v.x,b,v.textAlign),Gs(v.y,T,v.textBaseline),b,T))},t.prototype._renderBackground=function(e,n,r,s,a,o){var l=e.backgroundColor,u=e.borderWidth,h=e.borderColor,c=l&&l.image,f=l&&!c,d=e.borderRadius,g=this,p,v;if(f||e.lineHeight||u&&h){p=this._getOrCreateChild(Ut),p.useStyle(p.createStyle()),p.style.fill=null;var m=p.shape;m.x=r,m.y=s,m.width=a,m.height=o,m.r=d,p.dirtyShape()}if(f){var y=p.style;y.fill=l||null,y.fillOpacity=et(e.fillOpacity,1)}else if(c){v=this._getOrCreateChild(Oa),v.onload=function(){g.dirtyStyle()};var _=v.style;_.image=l.image,_.x=r,_.y=s,_.width=a,_.height=o}if(u&&h){var y=p.style;y.lineWidth=u,y.stroke=h,y.strokeOpacity=et(e.strokeOpacity,1),y.lineDash=e.borderDash,y.lineDashOffset=e.borderDashOffset||0,p.strokeContainThreshold=0,p.hasFill()&&p.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(p||v).style;w.shadowBlur=e.shadowBlur||0,w.shadowColor=e.shadowColor||"transparent",w.shadowOffsetX=e.shadowOffsetX||0,w.shadowOffsetY=e.shadowOffsetY||0,w.opacity=vh(e.opacity,n.opacity,1)},t.makeFont=function(e){var n="";return KN(e)&&(n=[e.fontStyle,e.fontWeight,XN(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),n&&Oi(n)||e.textFont||e.font},t}(Yl),HN={left:!0,right:1,center:1},UN={top:1,bottom:1,middle:1},Y0=["fontStyle","fontWeight","fontSize","fontFamily"];function XN(i){return typeof i=="string"&&(i.indexOf("px")!==-1||i.indexOf("rem")!==-1||i.indexOf("em")!==-1)?i:isNaN(+i)?gm+"px":i+"px"}function H0(i,t){for(var e=0;e<Y0.length;e++){var n=Y0[e],r=t[n];r!=null&&(i[n]=r)}}function KN(i){return i.fontSize!=null||i.fontFamily||i.fontWeight}function jN(i){return U0(i),A(i.rich,U0),i}function U0(i){if(i){i.font=QT.makeFont(i);var t=i.align;t==="middle"&&(t="center"),i.align=t==null||HN[t]?t:"left";var e=i.verticalAlign;e==="center"&&(e="middle"),i.verticalAlign=e==null||UN[e]?e:"top";var n=i.padding;n&&(i.padding=rT(i.padding))}}function X0(i,t){return i==null||t<=0||i==="transparent"||i==="none"?null:i.image||i.colorStops?"#000":i}function K0(i){return i==null||i==="none"?null:i.image||i.colorStops?"#000":i}function j0(i,t,e){return t==="right"?i-e[1]:t==="center"?i+e[3]/2-e[1]/2:i+e[3]}function Z0(i){var t=i.text;return t!=null&&(t+=""),t}function Rd(i){return!!(i.backgroundColor||i.lineHeight||i.borderWidth&&i.borderColor)}const Pe=QT;var dt=Bt(),ZN=function(i,t,e,n){if(n){var r=dt(n);r.dataIndex=e,r.dataType=t,r.seriesIndex=i,r.ssrType="chart",n.type==="group"&&n.traverse(function(s){var a=dt(s);a.seriesIndex=i,a.dataIndex=e,a.dataType=t,a.ssrType="chart"})}},q0=1,J0={},tC=Bt(),Pm=Bt(),eC=0,Om=1,Fm=2,Wi=["emphasis","blur","select"],Q0=["normal","emphasis","blur","select"],qN=10,JN=9,Hr="highlight",Th="downplay",ko="select",Ch="unselect",Do="toggleSelect";function Cs(i){return i!=null&&i!=="none"}function nf(i,t,e){i.onHoverStateChange&&(i.hoverState||0)!==e&&i.onHoverStateChange(t),i.hoverState=e}function iC(i){nf(i,"emphasis",Fm)}function nC(i){i.hoverState===Fm&&nf(i,"normal",eC)}function Nm(i){nf(i,"blur",Om)}function rC(i){i.hoverState===Om&&nf(i,"normal",eC)}function QN(i){i.selected=!0}function tB(i){i.selected=!1}function t1(i,t,e){t(i,e)}function yn(i,t,e){t1(i,t,e),i.isGroup&&i.traverse(function(n){t1(n,t,e)})}function eB(i,t,e,n){for(var r=i.style,s={},a=0;a<t.length;a++){var o=t[a],l=r[o];s[o]=l??(n&&n[o])}for(var a=0;a<i.animators.length;a++){var u=i.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(e)<0&&u.targetName==="style"&&u.saveTo(s,t)}return s}function iB(i,t,e,n){var r=e&&gt(e,"select")>=0,s=!1;if(i instanceof _t){var a=tC(i),o=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(Cs(o)||Cs(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(s=!0,n=N({},n),u=N({},u),u.fill=o):!Cs(u.fill)&&Cs(o)?(s=!0,n=N({},n),u=N({},u),u.fill=_0(o)):!Cs(u.stroke)&&Cs(l)&&(s||(n=N({},n),u=N({},u)),u.stroke=_0(l)),n.style=u}}if(n&&n.z2==null){s||(n=N({},n));var h=i.z2EmphasisLift;n.z2=i.z2+(h??qN)}return n}function nB(i,t,e){if(e&&e.z2==null){e=N({},e);var n=i.z2SelectLift;e.z2=i.z2+(n??JN)}return e}function rB(i,t,e){var n=gt(i.currentStates,t)>=0,r=i.style.opacity,s=n?null:eB(i,["opacity"],t,{opacity:1});e=e||{};var a=e.style||{};return a.opacity==null&&(e=N({},e),a=N({opacity:n?r:s.opacity*.1},a),e.style=a),e}function Md(i,t){var e=this.states[i];if(this.style){if(i==="emphasis")return iB(this,i,t,e);if(i==="blur")return rB(this,i,e);if(i==="select")return nB(this,i,e)}return e}function sB(i){i.stateProxy=Md;var t=i.getTextContent(),e=i.getTextGuideLine();t&&(t.stateProxy=Md),e&&(e.stateProxy=Md)}function e1(i,t){!lC(i,t)&&!i.__highByOuter&&yn(i,iC)}function i1(i,t){!lC(i,t)&&!i.__highByOuter&&yn(i,nC)}function sc(i,t){i.__highByOuter|=1<<(t||0),yn(i,iC)}function ac(i,t){!(i.__highByOuter&=~(1<<(t||0)))&&yn(i,nC)}function sC(i){yn(i,Nm)}function Bm(i){yn(i,rC)}function aC(i){yn(i,QN)}function oC(i){yn(i,tB)}function lC(i,t){return i.__highDownSilentOnTouch&&t.zrByTouch}function uC(i){var t=i.getModel(),e=[],n=[];t.eachComponent(function(r,s){var a=Pm(s),o=r==="series",l=o?i.getViewOfSeriesModel(s):i.getViewOfComponentModel(s);!o&&n.push(l),a.isBlured&&(l.group.traverse(function(u){rC(u)}),o&&e.push(s)),a.isBlured=!1}),A(n,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(e,!1,t)})}function Cp(i,t,e,n){var r=n.getModel();e=e||"coordinateSystem";function s(u,h){for(var c=0;c<h.length;c++){var f=u.getItemGraphicEl(h[c]);f&&Bm(f)}}if(i!=null&&!(!t||t==="none")){var a=r.getSeriesByIndex(i),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];r.eachSeries(function(u){var h=a===u,c=u.coordinateSystem;c&&c.master&&(c=c.master);var f=c&&o?c===o:h;if(!(e==="series"&&!h||e==="coordinateSystem"&&!f||t==="series"&&h)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(v){v.__highByOuter&&h&&t==="self"||Nm(v)}),Le(t))s(u.getData(),t);else if(Y(t))for(var g=kt(t),p=0;p<g.length;p++)s(u.getData(g[p]),t[g[p]]);l.push(u),Pm(u).isBlured=!0}}),r.eachComponent(function(u,h){if(u!=="series"){var c=n.getViewOfComponentModel(h);c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!0,r)}})}}function Ep(i,t,e){if(!(i==null||t==null)){var n=e.getModel().getComponent(i,t);if(n){Pm(n).isBlured=!0;var r=e.getViewOfComponentModel(n);!r||!r.focusBlurEnabled||r.group.traverse(function(s){Nm(s)})}}}function aB(i,t,e){var n=i.seriesIndex,r=i.getData(t.dataType);if(r){var s=Vl(r,t);s=(z(s)?s[0]:s)||0;var a=r.getItemGraphicEl(s);if(!a)for(var o=r.count(),l=0;!a&&l<o;)a=r.getItemGraphicEl(l++);if(a){var u=dt(a);Cp(n,u.focus,u.blurScope,e)}else{var h=i.get(["emphasis","focus"]),c=i.get(["emphasis","blurScope"]);h!=null&&Cp(n,h,c,e)}}}function zm(i,t,e,n){var r={focusSelf:!1,dispatchers:null};if(i==null||i==="series"||t==null||e==null)return r;var s=n.getModel().getComponent(i,t);if(!s)return r;var a=n.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return r;for(var o=a.findHighDownDispatchers(e),l,u=0;u<o.length;u++)if(dt(o[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function oB(i,t,e){var n=dt(i),r=zm(n.componentMainType,n.componentIndex,n.componentHighDownName,e),s=r.dispatchers,a=r.focusSelf;s?(a&&Ep(n.componentMainType,n.componentIndex,e),A(s,function(o){return e1(o,t)})):(Cp(n.seriesIndex,n.focus,n.blurScope,e),n.focus==="self"&&Ep(n.componentMainType,n.componentIndex,e),e1(i,t))}function lB(i,t,e){uC(e);var n=dt(i),r=zm(n.componentMainType,n.componentIndex,n.componentHighDownName,e).dispatchers;r?A(r,function(s){return i1(s,t)}):i1(i,t)}function uB(i,t,e){if(Rp(t)){var n=t.dataType,r=i.getData(n),s=Vl(r,t);z(s)||(s=[s]),i[t.type===Do?"toggleSelect":t.type===ko?"select":"unselect"](s,n)}}function n1(i){var t=i.getAllData();A(t,function(e){var n=e.data,r=e.type;n.eachItemGraphicEl(function(s,a){i.isSelected(a,r)?aC(s):oC(s)})})}function hB(i){var t=[];return i.eachSeries(function(e){var n=e.getAllData();A(n,function(r){r.data;var s=r.type,a=e.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:e.seriesIndex};s!=null&&(o.dataType=s),t.push(o)}})}),t}function Ip(i,t,e){cC(i,!0),yn(i,sB),fB(i,t,e)}function cB(i){cC(i,!1)}function hC(i,t,e,n){n?cB(i):Ip(i,t,e)}function fB(i,t,e){var n=dt(i);t!=null?(n.focus=t,n.blurScope=e):n.focus&&(n.focus=null)}var r1=["emphasis","blur","select"],dB={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function gB(i,t,e,n){e=e||"itemStyle";for(var r=0;r<r1.length;r++){var s=r1[r],a=t.getModel([s,e]),o=i.ensureState(s);o.style=n?n(a):a[dB[e]]()}}function cC(i,t){var e=t===!1,n=i;i.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=i.highDownSilentOnTouch),(!e||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!e)}function Ap(i){return!!(i&&i.__highDownDispatcher)}function pB(i){var t=J0[i];return t==null&&q0<=32&&(t=J0[i]=q0++),t}function Rp(i){var t=i.type;return t===ko||t===Ch||t===Do}function s1(i){var t=i.type;return t===Hr||t===Th}function vB(i){var t=tC(i);t.normalFill=i.style.fill,t.normalStroke=i.style.stroke;var e=i.states.select||{};t.selectFill=e.style&&e.style.fill||null,t.selectStroke=e.style&&e.style.stroke||null}var Es=xa.CMD,mB=[[],[],[]],a1=Math.sqrt,yB=Math.atan2;function _B(i,t){if(t){var e=i.data,n=i.len(),r,s,a,o,l,u,h=Es.M,c=Es.C,f=Es.L,d=Es.R,g=Es.A,p=Es.Q;for(a=0,o=0;a<n;){switch(r=e[a++],o=a,s=0,r){case h:s=1;break;case f:s=1;break;case c:s=3;break;case p:s=2;break;case g:var v=t[4],m=t[5],y=a1(t[0]*t[0]+t[1]*t[1]),_=a1(t[2]*t[2]+t[3]*t[3]),w=yB(-t[1]/_,t[0]/y);e[a]*=y,e[a++]+=v,e[a]*=_,e[a++]+=m,e[a++]*=y,e[a++]*=_,e[a++]+=w,e[a++]+=w,a+=2,o=a;break;case d:u[0]=e[a++],u[1]=e[a++],ui(u,u,t),e[o++]=u[0],e[o++]=u[1],u[0]+=e[a++],u[1]+=e[a++],ui(u,u,t),e[o++]=u[0],e[o++]=u[1]}for(l=0;l<s;l++){var S=mB[l];S[0]=e[a++],S[1]=e[a++],ui(S,S,t),e[o++]=S[0],e[o++]=S[1]}}i.increaseVersion()}}var Ld=Math.sqrt,ku=Math.sin,Du=Math.cos,Ja=Math.PI;function o1(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Mp(i,t){return(i[0]*t[0]+i[1]*t[1])/(o1(i)*o1(t))}function l1(i,t){return(i[0]*t[1]<i[1]*t[0]?-1:1)*Math.acos(Mp(i,t))}function u1(i,t,e,n,r,s,a,o,l,u,h){var c=l*(Ja/180),f=Du(c)*(i-e)/2+ku(c)*(t-n)/2,d=-1*ku(c)*(i-e)/2+Du(c)*(t-n)/2,g=f*f/(a*a)+d*d/(o*o);g>1&&(a*=Ld(g),o*=Ld(g));var p=(r===s?-1:1)*Ld((a*a*(o*o)-a*a*(d*d)-o*o*(f*f))/(a*a*(d*d)+o*o*(f*f)))||0,v=p*a*d/o,m=p*-o*f/a,y=(i+e)/2+Du(c)*v-ku(c)*m,_=(t+n)/2+ku(c)*v+Du(c)*m,w=l1([1,0],[(f-v)/a,(d-m)/o]),S=[(f-v)/a,(d-m)/o],x=[(-1*f-v)/a,(-1*d-m)/o],b=l1(S,x);if(Mp(S,x)<=-1&&(b=Ja),Mp(S,x)>=1&&(b=0),b<0){var T=Math.round(b/Ja*1e6)/1e6;b=Ja*2+T%2*Ja}h.addData(u,y,_,a,o,w,b,c,s)}var wB=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,xB=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function SB(i){var t=new xa;if(!i)return t;var e=0,n=0,r=e,s=n,a,o=xa.CMD,l=i.match(wB);if(!l)return t;for(var u=0;u<l.length;u++){for(var h=l[u],c=h.charAt(0),f=void 0,d=h.match(xB)||[],g=d.length,p=0;p<g;p++)d[p]=parseFloat(d[p]);for(var v=0;v<g;){var m=void 0,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0,b=void 0,T=e,C=n,I=void 0,E=void 0;switch(c){case"l":e+=d[v++],n+=d[v++],f=o.L,t.addData(f,e,n);break;case"L":e=d[v++],n=d[v++],f=o.L,t.addData(f,e,n);break;case"m":e+=d[v++],n+=d[v++],f=o.M,t.addData(f,e,n),r=e,s=n,c="l";break;case"M":e=d[v++],n=d[v++],f=o.M,t.addData(f,e,n),r=e,s=n,c="L";break;case"h":e+=d[v++],f=o.L,t.addData(f,e,n);break;case"H":e=d[v++],f=o.L,t.addData(f,e,n);break;case"v":n+=d[v++],f=o.L,t.addData(f,e,n);break;case"V":n=d[v++],f=o.L,t.addData(f,e,n);break;case"C":f=o.C,t.addData(f,d[v++],d[v++],d[v++],d[v++],d[v++],d[v++]),e=d[v-2],n=d[v-1];break;case"c":f=o.C,t.addData(f,d[v++]+e,d[v++]+n,d[v++]+e,d[v++]+n,d[v++]+e,d[v++]+n),e+=d[v-2],n+=d[v-1];break;case"S":m=e,y=n,I=t.len(),E=t.data,a===o.C&&(m+=e-E[I-4],y+=n-E[I-3]),f=o.C,T=d[v++],C=d[v++],e=d[v++],n=d[v++],t.addData(f,m,y,T,C,e,n);break;case"s":m=e,y=n,I=t.len(),E=t.data,a===o.C&&(m+=e-E[I-4],y+=n-E[I-3]),f=o.C,T=e+d[v++],C=n+d[v++],e+=d[v++],n+=d[v++],t.addData(f,m,y,T,C,e,n);break;case"Q":T=d[v++],C=d[v++],e=d[v++],n=d[v++],f=o.Q,t.addData(f,T,C,e,n);break;case"q":T=d[v++]+e,C=d[v++]+n,e+=d[v++],n+=d[v++],f=o.Q,t.addData(f,T,C,e,n);break;case"T":m=e,y=n,I=t.len(),E=t.data,a===o.Q&&(m+=e-E[I-4],y+=n-E[I-3]),e=d[v++],n=d[v++],f=o.Q,t.addData(f,m,y,e,n);break;case"t":m=e,y=n,I=t.len(),E=t.data,a===o.Q&&(m+=e-E[I-4],y+=n-E[I-3]),e+=d[v++],n+=d[v++],f=o.Q,t.addData(f,m,y,e,n);break;case"A":_=d[v++],w=d[v++],S=d[v++],x=d[v++],b=d[v++],T=e,C=n,e=d[v++],n=d[v++],f=o.A,u1(T,C,e,n,x,b,_,w,S,f,t);break;case"a":_=d[v++],w=d[v++],S=d[v++],x=d[v++],b=d[v++],T=e,C=n,e+=d[v++],n+=d[v++],f=o.A,u1(T,C,e,n,x,b,_,w,S,f,t);break}}(c==="z"||c==="Z")&&(f=o.Z,t.addData(f),e=r,n=s),a=f}return t.toStatic(),t}var fC=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.applyTransform=function(e){},t}(_t);function dC(i){return i.setData!=null}function gC(i,t){var e=SB(i),n=N({},t);return n.buildPath=function(r){if(dC(r)){r.setData(e.data);var s=r.getContext();s&&r.rebuildPath(s,1)}else{var s=r;e.rebuildPath(s,1)}},n.applyTransform=function(r){_B(e,r),this.dirtyShape()},n}function bB(i,t){return new fC(gC(i,t))}function TB(i,t){var e=gC(i,t),n=function(r){yt(s,r);function s(a){var o=r.call(this,a)||this;return o.applyTransform=e.applyTransform,o.buildPath=e.buildPath,o}return s}(fC);return n}function CB(i,t){for(var e=[],n=i.length,r=0;r<n;r++){var s=i[r];e.push(s.getUpdatedPathProxy(!0))}var a=new _t(t);return a.createPathProxy(),a.buildPath=function(o){if(dC(o)){o.appendPath(e);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var EB=function(){function i(){this.cx=0,this.cy=0,this.r=0}return i}(),pC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new EB},t.prototype.buildPath=function(e,n){e.moveTo(n.cx+n.r,n.cy),e.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(_t);pC.prototype.type="circle";const Gm=pC;var IB=function(){function i(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return i}(),vC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new IB},t.prototype.buildPath=function(e,n){var r=.5522848,s=n.cx,a=n.cy,o=n.rx,l=n.ry,u=o*r,h=l*r;e.moveTo(s-o,a),e.bezierCurveTo(s-o,a-h,s-u,a-l,s,a-l),e.bezierCurveTo(s+u,a-l,s+o,a-h,s+o,a),e.bezierCurveTo(s+o,a+h,s+u,a+l,s,a+l),e.bezierCurveTo(s-u,a+l,s-o,a+h,s-o,a),e.closePath()},t}(_t);vC.prototype.type="ellipse";const mC=vC;var yC=Math.PI,kd=yC*2,yr=Math.sin,Is=Math.cos,AB=Math.acos,te=Math.atan2,h1=Math.abs,Po=Math.sqrt,wo=Math.max,Ri=Math.min,yi=1e-4;function RB(i,t,e,n,r,s,a,o){var l=e-i,u=n-t,h=a-r,c=o-s,f=c*l-h*u;if(!(f*f<yi))return f=(h*(t-s)-c*(i-r))/f,[i+f*l,t+f*u]}function Pu(i,t,e,n,r,s,a){var o=i-e,l=t-n,u=(a?s:-s)/Po(o*o+l*l),h=u*l,c=-u*o,f=i+h,d=t+c,g=e+h,p=n+c,v=(f+g)/2,m=(d+p)/2,y=g-f,_=p-d,w=y*y+_*_,S=r-s,x=f*p-g*d,b=(_<0?-1:1)*Po(wo(0,S*S*w-x*x)),T=(x*_-y*b)/w,C=(-x*y-_*b)/w,I=(x*_+y*b)/w,E=(-x*y+_*b)/w,R=T-v,M=C-m,k=I-v,L=E-m;return R*R+M*M>k*k+L*L&&(T=I,C=E),{cx:T,cy:C,x0:-h,y0:-c,x1:T*(r/S-1),y1:C*(r/S-1)}}function MB(i){var t;if(z(i)){var e=i.length;if(!e)return i;e===1?t=[i[0],i[0],0,0]:e===2?t=[i[0],i[0],i[1],i[1]]:e===3?t=i.concat(i[2]):t=i}else t=[i,i,i,i];return t}function LB(i,t){var e,n=wo(t.r,0),r=wo(t.r0||0,0),s=n>0,a=r>0;if(!(!s&&!a)){if(s||(n=r,r=0),r>n){var o=n;n=r,r=o}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var h=t.cx,c=t.cy,f=!!t.clockwise,d=h1(u-l),g=d>kd&&d%kd;if(g>yi&&(d=g),!(n>yi))i.moveTo(h,c);else if(d>kd-yi)i.moveTo(h+n*Is(l),c+n*yr(l)),i.arc(h,c,n,l,u,!f),r>yi&&(i.moveTo(h+r*Is(u),c+r*yr(u)),i.arc(h,c,r,u,l,f));else{var p=void 0,v=void 0,m=void 0,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0,b=void 0,T=void 0,C=void 0,I=void 0,E=void 0,R=void 0,M=void 0,k=void 0,L=n*Is(l),D=n*yr(l),O=r*Is(u),F=r*yr(u),B=d>yi;if(B){var G=t.cornerRadius;G&&(e=MB(G),p=e[0],v=e[1],m=e[2],y=e[3]);var K=h1(n-r)/2;if(_=Ri(K,m),w=Ri(K,y),S=Ri(K,p),x=Ri(K,v),C=b=wo(_,w),I=T=wo(S,x),(b>yi||T>yi)&&(E=n*Is(u),R=n*yr(u),M=r*Is(l),k=r*yr(l),d<yC)){var P=RB(L,D,M,k,E,R,O,F);if(P){var ct=L-P[0],Z=D-P[1],st=E-P[0],Qt=R-P[1],Xt=1/yr(AB((ct*st+Z*Qt)/(Po(ct*ct+Z*Z)*Po(st*st+Qt*Qt)))/2),Rt=Po(P[0]*P[0]+P[1]*P[1]);C=Ri(b,(n-Rt)/(Xt+1)),I=Ri(T,(r-Rt)/(Xt-1))}}}if(!B)i.moveTo(h+L,c+D);else if(C>yi){var Dt=Ri(m,C),Mt=Ri(y,C),U=Pu(M,k,L,D,n,Dt,f),J=Pu(E,R,O,F,n,Mt,f);i.moveTo(h+U.cx+U.x0,c+U.cy+U.y0),C<b&&Dt===Mt?i.arc(h+U.cx,c+U.cy,C,te(U.y0,U.x0),te(J.y0,J.x0),!f):(Dt>0&&i.arc(h+U.cx,c+U.cy,Dt,te(U.y0,U.x0),te(U.y1,U.x1),!f),i.arc(h,c,n,te(U.cy+U.y1,U.cx+U.x1),te(J.cy+J.y1,J.cx+J.x1),!f),Mt>0&&i.arc(h+J.cx,c+J.cy,Mt,te(J.y1,J.x1),te(J.y0,J.x0),!f))}else i.moveTo(h+L,c+D),i.arc(h,c,n,l,u,!f);if(!(r>yi)||!B)i.lineTo(h+O,c+F);else if(I>yi){var Dt=Ri(p,I),Mt=Ri(v,I),U=Pu(O,F,E,R,r,-Mt,f),J=Pu(L,D,M,k,r,-Dt,f);i.lineTo(h+U.cx+U.x0,c+U.cy+U.y0),I<T&&Dt===Mt?i.arc(h+U.cx,c+U.cy,I,te(U.y0,U.x0),te(J.y0,J.x0),!f):(Mt>0&&i.arc(h+U.cx,c+U.cy,Mt,te(U.y0,U.x0),te(U.y1,U.x1),!f),i.arc(h,c,r,te(U.cy+U.y1,U.cx+U.x1),te(J.cy+J.y1,J.cx+J.x1),f),Dt>0&&i.arc(h+J.cx,c+J.cy,Dt,te(J.y1,J.x1),te(J.y0,J.x0),!f))}else i.lineTo(h+O,c+F),i.arc(h,c,r,u,l,f)}i.closePath()}}}var kB=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return i}(),_C=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new kB},t.prototype.buildPath=function(e,n){LB(e,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(_t);_C.prototype.type="sector";const Hl=_C;var DB=function(){function i(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return i}(),wC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new DB},t.prototype.buildPath=function(e,n){var r=n.cx,s=n.cy,a=Math.PI*2;e.moveTo(r+n.r,s),e.arc(r,s,n.r,0,a,!1),e.moveTo(r+n.r0,s),e.arc(r,s,n.r0,0,a,!0)},t}(_t);wC.prototype.type="ring";const xC=wC;function PB(i,t,e,n){var r=[],s=[],a=[],o=[],l,u,h,c;if(n){h=[1/0,1/0],c=[-1/0,-1/0];for(var f=0,d=i.length;f<d;f++)Us(h,h,i[f]),Xs(c,c,i[f]);Us(h,h,n[0]),Xs(c,c,n[1])}for(var f=0,d=i.length;f<d;f++){var g=i[f];if(e)l=i[f?f-1:d-1],u=i[(f+1)%d];else if(f===0||f===d-1){r.push(aO(i[f]));continue}else l=i[f-1],u=i[f+1];lT(s,u,l),Zf(s,s,t);var p=sp(g,l),v=sp(g,u),m=p+v;m!==0&&(p/=m,v/=m),Zf(a,s,-p),Zf(o,s,v);var y=e0([],g,a),_=e0([],g,o);n&&(Xs(y,y,h),Us(y,y,c),Xs(_,_,h),Us(_,_,c)),r.push(y),r.push(_)}return e&&r.push(r.shift()),r}function SC(i,t,e){var n=t.smooth,r=t.points;if(r&&r.length>=2){if(n){var s=PB(r,n,e,t.smoothConstraint);i.moveTo(r[0][0],r[0][1]);for(var a=r.length,o=0;o<(e?a:a-1);o++){var l=s[o*2],u=s[o*2+1],h=r[(o+1)%a];i.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{i.moveTo(r[0][0],r[0][1]);for(var o=1,c=r.length;o<c;o++)i.lineTo(r[o][0],r[o][1])}e&&i.closePath()}}var OB=function(){function i(){this.points=null,this.smooth=0,this.smoothConstraint=null}return i}(),bC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new OB},t.prototype.buildPath=function(e,n){SC(e,n,!0)},t}(_t);bC.prototype.type="polygon";const TC=bC;var FB=function(){function i(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return i}(),CC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new FB},t.prototype.buildPath=function(e,n){SC(e,n,!1)},t}(_t);CC.prototype.type="polyline";const EC=CC;var NB={},BB=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return i}(),IC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BB},t.prototype.buildPath=function(e,n){var r,s,a,o;if(this.subPixelOptimize){var l=ZT(NB,n,this.style);r=l.x1,s=l.y1,a=l.x2,o=l.y2}else r=n.x1,s=n.y1,a=n.x2,o=n.y2;var u=n.percent;u!==0&&(e.moveTo(r,s),u<1&&(a=r*(1-u)+a*u,o=s*(1-u)+o*u),e.lineTo(a,o))},t.prototype.pointAt=function(e){var n=this.shape;return[n.x1*(1-e)+n.x2*e,n.y1*(1-e)+n.y2*e]},t}(_t);IC.prototype.type="line";const Zn=IC;var we=[],zB=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return i}();function c1(i,t,e){var n=i.cpx2,r=i.cpy2;return n!=null||r!=null?[(e?f0:Zt)(i.x1,i.cpx1,i.cpx2,i.x2,t),(e?f0:Zt)(i.y1,i.cpy1,i.cpy2,i.y2,t)]:[(e?d0:re)(i.x1,i.cpx1,i.x2,t),(e?d0:re)(i.y1,i.cpy1,i.y2,t)]}var AC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zB},t.prototype.buildPath=function(e,n){var r=n.x1,s=n.y1,a=n.x2,o=n.y2,l=n.cpx1,u=n.cpy1,h=n.cpx2,c=n.cpy2,f=n.percent;f!==0&&(e.moveTo(r,s),h==null||c==null?(f<1&&(Qh(r,l,a,f,we),l=we[1],a=we[2],Qh(s,u,o,f,we),u=we[1],o=we[2]),e.quadraticCurveTo(l,u,a,o)):(f<1&&(Jh(r,l,h,a,f,we),l=we[1],h=we[2],a=we[3],Jh(s,u,c,o,f,we),u=we[1],c=we[2],o=we[3]),e.bezierCurveTo(l,u,h,c,a,o)))},t.prototype.pointAt=function(e){return c1(this.shape,e,!1)},t.prototype.tangentAt=function(e){var n=c1(this.shape,e,!0);return _m(n,n)},t}(_t);AC.prototype.type="bezier-curve";const $m=AC;var GB=function(){function i(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),RC=function(i){yt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new GB},t.prototype.buildPath=function(e,n){var r=n.cx,s=n.cy,a=Math.max(n.r,0),o=n.startAngle,l=n.endAngle,u=n.clockwise,h=Math.cos(o),c=Math.sin(o);e.moveTo(h*a+r,c*a+s),e.arc(r,s,a,o,l,!u)},t}(_t);RC.prototype.type="arc";const Vm=RC;var $B=function(i){yt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="compound",e}return t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,n=this.shapeChanged(),r=0;r<e.length;r++)n=n||e[r].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],n=this.getGlobalScale(),r=0;r<e.length;r++)e[r].path||e[r].createPathProxy(),e[r].path.setScale(n[0],n[1],e[r].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,n){for(var r=n.paths||[],s=0;s<r.length;s++)r[s].buildPath(e,r[s].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],n=0;n<e.length;n++)e[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),_t.prototype.getBoundingRect.call(this)},t}(_t);const VB=$B;var WB=function(){function i(t){this.colorStops=t||[]}return i.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},i}();const MC=WB;var YB=function(i){yt(t,i);function t(e,n,r,s,a,o){var l=i.call(this,a)||this;return l.x=e??0,l.y=n??0,l.x2=r??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return t}(MC);const HB=YB;var UB=function(i){yt(t,i);function t(e,n,r,s,a){var o=i.call(this,s)||this;return o.x=e??.5,o.y=n??.5,o.r=r??.5,o.type="radial",o.global=a||!1,o}return t}(MC);const XB=UB;var _r=[0,0],wr=[0,0],Ou=new xt,Fu=new xt,KB=function(){function i(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new xt;for(var n=0;n<2;n++)this._axes[n]=new xt;t&&this.fromBoundingRect(t,e)}return i.prototype.fromBoundingRect=function(t,e){var n=this._corners,r=this._axes,s=t.x,a=t.y,o=s+t.width,l=a+t.height;if(n[0].set(s,a),n[1].set(o,a),n[2].set(o,l),n[3].set(s,l),e)for(var u=0;u<4;u++)n[u].transform(e);xt.sub(r[0],n[1],n[0]),xt.sub(r[1],n[3],n[0]),r[0].normalize(),r[1].normalize();for(var u=0;u<2;u++)this._origin[u]=r[u].dot(n[0])},i.prototype.intersect=function(t,e){var n=!0,r=!e;return Ou.set(1/0,1/0),Fu.set(0,0),!this._intersectCheckOneSide(this,t,Ou,Fu,r,1)&&(n=!1,r)||!this._intersectCheckOneSide(t,this,Ou,Fu,r,-1)&&(n=!1,r)||r||xt.copy(e,n?Ou:Fu),n},i.prototype._intersectCheckOneSide=function(t,e,n,r,s,a){for(var o=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,_r),this._getProjMinMaxOnAxis(l,e._corners,wr),_r[1]<wr[0]||_r[0]>wr[1]){if(o=!1,s)return o;var h=Math.abs(wr[0]-_r[1]),c=Math.abs(_r[0]-wr[1]);Math.min(h,c)>r.len()&&(h<c?xt.scale(r,u,-h*a):xt.scale(r,u,c*a))}else if(n){var h=Math.abs(wr[0]-_r[1]),c=Math.abs(_r[0]-wr[1]);Math.min(h,c)<n.len()&&(h<c?xt.scale(n,u,h*a):xt.scale(n,u,-c*a))}}return o},i.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var r=this._axes[t],s=this._origin,a=e[0].dot(r)+s[t],o=a,l=a,u=1;u<e.length;u++){var h=e[u].dot(r)+s[t];o=Math.min(h,o),l=Math.max(h,l)}n[0]=o,n[1]=l},i}();const oc=KB;var jB=[],ZB=function(i){yt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return t.prototype.traverse=function(e,n){e.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,n){n?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,n){n=n||!1;for(var r=0;r<e.length;r++)this.addDisplayable(e[r],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var n=this._cursor;n<this._displayables.length;n++)e&&e(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)e&&e(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var n=this._displayables[e];n.parent=this,n.update(),n.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var n=this._temporaryDisplayables[e];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new pt(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var r=this._displayables[n],s=r.getBoundingRect().clone();r.needLocalTransform()&&s.applyTransform(r.getLocalTransform(jB)),e.union(s)}this._rect=e}return this._rect},t.prototype.contain=function(e,n){var r=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(s.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(e,n))return!0}return!1},t}(Yl);const qB=ZB;var JB=Bt();function QB(i,t,e,n,r){var s;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();s=a&&a.animation}var o=t&&t.isAnimationEnabled(),l=i==="update";if(o){var u=void 0,h=void 0,c=void 0;n?(u=et(n.duration,200),h=et(n.easing,"cubicOut"),c=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),c=t.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(u=s.duration),s.easing!=null&&(h=s.easing),s.delay!=null&&(c=s.delay)),rt(c)&&(c=c(e,r)),rt(u)&&(u=u(e));var f={duration:u||0,delay:c,easing:h};return f}else return null}function Wm(i,t,e,n,r,s,a){var o=!1,l;rt(r)?(a=s,s=r,r=null):Y(r)&&(s=r.cb,a=r.during,o=r.isFrom,l=r.removeOpt,r=r.dataIndex);var u=i==="leave";u||t.stopAnimation("leave");var h=QB(i,n,r,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,r):null);if(h&&h.duration>0){var c=h.duration,f=h.delay,d=h.easing,g={duration:c,delay:f||0,easing:d,done:s,force:!!s||!!a,setToFinal:!u,scope:i,during:a};o?t.animateFrom(e,g):t.animateTo(e,g)}else t.stopAnimation(),!o&&t.attr(e),a&&a(1),s&&s()}function Yi(i,t,e,n,r,s){Wm("update",i,t,e,n,r,s)}function qn(i,t,e,n,r,s){Wm("enter",i,t,e,n,r,s)}function Oo(i){if(!i.__zr)return!0;for(var t=0;t<i.animators.length;t++){var e=i.animators[t];if(e.scope==="leave")return!0}return!1}function LC(i,t,e,n,r,s){Oo(i)||Wm("leave",i,t,e,n,r,s)}function f1(i,t,e,n){i.removeTextContent(),i.removeTextGuideLine(),LC(i,{style:{opacity:0}},t,e,n)}function Lp(i,t,e){function n(){i.parent&&i.parent.remove(i)}i.isGroup?i.traverse(function(r){r.isGroup||f1(r,t,e,n)}):f1(i,t,e,n)}function tz(i){JB(i).oldStyle=i.style}var lc=Math.max,uc=Math.min,kp={};function ez(i){return _t.extend(i)}var iz=TB;function nz(i,t){return iz(i,t)}function Ci(i,t){kp[i]=t}function rz(i){if(kp.hasOwnProperty(i))return kp[i]}function Ym(i,t,e,n){var r=bB(i,t);return e&&(n==="center"&&(e=DC(e,r.getBoundingRect())),PC(r,e)),r}function kC(i,t,e){var n=new Oa({style:{image:i,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(r){if(e==="center"){var s={width:r.width,height:r.height};n.setStyle(DC(t,s))}}});return n}function DC(i,t){var e=t.width/t.height,n=i.height*e,r;n<=i.width?r=i.height:(n=i.width,r=n/e);var s=i.x+i.width/2,a=i.y+i.height/2;return{x:s-n/2,y:a-r/2,width:n,height:r}}var sz=CB;function PC(i,t){if(i.applyTransform){var e=i.getBoundingRect(),n=e.calculateTransform(t);i.applyTransform(n)}}function gl(i,t){return ZT(i,i,{lineWidth:t}),i}function az(i){return qT(i.shape,i.shape,i.style),i}var oz=Nr;function lz(i,t){for(var e=xm([]);i&&i!==t;)ra(e,i.getLocalTransform(),e),i=i.parent;return e}function Hm(i,t,e){return t&&!Le(t)&&(t=Em.getLocalTransform(t)),e&&(t=bm([],t)),ui([],i,t)}function uz(i,t,e){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),r=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),s=[i==="left"?-n:i==="right"?n:0,i==="top"?-r:i==="bottom"?r:0];return s=Hm(s,t,e),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function d1(i){return!i.isGroup}function hz(i){return i.shape!=null}function OC(i,t,e){if(!i||!t)return;function n(a){var o={};return a.traverse(function(l){d1(l)&&l.anid&&(o[l.anid]=l)}),o}function r(a){var o={x:a.x,y:a.y,rotation:a.rotation};return hz(a)&&(o.shape=N({},a.shape)),o}var s=n(i);t.traverse(function(a){if(d1(a)&&a.anid){var o=s[a.anid];if(o){var l=r(a);a.attr(r(o)),Yi(a,l,e,dt(a).dataIndex)}}})}function cz(i,t){return H(i,function(e){var n=e[0];n=lc(n,t.x),n=uc(n,t.x+t.width);var r=e[1];return r=lc(r,t.y),r=uc(r,t.y+t.height),[n,r]})}function fz(i,t){var e=lc(i.x,t.x),n=uc(i.x+i.width,t.x+t.width),r=lc(i.y,t.y),s=uc(i.y+i.height,t.y+t.height);if(n>=e&&s>=r)return{x:e,y:r,width:n-e,height:s-r}}function Um(i,t,e){var n=N({rectHover:!0},t),r=n.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},i)return i.indexOf("image://")===0?(r.image=i.slice(8),St(r,e),new Oa(n)):Ym(i.replace("path://",""),n,e,"center")}function dz(i,t,e,n,r){for(var s=0,a=r[r.length-1];s<r.length;s++){var o=r[s];if(FC(i,t,e,n,o[0],o[1],a[0],a[1]))return!0;a=o}}function FC(i,t,e,n,r,s,a,o){var l=e-i,u=n-t,h=a-r,c=o-s,f=Dd(h,c,l,u);if(gz(f))return!1;var d=i-r,g=t-s,p=Dd(d,g,l,u)/f;if(p<0||p>1)return!1;var v=Dd(d,g,h,c)/f;return!(v<0||v>1)}function Dd(i,t,e,n){return i*n-e*t}function gz(i){return i<=1e-6&&i>=-1e-6}function Xm(i){var t=i.itemTooltipOption,e=i.componentModel,n=i.itemName,r=$(t)?{formatter:t}:t,s=e.mainType,a=e.componentIndex,o={componentType:s,name:n,$vars:["name"]};o[s+"Index"]=a;var l=i.formatterParamsExtra;l&&A(kt(l),function(h){_a(o,h)||(o[h]=l[h],o.$vars.push(h))});var u=dt(i.el);u.componentMainType=s,u.componentIndex=a,u.tooltipConfig={name:n,option:St({content:n,formatterParams:o},r)}}function g1(i,t){var e;i.isGroup&&(e=t(i)),e||i.traverse(t)}function rf(i,t){if(i)if(z(i))for(var e=0;e<i.length;e++)g1(i[e],t);else g1(i,t)}Ci("circle",Gm);Ci("ellipse",mC);Ci("sector",Hl);Ci("ring",xC);Ci("polygon",TC);Ci("polyline",EC);Ci("rect",Ut);Ci("line",Zn);Ci("bezierCurve",$m);Ci("arc",Vm);const pz=Object.freeze(Object.defineProperty({__proto__:null,Arc:Vm,BezierCurve:$m,BoundingRect:pt,Circle:Gm,CompoundPath:VB,Ellipse:mC,Group:De,Image:Oa,IncrementalDisplayable:qB,Line:Zn,LinearGradient:HB,OrientedBoundingRect:oc,Path:_t,Point:xt,Polygon:TC,Polyline:EC,RadialGradient:XB,Rect:Ut,Ring:xC,Sector:Hl,Text:Pe,applyTransform:Hm,clipPointsByRect:cz,clipRectByRect:fz,createIcon:Um,extendPath:nz,extendShape:ez,getShapeClass:rz,getTransform:lz,groupTransition:OC,initProps:qn,isElementRemoved:Oo,lineLineIntersect:FC,linePolygonIntersect:dz,makeImage:kC,makePath:Ym,mergePath:sz,registerShape:Ci,removeElement:LC,removeElementWithFadeOut:Lp,resizePath:PC,setTooltipConfig:Xm,subPixelOptimize:oz,subPixelOptimizeLine:gl,subPixelOptimizeRect:az,transformDirection:uz,traverseElements:rf,updateProps:Yi},Symbol.toStringTag,{value:"Module"}));var sf={};function vz(i,t){for(var e=0;e<Wi.length;e++){var n=Wi[e],r=t[n],s=i.ensureState(n);s.style=s.style||{},s.style.text=r}var a=i.currentStates.slice();i.clearStates(!0),i.setStyle({text:t.normal}),i.useStates(a,!0)}function p1(i,t,e){var n=i.labelFetcher,r=i.labelDataIndex,s=i.labelDimIndex,a=t.normal,o;n&&(o=n.getFormattedLabel(r,"normal",null,s,a&&a.get("formatter"),e!=null?{interpolatedValue:e}:null)),o==null&&(o=rt(i.defaultText)?i.defaultText(r,i,e):i.defaultText);for(var l={normal:o},u=0;u<Wi.length;u++){var h=Wi[u],c=t[h];l[h]=et(n?n.getFormattedLabel(r,h,null,s,c&&c.get("formatter")):null,o)}return l}function Km(i,t,e,n){e=e||sf;for(var r=i instanceof Pe,s=!1,a=0;a<Q0.length;a++){var o=t[Q0[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=r?i:i.getTextContent();if(s){r||(l||(l=new Pe,i.setTextContent(l)),i.stateProxy&&(l.stateProxy=i.stateProxy));var u=p1(e,t),h=t.normal,c=!!h.getShallow("show"),f=Jn(h,n&&n.normal,e,!1,!r);f.text=u.normal,r||i.setTextConfig(v1(h,e,!1));for(var a=0;a<Wi.length;a++){var d=Wi[a],o=t[d];if(o){var g=l.ensureState(d),p=!!et(o.getShallow("show"),c);if(p!==c&&(g.ignore=!p),g.style=Jn(o,n&&n[d],e,!0,!r),g.style.text=u[d],!r){var v=i.ensureState(d);v.textConfig=v1(o,e,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!c,l.useStyle(f),l.dirty(),e.enableTextSetter&&(Zm(l).setLabelText=function(m){var y=p1(e,t,m);vz(l,y)})}else l&&(l.ignore=!0);i.dirty()}function jm(i,t){t=t||"label";for(var e={normal:i.getModel(t)},n=0;n<Wi.length;n++){var r=Wi[n];e[r]=i.getModel([r,t])}return e}function Jn(i,t,e,n,r){var s={};return mz(s,i,e,n,r),t&&N(s,t),s}function v1(i,t,e){t=t||{};var n={},r,s=i.getShallow("rotate"),a=et(i.getShallow("distance"),e?null:5),o=i.getShallow("offset");return r=i.getShallow("position")||(e?null:"inside"),r==="outside"&&(r=t.defaultOutsidePosition||"top"),r!=null&&(n.position=r),o!=null&&(n.offset=o),s!=null&&(s*=Math.PI/180,n.rotation=s),a!=null&&(n.distance=a),n.outsideFill=i.get("color")==="inherit"?t.inheritColor||null:"auto",n}function mz(i,t,e,n,r){e=e||sf;var s=t.ecModel,a=s&&s.option.textStyle,o=yz(t),l;if(o){l={};for(var u in o)if(o.hasOwnProperty(u)){var h=t.getModel(["rich",u]);w1(l[u]={},h,a,e,n,r,!1,!0)}}l&&(i.rich=l);var c=t.get("overflow");c&&(i.overflow=c);var f=t.get("minMargin");f!=null&&(i.margin=f),w1(i,t,a,e,n,r,!0,!1)}function yz(i){for(var t;i&&i!==i.ecModel;){var e=(i.option||sf).rich;if(e){t=t||{};for(var n=kt(e),r=0;r<n.length;r++){var s=n[r];t[s]=1}}i=i.parentModel}return t}var m1=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],y1=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],_1=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function w1(i,t,e,n,r,s,a,o){e=!r&&e||sf;var l=n&&n.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),c=et(t.getShallow("opacity"),e.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),s||(u=u||e.color,h=h||e.textBorderColor),u!=null&&(i.fill=u),h!=null&&(i.stroke=h);var f=et(t.getShallow("textBorderWidth"),e.textBorderWidth);f!=null&&(i.lineWidth=f);var d=et(t.getShallow("textBorderType"),e.textBorderType);d!=null&&(i.lineDash=d);var g=et(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);g!=null&&(i.lineDashOffset=g),!r&&c==null&&!o&&(c=n&&n.defaultOpacity),c!=null&&(i.opacity=c),!r&&!s&&i.fill==null&&n.inheritColor&&(i.fill=n.inheritColor);for(var p=0;p<m1.length;p++){var v=m1[p],m=et(t.getShallow(v),e[v]);m!=null&&(i[v]=m)}for(var p=0;p<y1.length;p++){var v=y1[p],m=t.getShallow(v);m!=null&&(i[v]=m)}if(i.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(i.verticalAlign=y)}if(!a||!n.disableBox){for(var p=0;p<_1.length;p++){var v=_1[p],m=t.getShallow(v);m!=null&&(i[v]=m)}var _=t.getShallow("borderType");_!=null&&(i.borderDash=_),(i.backgroundColor==="auto"||i.backgroundColor==="inherit")&&l&&(i.backgroundColor=l),(i.borderColor==="auto"||i.borderColor==="inherit")&&l&&(i.borderColor=l)}}function _z(i,t){var e=t&&t.getModel("textStyle");return Oi([i.fontStyle||e&&e.getShallow("fontStyle")||"",i.fontWeight||e&&e.getShallow("fontWeight")||"",(i.fontSize||e&&e.getShallow("fontSize")||12)+"px",i.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Zm=Bt();function wz(i,t,e,n){if(i){var r=Zm(i);r.prevValue=r.value,r.value=e;var s=t.normal;r.valueAnimation=s.get("valueAnimation"),r.valueAnimation&&(r.precision=s.get("precision"),r.defaultInterpolatedText=n,r.statesModels=t)}}var xz=["textStyle","color"],Pd=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Od=new Pe,Sz=function(){function i(){}return i.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(xz):null)},i.prototype.getFont=function(){return _z({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},i.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Pd.length;n++)e[Pd[n]]=this.getShallow(Pd[n]);return Od.useStyle(e),Od.update(),Od.getBoundingRect()},i}();const bz=Sz;var NC=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Tz=dl(NC),Cz=function(){function i(){}return i.prototype.getLineStyle=function(t){return Tz(this,t)},i}(),BC=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Ez=dl(BC),Iz=function(){function i(){}return i.prototype.getItemStyle=function(t,e){return Ez(this,t,e)},i}(),rs=function(){function i(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return i.prototype.init=function(t,e,n){},i.prototype.mergeOption=function(t,e){ht(this.option,t,!0)},i.prototype.get=function(t,e){return t==null?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},i.prototype.getShallow=function(t,e){var n=this.option,r=n==null?n:n[t];if(r==null&&!e){var s=this.parentModel;s&&(r=s.getShallow(t))}return r},i.prototype.getModel=function(t,e){var n=t!=null,r=n?this.parsePath(t):null,s=n?this._doGet(r):this.option;return e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new i(s,e,this.ecModel)},i.prototype.isEmpty=function(){return this.option==null},i.prototype.restoreData=function(){},i.prototype.clone=function(){var t=this.constructor;return new t(at(this.option))},i.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},i.prototype.resolveParentPath=function(t){return t},i.prototype.isAnimationEnabled=function(){if(!it.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},i.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var r=0;r<t.length&&!(t[r]&&(n=n&&typeof n=="object"?n[t[r]]:null,n==null));r++);return n==null&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},i}();Dm(rs);tN(rs);Ti(rs,Cz);Ti(rs,Iz);Ti(rs,sN);Ti(rs,bz);const oe=rs;var Az=Math.round(Math.random()*10);function af(i){return[i||"",Az++].join("_")}function Rz(i){var t={};i.registerSubTypeDefaulter=function(e,n){var r=Fi(e);t[r.main]=n},i.determineSubType=function(e,n){var r=n.type;if(!r){var s=Fi(e).main;i.hasSubTypes(e)&&t[s]&&(r=t[s](n))}return r}}function Mz(i,t){i.topologicalTravel=function(s,a,o,l){if(!s.length)return;var u=e(a),h=u.graph,c=u.noEntryList,f={};for(A(s,function(y){f[y]=!0});c.length;){var d=c.pop(),g=h[d],p=!!f[d];p&&(o.call(l,d,g.originalDeps.slice()),delete f[d]),A(g.successor,p?m:v)}A(f,function(){var y="";throw new Error(y)});function v(y){h[y].entryCount--,h[y].entryCount===0&&c.push(y)}function m(y){f[y]=!0,v(y)}};function e(s){var a={},o=[];return A(s,function(l){var u=n(a,l),h=u.originalDeps=t(l),c=r(h,s);u.entryCount=c.length,u.entryCount===0&&o.push(l),A(c,function(f){gt(u.predecessor,f)<0&&u.predecessor.push(f);var d=n(a,f);gt(d.successor,f)<0&&d.successor.push(l)})}),{graph:a,noEntryList:o}}function n(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function r(s,a){var o=[];return A(s,function(l){gt(a,l)>=0&&o.push(l)}),o}}function zC(i,t){return ht(ht({},i,!0),t,!0)}const Lz={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},kz={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var hc="ZH",qm="EN",aa=qm,Eh={},Jm={},GC=it.domSupported?function(){var i=(document.documentElement.lang||navigator.language||navigator.browserLanguage||aa).toUpperCase();return i.indexOf(hc)>-1?hc:aa}():aa;function $C(i,t){i=i.toUpperCase(),Jm[i]=new oe(t),Eh[i]=t}function Dz(i){if($(i)){var t=Eh[i.toUpperCase()]||{};return i===hc||i===qm?at(t):ht(at(t),at(Eh[aa]),!1)}else return ht(at(i),at(Eh[aa]),!1)}function Pz(i){return Jm[i]}function Oz(){return Jm[aa]}$C(qm,Lz);$C(hc,kz);var Qm=1e3,ty=Qm*60,Fo=ty*60,ai=Fo*24,x1=ai*365,xo={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Nu="{yyyy}-{MM}-{dd}",S1={year:"{yyyy}",month:"{yyyy}-{MM}",day:Nu,hour:Nu+" "+xo.hour,minute:Nu+" "+xo.minute,second:Nu+" "+xo.second,millisecond:xo.none},Fd=["year","month","day","hour","minute","second","millisecond"],VC=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Rn(i,t){return i+="","0000".substr(0,t-i.length)+i}function oa(i){switch(i){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return i}}function Fz(i){return i===oa(i)}function Nz(i){switch(i){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function of(i,t,e,n){var r=vn(i),s=r[ey(e)](),a=r[la(e)]()+1,o=Math.floor((a-1)/3)+1,l=r[lf(e)](),u=r["get"+(e?"UTC":"")+"Day"](),h=r[pl(e)](),c=(h-1)%12+1,f=r[uf(e)](),d=r[hf(e)](),g=r[cf(e)](),p=n instanceof oe?n:Pz(n||GC)||Oz(),v=p.getModel("time"),m=v.get("month"),y=v.get("monthAbbr"),_=v.get("dayOfWeek"),w=v.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,Rn(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,Rn(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Rn(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Rn(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,Rn(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,Rn(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Rn(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,Rn(g,3)).replace(/{S}/g,g+"")}function Bz(i,t,e,n,r){var s=null;if($(e))s=e;else if(rt(e))s=e(i.value,t,{level:i.level});else{var a=N({},xo);if(i.level>0)for(var o=0;o<Fd.length;++o)a[Fd[o]]="{primary|"+a[Fd[o]]+"}";var l=e?e.inherit===!1?e:St(e,a):a,u=WC(i.value,r);if(l[u])s=l[u];else if(l.inherit){for(var h=VC.indexOf(u),o=h-1;o>=0;--o)if(l[u]){s=l[u];break}s=s||a.none}if(z(s)){var c=i.level==null?0:i.level>=0?i.level:s.length+i.level;c=Math.min(c,s.length-1),s=s[c]}}return of(new Date(i.value),s,r,n)}function WC(i,t){var e=vn(i),n=e[la(t)]()+1,r=e[lf(t)](),s=e[pl(t)](),a=e[uf(t)](),o=e[hf(t)](),l=e[cf(t)](),u=l===0,h=u&&o===0,c=h&&a===0,f=c&&s===0,d=f&&r===1,g=d&&n===1;return g?"year":d?"month":f?"day":c?"hour":h?"minute":u?"second":"millisecond"}function b1(i,t,e){var n=Ot(i)?vn(i):i;switch(t=t||WC(i,e),t){case"year":return n[ey(e)]();case"half-year":return n[la(e)]()>=6?1:0;case"quarter":return Math.floor((n[la(e)]()+1)/4);case"month":return n[la(e)]();case"day":return n[lf(e)]();case"half-day":return n[pl(e)]()/24;case"hour":return n[pl(e)]();case"minute":return n[uf(e)]();case"second":return n[hf(e)]();case"millisecond":return n[cf(e)]()}}function ey(i){return i?"getUTCFullYear":"getFullYear"}function la(i){return i?"getUTCMonth":"getMonth"}function lf(i){return i?"getUTCDate":"getDate"}function pl(i){return i?"getUTCHours":"getHours"}function uf(i){return i?"getUTCMinutes":"getMinutes"}function hf(i){return i?"getUTCSeconds":"getSeconds"}function cf(i){return i?"getUTCMilliseconds":"getMilliseconds"}function zz(i){return i?"setUTCFullYear":"setFullYear"}function YC(i){return i?"setUTCMonth":"setMonth"}function HC(i){return i?"setUTCDate":"setDate"}function UC(i){return i?"setUTCHours":"setHours"}function XC(i){return i?"setUTCMinutes":"setMinutes"}function KC(i){return i?"setUTCSeconds":"setSeconds"}function jC(i){return i?"setUTCMilliseconds":"setMilliseconds"}function ZC(i){if(!PF(i))return $(i)?i:"-";var t=(i+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function qC(i,t){return i=(i||"").toLowerCase().replace(/-(.)/g,function(e,n){return n.toUpperCase()}),t&&i&&(i=i.charAt(0).toUpperCase()+i.slice(1)),i}var ff=rT;function Dp(i,t,e){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(h){return h&&Oi(h)?h:"-"}function s(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var a=t==="time",o=i instanceof Date;if(a||o){var l=a?vn(i):i;if(isNaN(+l)){if(o)return"-"}else return of(l,n,e)}if(t==="ordinal")return ip(i)?r(i):Ot(i)&&s(i)?i+"":"-";var u=rc(i);return s(u)?ZC(u):ip(i)?r(i):typeof i=="boolean"?i+"":"-"}var T1=["a","b","c","d","e","f","g"],Nd=function(i,t){return"{"+i+(t??"")+"}"};function JC(i,t,e){z(t)||(t=[t]);var n=t.length;if(!n)return"";for(var r=t[0].$vars||[],s=0;s<r.length;s++){var a=T1[s];i=i.replace(Nd(a),Nd(a,0))}for(var o=0;o<n;o++)for(var l=0;l<r.length;l++){var u=t[o][r[l]];i=i.replace(Nd(T1[l],o),e?ei(u):u)}return i}function Gz(i,t){var e=$(i)?{color:i,extraCssText:t}:i||{},n=e.color,r=e.type;t=e.extraCssText;var s=e.renderMode||"html";if(!n)return"";if(s==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ei(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ei(n)+";"+(t||"")+'"></span>';var a=e.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function vl(i,t){return t=t||"transparent",$(i)?i:Y(i)&&i.colorStops&&(i.colorStops[0]||{}).color||t}function C1(i,t){if(t==="_blank"||t==="blank"){var e=window.open();e.opener=null,e.location.href=i}else window.open(i,t)}var Ih=A,$z=["left","right","top","bottom","width","height"],Bu=[["width","left","right"],["height","top","bottom"]];function iy(i,t,e,n,r){var s=0,a=0;n==null&&(n=1/0),r==null&&(r=1/0);var o=0;t.eachChild(function(l,u){var h=l.getBoundingRect(),c=t.childAt(u+1),f=c&&c.getBoundingRect(),d,g;if(i==="horizontal"){var p=h.width+(f?-f.x+h.x:0);d=s+p,d>n||l.newline?(s=0,d=p,a+=o+e,o=h.height):o=Math.max(o,h.height)}else{var v=h.height+(f?-f.y+h.y:0);g=a+v,g>r||l.newline?(s+=o+e,a=0,g=v,o=h.width):o=Math.max(o,h.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),i==="horizontal"?s=d+e:a=g+e)})}var No=iy;Et(iy,"vertical");Et(iy,"horizontal");function ml(i,t,e){e=ff(e||0);var n=t.width,r=t.height,s=qt(i.left,n),a=qt(i.top,r),o=qt(i.right,n),l=qt(i.bottom,r),u=qt(i.width,n),h=qt(i.height,r),c=e[2]+e[0],f=e[1]+e[3],d=i.aspect;switch(isNaN(u)&&(u=n-o-f-s),isNaN(h)&&(h=r-l-c-a),d!=null&&(isNaN(u)&&isNaN(h)&&(d>n/r?u=n*.8:h=r*.8),isNaN(u)&&(u=d*h),isNaN(h)&&(h=u/d)),isNaN(s)&&(s=n-o-u-f),isNaN(a)&&(a=r-l-h-c),i.left||i.right){case"center":s=n/2-u/2-e[3];break;case"right":s=n-u-f;break}switch(i.top||i.bottom){case"middle":case"center":a=r/2-h/2-e[0];break;case"bottom":a=r-h-c;break}s=s||0,a=a||0,isNaN(u)&&(u=n-f-s-(o||0)),isNaN(h)&&(h=r-c-a-(l||0));var g=new pt(s+e[3],a+e[0],u,h);return g.margin=e,g}function yl(i){var t=i.layoutMode||i.constructor.layoutMode;return Y(t)?t:t?{type:t}:null}function Sa(i,t,e){var n=e&&e.ignoreSize;!z(n)&&(n=[n,n]);var r=a(Bu[0],0),s=a(Bu[1],1);u(Bu[0],i,r),u(Bu[1],i,s);function a(h,c){var f={},d=0,g={},p=0,v=2;if(Ih(h,function(_){g[_]=i[_]}),Ih(h,function(_){o(t,_)&&(f[_]=g[_]=t[_]),l(f,_)&&d++,l(g,_)&&p++}),n[c])return l(t,h[1])?g[h[2]]=null:l(t,h[2])&&(g[h[1]]=null),g;if(p===v||!d)return g;if(d>=v)return f;for(var m=0;m<h.length;m++){var y=h[m];if(!o(f,y)&&o(i,y)){f[y]=i[y];break}}return f}function o(h,c){return h.hasOwnProperty(c)}function l(h,c){return h[c]!=null&&h[c]!=="auto"}function u(h,c,f){Ih(h,function(d){c[d]=f[d]})}}function df(i){return Vz({},i)}function Vz(i,t){return t&&i&&Ih($z,function(e){t.hasOwnProperty(e)&&(i[e]=t[e])}),i}var Wz=Bt(),Fa=function(i){j(t,i);function t(e,n,r){var s=i.call(this,e,n,r)||this;return s.uid=af("ec_cpt_model"),s}return t.prototype.init=function(e,n,r){this.mergeDefaultAndTheme(e,r)},t.prototype.mergeDefaultAndTheme=function(e,n){var r=yl(this),s=r?df(e):{},a=n.getTheme();ht(e,a.get(this.mainType)),ht(e,this.getDefaultOption()),r&&Sa(e,s,r)},t.prototype.mergeOption=function(e,n){ht(this.option,e,!0);var r=yl(this);r&&Sa(this.option,e,r)},t.prototype.optionUpdated=function(e,n){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!qF(e))return e.defaultOption;var n=Wz(this);if(!n.defaultOption){for(var r=[],s=e;s;){var a=s.prototype.defaultOption;a&&r.push(a),s=s.superClass}for(var o={},l=r.length-1;l>=0;l--)o=ht(o,r[l],!0);n.defaultOption=o}return n.defaultOption},t.prototype.getReferringComponents=function(e,n){var r=e+"Index",s=e+"Id";return Wl(this.ecModel,e,{index:this.get(r,!0),id:this.get(s,!0)},n)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(oe);$T(Fa,oe);Qc(Fa);Rz(Fa);Mz(Fa,Yz);function Yz(i){var t=[];return A(Fa.getClassesByMainType(i),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=H(t,function(e){return Fi(e).main}),i!=="dataset"&&gt(t,"dataset")<=0&&t.unshift("dataset"),t}const Tt=Fa;var QC="";typeof navigator<"u"&&(QC=navigator.platform||"");var As="rgba(0, 0, 0, 0.2)";const Hz={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:As,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:As,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:As,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:As,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:As,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:As,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:QC.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var tE=nt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ci="original",Oe="arrayRows",Ki="objectRows",_n="keyedColumns",Hn="typedArray",eE="unknown",fn="column",Na="row",Be={Must:1,Might:2,Not:3},iE=Bt();function Uz(i){iE(i).datasetMap=nt()}function Xz(i,t,e){var n={},r=nE(t);if(!r||!i)return n;var s=[],a=[],o=t.ecModel,l=iE(o).datasetMap,u=r.uid+"_"+e.seriesLayoutBy,h,c;i=i.slice(),A(i,function(p,v){var m=Y(p)?p:i[v]={name:p};m.type==="ordinal"&&h==null&&(h=v,c=g(m)),n[m.name]=[]});var f=l.get(u)||l.set(u,{categoryWayDim:c,valueWayDim:0});A(i,function(p,v){var m=p.name,y=g(p);if(h==null){var _=f.valueWayDim;d(n[m],_,y),d(a,_,y),f.valueWayDim+=y}else if(h===v)d(n[m],0,y),d(s,0,y);else{var _=f.categoryWayDim;d(n[m],_,y),d(a,_,y),f.categoryWayDim+=y}});function d(p,v,m){for(var y=0;y<m;y++)p.push(v+y)}function g(p){var v=p.dimsDef;return v?v.length:1}return s.length&&(n.itemName=s),a.length&&(n.seriesName=a),n}function nE(i){var t=i.get("data",!0);if(!t)return Wl(i.ecModel,"dataset",{index:i.get("datasetIndex",!0),id:i.get("datasetId",!0)},Si).models[0]}function Kz(i){return!i.get("transform",!0)&&!i.get("fromTransformResult",!0)?[]:Wl(i.ecModel,"dataset",{index:i.get("fromDatasetIndex",!0),id:i.get("fromDatasetId",!0)},Si).models}function rE(i,t){return jz(i.data,i.sourceFormat,i.seriesLayoutBy,i.dimensionsDefine,i.startIndex,t)}function jz(i,t,e,n,r,s){var a,o=5;if(ke(i))return Be.Not;var l,u;if(n){var h=n[s];Y(h)?(l=h.name,u=h.type):$(h)&&(l=h)}if(u!=null)return u==="ordinal"?Be.Must:Be.Not;if(t===Oe){var c=i;if(e===Na){for(var f=c[s],d=0;d<(f||[]).length&&d<o;d++)if((a=w(f[r+d]))!=null)return a}else for(var d=0;d<c.length&&d<o;d++){var g=c[r+d];if(g&&(a=w(g[s]))!=null)return a}}else if(t===Ki){var p=i;if(!l)return Be.Not;for(var d=0;d<p.length&&d<o;d++){var v=p[d];if(v&&(a=w(v[l]))!=null)return a}}else if(t===_n){var m=i;if(!l)return Be.Not;var f=m[l];if(!f||ke(f))return Be.Not;for(var d=0;d<f.length&&d<o;d++)if((a=w(f[d]))!=null)return a}else if(t===ci)for(var y=i,d=0;d<y.length&&d<o;d++){var v=y[d],_=$l(v);if(!z(_))return Be.Not;if((a=w(_[s]))!=null)return a}function w(S){var x=$(S);if(S!=null&&isFinite(S)&&S!=="")return x?Be.Might:Be.Not;if(x&&S!=="-")return Be.Must}return Be.Not}var Zz=nt();function qz(i,t,e){var n=Zz.get(t);if(!n)return e;var r=n(i);return r?e.concat(r):e}var E1=Bt();Bt();var ny=function(){function i(){}return i.prototype.getColorFromPalette=function(t,e,n){var r=ve(this.get("color",!0)),s=this.get("colorLayer",!0);return Qz(this,E1,r,s,t,e,n)},i.prototype.clearColorPalette=function(){tG(this,E1)},i}();function Jz(i,t){for(var e=i.length,n=0;n<e;n++)if(i[n].length>t)return i[n];return i[e-1]}function Qz(i,t,e,n,r,s,a){s=s||i;var o=t(s),l=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(r))return u[r];var h=a==null||!n?e:Jz(n,a);if(h=h||e,!(!h||!h.length)){var c=h[l];return r&&(u[r]=c),o.paletteIdx=(l+1)%h.length,c}}function tG(i,t){t(i).paletteIdx=0,t(i).paletteNameMap={}}var zu,Qa,I1,A1="\0_ec_inner",eG=1,sE=function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.init=function(e,n,r,s,a,o){s=s||{},this.option=null,this._theme=new oe(s),this._locale=new oe(a),this._optionManager=o},t.prototype.setOption=function(e,n,r){var s=L1(n);this._optionManager.setOption(e,r,s),this._resetOption(null,s)},t.prototype.resetOption=function(e,n){return this._resetOption(e,L1(n))},t.prototype._resetOption=function(e,n){var r=!1,s=this._optionManager;if(!e||e==="recreate"){var a=s.mountOption(e==="recreate");!this.option||e==="recreate"?I1(this,a):(this.restoreData(),this._mergeOption(a,n)),r=!0}if((e==="timeline"||e==="media")&&this.restoreData(),!e||e==="recreate"||e==="timeline"){var o=s.getTimelineOption(this);o&&(r=!0,this._mergeOption(o,n))}if(!e||e==="recreate"||e==="media"){var l=s.getMediaOption(this);l.length&&A(l,function(u){r=!0,this._mergeOption(u,n)},this)}return r},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,n){var r=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=nt(),u=n&&n.replaceMergeMainTypeMap;Uz(this),A(e,function(c,f){c!=null&&(Tt.hasClass(f)?f&&(o.push(f),l.set(f,!0)):r[f]=r[f]==null?at(c):ht(r[f],c,!0))}),u&&u.each(function(c,f){Tt.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),Tt.topologicalTravel(o,Tt.getAllClassMainTypes(),h,this);function h(c){var f=qz(this,c,ve(e[c])),d=s.get(c),g=d?u&&u.get(c)?"replaceMerge":"normalMerge":"replaceAll",p=NF(d,f,g);YF(p,c,Tt),r[c]=null,s.set(c,null),a.set(c,0);var v=[],m=[],y=0,_;A(p,function(w,S){var x=w.existing,b=w.newOption;if(!b)x&&(x.mergeOption({},this),x.optionUpdated({},!1));else{var T=c==="series",C=Tt.getClass(c,w.keyInfo.subType,!T);if(!C)return;if(c==="tooltip"){if(_)return;_=!0}if(x&&x.constructor===C)x.name=w.keyInfo.name,x.mergeOption(b,this),x.optionUpdated(b,!1);else{var I=N({componentIndex:S},w.keyInfo);x=new C(b,this,this,I),N(x,I),w.brandNew&&(x.__requireNewView=!0),x.init(b,this,this),x.optionUpdated(null,!0)}}x?(v.push(x.option),m.push(x),y++):(v.push(void 0),m.push(void 0))},this),r[c]=v,s.set(c,m),a.set(c,y),c==="series"&&zu(this)}this._seriesIndices||zu(this)},t.prototype.getOption=function(){var e=at(this.option);return A(e,function(n,r){if(Tt.hasClass(r)){for(var s=ve(n),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!fl(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,e[r]=s}}),delete e[A1],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,n){var r=this._componentsMap.get(e);if(r){var s=r[n||0];if(s)return s;if(n==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},t.prototype.queryComponents=function(e){var n=e.mainType;if(!n)return[];var r=e.index,s=e.id,a=e.name,o=this._componentsMap.get(n);if(!o||!o.length)return[];var l;return r!=null?(l=[],A(ve(r),function(u){o[u]&&l.push(o[u])})):s!=null?l=R1("id",s,o):a!=null?l=R1("name",a,o):l=ae(o,function(u){return!!u}),M1(l,e)},t.prototype.findComponents=function(e){var n=e.query,r=e.mainType,s=o(n),a=s?this.queryComponents(s):ae(this._componentsMap.get(r),function(u){return!!u});return l(M1(a,e));function o(u){var h=r+"Index",c=r+"Id",f=r+"Name";return u&&(u[h]!=null||u[c]!=null||u[f]!=null)?{mainType:r,index:u[h],id:u[c],name:u[f]}:null}function l(u){return e.filter?ae(u,e.filter):u}},t.prototype.eachComponent=function(e,n,r){var s=this._componentsMap;if(rt(e)){var a=n,o=e;s.each(function(c,f){for(var d=0;c&&d<c.length;d++){var g=c[d];g&&o.call(a,f,g,g.componentIndex)}})}else for(var l=$(e)?s.get(e):Y(e)?this.findComponents(e):null,u=0;l&&u<l.length;u++){var h=l[u];h&&n.call(r,h,h.componentIndex)}},t.prototype.getSeriesByName=function(e){var n=$i(e,null);return ae(this._componentsMap.get("series"),function(r){return!!r&&n!=null&&r.name===n})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return ae(this._componentsMap.get("series"),function(n){return!!n&&n.subType===e})},t.prototype.getSeries=function(){return ae(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,n){Qa(this),A(this._seriesIndices,function(r){var s=this._componentsMap.get("series")[r];e.call(n,s,r)},this)},t.prototype.eachRawSeries=function(e,n){A(this._componentsMap.get("series"),function(r){r&&e.call(n,r,r.componentIndex)})},t.prototype.eachSeriesByType=function(e,n,r){Qa(this),A(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===e&&n.call(r,a,s)},this)},t.prototype.eachRawSeriesByType=function(e,n,r){return A(this.getSeriesByType(e),n,r)},t.prototype.isSeriesFiltered=function(e){return Qa(this),this._seriesIndicesMap.get(e.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,n){Qa(this);var r=[];A(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];e.call(n,a,s)&&r.push(s)},this),this._seriesIndices=r,this._seriesIndicesMap=nt(r)},t.prototype.restoreData=function(e){zu(this);var n=this._componentsMap,r=[];n.each(function(s,a){Tt.hasClass(a)&&r.push(a)}),Tt.topologicalTravel(r,Tt.getAllClassMainTypes(),function(s){A(n.get(s),function(a){a&&(s!=="series"||!iG(a,e))&&a.restoreData()})})},t.internalField=function(){zu=function(e){var n=e._seriesIndices=[];A(e._componentsMap.get("series"),function(r){r&&n.push(r.componentIndex)}),e._seriesIndicesMap=nt(n)},Qa=function(e){},I1=function(e,n){e.option={},e.option[A1]=eG,e._componentsMap=nt({series:[]}),e._componentsCount=nt();var r=n.aria;Y(r)&&r.enabled==null&&(r.enabled=!0),nG(n,e._theme.option),ht(n,Hz,!1),e._mergeOption(n,null)}}(),t}(oe);function iG(i,t){if(t){var e=t.seriesIndex,n=t.seriesId,r=t.seriesName;return e!=null&&i.componentIndex!==e||n!=null&&i.id!==n||r!=null&&i.name!==r}}function nG(i,t){var e=i.color&&!i.colorLayer;A(t,function(n,r){r==="colorLayer"&&e||Tt.hasClass(r)||(typeof n=="object"?i[r]=i[r]?ht(i[r],n,!1):at(n):i[r]==null&&(i[r]=n))})}function R1(i,t,e){if(z(t)){var n=nt();return A(t,function(s){if(s!=null){var a=$i(s,null);a!=null&&n.set(s,!0)}}),ae(e,function(s){return s&&n.get(s[i])})}else{var r=$i(t,null);return ae(e,function(s){return s&&r!=null&&s[i]===r})}}function M1(i,t){return t.hasOwnProperty("subType")?ae(i,function(e){return e&&e.subType===t.subType}):i}function L1(i){var t=nt();return i&&A(ve(i.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}Ti(sE,ny);const aE=sE;var rG=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],sG=function(){function i(t){A(rG,function(e){this[e]=Pt(t[e],t)},this)}return i}();const oE=sG;var Bd={},aG=function(){function i(){this._coordinateSystems=[]}return i.prototype.create=function(t,e){var n=[];A(Bd,function(r,s){var a=r.create(t,e);n=n.concat(a||[])}),this._coordinateSystems=n},i.prototype.update=function(t,e){A(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},i.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},i.register=function(t,e){Bd[t]=e},i.get=function(t){return Bd[t]},i}();const ry=aG;var oG=/^(min|max)?(.+)$/,lG=function(){function i(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return i.prototype.setOption=function(t,e,n){t&&(A(ve(t.series),function(a){a&&a.data&&ke(a.data)&&np(a.data)}),A(ve(t.dataset),function(a){a&&a.source&&ke(a.source)&&np(a.source)})),t=at(t);var r=this._optionBackup,s=uG(t,e,!r);this._newBaseOption=s.baseOption,r?(s.timelineOptions.length&&(r.timelineOptions=s.timelineOptions),s.mediaList.length&&(r.mediaList=s.mediaList),s.mediaDefault&&(r.mediaDefault=s.mediaDefault)):this._optionBackup=s},i.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],at(t?e.baseOption:this._newBaseOption)},i.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var r=t.getComponent("timeline");r&&(e=at(n[r.getCurrentIndex()]))}return e},i.prototype.getMediaOption=function(t){var e=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!r.length&&!s)return o;for(var l=0,u=r.length;l<u;l++)hG(r[l].query,e,n)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!fG(a,this._currentMediaIndices)&&(o=H(a,function(h){return at(h===-1?s.option:r[h].option)})),this._currentMediaIndices=a,o},i}();function uG(i,t,e){var n=[],r,s,a=i.baseOption,o=i.timeline,l=i.options,u=i.media,h=!!i.media,c=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((c||h)&&(i.options=i.media=null),s=i),h&&z(u)&&A(u,function(d){d&&d.option&&(d.query?n.push(d):r||(r=d))}),f(s),A(l,function(d){return f(d)}),A(n,function(d){return f(d.option)});function f(d){A(t,function(g){g(d,e)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:r,mediaList:n}}function hG(i,t,e){var n={width:t,height:e,aspectratio:t/e},r=!0;return A(i,function(s,a){var o=a.match(oG);if(!(!o||!o[1]||!o[2])){var l=o[1],u=o[2].toLowerCase();cG(n[u],s,l)||(r=!1)}}),r}function cG(i,t,e){return e==="min"?i>=t:e==="max"?i<=t:i===t}function fG(i,t){return i.join(",")===t.join(",")}const dG=lG;var vi=A,_l=Y,k1=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function zd(i){var t=i&&i.itemStyle;if(t)for(var e=0,n=k1.length;e<n;e++){var r=k1[e],s=t.normal,a=t.emphasis;s&&s[r]&&(i[r]=i[r]||{},i[r].normal?ht(i[r].normal,s[r]):i[r].normal=s[r],s[r]=null),a&&a[r]&&(i[r]=i[r]||{},i[r].emphasis?ht(i[r].emphasis,a[r]):i[r].emphasis=a[r],a[r]=null)}}function se(i,t,e){if(i&&i[t]&&(i[t].normal||i[t].emphasis)){var n=i[t].normal,r=i[t].emphasis;n&&(e?(i[t].normal=i[t].emphasis=null,St(i[t],n)):i[t]=n),r&&(i.emphasis=i.emphasis||{},i.emphasis[t]=r,r.focus&&(i.emphasis.focus=r.focus),r.blurScope&&(i.emphasis.blurScope=r.blurScope))}}function So(i){se(i,"itemStyle"),se(i,"lineStyle"),se(i,"areaStyle"),se(i,"label"),se(i,"labelLine"),se(i,"upperLabel"),se(i,"edgeLabel")}function zt(i,t){var e=_l(i)&&i[t],n=_l(e)&&e.textStyle;if(n)for(var r=0,s=P0.length;r<s;r++){var a=P0[r];n.hasOwnProperty(a)&&(e[a]=n[a])}}function Qe(i){i&&(So(i),zt(i,"label"),i.emphasis&&zt(i.emphasis,"label"))}function gG(i){if(_l(i)){zd(i),So(i),zt(i,"label"),zt(i,"upperLabel"),zt(i,"edgeLabel"),i.emphasis&&(zt(i.emphasis,"label"),zt(i.emphasis,"upperLabel"),zt(i.emphasis,"edgeLabel"));var t=i.markPoint;t&&(zd(t),Qe(t));var e=i.markLine;e&&(zd(e),Qe(e));var n=i.markArea;n&&Qe(n);var r=i.data;if(i.type==="graph"){r=r||i.nodes;var s=i.links||i.edges;if(s&&!ke(s))for(var a=0;a<s.length;a++)Qe(s[a]);A(i.categories,function(u){So(u)})}if(r&&!ke(r))for(var a=0;a<r.length;a++)Qe(r[a]);if(t=i.markPoint,t&&t.data)for(var o=t.data,a=0;a<o.length;a++)Qe(o[a]);if(e=i.markLine,e&&e.data)for(var l=e.data,a=0;a<l.length;a++)z(l[a])?(Qe(l[a][0]),Qe(l[a][1])):Qe(l[a]);i.type==="gauge"?(zt(i,"axisLabel"),zt(i,"title"),zt(i,"detail")):i.type==="treemap"?(se(i.breadcrumb,"itemStyle"),A(i.levels,function(u){So(u)})):i.type==="tree"&&So(i.leaves)}}function en(i){return z(i)?i:i?[i]:[]}function D1(i){return(z(i)?i[0]:i)||{}}function pG(i,t){vi(en(i.series),function(n){_l(n)&&gG(n)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),vi(e,function(n){vi(en(i[n]),function(r){r&&(zt(r,"axisLabel"),zt(r.axisPointer,"label"))})}),vi(en(i.parallel),function(n){var r=n&&n.parallelAxisDefault;zt(r,"axisLabel"),zt(r&&r.axisPointer,"label")}),vi(en(i.calendar),function(n){se(n,"itemStyle"),zt(n,"dayLabel"),zt(n,"monthLabel"),zt(n,"yearLabel")}),vi(en(i.radar),function(n){zt(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),vi(en(i.geo),function(n){_l(n)&&(Qe(n),vi(en(n.regions),function(r){Qe(r)}))}),vi(en(i.timeline),function(n){Qe(n),se(n,"label"),se(n,"itemStyle"),se(n,"controlStyle",!0);var r=n.data;z(r)&&A(r,function(s){Y(s)&&(se(s,"label"),se(s,"itemStyle"))})}),vi(en(i.toolbox),function(n){se(n,"iconStyle"),vi(n.feature,function(r){se(r,"iconStyle")})}),zt(D1(i.axisPointer),"label"),zt(D1(i.tooltip).axisPointer,"label")}function vG(i,t){for(var e=t.split(","),n=i,r=0;r<e.length&&(n=n&&n[e[r]],n!=null);r++);return n}function mG(i,t,e,n){for(var r=t.split(","),s=i,a,o=0;o<r.length-1;o++)a=r[o],s[a]==null&&(s[a]={}),s=s[a];(n||s[r[o]]==null)&&(s[r[o]]=e)}function P1(i){i&&A(yG,function(t){t[0]in i&&!(t[1]in i)&&(i[t[1]]=i[t[0]])})}var yG=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],_G=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Gd=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function to(i){var t=i&&i.itemStyle;if(t)for(var e=0;e<Gd.length;e++){var n=Gd[e][1],r=Gd[e][0];t[n]!=null&&(t[r]=t[n])}}function O1(i){i&&i.alignTo==="edge"&&i.margin!=null&&i.edgeDistance==null&&(i.edgeDistance=i.margin)}function F1(i){i&&i.downplay&&!i.blur&&(i.blur=i.downplay)}function wG(i){i&&i.focusNodeAdjacency!=null&&(i.emphasis=i.emphasis||{},i.emphasis.focus==null&&(i.emphasis.focus="adjacency"))}function lE(i,t){if(i)for(var e=0;e<i.length;e++)t(i[e]),i[e]&&lE(i[e].children,t)}function uE(i,t){pG(i,t),i.series=ve(i.series),A(i.series,function(e){if(Y(e)){var n=e.type;if(n==="line")e.clipOverflow!=null&&(e.clip=e.clipOverflow);else if(n==="pie"||n==="gauge"){e.clockWise!=null&&(e.clockwise=e.clockWise),O1(e.label);var r=e.data;if(r&&!ke(r))for(var s=0;s<r.length;s++)O1(r[s]);e.hoverOffset!=null&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if(n==="gauge"){var a=vG(e,"pointer.color");a!=null&&mG(e,"itemStyle.color",a)}else if(n==="bar"){to(e),to(e.backgroundStyle),to(e.emphasis);var r=e.data;if(r&&!ke(r))for(var s=0;s<r.length;s++)typeof r[s]=="object"&&(to(r[s]),to(r[s]&&r[s].emphasis))}else if(n==="sunburst"){var o=e.highlightPolicy;o&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=o)),F1(e),lE(e.data,F1)}else n==="graph"||n==="sankey"?wG(e):n==="map"&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&St(e,e.mapLocation));e.hoverAnimation!=null&&(e.emphasis=e.emphasis||{},e.emphasis&&e.emphasis.scale==null&&(e.emphasis.scale=e.hoverAnimation)),P1(e)}}),i.dataRange&&(i.visualMap=i.dataRange),A(_G,function(e){var n=i[e];n&&(z(n)||(n=[n]),A(n,function(r){P1(r)}))})}function xG(i){var t=nt();i.eachSeries(function(e){var n=e.get("stack");if(n){var r=t.get(n)||t.set(n,[]),s=e.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:e};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&s.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),t.each(SG)}function SG(i){A(i,function(t,e){var n=[],r=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],a=t.data,o=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(u,h,c){var f=a.get(t.stackedDimension,c);if(isNaN(f))return r;var d,g;o?g=a.getRawIndex(c):d=a.get(t.stackedByDimension,c);for(var p=NaN,v=e-1;v>=0;v--){var m=i[v];if(o||(g=m.data.rawIndexOf(m.stackedByDimension,d)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&f>=0&&y>0||l==="samesign"&&f<=0&&y<0){f=LF(f,y),p=y;break}}}return n[0]=f,n[1]=p,n})})}var gf=function(){function i(t){this.data=t.data||(t.sourceFormat===_n?{}:[]),this.sourceFormat=t.sourceFormat||eE,this.seriesLayoutBy=t.seriesLayoutBy||fn,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var n=0;n<e.length;n++){var r=e[n];r.type==null&&rE(this,n)===Be.Must&&(r.type="ordinal")}}return i}();function sy(i){return i instanceof gf}function Pp(i,t,e){e=e||hE(i);var n=t.seriesLayoutBy,r=TG(i,e,n,t.sourceHeader,t.dimensions),s=new gf({data:i,sourceFormat:e,seriesLayoutBy:n,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:at(t)});return s}function ay(i){return new gf({data:i,sourceFormat:ke(i)?Hn:ci})}function bG(i){return new gf({data:i.data,sourceFormat:i.sourceFormat,seriesLayoutBy:i.seriesLayoutBy,dimensionsDefine:at(i.dimensionsDefine),startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount})}function hE(i){var t=eE;if(ke(i))t=Hn;else if(z(i)){i.length===0&&(t=Oe);for(var e=0,n=i.length;e<n;e++){var r=i[e];if(r!=null){if(z(r)||ke(r)){t=Oe;break}else if(Y(r)){t=Ki;break}}}}else if(Y(i)){for(var s in i)if(_a(i,s)&&Le(i[s])){t=_n;break}}return t}function TG(i,t,e,n,r){var s,a;if(!i)return{dimensionsDefine:N1(r),startIndex:a,dimensionsDetectedCount:s};if(t===Oe){var o=i;n==="auto"||n==null?B1(function(u){u!=null&&u!=="-"&&($(u)?a==null&&(a=1):a=0)},e,o,10):a=Ot(n)?n:n?1:0,!r&&a===1&&(r=[],B1(function(u,h){r[h]=u!=null?u+"":""},e,o,1/0)),s=r?r.length:e===Na?o.length:o[0]?o[0].length:null}else if(t===Ki)r||(r=CG(i));else if(t===_n)r||(r=[],A(i,function(u,h){r.push(h)}));else if(t===ci){var l=$l(i[0]);s=z(l)&&l.length||1}return{startIndex:a,dimensionsDefine:N1(r),dimensionsDetectedCount:s}}function CG(i){for(var t=0,e;t<i.length&&!(e=i[t++]););if(e)return kt(e)}function N1(i){if(i){var t=nt();return H(i,function(e,n){e=Y(e)?e:{name:e};var r={name:e.name,displayName:e.displayName,type:e.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var s=t.get(r.name);return s?r.name+="-"+s.count++:t.set(r.name,{count:1}),r})}}function B1(i,t,e,n){if(t===Na)for(var r=0;r<e.length&&r<n;r++)i(e[r]?e[r][0]:null,r);else for(var s=e[0]||[],r=0;r<s.length&&r<n;r++)i(s[r],r)}function cE(i){var t=i.sourceFormat;return t===Ki||t===_n}var xr,Sr,br,z1,G1,fE=function(){function i(t,e){var n=sy(t)?t:ay(t);this._source=n;var r=this._data=n.data;n.sourceFormat===Hn&&(this._offset=0,this._dimSize=e,this._data=r),G1(this,r,n)}return i.prototype.getSource=function(){return this._source},i.prototype.count=function(){return 0},i.prototype.getItem=function(t,e){},i.prototype.appendData=function(t){},i.prototype.clean=function(){},i.protoInitialize=function(){var t=i.prototype;t.pure=!1,t.persistent=!0}(),i.internalField=function(){var t;G1=function(a,o,l){var u=l.sourceFormat,h=l.seriesLayoutBy,c=l.startIndex,f=l.dimensionsDefine,d=z1[oy(u,h)];if(N(a,d),u===Hn)a.getItem=e,a.count=r,a.fillStorage=n;else{var g=dE(u,h);a.getItem=Pt(g,null,o,c,f);var p=gE(u,h);a.count=Pt(p,null,o,c,f)}};var e=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,u=this._dimSize,h=u*a,c=0;c<u;c++)o[c]=l[h+c];return o},n=function(a,o,l,u){for(var h=this._data,c=this._dimSize,f=0;f<c;f++){for(var d=u[f],g=d[0]==null?1/0:d[0],p=d[1]==null?-1/0:d[1],v=o-a,m=l[f],y=0;y<v;y++){var _=h[y*c+f];m[a+y]=_,_<g&&(g=_),_>p&&(p=_)}d[0]=g,d[1]=p}},r=function(){return this._data?this._data.length/this._dimSize:0};z1=(t={},t[Oe+"_"+fn]={pure:!0,appendData:s},t[Oe+"_"+Na]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Ki]={pure:!0,appendData:s},t[_n]={pure:!0,appendData:function(a){var o=this._data;A(a,function(l,u){for(var h=o[u]||(o[u]=[]),c=0;c<(l||[]).length;c++)h.push(l[c])})}},t[ci]={appendData:s},t[Hn]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),i}(),$1=function(i,t,e,n){return i[n]},EG=(xr={},xr[Oe+"_"+fn]=function(i,t,e,n){return i[n+t]},xr[Oe+"_"+Na]=function(i,t,e,n,r){n+=t;for(var s=r||[],a=i,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[n]:null}return s},xr[Ki]=$1,xr[_n]=function(i,t,e,n,r){for(var s=r||[],a=0;a<e.length;a++){var o=e[a].name,l=i[o];s[a]=l?l[n]:null}return s},xr[ci]=$1,xr);function dE(i,t){var e=EG[oy(i,t)];return e}var V1=function(i,t,e){return i.length},IG=(Sr={},Sr[Oe+"_"+fn]=function(i,t,e){return Math.max(0,i.length-t)},Sr[Oe+"_"+Na]=function(i,t,e){var n=i[0];return n?Math.max(0,n.length-t):0},Sr[Ki]=V1,Sr[_n]=function(i,t,e){var n=e[0].name,r=i[n];return r?r.length:0},Sr[ci]=V1,Sr);function gE(i,t){var e=IG[oy(i,t)];return e}var $d=function(i,t,e){return i[t]},AG=(br={},br[Oe]=$d,br[Ki]=function(i,t,e){return i[e]},br[_n]=$d,br[ci]=function(i,t,e){var n=$l(i);return n instanceof Array?n[t]:n},br[Hn]=$d,br);function pE(i){var t=AG[i];return t}function oy(i,t){return i===Oe?i+"_"+t:i}function ba(i,t,e){if(i){var n=i.getRawDataItem(t);if(n!=null){var r=i.getStore(),s=r.getSource().sourceFormat;if(e!=null){var a=i.getDimensionIndex(e),o=r.getDimensionProperty(a);return pE(s)(n,a,o)}else{var l=n;return s===ci&&(l=$l(n)),l}}}}var RG=/\{@(.+?)\}/g,vE=function(){function i(){}return i.prototype.getDataParams=function(t,e){var n=this.getData(e),r=this.getRawValue(t,e),s=n.getRawIndex(t),a=n.getName(t),o=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,c=this.mainType,f=c==="series",d=n.userOutput&&n.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:s,data:o,dataType:e,value:r,color:u,borderColor:h,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},i.prototype.getFormattedLabel=function(t,e,n,r,s,a){e=e||"normal";var o=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),r!=null&&z(l.value)&&(l.value=l.value[r]),!s){var u=o.getItemModel(t);s=u.get(e==="normal"?["label","formatter"]:[e,"label","formatter"])}if(rt(s))return l.status=e,l.dimensionIndex=r,s(l);if($(s)){var h=JC(s,l);return h.replace(RG,function(c,f){var d=f.length,g=f;g.charAt(0)==="["&&g.charAt(d-1)==="]"&&(g=+g.slice(1,d-1));var p=ba(o,t,g);if(a&&z(a.interpolatedValue)){var v=o.getDimensionIndex(g);v>=0&&(p=a.interpolatedValue[v])}return p!=null?p+"":""})}},i.prototype.getRawValue=function(t,e){return ba(this.getData(e),t)},i.prototype.formatTooltip=function(t,e,n){},i}();function W1(i){var t,e;return Y(i)?i.type&&(e=i):t=i,{text:t,frag:e}}function Bo(i){return new MG(i)}var MG=function(){function i(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return i.prototype.perform=function(t){var e=this._upstream,n=t&&t.skip;if(this._dirty&&e){var r=this.context;r.data=r.outputData=e.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!n&&(s=this._plan(this.context));var a=h(this._modBy),o=this._modDataCount||0,l=h(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||o!==u)&&(s="reset");function h(y){return!(y>=1)&&(y=1),y}var c;(this._dirty||s==="reset")&&(this._dirty=!1,c=this._doReset(n)),this._modBy=l,this._modDataCount=u;var f=t&&t.step;if(e?this._dueEnd=e._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,g=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!n&&(c||d<g)){var p=this._progress;if(z(p))for(var v=0;v<p.length;v++)this._doProgress(p[v],d,g,l,u);else this._doProgress(p,d,g,l,u)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},i.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},i.prototype._doProgress=function(t,e,n,r,s){Y1.reset(e,n,r,s),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:Y1.next},this.context)},i.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var e,n;!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(n=e.forceFirstProgress,e=e.progress),z(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),n},i.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},i.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},i.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},i.prototype.getUpstream=function(){return this._upstream},i.prototype.getDownstream=function(){return this._downstream},i.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},i}(),Y1=function(){var i,t,e,n,r,s={reset:function(l,u,h,c){t=l,i=u,e=h,n=c,r=Math.ceil(n/e),s.next=e>1&&n>0?o:a}};return s;function a(){return t<i?t++:null}function o(){var l=t%r*e+Math.ceil(t/r),u=t>=i?null:l<n?l:t;return t++,u}}();function ua(i,t){var e=t&&t.type;return e==="ordinal"?i:(e==="time"&&!Ot(i)&&i!=null&&i!=="-"&&(i=+vn(i)),i==null||i===""?NaN:+i)}nt({number:function(i){return parseFloat(i)},time:function(i){return+vn(i)},trim:function(i){return $(i)?Oi(i):i}});var LG=function(){function i(t,e){var n=t==="desc";this._resultLT=n?1:-1,e==null&&(e=n?"min":"max"),this._incomparable=e==="min"?-1/0:1/0}return i.prototype.evaluate=function(t,e){var n=Ot(t)?t:rc(t),r=Ot(e)?e:rc(e),s=isNaN(n),a=isNaN(r);if(s&&(n=this._incomparable),a&&(r=this._incomparable),s&&a){var o=$(t),l=$(e);o&&(n=l?t:0),l&&(r=o?e:0)}return n<r?this._resultLT:n>r?-this._resultLT:0},i}(),kG=function(){function i(){}return i.prototype.getRawData=function(){throw new Error("not supported")},i.prototype.getRawDataItem=function(t){throw new Error("not supported")},i.prototype.cloneRawData=function(){},i.prototype.getDimensionInfo=function(t){},i.prototype.cloneAllDimensionInfo=function(){},i.prototype.count=function(){},i.prototype.retrieveValue=function(t,e){},i.prototype.retrieveValueFromItem=function(t,e){},i.prototype.convertValue=function(t,e){return ua(t,e)},i}();function DG(i,t){var e=new kG,n=i.data,r=e.sourceFormat=i.sourceFormat,s=i.startIndex,a="";i.seriesLayoutBy!==fn&&Te(a);var o=[],l={},u=i.dimensionsDefine;if(u)A(u,function(p,v){var m=p.name,y={index:v,name:m,displayName:p.displayName};if(o.push(y),m!=null){var _="";_a(l,m)&&Te(_),l[m]=y}});else for(var h=0;h<i.dimensionsDetectedCount;h++)o.push({index:h});var c=dE(r,fn);t.__isBuiltIn&&(e.getRawDataItem=function(p){return c(n,s,o,p)},e.getRawData=Pt(PG,null,i)),e.cloneRawData=Pt(OG,null,i);var f=gE(r,fn);e.count=Pt(f,null,n,s,o);var d=pE(r);e.retrieveValue=function(p,v){var m=c(n,s,o,p);return g(m,v)};var g=e.retrieveValueFromItem=function(p,v){if(p!=null){var m=o[v];if(m)return d(p,v,m.name)}};return e.getDimensionInfo=Pt(FG,null,o,l),e.cloneAllDimensionInfo=Pt(NG,null,o),e}function PG(i){var t=i.sourceFormat;if(!ly(t)){var e="";Te(e)}return i.data}function OG(i){var t=i.sourceFormat,e=i.data;if(!ly(t)){var n="";Te(n)}if(t===Oe){for(var r=[],s=0,a=e.length;s<a;s++)r.push(e[s].slice());return r}else if(t===Ki){for(var r=[],s=0,a=e.length;s<a;s++)r.push(N({},e[s]));return r}}function FG(i,t,e){if(e!=null){if(Ot(e)||!isNaN(e)&&!_a(t,e))return i[e];if(_a(t,e))return t[e]}}function NG(i){return at(i)}var mE=nt();function BG(i){i=at(i);var t=i.type,e="";t||Te(e);var n=t.split(":");n.length!==2&&Te(e);var r=!1;n[0]==="echarts"&&(t=n[1],r=!0),i.__isBuiltIn=r,mE.set(t,i)}function zG(i,t,e){var n=ve(i),r=n.length,s="";r||Te(s);for(var a=0,o=r;a<o;a++){var l=n[a];t=GG(l,t),a!==o-1&&(t.length=Math.max(t.length,1))}return t}function GG(i,t,e,n){var r="";t.length||Te(r),Y(i)||Te(r);var s=i.type,a=mE.get(s);a||Te(r);var o=H(t,function(u){return DG(u,a)}),l=ve(a.transform({upstream:o[0],upstreamList:o,config:at(i.config)}));return H(l,function(u,h){var c="";Y(u)||Te(c),u.data||Te(c);var f=hE(u.data);ly(f)||Te(c);var d,g=t[0];if(g&&h===0&&!u.dimensions){var p=g.startIndex;p&&(u.data=g.data.slice(0,p).concat(u.data)),d={seriesLayoutBy:fn,sourceHeader:p,dimensions:g.metaRawOption.dimensions}}else d={seriesLayoutBy:fn,sourceHeader:0,dimensions:u.dimensions};return Pp(u.data,d,null)})}function ly(i){return i===Oe||i===Ki}var pf="undefined",$G=typeof Uint32Array===pf?Array:Uint32Array,VG=typeof Uint16Array===pf?Array:Uint16Array,yE=typeof Int32Array===pf?Array:Int32Array,H1=typeof Float64Array===pf?Array:Float64Array,_E={float:H1,int:yE,ordinal:Array,number:Array,time:H1},Vd;function eo(i){return i>65535?$G:VG}function Rs(){return[1/0,-1/0]}function WG(i){var t=i.constructor;return t===Array?i.slice():new t(i)}function U1(i,t,e,n,r){var s=_E[e||"float"];if(r){var a=i[t],o=a&&a.length;if(o!==n){for(var l=new s(n),u=0;u<o;u++)l[u]=a[u];i[t]=l}}else i[t]=new s(n)}var Op=function(){function i(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=nt()}return i.prototype.initData=function(t,e,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=t.getSource(),s=this.defaultDimValueGetter=Vd[r.sourceFormat];this._dimValueGetter=n||s,this._rawExtent=[],cE(r),this._dimensions=H(e,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},i.prototype.getProvider=function(){return this._provider},i.prototype.getSource=function(){return this._provider.getSource()},i.prototype.ensureCalculationDimension=function(t,e){var n=this._calcDimNameToIdx,r=this._dimensions,s=n.get(t);if(s!=null){if(r[s].type===e)return s}else s=r.length;return r[s]={type:e},n.set(t,s),this._chunks[s]=new _E[e||"float"](this._rawCount),this._rawExtent[s]=Rs(),s},i.prototype.collectOrdinalMeta=function(t,e){var n=this._chunks[t],r=this._dimensions[t],s=this._rawExtent,a=r.ordinalOffset||0,o=n.length;a===0&&(s[t]=Rs());for(var l=s[t],u=a;u<o;u++){var h=n[u]=e.parseAndCollect(n[u]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}r.ordinalMeta=e,r.ordinalOffset=o,r.type="ordinal"},i.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],n=e.ordinalMeta;return n},i.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},i.prototype.appendData=function(t){var e=this._provider,n=this.count();e.appendData(t);var r=e.count();return e.persistent||(r+=n),n<r&&this._initDataFromProvider(n,r,!0),[n,r]},i.prototype.appendValues=function(t,e){for(var n=this._chunks,r=this._dimensions,s=r.length,a=this._rawExtent,o=this.count(),l=o+Math.max(t.length,e||0),u=0;u<s;u++){var h=r[u];U1(n,u,h.type,l,!0)}for(var c=[],f=o;f<l;f++)for(var d=f-o,g=0;g<s;g++){var h=r[g],p=Vd.arrayRows.call(this,t[d]||c,h.property,d,g);n[g][f]=p;var v=a[g];p<v[0]&&(v[0]=p),p>v[1]&&(v[1]=p)}return this._rawCount=this._count=l,{start:o,end:l}},i.prototype._initDataFromProvider=function(t,e,n){for(var r=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,u=H(a,function(y){return y.property}),h=0;h<o;h++){var c=a[h];l[h]||(l[h]=Rs()),U1(s,h,c.type,e,n)}if(r.fillStorage)r.fillStorage(t,e,s,l);else for(var f=[],d=t;d<e;d++){f=r.getItem(d,f);for(var g=0;g<o;g++){var p=s[g],v=this._dimValueGetter(f,u[g],d,g);p[d]=v;var m=l[g];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent=[]},i.prototype.count=function(){return this._count},i.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(e)]:NaN},i.prototype.getValues=function(t,e){var n=[],r=[];if(e==null){e=t,t=[];for(var s=0;s<this._dimensions.length;s++)r.push(s)}else r=t;for(var s=0,a=r.length;s<a;s++)n.push(this.get(r[s],e));return n},i.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._chunks[t];return n?n[e]:NaN},i.prototype.getSum=function(t){var e=this._chunks[t],n=0;if(e)for(var r=0,s=this.count();r<s;r++){var a=this.get(t,r);isNaN(a)||(n+=a)}return n},i.prototype.getMedian=function(t){var e=[];this.each([t],function(s){isNaN(s)||e.push(s)});var n=e.sort(function(s,a){return s-a}),r=this.count();return r===0?0:r%2===1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},i.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(n!=null&&n<this._count&&n===t)return t;for(var r=0,s=this._count-1;r<=s;){var a=(r+s)/2|0;if(e[a]<t)r=a+1;else if(e[a]>t)s=a-1;else return a}return-1},i.prototype.indicesOfNearest=function(t,e,n){var r=this._chunks,s=r[t],a=[];if(!s)return a;n==null&&(n=1/0);for(var o=1/0,l=-1,u=0,h=0,c=this.count();h<c;h++){var f=this.getRawIndex(h),d=e-s[f],g=Math.abs(d);g<=n&&((g<o||g===o&&d>=0&&l<0)&&(o=g,l=d,u=0),d===l&&(a[u++]=h))}return a.length=u,a},i.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,r=this._count;if(n===Array){t=new n(r);for(var s=0;s<r;s++)t[s]=e[s]}else t=new n(e.buffer,0,r)}else{var n=eo(this._rawCount);t=new n(this.count());for(var s=0;s<t.length;s++)t[s]=s}return t},i.prototype.filter=function(t,e){if(!this._count)return this;for(var n=this.clone(),r=n.count(),s=eo(n._rawCount),a=new s(r),o=[],l=t.length,u=0,h=t[0],c=n._chunks,f=0;f<r;f++){var d=void 0,g=n.getRawIndex(f);if(l===0)d=e(f);else if(l===1){var p=c[h][g];d=e(p,f)}else{for(var v=0;v<l;v++)o[v]=c[t[v]][g];o[v]=f,d=e.apply(null,o)}d&&(a[u++]=g)}return u<r&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},i.prototype.selectRange=function(t){var e=this.clone(),n=e._count;if(!n)return this;var r=kt(t),s=r.length;if(!s)return this;var a=e.count(),o=eo(e._rawCount),l=new o(a),u=0,h=r[0],c=t[h][0],f=t[h][1],d=e._chunks,g=!1;if(!e._indices){var p=0;if(s===1){for(var v=d[r[0]],m=0;m<n;m++){var y=v[m];(y>=c&&y<=f||isNaN(y))&&(l[u++]=p),p++}g=!0}else if(s===2){for(var v=d[r[0]],_=d[r[1]],w=t[r[1]][0],S=t[r[1]][1],m=0;m<n;m++){var y=v[m],x=_[m];(y>=c&&y<=f||isNaN(y))&&(x>=w&&x<=S||isNaN(x))&&(l[u++]=p),p++}g=!0}}if(!g)if(s===1)for(var m=0;m<a;m++){var b=e.getRawIndex(m),y=d[r[0]][b];(y>=c&&y<=f||isNaN(y))&&(l[u++]=b)}else for(var m=0;m<a;m++){for(var T=!0,b=e.getRawIndex(m),C=0;C<s;C++){var I=r[C],y=d[I][b];(y<t[I][0]||y>t[I][1])&&(T=!1)}T&&(l[u++]=e.getRawIndex(m))}return u<a&&(e._indices=l),e._count=u,e._extent=[],e._updateGetRawIdx(),e},i.prototype.map=function(t,e){var n=this.clone(t);return this._updateDims(n,t,e),n},i.prototype.modify=function(t,e){this._updateDims(this,t,e)},i.prototype._updateDims=function(t,e,n){for(var r=t._chunks,s=[],a=e.length,o=t.count(),l=[],u=t._rawExtent,h=0;h<e.length;h++)u[e[h]]=Rs();for(var c=0;c<o;c++){for(var f=t.getRawIndex(c),d=0;d<a;d++)l[d]=r[e[d]][f];l[a]=c;var g=n&&n.apply(null,l);if(g!=null){typeof g!="object"&&(s[0]=g,g=s);for(var h=0;h<g.length;h++){var p=e[h],v=g[h],m=u[p],y=r[p];y&&(y[f]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},i.prototype.lttbDownSample=function(t,e){var n=this.clone([t],!0),r=n._chunks,s=r[t],a=this.count(),o=0,l=Math.floor(1/e),u=this.getRawIndex(0),h,c,f,d=new(eo(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[o++]=u;for(var g=1;g<a-1;g+=l){for(var p=Math.min(g+l,a-1),v=Math.min(g+l*2,a),m=(v+p)/2,y=0,_=p;_<v;_++){var w=this.getRawIndex(_),S=s[w];isNaN(S)||(y+=S)}y/=v-p;var x=g,b=Math.min(g+l,a),T=g-1,C=s[u];h=-1,f=x;for(var I=-1,E=0,_=x;_<b;_++){var w=this.getRawIndex(_),S=s[w];if(isNaN(S)){E++,I<0&&(I=w);continue}c=Math.abs((T-m)*(S-C)-(T-_)*(y-C)),c>h&&(h=c,f=w)}E>0&&E<b-x&&(d[o++]=Math.min(I,f),f=Math.max(I,f)),d[o++]=f,u=f}return d[o++]=this.getRawIndex(a-1),n._count=o,n._indices=d,n.getRawIndex=this._getRawIdx,n},i.prototype.downSample=function(t,e,n,r){for(var s=this.clone([t],!0),a=s._chunks,o=[],l=Math.floor(1/e),u=a[t],h=this.count(),c=s._rawExtent[t]=Rs(),f=new(eo(this._rawCount))(Math.ceil(h/l)),d=0,g=0;g<h;g+=l){l>h-g&&(l=h-g,o.length=l);for(var p=0;p<l;p++){var v=this.getRawIndex(g+p);o[p]=u[v]}var m=n(o),y=this.getRawIndex(Math.min(g+r(o,m)||0,h-1));u[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),f[d++]=y}return s._count=d,s._indices=f,s._updateGetRawIdx(),s},i.prototype.each=function(t,e){if(this._count)for(var n=t.length,r=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(n){case 0:e(s);break;case 1:e(r[t[0]][o],s);break;case 2:e(r[t[0]][o],r[t[1]][o],s);break;default:for(var l=0,u=[];l<n;l++)u[l]=r[t[l]][o];u[l]=s,e.apply(null,u)}}},i.prototype.getDataExtent=function(t){var e=this._chunks[t],n=Rs();if(!e)return n;var r=this.count(),s=!this._indices,a;if(s)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var o=a[0],l=a[1],u=0;u<r;u++){var h=this.getRawIndex(u),c=e[h];c<o&&(o=c),c>l&&(l=c)}return a=[o,l],this._extent[t]=a,a},i.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var n=[],r=this._chunks,s=0;s<r.length;s++)n.push(r[s][e]);return n},i.prototype.clone=function(t,e){var n=new i,r=this._chunks,s=t&&Da(t,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<r.length;a++)n._chunks[a]=s[a]?WG(r[a]):r[a];else n._chunks=r;return this._copyCommonProps(n),e||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},i.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=at(this._extent),t._rawExtent=at(this._rawExtent)},i.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var n=this._indices.length;e=new t(n);for(var r=0;r<n;r++)e[r]=this._indices[r]}else e=new t(this._indices);return e}return null},i.prototype._getRawIdxIdentity=function(t){return t},i.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},i.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},i.internalField=function(){function t(e,n,r,s){return ua(e[s],this._dimensions[s])}Vd={arrayRows:t,objectRows:function(e,n,r,s){return ua(e[n],this._dimensions[s])},keyedColumns:t,original:function(e,n,r,s){var a=e&&(e.value==null?e:e.value);return ua(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(e,n,r,s){return e[s]}}}(),i}(),YG=function(){function i(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return i.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},i.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},i.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},i.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},i.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,e=this._getUpstreamSourceManagers(),n=!!e.length,r,s;if(Gu(t)){var a=t,o=void 0,l=void 0,u=void 0;if(n){var h=e[0];h.prepareSource(),u=h.getSource(),o=u.data,l=u.sourceFormat,s=[h._getVersionSign()]}else o=a.get("data",!0),l=ke(o)?Hn:ci,s=[];var c=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},d=et(c.seriesLayoutBy,f.seriesLayoutBy)||null,g=et(c.sourceHeader,f.sourceHeader),p=et(c.dimensions,f.dimensions),v=d!==f.seriesLayoutBy||!!g!=!!f.sourceHeader||p;r=v?[Pp(o,{seriesLayoutBy:d,sourceHeader:g,dimensions:p},l)]:[]}else{var m=t;if(n){var y=this._applyTransform(e);r=y.sourceList,s=y.upstreamSignList}else{var _=m.get("source",!0);r=[Pp(_,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(r,s)},i.prototype._applyTransform=function(t){var e=this._sourceHost,n=e.get("transform",!0),r=e.get("fromTransformResult",!0);if(r!=null){var s="";t.length!==1&&X1(s)}var a,o=[],l=[];return A(t,function(u){u.prepareSource();var h=u.getSource(r||0),c="";r!=null&&!h&&X1(c),o.push(h),l.push(u._getVersionSign())}),n?a=zG(n,o,{datasetIndex:e.componentIndex}):r!=null&&(a=[bG(o[0])]),{sourceList:a,upstreamSignList:l}},i.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var n=t[e];if(n._isDirty()||this._upstreamSignList[e]!==n._getVersionSign())return!0}},i.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return e},i.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},i.prototype._innerGetDataStore=function(t,e,n){var r=0,s=this._storeList,a=s[r];a||(a=s[r]={});var o=a[n];if(!o){var l=this._getUpstreamSourceManagers()[0];Gu(this._sourceHost)&&l?o=l._innerGetDataStore(t,e,n):(o=new Op,o.initData(new fE(e,t.length),t)),a[n]=o}return o},i.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Gu(t)){var e=nE(t);return e?[e.getSourceManager()]:[]}else return H(Kz(t),function(n){return n.getSourceManager()})},i.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,e,n,r;if(Gu(t))e=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),r=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=t;e=s.get("seriesLayoutBy",!0),n=s.get("sourceHeader",!0),r=s.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:n,dimensions:r}},i}();function Gu(i){return i.mainType==="series"}function X1(i){throw new Error(i)}var wE="line-height:1";function xE(i,t){var e=i.color||"#6e7079",n=i.fontSize||12,r=i.fontWeight||"400",s=i.color||"#464646",a=i.fontSize||14,o=i.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+ei(n+"")+"px;color:"+ei(e)+";font-weight:"+ei(r+""),valueStyle:"font-size:"+ei(a+"")+"px;color:"+ei(s)+";font-weight:"+ei(o+"")}:{nameStyle:{fontSize:n,fill:e,fontWeight:r},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var HG=[0,10,20,30],UG=["",`
`,`

`,`


`];function Qr(i,t){return t.type=i,t}function Fp(i){return i.type==="section"}function SE(i){return Fp(i)?XG:KG}function bE(i){if(Fp(i)){var t=0,e=i.blocks.length,n=e>1||e>0&&!i.noHeader;return A(i.blocks,function(r){var s=bE(r);s>=t&&(t=s+ +(n&&(!s||Fp(r)&&!r.noHeader)))}),t}return 0}function XG(i,t,e,n){var r=t.noHeader,s=jG(bE(t)),a=[],o=t.blocks||[];pn(!o||z(o)),o=o||[];var l=i.orderMode;if(t.sortBlocks&&l){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(_a(u,l)){var h=new LG(u[l],null);o.sort(function(g,p){return h.evaluate(g.sortParam,p.sortParam)})}else l==="seriesDesc"&&o.reverse()}A(o,function(g,p){var v=t.valueFormatter,m=SE(g)(v?N(N({},i),{valueFormatter:v}):i,g,p>0?s.html:0,n);m!=null&&a.push(m)});var c=i.renderMode==="richText"?a.join(s.richText):Np(a.join(""),r?e:s.html);if(r)return c;var f=Dp(t.header,"ordinal",i.useUTC),d=xE(n,i.renderMode).nameStyle;return i.renderMode==="richText"?TE(i,f,d)+s.richText+c:Np('<div style="'+d+";"+wE+';">'+ei(f)+"</div>"+c,e)}function KG(i,t,e,n){var r=i.renderMode,s=t.noName,a=t.noValue,o=!t.markerType,l=t.name,u=i.useUTC,h=t.valueFormatter||i.valueFormatter||function(w){return w=z(w)?w:[w],H(w,function(S,x){return Dp(S,z(d)?d[x]:d,u)})};if(!(s&&a)){var c=o?"":i.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",r),f=s?"":Dp(l,"ordinal",u),d=t.valueType,g=a?[]:h(t.value,t.dataIndex),p=!o||!s,v=!o&&s,m=xE(n,r),y=m.nameStyle,_=m.valueStyle;return r==="richText"?(o?"":c)+(s?"":TE(i,f,y))+(a?"":JG(i,g,p,v,_)):Np((o?"":c)+(s?"":ZG(f,!o,y))+(a?"":qG(g,p,v,_)),e)}}function K1(i,t,e,n,r,s){if(i){var a=SE(i),o={useUTC:r,renderMode:e,orderMode:n,markupStyleCreator:t,valueFormatter:i.valueFormatter};return a(o,i,0,s)}}function jG(i){return{html:HG[i],richText:UG[i]}}function Np(i,t){var e='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+wE+';">'+i+e+"</div>"}function ZG(i,t,e){var n=t?"margin-left:2px":"";return'<span style="'+e+";"+n+'">'+ei(i)+"</span>"}function qG(i,t,e,n){var r=e?"10px":"20px",s=t?"float:right;margin-left:"+r:"";return i=z(i)?i:[i],'<span style="'+s+";"+n+'">'+H(i,function(a){return ei(a)}).join("&nbsp;&nbsp;")+"</span>"}function TE(i,t,e){return i.markupStyleCreator.wrapRichTextStyle(t,e)}function JG(i,t,e,n,r){var s=[r],a=n?10:20;return e&&s.push({padding:[0,0,0,a],align:"right"}),i.markupStyleCreator.wrapRichTextStyle(z(t)?t.join("  "):t,s)}function QG(i,t){var e=i.getData().getItemVisual(t,"style"),n=e[i.visualDrawType];return vl(n)}function CE(i,t){var e=i.get("padding");return e??(t==="richText"?[8,10]:10)}var Wd=function(){function i(){this.richTextStyles={},this._nextStyleNameId=OT()}return i.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},i.prototype.makeTooltipMarker=function(t,e,n){var r=n==="richText"?this._generateStyleName():null,s=Gz({color:e,type:t,renderMode:n,markerId:r});return $(s)?s:(this.richTextStyles[r]=s.style,s.content)},i.prototype.wrapRichTextStyle=function(t,e){var n={};z(e)?A(e,function(s){return N(n,s)}):N(n,e);var r=this._generateStyleName();return this.richTextStyles[r]=n,"{"+r+"|"+t+"}"},i}();function t$(i){var t=i.series,e=i.dataIndex,n=i.multipleSeries,r=t.getData(),s=r.mapDimensionsAll("defaultedTooltip"),a=s.length,o=t.getRawValue(e),l=z(o),u=QG(t,e),h,c,f,d;if(a>1||l&&!a){var g=e$(o,t,e,s,u);h=g.inlineValues,c=g.inlineValueTypes,f=g.blocks,d=g.inlineValues[0]}else if(a){var p=r.getDimensionInfo(s[0]);d=h=ba(r,e,s[0]),c=p.type}else d=h=l?o[0]:o;var v=Lm(t),m=v&&t.name||"",y=r.getName(e),_=n?m:y;return Qr("section",{header:m,noHeader:n||!v,sortParam:d,blocks:[Qr("nameValue",{markerType:"item",markerColor:u,name:_,noName:!Oi(_),value:h,valueType:c,dataIndex:e})].concat(f||[])})}function e$(i,t,e,n,r){var s=t.getData(),a=Da(i,function(c,f,d){var g=s.getDimensionInfo(d);return c=c||g&&g.tooltip!==!1&&g.displayName!=null},!1),o=[],l=[],u=[];n.length?A(n,function(c){h(ba(s,e,c),c)}):A(i,h);function h(c,f){var d=s.getDimensionInfo(f);!d||d.otherDims.tooltip===!1||(a?u.push(Qr("nameValue",{markerType:"subItem",markerColor:r,name:d.displayName,value:c,valueType:d.type})):(o.push(c),l.push(d.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:u}}var Mn=Bt();function $u(i,t){return i.getName(t)||i.getId(t)}var i$="__universalTransitionEnabled",vf=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return t.prototype.init=function(e,n,r){this.seriesIndex=this.componentIndex,this.dataTask=Bo({count:r$,reset:s$}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,r);var s=Mn(this).sourceManager=new YG(this);s.prepareSource();var a=this.getInitialData(e,r);Z1(a,this),this.dataTask.context.data=a,Mn(this).dataBeforeProcessed=a,j1(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(e,n){var r=yl(this),s=r?df(e):{},a=this.subType;Tt.hasClass(a)&&(a+="Series"),ht(e,n.getTheme().get(this.subType)),ht(e,this.getDefaultOption()),wp(e,"label",["show"]),this.fillDataTextStyle(e.data),r&&Sa(e,s,r)},t.prototype.mergeOption=function(e,n){e=ht(this.option,e,!0),this.fillDataTextStyle(e.data);var r=yl(this);r&&Sa(this.option,e,r);var s=Mn(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(e,n);Z1(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Mn(this).dataBeforeProcessed=a,j1(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(e){if(e&&!ke(e))for(var n=["show"],r=0;r<e.length;r++)e[r]&&e[r].label&&wp(e[r],"label",n)},t.prototype.getInitialData=function(e,n){},t.prototype.appendData=function(e){var n=this.getRawData();n.appendData(e.data)},t.prototype.getData=function(e){var n=Bp(this);if(n){var r=n.context.data;return e==null?r:r.getLinkedData(e)}else return Mn(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var n=Bp(this);if(n){var r=n.context;r.outputData=e,n!==this.dataTask&&(r.data=e)}Mn(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return nt(e)},t.prototype.getSourceManager=function(){return Mn(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Mn(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var e=this.get("colorBy");return e||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,n,r){return t$({series:this,dataIndex:e,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(it.node&&!(e&&e.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,n,r){var s=this.ecModel,a=ny.prototype.getColorFromPalette.call(this,e,n,r);return a||(a=s.getColorFromPalette(e,n,r)),a},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,n){this._innerSelect(this.getData(n),e)},t.prototype.unselect=function(e,n){var r=this.option.selectedMap;if(r){var s=this.option.selectedMode,a=this.getData(n);if(s==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<e.length;o++){var l=e[o],u=$u(a,l);r[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(e,n){for(var r=[],s=0;s<e.length;s++)r[0]=e[s],this.isSelected(e[s],n)?this.unselect(r,n):this.select(r,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,n=kt(e),r=[],s=0;s<n.length;s++){var a=e[n[s]];a>=0&&r.push(a)}return r},t.prototype.isSelected=function(e,n){var r=this.option.selectedMap;if(!r)return!1;var s=this.getData(n);return(r==="all"||r[$u(s,e)])&&!s.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[i$])return!0;var e=this.option.universalTransition;return e?e===!0?!0:e&&e.enabled:!1},t.prototype._innerSelect=function(e,n){var r,s,a=this.option,o=a.selectedMode,l=n.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){Y(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,h=0;h<l;h++){var c=n[h],f=$u(e,c);u[f]=!0,this._selectedDataIndicesMap[f]=e.getRawIndex(c)}}else if(o==="single"||o===!0){var d=n[l-1],f=$u(e,d);a.selectedMap=(r={},r[f]=!0,r),this._selectedDataIndicesMap=(s={},s[f]=e.getRawIndex(d),s)}}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var n=[];e.hasItemOption&&e.each(function(r){var s=e.getRawDataItem(r);s&&s.selected&&n.push(r)}),n.length>0&&this._innerSelect(e,n)}},t.registerClass=function(e){return Tt.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(Tt);Ti(vf,vE);Ti(vf,ny);$T(vf,Tt);function j1(i){var t=i.name;Lm(i)||(i.name=n$(i)||t)}function n$(i){var t=i.getRawData(),e=t.mapDimensionsAll("seriesName"),n=[];return A(e,function(r){var s=t.getDimensionInfo(r);s.displayName&&n.push(s.displayName)}),n.join(" ")}function r$(i){return i.model.getRawData().count()}function s$(i){var t=i.model;return t.setData(t.getRawData().cloneShallow()),a$}function a$(i,t){t.outputData&&i.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Z1(i,t){A(rO(i.CHANGABLE_METHODS,i.DOWNSAMPLE_METHODS),function(e){i.wrapMethod(e,Et(o$,t))})}function o$(i,t){var e=Bp(i);return e&&e.setOutputEnd((t||this).count()),t}function Bp(i){var t=(i.ecModel||{}).scheduler,e=t&&t.getPipeline(i.uid);if(e){var n=e.currentTask;if(n){var r=n.agentStubMap;r&&(n=r.get(i.uid))}return n}}const Ta=vf;var uy=function(){function i(){this.group=new De,this.uid=af("viewComponent")}return i.prototype.init=function(t,e){},i.prototype.render=function(t,e,n,r){},i.prototype.dispose=function(t,e){},i.prototype.updateView=function(t,e,n,r){},i.prototype.updateLayout=function(t,e,n,r){},i.prototype.updateVisual=function(t,e,n,r){},i.prototype.toggleBlurSeries=function(t,e,n){},i.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},i}();Dm(uy);Qc(uy);const Hi=uy;function EE(){var i=Bt();return function(t){var e=i(t),n=t.pipelineContext,r=!!e.large,s=!!e.progressiveRender,a=e.large=!!(n&&n.large),o=e.progressiveRender=!!(n&&n.progressiveRender);return(r!==a||s!==o)&&"reset"}}var IE=Bt(),l$=EE(),hy=function(){function i(){this.group=new De,this.uid=af("viewChart"),this.renderTask=Bo({plan:u$,reset:h$}),this.renderTask.context={view:this}}return i.prototype.init=function(t,e){},i.prototype.render=function(t,e,n,r){},i.prototype.highlight=function(t,e,n,r){var s=t.getData(r&&r.dataType);s&&J1(s,r,"emphasis")},i.prototype.downplay=function(t,e,n,r){var s=t.getData(r&&r.dataType);s&&J1(s,r,"normal")},i.prototype.remove=function(t,e){this.group.removeAll()},i.prototype.dispose=function(t,e){},i.prototype.updateView=function(t,e,n,r){this.render(t,e,n,r)},i.prototype.updateLayout=function(t,e,n,r){this.render(t,e,n,r)},i.prototype.updateVisual=function(t,e,n,r){this.render(t,e,n,r)},i.prototype.eachRendered=function(t){rf(this.group,t)},i.markUpdateMethod=function(t,e){IE(t).updateMethod=e},i.protoInitialize=function(){var t=i.prototype;t.type="chart"}(),i}();function q1(i,t,e){i&&Ap(i)&&(t==="emphasis"?sc:ac)(i,e)}function J1(i,t,e){var n=Vl(i,t),r=t&&t.highlightKey!=null?pB(t.highlightKey):null;n!=null?A(ve(n),function(s){q1(i.getItemGraphicEl(s),e,r)}):i.eachItemGraphicEl(function(s){q1(s,e,r)})}Dm(hy);Qc(hy);function u$(i){return l$(i.model)}function h$(i){var t=i.model,e=i.ecModel,n=i.api,r=i.payload,s=t.pipelineContext.progressiveRender,a=i.view,o=r&&IE(r).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](t,e,n,r),c$[l]}var c$={incrementalPrepareRender:{progress:function(i,t){t.view.incrementalRender(i,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(i,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const ha=hy;var cc="\0__throttleOriginMethod",Q1="\0__throttleRate",tw="\0__throttleType";function cy(i,t,e){var n,r=0,s=0,a=null,o,l,u,h;t=t||0;function c(){s=new Date().getTime(),a=null,i.apply(l,u||[])}var f=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];n=new Date().getTime(),l=this,u=d;var p=h||t,v=h||e;h=null,o=n-(v?r:s)-p,clearTimeout(a),v?a=setTimeout(c,p):o>=0?c():a=setTimeout(c,-o),r=n};return f.clear=function(){a&&(clearTimeout(a),a=null)},f.debounceNextCall=function(d){h=d},f}function AE(i,t,e,n){var r=i[t];if(r){var s=r[cc]||r,a=r[tw],o=r[Q1];if(o!==e||a!==n){if(e==null||!n)return i[t]=s;r=i[t]=cy(s,e,n==="debounce"),r[cc]=s,r[tw]=n,r[Q1]=e}return r}}function zp(i,t){var e=i[t];e&&e[cc]&&(e.clear&&e.clear(),i[t]=e[cc])}var ew=Bt(),iw={itemStyle:dl(BC,!0),lineStyle:dl(NC,!0)},f$={lineStyle:"stroke",itemStyle:"fill"};function RE(i,t){var e=i.visualStyleMapper||iw[t];return e||(console.warn("Unknown style type '"+t+"'."),iw.itemStyle)}function ME(i,t){var e=i.visualDrawType||f$[t];return e||(console.warn("Unknown style type '"+t+"'."),"fill")}var d$={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,t){var e=i.getData(),n=i.visualStyleAccessPath||"itemStyle",r=i.getModel(n),s=RE(i,n),a=s(r),o=r.getShallow("decal");o&&(e.setVisual("decal",o),o.dirty=!0);var l=ME(i,n),u=a[l],h=rt(u)?u:null,c=a.fill==="auto"||a.stroke==="auto";if(!a[l]||h||c){var f=i.getColorFromPalette(i.name,null,t.getSeriesCount());a[l]||(a[l]=f,e.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||rt(a.fill)?f:a.fill,a.stroke=a.stroke==="auto"||rt(a.stroke)?f:a.stroke}if(e.setVisual("style",a),e.setVisual("drawType",l),!t.isSeriesFiltered(i)&&h)return e.setVisual("colorFromPalette",!1),{dataEach:function(d,g){var p=i.getDataParams(g),v=N({},a);v[l]=h(p),d.setItemVisual(g,"style",v)}}}},io=new oe,g$={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,t){if(!(i.ignoreStyleOnData||t.isSeriesFiltered(i))){var e=i.getData(),n=i.visualStyleAccessPath||"itemStyle",r=RE(i,n),s=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[n]){io.option=l[n];var u=r(io),h=a.ensureUniqueItemVisual(o,"style");N(h,u),io.option.decal&&(a.setItemVisual(o,"decal",io.option.decal),io.option.decal.dirty=!0),s in u&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},p$={performRawSeries:!0,overallReset:function(i){var t=nt();i.eachSeries(function(e){var n=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+n,s=t.get(r);s||(s={},t.set(r,s)),ew(e).scope=s}}),i.eachSeries(function(e){if(!(e.isColorBySeries()||i.isSeriesFiltered(e))){var n=e.getRawData(),r={},s=e.getData(),a=ew(e).scope,o=e.visualStyleAccessPath||"itemStyle",l=ME(e,o);s.each(function(u){var h=s.getRawIndex(u);r[h]=u}),n.each(function(u){var h=r[u],c=s.getItemVisual(h,"colorFromPalette");if(c){var f=s.ensureUniqueItemVisual(h,"style"),d=n.getName(u)||u+"",g=n.count();f[l]=e.getColorFromPalette(d,a,g)}})}})}},Vu=Math.PI;function v$(i,t){t=t||{},St(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new De,n=new Ut({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(n);var r=new Pe({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new Ut({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});e.add(s);var a;return t.showSpinner&&(a=new Vm({shape:{startAngle:-Vu/2,endAngle:-Vu/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Vu*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Vu*3/2}).delay(300).start("circularInOut"),e.add(a)),e.resize=function(){var o=r.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(i.getWidth()-l*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:l),h=i.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:h}),s.setShape({x:u-l,y:h-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:i.getWidth(),height:i.getHeight()})},e.resize(),e}var m$=function(){function i(t,e,n,r){this._stageTaskMap=nt(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r)}return i.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(n){var r=n.overallTask;r&&r.dirty()})},i.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),r=n.context,s=!e&&n.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=s?n.step:null,o=r&&r.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},i.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},i.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),r=t.getData(),s=r.count(),a=n.progressiveEnabled&&e.incrementalPrepareRender&&s>=n.threshold,o=t.get("large")&&s>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?s:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:o}},i.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=nt();t.eachSeries(function(r){var s=r.getProgressive(),a=r.uid;n.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:s&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),e._pipe(r,r.dataTask)})},i.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;A(this._allHandlers,function(r){var s=t.get(r.uid)||t.set(r.uid,{}),a="";pn(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,s,e,n),r.overallReset&&this._createOverallStageTask(r,s,e,n)},this)},i.prototype.prepareView=function(t,e,n,r){var s=t.renderTask,a=s.context;a.model=e,a.ecModel=n,a.api=r,s.__block=!t.incrementalPrepareRender,this._pipe(e,s)},i.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},i.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},i.prototype._performStageTasks=function(t,e,n,r){r=r||{};var s=!1,a=this;A(t,function(l,u){if(!(r.visualType&&r.visualType!==l.visualType)){var h=a._stageTaskMap.get(l.uid),c=h.seriesTaskMap,f=h.overallTask;if(f){var d,g=f.agentStubMap;g.each(function(v){o(r,v)&&(v.dirty(),d=!0)}),d&&f.dirty(),a.updatePayload(f,n);var p=a.getPerformArgs(f,r.block);g.each(function(v){v.perform(p)}),f.perform(p)&&(s=!0)}else c&&c.each(function(v,m){o(r,v)&&v.dirty();var y=a.getPerformArgs(v,r.block);y.skip=!l.performRawSeries&&e.isSeriesFiltered(v.context.model),a.updatePayload(v,n),v.perform(y)&&(s=!0)})}});function o(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=s||this.unfinished},i.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(n){e=n.dataTask.perform()||e}),this.unfinished=e||this.unfinished},i.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},i.prototype.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)},i.prototype._createSeriesStageTask=function(t,e,n,r){var s=this,a=e.seriesTaskMap,o=e.seriesTaskMap=nt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(h):l?n.eachRawSeriesByType(l,h):u&&u(n,r).each(h);function h(c){var f=c.uid,d=o.set(f,a&&a.get(f)||Bo({plan:S$,reset:b$,count:C$}));d.context={model:c,ecModel:n,api:r,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:s},s._pipe(c,d)}},i.prototype._createOverallStageTask=function(t,e,n,r){var s=this,a=e.overallTask=e.overallTask||Bo({reset:y$});a.context={ecModel:n,api:r,overallReset:t.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=nt(),u=t.seriesType,h=t.getTargetSeries,c=!0,f=!1,d="";pn(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,g):h?h(n,r).each(g):(c=!1,A(n.getSeries(),g));function g(p){var v=p.uid,m=l.set(v,o&&o.get(v)||(f=!0,Bo({reset:_$,onDirty:x$})));m.context={model:p,overallProgress:c},m.agent=a,m.__block=c,s._pipe(p,m)}f&&a.dirty()},i.prototype._pipe=function(t,e){var n=t.uid,r=this._pipelineMap.get(n);!r.head&&(r.head=e),r.tail&&r.tail.pipe(e),r.tail=e,e.__idxInPipeline=r.count++,e.__pipeline=r},i.wrapStageHandler=function(t,e){return rt(t)&&(t={overallReset:t,seriesType:E$(t)}),t.uid=af("stageHandler"),e&&(t.visualType=e),t},i}();function y$(i){i.overallReset(i.ecModel,i.api,i.payload)}function _$(i){return i.overallProgress&&w$}function w$(){this.agent.dirty(),this.getDownstream().dirty()}function x$(){this.agent&&this.agent.dirty()}function S$(i){return i.plan?i.plan(i.model,i.ecModel,i.api,i.payload):null}function b$(i){i.useClearVisual&&i.data.clearAllVisual();var t=i.resetDefines=ve(i.reset(i.model,i.ecModel,i.api,i.payload));return t.length>1?H(t,function(e,n){return LE(n)}):T$}var T$=LE(0);function LE(i){return function(t,e){var n=e.data,r=e.resetDefines[i];if(r&&r.dataEach)for(var s=t.start;s<t.end;s++)r.dataEach(n,s);else r&&r.progress&&r.progress(t,n)}}function C$(i){return i.data.count()}function E$(i){fc=null;try{i(wl,kE)}catch{}return fc}var wl={},kE={},fc;DE(wl,aE);DE(kE,oE);wl.eachSeriesByType=wl.eachRawSeriesByType=function(i){fc=i};wl.eachComponent=function(i){i.mainType==="series"&&i.subType&&(fc=i.subType)};function DE(i,t){for(var e in t.prototype)i[e]=Re}const PE=m$;var nw=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const I$={color:nw,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],nw]};var ce="#B9B8CE",rw="#100C2A",Wu=function(){return{axisLine:{lineStyle:{color:ce}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},sw=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],OE={darkMode:!0,color:sw,backgroundColor:rw,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ce}},textStyle:{color:ce},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ce}},dataZoom:{borderColor:"#71708A",textStyle:{color:ce},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ce}},timeline:{lineStyle:{color:ce},label:{color:ce},controlStyle:{color:ce,borderColor:ce}},calendar:{itemStyle:{color:rw},dayLabel:{color:ce},monthLabel:{color:ce},yearLabel:{color:ce}},timeAxis:Wu(),logAxis:Wu(),valueAxis:Wu(),categoryAxis:Wu(),line:{symbol:"circle"},graph:{color:sw},gauge:{title:{color:ce},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ce},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};OE.categoryAxis.splitLine.show=!1;const A$=OE;var R$=function(){function i(){}return i.prototype.normalizeQuery=function(t){var e={},n={},r={};if($(t)){var s=Fi(t);e.mainType=s.main||null,e.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};A(t,function(l,u){for(var h=!1,c=0;c<a.length;c++){var f=a[c],d=u.lastIndexOf(f);if(d>0&&d===u.length-f.length){var g=u.slice(0,d);g!=="data"&&(e.mainType=g,e[f.toLowerCase()]=l,h=!0)}}o.hasOwnProperty(u)&&(n[u]=l,h=!0),h||(r[u]=l)})}return{cptQuery:e,dataQuery:n,otherQuery:r}},i.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var r=n.targetEl,s=n.packedEvent,a=n.model,o=n.view;if(!a||!o)return!0;var l=e.cptQuery,u=e.dataQuery;return h(l,a,"mainType")&&h(l,a,"subType")&&h(l,a,"index","componentIndex")&&h(l,a,"name")&&h(l,a,"id")&&h(u,s,"name")&&h(u,s,"dataIndex")&&h(u,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,e.otherQuery,r,s));function h(c,f,d,g){return c[d]==null||f[g||d]===c[d]}},i.prototype.afterTrigger=function(){this.eventInfo=null},i}(),Gp=["symbol","symbolSize","symbolRotate","symbolOffset"],aw=Gp.concat(["symbolKeepAspect"]),M$={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,t){var e=i.getData();if(i.legendIcon&&e.setVisual("legendIcon",i.legendIcon),!i.hasSymbolVisual)return;for(var n={},r={},s=!1,a=0;a<Gp.length;a++){var o=Gp[a],l=i.get(o);rt(l)?(s=!0,r[o]=l):n[o]=l}if(n.symbol=n.symbol||i.defaultSymbol,e.setVisual(N({legendIcon:i.legendIcon||n.symbol,symbolKeepAspect:i.get("symbolKeepAspect")},n)),t.isSeriesFiltered(i))return;var u=kt(r);function h(c,f){for(var d=i.getRawValue(f),g=i.getDataParams(f),p=0;p<u.length;p++){var v=u[p];c.setItemVisual(f,v,r[v](d,g))}}return{dataEach:s?h:null}}},L$={createOnAllSeries:!0,performRawSeries:!0,reset:function(i,t){if(!i.hasSymbolVisual||t.isSeriesFiltered(i))return;var e=i.getData();function n(r,s){for(var a=r.getItemModel(s),o=0;o<aw.length;o++){var l=aw[o],u=a.getShallow(l,!0);u!=null&&r.setItemVisual(s,l,u)}}return{dataEach:e.hasItemOption?n:null}}};function k$(i,t,e){switch(e){case"color":var n=i.getItemVisual(t,"style");return n[i.getVisual("drawType")];case"opacity":return i.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return i.getItemVisual(t,e)}}function FE(i,t){switch(t){case"color":var e=i.getVisual("style");return e[i.getVisual("drawType")];case"opacity":return i.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return i.getVisual(t)}}function Ms(i,t,e,n,r){var s=i+t;e.isSilent(s)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,u=r.selected,h=0;h<u.length;h++)if(u[h].seriesIndex===o){var c=a.getData(),f=Vl(c,r.fromActionPayload);e.trigger(s,{type:s,seriesId:a.id,name:z(f)?c.getName(f[0]):c.getName(f),selected:$(l)?l:N({},l)})}})}function D$(i,t,e){i.on("selectchanged",function(n){var r=e.getModel();n.isFromClick?(Ms("map","selectchanged",t,r,n),Ms("pie","selectchanged",t,r,n)):n.fromAction==="select"?(Ms("map","selected",t,r,n),Ms("pie","selected",t,r,n)):n.fromAction==="unselect"&&(Ms("map","unselected",t,r,n),Ms("pie","unselected",t,r,n))})}function bo(i,t,e){for(var n;i&&!(t(i)&&(n=i,e));)i=i.__hostTarget||i.parent;return n}var P$=Math.round(Math.random()*9),O$=typeof Object.defineProperty=="function",F$=function(){function i(){this._id="__ec_inner_"+P$++}return i.prototype.get=function(t){return this._guard(t)[this._id]},i.prototype.set=function(t,e){var n=this._guard(t);return O$?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},i.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},i.prototype.has=function(t){return!!this._guard(t)[this._id]},i.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},i}();const N$=F$;var B$=_t.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(i,t){var e=t.cx,n=t.cy,r=t.width/2,s=t.height/2;i.moveTo(e,n-s),i.lineTo(e+r,n+s),i.lineTo(e-r,n+s),i.closePath()}}),z$=_t.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(i,t){var e=t.cx,n=t.cy,r=t.width/2,s=t.height/2;i.moveTo(e,n-s),i.lineTo(e+r,n),i.lineTo(e,n+s),i.lineTo(e-r,n),i.closePath()}}),G$=_t.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(i,t){var e=t.x,n=t.y,r=t.width/5*3,s=Math.max(r,t.height),a=r/2,o=a*a/(s-a),l=n-s+a+o,u=Math.asin(o/a),h=Math.cos(u)*a,c=Math.sin(u),f=Math.cos(u),d=a*.6,g=a*.7;i.moveTo(e-h,l+o),i.arc(e,l,a,Math.PI-u,Math.PI*2+u),i.bezierCurveTo(e+h-c*d,l+o+f*d,e,n-g,e,n),i.bezierCurveTo(e,n-g,e-h+c*d,l+o+f*d,e-h,l+o),i.closePath()}}),$$=_t.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(i,t){var e=t.height,n=t.width,r=t.x,s=t.y,a=n/3*2;i.moveTo(r,s),i.lineTo(r+a,s+e),i.lineTo(r,s+e/4*3),i.lineTo(r-a,s+e),i.lineTo(r,s),i.closePath()}}),V$={line:Zn,rect:Ut,roundRect:Ut,square:Ut,circle:Gm,diamond:z$,pin:G$,arrow:$$,triangle:B$},W$={line:function(i,t,e,n,r){r.x1=i,r.y1=t+n/2,r.x2=i+e,r.y2=t+n/2},rect:function(i,t,e,n,r){r.x=i,r.y=t,r.width=e,r.height=n},roundRect:function(i,t,e,n,r){r.x=i,r.y=t,r.width=e,r.height=n,r.r=Math.min(e,n)/4},square:function(i,t,e,n,r){var s=Math.min(e,n);r.x=i,r.y=t,r.width=s,r.height=s},circle:function(i,t,e,n,r){r.cx=i+e/2,r.cy=t+n/2,r.r=Math.min(e,n)/2},diamond:function(i,t,e,n,r){r.cx=i+e/2,r.cy=t+n/2,r.width=e,r.height=n},pin:function(i,t,e,n,r){r.x=i+e/2,r.y=t+n/2,r.width=e,r.height=n},arrow:function(i,t,e,n,r){r.x=i+e/2,r.y=t+n/2,r.width=e,r.height=n},triangle:function(i,t,e,n,r){r.cx=i+e/2,r.cy=t+n/2,r.width=e,r.height=n}},$p={};A(V$,function(i,t){$p[t]=new i});var Y$=_t.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(i,t,e){var n=ic(i,t,e),r=this.shape;return r&&r.symbolType==="pin"&&t.position==="inside"&&(n.y=e.y+e.height*.4),n},buildPath:function(i,t,e){var n=t.symbolType;if(n!=="none"){var r=$p[n];r||(n="rect",r=$p[n]),W$[n](t.x,t.y,t.width,t.height,r.shape),r.buildPath(i,r.shape,e)}}});function H$(i,t){if(this.type!=="image"){var e=this.style;this.__isEmptyBrush?(e.stroke=i,e.fill=t||"#fff",e.lineWidth=2):this.shape.symbolType==="line"?e.stroke=i:e.fill=i,this.markRedraw()}}function mf(i,t,e,n,r,s,a){var o=i.indexOf("empty")===0;o&&(i=i.substr(5,1).toLowerCase()+i.substr(6));var l;return i.indexOf("image://")===0?l=kC(i.slice(8),new pt(t,e,n,r),a?"center":"cover"):i.indexOf("path://")===0?l=Ym(i.slice(7),{},new pt(t,e,n,r),a?"center":"cover"):l=new Y$({shape:{symbolType:i,x:t,y:e,width:n,height:r}}),l.__isEmptyBrush=o,l.setColor=H$,s&&l.setColor(s),l}function NE(i){return z(i)||(i=[+i,+i]),[i[0]||0,i[1]||0]}function fy(i,t){if(i!=null)return z(i)||(i=[i,i]),[qt(i[0],t[0])||0,qt(et(i[1],i[0]),t[1])||0]}function Br(i){return isFinite(i)}function U$(i,t,e){var n=t.x==null?0:t.x,r=t.x2==null?1:t.x2,s=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*e.width+e.x,r=r*e.width+e.x,s=s*e.height+e.y,a=a*e.height+e.y),n=Br(n)?n:0,r=Br(r)?r:1,s=Br(s)?s:0,a=Br(a)?a:0;var o=i.createLinearGradient(n,s,r,a);return o}function X$(i,t,e){var n=e.width,r=e.height,s=Math.min(n,r),a=t.x==null?.5:t.x,o=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+e.x,o=o*r+e.y,l=l*s),a=Br(a)?a:.5,o=Br(o)?o:.5,l=l>=0&&Br(l)?l:.5;var u=i.createRadialGradient(a,o,0,a,o,l);return u}function Vp(i,t,e){for(var n=t.type==="radial"?X$(i,t,e):U$(i,t,e),r=t.colorStops,s=0;s<r.length;s++)n.addColorStop(r[s].offset,r[s].color);return n}function K$(i,t){if(i===t||!i&&!t)return!1;if(!i||!t||i.length!==t.length)return!0;for(var e=0;e<i.length;e++)if(i[e]!==t[e])return!0;return!1}function Yu(i){return parseInt(i,10)}function Hu(i,t,e){var n=["width","height"][t],r=["clientWidth","clientHeight"][t],s=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(e[n]!=null&&e[n]!=="auto")return parseFloat(e[n]);var o=document.defaultView.getComputedStyle(i);return(i[r]||Yu(o[n])||Yu(i.style[n]))-(Yu(o[s])||0)-(Yu(o[a])||0)|0}function j$(i,t){return!i||i==="solid"||!(t>0)?null:i==="dashed"?[4*t,2*t]:i==="dotted"?[t]:Ot(i)?[i]:z(i)?i:null}function BE(i){var t=i.style,e=t.lineDash&&t.lineWidth>0&&j$(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(e){var r=t.strokeNoScale&&i.getLineScale?i.getLineScale():1;r&&r!==1&&(e=H(e,function(s){return s/r}),n/=r)}return[e,n]}var Z$=new xa(!0);function dc(i){var t=i.stroke;return!(t==null||t==="none"||!(i.lineWidth>0))}function ow(i){return typeof i=="string"&&i!=="none"}function gc(i){var t=i.fill;return t!=null&&t!=="none"}function lw(i,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var e=i.globalAlpha;i.globalAlpha=t.fillOpacity*t.opacity,i.fill(),i.globalAlpha=e}else i.fill()}function uw(i,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var e=i.globalAlpha;i.globalAlpha=t.strokeOpacity*t.opacity,i.stroke(),i.globalAlpha=e}else i.stroke()}function Wp(i,t,e){var n=VT(t.image,t.__image,e);if(tf(n)){var r=i.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var s=new DOMMatrix;s.translateSelf(t.x||0,t.y||0),s.rotateSelf(0,0,(t.rotation||0)*sO),s.scaleSelf(t.scaleX||1,t.scaleY||1),r.setTransform(s)}return r}}function q$(i,t,e,n){var r,s=dc(e),a=gc(e),o=e.strokePercent,l=o<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var h=t.path||Z$,c=t.__dirty;if(!n){var f=e.fill,d=e.stroke,g=a&&!!f.colorStops,p=s&&!!d.colorStops,v=a&&!!f.image,m=s&&!!d.image,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0;(g||p)&&(x=t.getBoundingRect()),g&&(y=c?Vp(i,f,x):t.__canvasFillGradient,t.__canvasFillGradient=y),p&&(_=c?Vp(i,d,x):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),v&&(w=c||!t.__canvasFillPattern?Wp(i,f,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(S=c||!t.__canvasStrokePattern?Wp(i,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),g?i.fillStyle=y:v&&(w?i.fillStyle=w:a=!1),p?i.strokeStyle=_:m&&(S?i.strokeStyle=S:s=!1)}var b=t.getGlobalScale();h.setScale(b[0],b[1],t.segmentIgnoreThreshold);var T,C;i.setLineDash&&e.lineDash&&(r=BE(t),T=r[0],C=r[1]);var I=!0;(u||c&zs)&&(h.setDPR(i.dpr),l?h.setContext(null):(h.setContext(i),I=!1),h.reset(),t.buildPath(h,t.shape,n),h.toStatic(),t.pathUpdated()),I&&h.rebuildPath(i,l?o:1),T&&(i.setLineDash(T),i.lineDashOffset=C),n||(e.strokeFirst?(s&&uw(i,e),a&&lw(i,e)):(a&&lw(i,e),s&&uw(i,e))),T&&i.setLineDash([])}function J$(i,t,e){var n=t.__image=VT(e.image,t.__image,t,t.onload);if(!(!n||!tf(n))){var r=e.x||0,s=e.y||0,a=t.getWidth(),o=t.getHeight(),l=n.width/n.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=n.width,o=n.height),e.sWidth&&e.sHeight){var u=e.sx||0,h=e.sy||0;i.drawImage(n,u,h,e.sWidth,e.sHeight,r,s,a,o)}else if(e.sx&&e.sy){var u=e.sx,h=e.sy,c=a-u,f=o-h;i.drawImage(n,u,h,c,f,r,s,a,o)}else i.drawImage(n,r,s,a,o)}}function Q$(i,t,e){var n,r=e.text;if(r!=null&&(r+=""),r){i.font=e.font||Jr,i.textAlign=e.textAlign,i.textBaseline=e.textBaseline;var s=void 0,a=void 0;i.setLineDash&&e.lineDash&&(n=BE(t),s=n[0],a=n[1]),s&&(i.setLineDash(s),i.lineDashOffset=a),e.strokeFirst?(dc(e)&&i.strokeText(r,e.x,e.y),gc(e)&&i.fillText(r,e.x,e.y)):(gc(e)&&i.fillText(r,e.x,e.y),dc(e)&&i.strokeText(r,e.x,e.y)),s&&i.setLineDash([])}}var hw=["shadowBlur","shadowOffsetX","shadowOffsetY"],cw=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function zE(i,t,e,n,r){var s=!1;if(!n&&(e=e||{},t===e))return!1;if(n||t.opacity!==e.opacity){Ee(i,r),s=!0;var a=Math.max(Math.min(t.opacity,1),0);i.globalAlpha=isNaN(a)?Yr.opacity:a}(n||t.blend!==e.blend)&&(s||(Ee(i,r),s=!0),i.globalCompositeOperation=t.blend||Yr.blend);for(var o=0;o<hw.length;o++){var l=hw[o];(n||t[l]!==e[l])&&(s||(Ee(i,r),s=!0),i[l]=i.dpr*(t[l]||0))}return(n||t.shadowColor!==e.shadowColor)&&(s||(Ee(i,r),s=!0),i.shadowColor=t.shadowColor||Yr.shadowColor),s}function fw(i,t,e,n,r){var s=xl(t,r.inHover),a=n?null:e&&xl(e,r.inHover)||{};if(s===a)return!1;var o=zE(i,s,a,n,r);if((n||s.fill!==a.fill)&&(o||(Ee(i,r),o=!0),ow(s.fill)&&(i.fillStyle=s.fill)),(n||s.stroke!==a.stroke)&&(o||(Ee(i,r),o=!0),ow(s.stroke)&&(i.strokeStyle=s.stroke)),(n||s.opacity!==a.opacity)&&(o||(Ee(i,r),o=!0),i.globalAlpha=s.opacity==null?1:s.opacity),t.hasStroke()){var l=s.lineWidth,u=l/(s.strokeNoScale&&t.getLineScale?t.getLineScale():1);i.lineWidth!==u&&(o||(Ee(i,r),o=!0),i.lineWidth=u)}for(var h=0;h<cw.length;h++){var c=cw[h],f=c[0];(n||s[f]!==a[f])&&(o||(Ee(i,r),o=!0),i[f]=s[f]||c[1])}return o}function t3(i,t,e,n,r){return zE(i,xl(t,r.inHover),e&&xl(e,r.inHover),n,r)}function GE(i,t){var e=t.transform,n=i.dpr||1;e?i.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):i.setTransform(n,0,0,n,0,0)}function e3(i,t,e){for(var n=!1,r=0;r<i.length;r++){var s=i[r];n=n||s.isZeroArea(),GE(t,s),t.beginPath(),s.buildPath(t,s.shape),t.clip()}e.allClipped=n}function i3(i,t){return i&&t?i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]||i[4]!==t[4]||i[5]!==t[5]:!(!i&&!t)}var dw=1,gw=2,pw=3,vw=4;function n3(i){var t=gc(i),e=dc(i);return!(i.lineDash||!(+t^+e)||t&&typeof i.fill!="string"||e&&typeof i.stroke!="string"||i.strokePercent<1||i.strokeOpacity<1||i.fillOpacity<1)}function Ee(i,t){t.batchFill&&i.fill(),t.batchStroke&&i.stroke(),t.batchFill="",t.batchStroke=""}function xl(i,t){return t&&i.__hoverStyle||i.style}function $E(i,t){zr(i,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function zr(i,t,e,n){var r=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1)){t.__dirty&=~Ve,t.__isRendered=!1;return}var s=t.__clipPaths,a=e.prevElClipPaths,o=!1,l=!1;if((!a||K$(s,a))&&(a&&a.length&&(Ee(i,e),i.restore(),l=o=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),s&&s.length&&(Ee(i,e),i.save(),e3(s,i,e),o=!0),e.prevElClipPaths=s),e.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=e.prevEl;u||(l=o=!0);var h=t instanceof _t&&t.autoBatch&&n3(t.style);o||i3(r,u.transform)?(Ee(i,e),GE(i,t)):h||Ee(i,e);var c=xl(t,e.inHover);t instanceof _t?(e.lastDrawType!==dw&&(l=!0,e.lastDrawType=dw),fw(i,t,u,l,e),(!h||!e.batchFill&&!e.batchStroke)&&i.beginPath(),q$(i,t,c,h),h&&(e.batchFill=c.fill||"",e.batchStroke=c.stroke||"")):t instanceof Tp?(e.lastDrawType!==pw&&(l=!0,e.lastDrawType=pw),fw(i,t,u,l,e),Q$(i,t,c)):t instanceof Oa?(e.lastDrawType!==gw&&(l=!0,e.lastDrawType=gw),t3(i,t,u,l,e),J$(i,t,c)):t.getTemporalDisplayables&&(e.lastDrawType!==vw&&(l=!0,e.lastDrawType=vw),r3(i,t,e)),h&&n&&Ee(i,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}function r3(i,t,e){var n=t.getDisplayables(),r=t.getTemporalDisplayables();i.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:e.viewWidth,viewHeight:e.viewHeight,inHover:e.inHover},a,o;for(a=t.getCursor(),o=n.length;a<o;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),zr(i,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var u=0,h=r.length;u<h;u++){var l=r[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),zr(i,l,s,u===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,i.restore()}var Yd=new N$,mw=new Gl(100),yw=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Yp(i,t){if(i==="none")return null;var e=t.getDevicePixelRatio(),n=t.getZr(),r=n.painter.type==="svg";i.dirty&&Yd.delete(i);var s=Yd.get(i);if(s)return s;var a=St(i,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=r?1:1/e,Yd.set(i,o),i.dirty=!1,o;function l(u){for(var h=[e],c=!0,f=0;f<yw.length;++f){var d=a[yw[f]];if(d!=null&&!z(d)&&!$(d)&&!Ot(d)&&typeof d!="boolean"){c=!1;break}h.push(d)}var g;if(c){g=h.join(",")+(r?"-svg":"");var p=mw.get(g);p&&(r?u.svgElement=p:u.image=p)}var v=WE(a.dashArrayX),m=s3(a.dashArrayY),y=VE(a.symbol),_=a3(v),w=YE(m),S=!r&&ka.createCanvas(),x=r&&{tag:"g",attrs:{},key:"dcl",children:[]},b=C(),T;S&&(S.width=b.width*e,S.height=b.height*e,T=S.getContext("2d")),I(),c&&mw.put(g,S||x),u.image=S,u.svgElement=x,u.svgWidth=b.width,u.svgHeight=b.height;function C(){for(var E=1,R=0,M=_.length;R<M;++R)E=D0(E,_[R]);for(var k=1,R=0,M=y.length;R<M;++R)k=D0(k,y[R].length);E*=k;var L=w*_.length*y.length;return{width:Math.max(1,Math.min(E,a.maxTileWidth)),height:Math.max(1,Math.min(L,a.maxTileHeight))}}function I(){T&&(T.clearRect(0,0,S.width,S.height),a.backgroundColor&&(T.fillStyle=a.backgroundColor,T.fillRect(0,0,S.width,S.height)));for(var E=0,R=0;R<m.length;++R)E+=m[R];if(E<=0)return;for(var M=-w,k=0,L=0,D=0;M<b.height;){if(k%2===0){for(var O=L/2%y.length,F=0,B=0,G=0;F<b.width*2;){for(var K=0,R=0;R<v[D].length;++R)K+=v[D][R];if(K<=0)break;if(B%2===0){var P=(1-a.symbolSize)*.5,ct=F+v[D][B]*P,Z=M+m[k]*P,st=v[D][B]*a.symbolSize,Qt=m[k]*a.symbolSize,Xt=G/2%y[O].length;Rt(ct,Z,st,Qt,y[O][Xt])}F+=v[D][B],++G,++B,B===v[D].length&&(B=0)}++D,D===v.length&&(D=0)}M+=m[k],++L,++k,k===m.length&&(k=0)}function Rt(Dt,Mt,U,J,Ye){var Lt=r?1:e,xn=mf(Ye,Dt*Lt,Mt*Lt,U*Lt,J*Lt,a.color,a.symbolKeepAspect);if(r){var fi=n.painter.renderOneToVNode(xn);fi&&x.children.push(fi)}else $E(T,xn)}}}}function VE(i){if(!i||i.length===0)return[["rect"]];if($(i))return[[i]];for(var t=!0,e=0;e<i.length;++e)if(!$(i[e])){t=!1;break}if(t)return VE([i]);for(var n=[],e=0;e<i.length;++e)$(i[e])?n.push([i[e]]):n.push(i[e]);return n}function WE(i){if(!i||i.length===0)return[[0,0]];if(Ot(i)){var t=Math.ceil(i);return[[t,t]]}for(var e=!0,n=0;n<i.length;++n)if(!Ot(i[n])){e=!1;break}if(e)return WE([i]);for(var r=[],n=0;n<i.length;++n)if(Ot(i[n])){var t=Math.ceil(i[n]);r.push([t,t])}else{var t=H(i[n],function(o){return Math.ceil(o)});t.length%2===1?r.push(t.concat(t)):r.push(t)}return r}function s3(i){if(!i||typeof i=="object"&&i.length===0)return[0,0];if(Ot(i)){var t=Math.ceil(i);return[t,t]}var e=H(i,function(n){return Math.ceil(n)});return i.length%2?e.concat(e):e}function a3(i){return H(i,function(t){return YE(t)})}function YE(i){for(var t=0,e=0;e<i.length;++e)t+=i[e];return i.length%2===1?t*2:t}function o3(i,t){i.eachRawSeries(function(e){if(!i.isSeriesFiltered(e)){var n=e.getData();n.hasItemVisual()&&n.each(function(a){var o=n.getItemVisual(a,"decal");if(o){var l=n.ensureUniqueItemVisual(a,"style");l.decal=Yp(o,t)}});var r=n.getVisual("decal");if(r){var s=n.getVisual("style");s.decal=Yp(r,t)}}})}var l3=new Xi;const xi=l3;var HE={};function u3(i,t){HE[i]=t}function h3(i){return HE[i]}var c3=1,f3=800,d3=900,g3=1e3,p3=2e3,v3=5e3,UE=1e3,m3=1100,dy=2e3,XE=3e3,y3=4e3,yf=4500,_3=4600,w3=5e3,x3=6e3,KE=7e3,S3={PROCESSOR:{FILTER:g3,SERIES_FILTER:f3,STATISTIC:v3},VISUAL:{LAYOUT:UE,PROGRESSIVE_LAYOUT:m3,GLOBAL:dy,CHART:XE,POST_CHART_LAYOUT:_3,COMPONENT:y3,BRUSH:w3,CHART_ITEM:yf,ARIA:x3,DECAL:KE}},ee="__flagInMainProcess",xe="__pendingUpdate",Hd="__needsUpdateStatus",_w=/^[a-zA-Z0-9_]+$/,Ud="__connectUpdateStatus",ww=0,b3=1,T3=2;function jE(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isDisposed()){this.id;return}return qE(this,i,t)}}function ZE(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qE(this,i,t)}}function qE(i,t,e){return e[0]=e[0]&&e[0].toLowerCase(),Xi.prototype[t].apply(i,e)}var JE=function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Xi),QE=JE.prototype;QE.on=ZE("on");QE.off=ZE("off");var Ls,Xd,Uu,Ln,Kd,jd,Zd,no,ro,xw,Sw,qd,bw,Xu,Tw,tI,je,Cw,eI=function(i){j(t,i);function t(e,n,r){var s=i.call(this,new R$)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],r=r||{},$(n)&&(n=iI[n]),s._dom=e;var a="canvas",o="auto",l=!1;r.ssr;var u=s._zr=M0(e,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:et(r.useDirtyRect,l),useCoarsePointer:et(r.useCoarsePointer,o),pointerSize:r.pointerSize});s._ssr=r.ssr,s._throttledZrFlush=cy(Pt(u.flush,u),17),n=at(n),n&&uE(n,!0),s._theme=n,s._locale=Dz(r.locale||GC),s._coordSysMgr=new ry;var h=s._api=Tw(s);function c(f,d){return f.__prio-d.__prio}return mh(vc,c),mh(Hp,c),s._scheduler=new PE(s,h,Hp,vc),s._messageCenter=new JE,s._initEvents(),s.resize=Pt(s.resize,s),u.animation.on("frame",s._onframe,s),xw(u,s),Sw(u,s),np(s),s}return t.prototype._onframe=function(){if(!this._disposed){Cw(this);var e=this._scheduler;if(this[xe]){var n=this[xe].silent;this[ee]=!0;try{Ls(this),Ln.update.call(this,null,this[xe].updateParams)}catch(l){throw this[ee]=!1,this[xe]=null,l}this._zr.flush(),this[ee]=!1,this[xe]=null,no.call(this,n),ro.call(this,n)}else if(e.unfinished){var r=c3,s=this._model,a=this._api;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(s),e.performDataProcessorTasks(s),jd(this,s),e.performVisualTasks(s),Xu(this,this._model,a,"remain",{}),r-=+new Date-o}while(r>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,n,r){if(!this[ee]){if(this._disposed){this.id;return}var s,a,o;if(Y(n)&&(r=n.lazyUpdate,s=n.silent,a=n.replaceMerge,o=n.transition,n=n.notMerge),this[ee]=!0,!this._model||n){var l=new dG(this._api),u=this._theme,h=this._model=new aE;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,u,this._locale,l)}this._model.setOption(e,{replaceMerge:a},Up);var c={seriesTransition:o,optionChanged:!0};if(r)this[xe]={silent:s,updateParams:c},this[ee]=!1,this.getZr().wakeUp();else{try{Ls(this),Ln.update.call(this,null,c)}catch(f){throw this[xe]=null,this[ee]=!1,f}this._ssr||this._zr.flush(),this[xe]=null,this[ee]=!1,no.call(this,s),ro.call(this,s)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||it.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var n=this._zr.painter;return n.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(it.svgSupported){var e=this._zr,n=e.storage.getDisplayList();return A(n,function(r){r.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(this._disposed){this.id;return}e=e||{};var n=e.excludeComponents,r=this._model,s=[],a=this;A(n,function(l){r.eachComponent({mainType:l},function(u){var h=a._componentsMap[u.__viewId];h.group.ignore||(s.push(h),h.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return A(s,function(l){l.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(e){if(this._disposed){this.id;return}var n=e.type==="svg",r=this.group,s=Math.min,a=Math.max,o=1/0;if(Ew[r]){var l=o,u=o,h=-o,c=-o,f=[],d=e&&e.pixelRatio||this.getDevicePixelRatio();A(Go,function(_,w){if(_.group===r){var S=n?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(at(e)),x=_.getDom().getBoundingClientRect();l=s(x.left,l),u=s(x.top,u),h=a(x.right,h),c=a(x.bottom,c),f.push({dom:S,left:x.left,top:x.top})}}),l*=d,u*=d,h*=d,c*=d;var g=h-l,p=c-u,v=ka.createCanvas(),m=M0(v,{renderer:n?"svg":"canvas"});if(m.resize({width:g,height:p}),n){var y="";return A(f,function(_){var w=_.left-l,S=_.top-u;y+='<g transform="translate('+w+","+S+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return e.connectedBackgroundColor&&m.add(new Ut({shape:{x:0,y:0,width:g,height:p},style:{fill:e.connectedBackgroundColor}})),A(f,function(_){var w=new Oa({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(w)}),m.refreshImmediately(),v.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)},t.prototype.convertToPixel=function(e,n){return Kd(this,"convertToPixel",e,n)},t.prototype.convertFromPixel=function(e,n){return Kd(this,"convertFromPixel",e,n)},t.prototype.containPixel=function(e,n){if(this._disposed){this.id;return}var r=this._model,s,a=md(r,e);return A(a,function(o,l){l.indexOf("Models")>=0&&A(o,function(u){var h=u.coordinateSystem;if(h&&h.containPoint)s=s||!!h.containPoint(n);else if(l==="seriesModels"){var c=this._chartsMap[u.__viewId];c&&c.containPoint&&(s=s||c.containPoint(n,u))}},this)},this),!!s},t.prototype.getVisual=function(e,n){var r=this._model,s=md(r,e,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?k$(o,l,n):FE(o,n)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;A(C3,function(n){var r=function(s){var a=e.getModel(),o=s.target,l,u=n==="globalout";if(u?l={}:o&&bo(o,function(g){var p=dt(g);if(p&&p.dataIndex!=null){var v=p.dataModel||a.getSeriesByIndex(p.seriesIndex);return l=v&&v.getDataParams(p.dataIndex,p.dataType,o)||{},!0}else if(p.eventData)return l=N({},p.eventData),!0},!0),l){var h=l.componentType,c=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",c=l.seriesIndex);var f=h&&c!=null&&a.getComponent(h,c),d=f&&e[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=s,l.type=n,e._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:d},e.trigger(n,l)}};r.zrEventfulCallAtLast=!0,e._zr.on(n,r,e)}),A(zo,function(n,r){e._messageCenter.on(r,function(s){this.trigger(r,s)},e)}),A(["selectchanged"],function(n){e._messageCenter.on(n,function(r){this.trigger(n,r)},e)}),D$(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var e=this.getDom();e&&zT(this.getDom(),py,"");var n=this,r=n._api,s=n._model;A(n._componentsViews,function(a){a.dispose(s,r)}),A(n._chartsViews,function(a){a.dispose(s,r)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Go[n.id]},t.prototype.resize=function(e){if(!this[ee]){if(this._disposed){this.id;return}this._zr.resize(e);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var r=n.resetOption("media"),s=e&&e.silent;this[xe]&&(s==null&&(s=this[xe].silent),r=!0,this[xe]=null),this[ee]=!0;try{r&&Ls(this),Ln.update.call(this,{type:"resize",animation:N({duration:0},e&&e.animation)})}catch(a){throw this[ee]=!1,a}this[ee]=!1,no.call(this,s),ro.call(this,s)}}},t.prototype.showLoading=function(e,n){if(this._disposed){this.id;return}if(Y(e)&&(n=e,e=""),e=e||"default",this.hideLoading(),!!Xp[e]){var r=Xp[e](this._api,n),s=this._zr;this._loadingFX=r,s.add(r)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var n=N({},e);return n.type=zo[e.type],n},t.prototype.dispatchAction=function(e,n){if(this._disposed){this.id;return}if(Y(n)||(n={silent:!!n}),!!pc[e.type]&&this._model){if(this[ee]){this._pendingActions.push(e);return}var r=n.silent;Zd.call(this,e,r);var s=n.flush;s?this._zr.flush():s!==!1&&it.browser.weChat&&this._throttledZrFlush(),no.call(this,r),ro.call(this,r)}},t.prototype.updateLabelLayout=function(){xi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){this.id;return}var n=e.seriesIndex,r=this.getModel(),s=r.getSeriesByIndex(n);s.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Ls=function(c){var f=c._scheduler;f.restorePipelines(c._model),f.prepareStageTasks(),Xd(c,!0),Xd(c,!1),f.plan()},Xd=function(c,f){for(var d=c._model,g=c._scheduler,p=f?c._componentsViews:c._chartsViews,v=f?c._componentsMap:c._chartsMap,m=c._zr,y=c._api,_=0;_<p.length;_++)p[_].__alive=!1;f?d.eachComponent(function(x,b){x!=="series"&&w(b)}):d.eachSeries(w);function w(x){var b=x.__requireNewView;x.__requireNewView=!1;var T="_ec_"+x.id+"_"+x.type,C=!b&&v[T];if(!C){var I=Fi(x.type),E=f?Hi.getClass(I.main,I.sub):ha.getClass(I.sub);C=new E,C.init(d,y),v[T]=C,p.push(C),m.add(C.group)}x.__viewId=C.__id=T,C.__alive=!0,C.__model=x,C.group.__ecComponentInfo={mainType:x.mainType,index:x.componentIndex},!f&&g.prepareView(C,x,d,y)}for(var _=0;_<p.length;){var S=p[_];S.__alive?_++:(!f&&S.renderTask.dispose(),m.remove(S.group),S.dispose(d,y),p.splice(_,1),v[S.__id]===S&&delete v[S.__id],S.__id=S.group.__ecComponentInfo=null)}},Uu=function(c,f,d,g,p){var v=c._model;if(v.setUpdatePayload(d),!g){A([].concat(c._componentsViews).concat(c._chartsViews),S);return}var m={};m[g+"Id"]=d[g+"Id"],m[g+"Index"]=d[g+"Index"],m[g+"Name"]=d[g+"Name"];var y={mainType:g,query:m};p&&(y.subType=p);var _=d.excludeSeriesId,w;_!=null&&(w=nt(),A(ve(_),function(x){var b=$i(x,null);b!=null&&w.set(b,!0)})),v&&v.eachComponent(y,function(x){var b=w&&w.get(x.id)!=null;if(!b)if(s1(d))if(x instanceof Ta)d.type===Hr&&!d.notBlur&&!x.get(["emphasis","disabled"])&&aB(x,d,c._api);else{var T=zm(x.mainType,x.componentIndex,d.name,c._api),C=T.focusSelf,I=T.dispatchers;d.type===Hr&&C&&!d.notBlur&&Ep(x.mainType,x.componentIndex,c._api),I&&A(I,function(E){d.type===Hr?sc(E):ac(E)})}else Rp(d)&&x instanceof Ta&&(uB(x,d,c._api),n1(x),je(c))},c),v&&v.eachComponent(y,function(x){var b=w&&w.get(x.id)!=null;b||S(c[g==="series"?"_chartsMap":"_componentsMap"][x.__viewId])},c);function S(x){x&&x.__alive&&x[f]&&x[f](x.__model,v,c._api,d)}},Ln={prepareAndUpdate:function(c){Ls(this),Ln.update.call(this,c,{optionChanged:c.newOption!=null})},update:function(c,f){var d=this._model,g=this._api,p=this._zr,v=this._coordSysMgr,m=this._scheduler;if(d){d.setUpdatePayload(c),m.restoreData(d,c),m.performSeriesTasks(d),v.create(d,g),m.performDataProcessorTasks(d,c),jd(this,d),v.update(d,g),e(d),m.performVisualTasks(d,c),qd(this,d,g,c,f);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");p.setBackgroundColor(y),_!=null&&_!=="auto"&&p.setDarkMode(_),xi.trigger("afterupdate",d,g)}},updateTransform:function(c){var f=this,d=this._model,g=this._api;if(d){d.setUpdatePayload(c);var p=[];d.eachComponent(function(m,y){if(m!=="series"){var _=f.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var w=_.updateTransform(y,d,g,c);w&&w.update&&p.push(_)}else p.push(_)}});var v=nt();d.eachSeries(function(m){var y=f._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,g,c);_&&_.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),e(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0,dirtyMap:v}),Xu(this,d,g,c,{},v),xi.trigger("afterupdate",d,g)}},updateView:function(c){var f=this._model;f&&(f.setUpdatePayload(c),ha.markUpdateMethod(c,"updateView"),e(f),this._scheduler.performVisualTasks(f,c,{setDirty:!0}),qd(this,f,this._api,c,{}),xi.trigger("afterupdate",f,this._api))},updateVisual:function(c){var f=this,d=this._model;d&&(d.setUpdatePayload(c),d.eachSeries(function(g){g.getData().clearAllVisual()}),ha.markUpdateMethod(c,"updateVisual"),e(d),this._scheduler.performVisualTasks(d,c,{visualType:"visual",setDirty:!0}),d.eachComponent(function(g,p){if(g!=="series"){var v=f.getViewOfComponentModel(p);v&&v.__alive&&v.updateVisual(p,d,f._api,c)}}),d.eachSeries(function(g){var p=f._chartsMap[g.__viewId];p.updateVisual(g,d,f._api,c)}),xi.trigger("afterupdate",d,this._api))},updateLayout:function(c){Ln.update.call(this,c)}},Kd=function(c,f,d,g){if(c._disposed){c.id;return}for(var p=c._model,v=c._coordSysMgr.getCoordinateSystems(),m,y=md(p,d),_=0;_<v.length;_++){var w=v[_];if(w[f]&&(m=w[f](p,y,g))!=null)return m}},jd=function(c,f){var d=c._chartsMap,g=c._scheduler;f.eachSeries(function(p){g.updateStreamModes(p,d[p.__viewId])})},Zd=function(c,f){var d=this,g=this.getModel(),p=c.type,v=c.escapeConnect,m=pc[p],y=m.actionInfo,_=(y.update||"update").split(":"),w=_.pop(),S=_[0]!=null&&Fi(_[0]);this[ee]=!0;var x=[c],b=!1;c.batch&&(b=!0,x=H(c.batch,function(k){return k=St(N({},k),c),k.batch=null,k}));var T=[],C,I=Rp(c),E=s1(c);if(E&&uC(this._api),A(x,function(k){if(C=m.action(k,d._model,d._api),C=C||N({},k),C.type=y.event||C.type,T.push(C),E){var L=km(c),D=L.queryOptionMap,O=L.mainTypeSpecified,F=O?D.keys()[0]:"series";Uu(d,w,k,F),je(d)}else I?(Uu(d,w,k,"series"),je(d)):S&&Uu(d,w,k,S.main,S.sub)}),w!=="none"&&!E&&!I&&!S)try{this[xe]?(Ls(this),Ln.update.call(this,c),this[xe]=null):Ln[w].call(this,c)}catch(k){throw this[ee]=!1,k}if(b?C={type:y.event||p,escapeConnect:v,batch:T}:C=T[0],this[ee]=!1,!f){var R=this._messageCenter;if(R.trigger(C.type,C),I){var M={type:"selectchanged",escapeConnect:v,selected:hB(g),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};R.trigger(M.type,M)}}},no=function(c){for(var f=this._pendingActions;f.length;){var d=f.shift();Zd.call(this,d,c)}},ro=function(c){!c&&this.trigger("updated")},xw=function(c,f){c.on("rendered",function(d){f.trigger("rendered",d),c.animation.isFinished()&&!f[xe]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},Sw=function(c,f){c.on("mouseover",function(d){var g=d.target,p=bo(g,Ap);p&&(oB(p,d,f._api),je(f))}).on("mouseout",function(d){var g=d.target,p=bo(g,Ap);p&&(lB(p,d,f._api),je(f))}).on("click",function(d){var g=d.target,p=bo(g,function(y){return dt(y).dataIndex!=null},!0);if(p){var v=p.selected?"unselect":"select",m=dt(p);f._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function e(c){c.clearColorPalette(),c.eachSeries(function(f){f.clearColorPalette()})}function n(c){var f=[],d=[],g=!1;if(c.eachComponent(function(y,_){var w=_.get("zlevel")||0,S=_.get("z")||0,x=_.getZLevelKey();g=g||!!x,(y==="series"?d:f).push({zlevel:w,z:S,idx:_.componentIndex,type:y,key:x})}),g){var p=f.concat(d),v,m;mh(p,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),A(p,function(y){var _=c.getComponent(y.type,y.idx),w=y.zlevel,S=y.key;v!=null&&(w=Math.max(v,w)),S?(w===v&&S!==m&&w++,m=S):m&&(w===v&&w++,m=""),v=w,_.setZLevel(w)})}}qd=function(c,f,d,g,p){n(f),bw(c,f,d,g,p),A(c._chartsViews,function(v){v.__alive=!1}),Xu(c,f,d,g,p),A(c._chartsViews,function(v){v.__alive||v.remove(f,d)})},bw=function(c,f,d,g,p,v){A(v||c._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,f,d,g),o(y,m),h(y,m)})},Xu=function(c,f,d,g,p,v){var m=c._scheduler;p=N(p||{},{updatedSeries:f.getSeries()}),xi.trigger("series:beforeupdate",f,d,p);var y=!1;f.eachSeries(function(_){var w=c._chartsMap[_.__viewId];w.__alive=!0;var S=w.renderTask;m.updatePayload(S,g),u(_,w),v&&v.get(_.uid)&&S.dirty(),S.perform(m.getPerformArgs(S))&&(y=!0),w.group.silent=!!_.get("silent"),a(_,w),n1(_)}),m.unfinished=y||m.unfinished,xi.trigger("series:layoutlabels",f,d,p),xi.trigger("series:transition",f,d,p),f.eachSeries(function(_){var w=c._chartsMap[_.__viewId];o(_,w),h(_,w)}),s(c,f),xi.trigger("series:afterupdate",f,d,p)},je=function(c){c[Hd]=!0,c.getZr().wakeUp()},Cw=function(c){c[Hd]&&(c.getZr().storage.traverse(function(f){Oo(f)||r(f)}),c[Hd]=!1)};function r(c){for(var f=[],d=c.currentStates,g=0;g<d.length;g++){var p=d[g];p==="emphasis"||p==="blur"||p==="select"||f.push(p)}c.selected&&c.states.select&&f.push("select"),c.hoverState===Fm&&c.states.emphasis?f.push("emphasis"):c.hoverState===Om&&c.states.blur&&f.push("blur"),c.useStates(f)}function s(c,f){var d=c._zr,g=d.storage,p=0;g.traverse(function(v){v.isGroup||p++}),p>f.get("hoverLayerThreshold")&&!it.node&&!it.worker&&f.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=c._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(c,f){var d=c.get("blendMode")||null;f.eachRendered(function(g){g.isGroup||(g.style.blend=d)})}function o(c,f){if(!c.preventAutoZ){var d=c.get("z")||0,g=c.get("zlevel")||0;f.eachRendered(function(p){return l(p,d,g,-1/0),!0})}}function l(c,f,d,g){var p=c.getTextContent(),v=c.getTextGuideLine(),m=c.isGroup;if(m)for(var y=c.childrenRef(),_=0;_<y.length;_++)g=Math.max(l(y[_],f,d,g),g);else c.z=f,c.zlevel=d,g=Math.max(c.z2,g);if(p&&(p.z=f,p.zlevel=d,isFinite(g)&&(p.z2=g+2)),v){var w=c.textGuideLineConfig;v.z=f,v.zlevel=d,isFinite(g)&&(v.z2=g+(w&&w.showAbove?1:-1))}return g}function u(c,f){f.eachRendered(function(d){if(!Oo(d)){var g=d.getTextContent(),p=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function h(c,f){var d=c.getModel("stateAnimation"),g=c.isAnimationEnabled(),p=d.get("duration"),v=p>0?{duration:p,delay:d.get("delay"),easing:d.get("easing")}:null;f.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Oo(m))return;if(m instanceof _t&&vB(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=v;var _=m.getTextContent(),w=m.getTextGuideLine();_&&(_.stateTransition=v),w&&(w.stateTransition=v)}m.__dirty&&r(m)}})}Tw=function(c){return new(function(f){j(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(g){for(;g;){var p=g.__ecComponentInfo;if(p!=null)return c._model.getComponent(p.mainType,p.index);g=g.parent}},d.prototype.enterEmphasis=function(g,p){sc(g,p),je(c)},d.prototype.leaveEmphasis=function(g,p){ac(g,p),je(c)},d.prototype.enterBlur=function(g){sC(g),je(c)},d.prototype.leaveBlur=function(g){Bm(g),je(c)},d.prototype.enterSelect=function(g){aC(g),je(c)},d.prototype.leaveSelect=function(g){oC(g),je(c)},d.prototype.getModel=function(){return c.getModel()},d.prototype.getViewOfComponentModel=function(g){return c.getViewOfComponentModel(g)},d.prototype.getViewOfSeriesModel=function(g){return c.getViewOfSeriesModel(g)},d}(oE))(c)},tI=function(c){function f(d,g){for(var p=0;p<d.length;p++){var v=d[p];v[Ud]=g}}A(zo,function(d,g){c._messageCenter.on(g,function(p){if(Ew[c.group]&&c[Ud]!==ww){if(p&&p.escapeConnect)return;var v=c.makeActionFromEvent(p),m=[];A(Go,function(y){y!==c&&y.group===c.group&&m.push(y)}),f(m,ww),A(m,function(y){y[Ud]!==b3&&y.dispatchAction(v)}),f(m,T3)}})})}}(),t}(Xi),gy=eI.prototype;gy.on=jE("on");gy.off=jE("off");gy.one=function(i,t,e){var n=this;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];t&&t.apply&&t.apply(this,s),n.off(i,r)}this.on.call(this,i,r,e)};var C3=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var pc={},zo={},Hp=[],Up=[],vc=[],iI={},Xp={},Go={},Ew={},E3=+new Date-0,py="_echarts_instance_";function I3(i,t,e){var n=!(e&&e.ssr);if(n){var r=A3(i);if(r)return r}var s=new eI(i,t,e);return s.id="ec_"+E3++,Go[s.id]=s,n&&zT(i,py,s.id),tI(s),xi.trigger("afterinit",s),s}function A3(i){return Go[XF(i,py)]}function nI(i,t){iI[i]=t}function rI(i){gt(Up,i)<0&&Up.push(i)}function sI(i,t){my(Hp,i,t,p3)}function R3(i){vy("afterinit",i)}function M3(i){vy("afterupdate",i)}function vy(i,t){xi.on(i,t)}function Ba(i,t,e){rt(t)&&(e=t,t="");var n=Y(i)?i.type:[i,i={event:t}][0];i.event=(i.event||n).toLowerCase(),t=i.event,!zo[t]&&(pn(_w.test(n)&&_w.test(t)),pc[n]||(pc[n]={action:e,actionInfo:i}),zo[t]=n)}function L3(i,t){ry.register(i,t)}function k3(i,t){my(vc,i,t,UE,"layout")}function ss(i,t){my(vc,i,t,XE,"visual")}var Iw=[];function my(i,t,e,n,r){if((rt(t)||Y(t))&&(e=t,t=n),!(gt(Iw,e)>=0)){Iw.push(e);var s=PE.wrapStageHandler(e,r);s.__prio=t,s.__raw=e,i.push(s)}}function aI(i,t){Xp[i]=t}function D3(i,t,e){var n=h3("registerMap");n&&n(i,t,e)}var P3=BG;ss(dy,d$);ss(yf,g$);ss(yf,p$);ss(dy,M$);ss(yf,L$);ss(KE,o3);rI(uE);sI(d3,xG);aI("default",v$);Ba({type:Hr,event:Hr,update:Hr},Re);Ba({type:Th,event:Th,update:Th},Re);Ba({type:ko,event:ko,update:ko},Re);Ba({type:Ch,event:Ch,update:Ch},Re);Ba({type:Do,event:Do,update:Do},Re);nI("light",I$);nI("dark",A$);function so(i){return i==null?0:i.length||1}function Aw(i){return i}var O3=function(){function i(t,e,n,r,s,a){this._old=t,this._new=e,this._oldKeyGetter=n||Aw,this._newKeyGetter=r||Aw,this.context=s,this._diffModeMultiple=a==="multiple"}return i.prototype.add=function(t){return this._add=t,this},i.prototype.update=function(t){return this._update=t,this},i.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},i.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},i.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},i.prototype.remove=function(t){return this._remove=t,this},i.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},i.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},r=new Array(t.length),s=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,n,s,"_newKeyGetter");for(var a=0;a<t.length;a++){var o=r[a],l=n[o],u=so(l);if(u>1){var h=l.shift();l.length===1&&(n[o]=l[0]),this._update&&this._update(h,a)}else u===1?(n[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,n)},i.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},r={},s=[],a=[];this._initIndexMap(t,n,s,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],u=n[l],h=r[l],c=so(u),f=so(h);if(c>1&&f===1)this._updateManyToOne&&this._updateManyToOne(h,u),r[l]=null;else if(c===1&&f>1)this._updateOneToMany&&this._updateOneToMany(h,u),r[l]=null;else if(c===1&&f===1)this._update&&this._update(h,u),r[l]=null;else if(c>1&&f>1)this._updateManyToMany&&this._updateManyToMany(h,u),r[l]=null;else if(c>1)for(var d=0;d<c;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,r)},i.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[r],a=so(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);e[r]=null}},i.prototype._initIndexMap=function(t,e,n,r){for(var s=this._diffModeMultiple,a=0;a<t.length;a++){var o="_ec_"+this[r](t[a],a);if(s||(n[a]=o),!!e){var l=e[o],u=so(l);u===0?(e[o]=a,s&&n.push(o)):u===1?e[o]=[l,a]:l.push(a)}}},i}();const F3=O3;var N3=function(){function i(t,e){this._encode=t,this._schema=e}return i.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},i.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},i}();function B3(i,t){var e={},n=e.encode={},r=nt(),s=[],a=[],o={};A(i.dimensions,function(f){var d=i.getDimensionInfo(f),g=d.coordDim;if(g){var p=d.coordDimIndex;Jd(n,g)[p]=f,d.isExtraCoord||(r.set(g,1),G3(d.type)&&(s[0]=f),Jd(o,g)[p]=i.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(f)}tE.each(function(v,m){var y=Jd(n,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};r.each(function(f,d){var g=n[d];u[d]=g[0],l=l.concat(g)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=H(l,function(f){return i.getDimensionInfo(f).storeDimIndex}),e.encodeFirstDimNotExtra=u;var h=n.label;h&&h.length&&(s=h.slice());var c=n.tooltip;return c&&c.length?a=c.slice():a.length||(a=s.slice()),n.defaultedLabel=s,n.defaultedTooltip=a,e.userOutput=new N3(o,t),e}function Jd(i,t){return i.hasOwnProperty(t)||(i[t]=[]),i[t]}function z3(i){return i==="category"?"ordinal":i==="time"?"time":"float"}function G3(i){return!(i==="ordinal"||i==="time")}var $3=function(){function i(t){this.otherDims={},t!=null&&N(this,t)}return i}();const Ah=$3;var V3=Bt(),W3={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},oI=function(){function i(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return i.prototype.isDimensionOmitted=function(){return this._dimOmitted},i.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=hI(this.source)))},i.prototype.getSourceDimensionIndex=function(t){return et(this._dimNameMap.get(t),-1)},i.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},i.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=cE(this.source),n=!cI(t),r="",s=[],a=0,o=0;a<t;a++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[o];if(c&&c.storeDimIndex===a)l=e?c.name:null,u=c.type,h=c.ordinalMeta,o++;else{var f=this.getSourceDimension(a);f&&(l=e?f.name:null,u=f.type)}s.push({property:l,type:u,ordinalMeta:h}),e&&l!=null&&(!c||!c.isCalculationCoord)&&(r+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=W3[u]||"f",h&&(r+=h.uid),r+="$"}var d=this.source,g=[d.seriesLayoutBy,d.startIndex,r].join("$$");return{dimensions:s,hash:g}},i.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,n=0;e<this._fullDimCount;e++){var r=void 0,s=this.dimensions[n];if(s&&s.storeDimIndex===e)s.isCalculationCoord||(r=s.name),n++;else{var a=this.getSourceDimension(e);a&&(r=a.name)}t.push(r)}return t},i.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},i}();function lI(i){return i instanceof oI}function uI(i){for(var t=nt(),e=0;e<(i||[]).length;e++){var n=i[e],r=Y(n)?n.name:n;r!=null&&t.get(r)==null&&t.set(r,e)}return t}function hI(i){var t=V3(i);return t.dimNameMap||(t.dimNameMap=uI(i.dimensionsDefine))}function cI(i){return i>30}var ao=Y,kn=H,Y3=typeof Int32Array>"u"?Array:Int32Array,H3="e\0\0",Rw=-1,U3=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],X3=["_approximateExtent"],Mw,Ku,oo,lo,Qd,ju,tg,K3=function(){function i(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,r=!1;lI(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(r=!0,n=t),n=n||["x","y"];for(var s={},a=[],o={},l=!1,u={},h=0;h<n.length;h++){var c=n[h],f=$(c)?new Ah({name:c}):c instanceof Ah?c:new Ah(c),d=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=d,f.coordDimIndex=0);var g=f.otherDims=f.otherDims||{};a.push(d),s[d]=f,u[d]!=null&&(l=!0),f.createInvertedIndices&&(o[d]=[]),g.itemName===0&&(this._nameDimIdx=h),g.itemId===0&&(this._idDimIdx=h),r&&(f.storeDimIndex=h)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=o,this._dimOmitted){var p=this._dimIdxToName=nt();A(a,function(v){p.set(s[v].storeDimIndex,v)})}}return i.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var n=this._dimIdxToName.get(e);if(n!=null)return n;var r=this._schema.getSourceDimension(e);if(r)return r.name},i.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},i.prototype._recognizeDimIndex=function(t){if(Ot(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},i.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},i.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},i.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(n){return e.hasOwnProperty(n)?e[n]:void 0}:function(n){return e[n]}},i.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},i.prototype.mapDimension=function(t,e){var n=this._dimSummary;if(e==null)return n.encodeFirstDimNotExtra[t];var r=n.encode[t];return r?r[e]:null},i.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,n=e.encode[t];return(n||[]).slice()},i.prototype.getStore=function(){return this._store},i.prototype.initData=function(t,e,n){var r=this,s;if(t instanceof Op&&(s=t),!s){var a=this.dimensions,o=sy(t)||Le(t)?new fE(t,a.length):t;s=new Op;var l=kn(a,function(u){return{type:r._dimInfos[u].type,property:u}});s.initData(o,l,n)}this._store=s,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=B3(this,this._schema),this.userOutput=this._dimSummary.userOutput},i.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},i.prototype.appendValues=function(t,e){var n=this._store.appendValues(t,e.length),r=n.start,s=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var o=r;o<s;o++){var l=o-r;this._nameList[o]=e[l],a&&tg(this,o)}},i.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,n=0;n<e.length;n++){var r=this._dimInfos[e[n]];r.ordinalMeta&&t.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},i.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Hn&&!t.fillStorage},i.prototype._doInit=function(t,e){if(!(t>=e)){var n=this._store,r=n.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=r.getSource().sourceFormat,l=o===ci;if(l&&!r.pure)for(var u=[],h=t;h<e;h++){var c=r.getItem(h,u);if(!this.hasItemOption&&FF(c)&&(this.hasItemOption=!0),c){var f=c.name;s[h]==null&&f!=null&&(s[h]=$i(f,null));var d=c.id;a[h]==null&&d!=null&&(a[h]=$i(d,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<e;h++)tg(this,h);Mw(this)}},i.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},i.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},i.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},i.prototype.setCalculationInfo=function(t,e){ao(t)?N(this._calculationInfo,t):this._calculationInfo[t]=e},i.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return n==null&&this._nameDimIdx!=null&&(n=oo(this,this._nameDimIdx,e)),n==null&&(n=""),n},i.prototype._getCategory=function(t,e){var n=this._store.get(t,e),r=this._store.getOrdinalMeta(t);return r?r.categories[n]:n},i.prototype.getId=function(t){return Ku(this,this.getRawIndex(t))},i.prototype.count=function(){return this._store.count()},i.prototype.get=function(t,e){var n=this._store,r=this._dimInfos[t];if(r)return n.get(r.storeDimIndex,e)},i.prototype.getByRawIndex=function(t,e){var n=this._store,r=this._dimInfos[t];if(r)return n.getByRawIndex(r.storeDimIndex,e)},i.prototype.getIndices=function(){return this._store.getIndices()},i.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},i.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},i.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},i.prototype.getValues=function(t,e){var n=this,r=this._store;return z(t)?r.getValues(kn(t,function(s){return n._getStoreDimIndex(s)}),e):r.getValues(t)},i.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,n=0,r=e.length;n<r;n++)if(isNaN(this._store.get(e[n],t)))return!1;return!0},i.prototype.indexOfName=function(t){for(var e=0,n=this._store.count();e<n;e++)if(this.getName(e)===t)return e;return-1},i.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},i.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},i.prototype.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t],r=n[e];return r==null||isNaN(r)?Rw:r},i.prototype.indicesOfNearest=function(t,e,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,n)},i.prototype.each=function(t,e,n){rt(t)&&(n=e,e=t,t=[]);var r=n||this,s=kn(lo(t),this._getStoreDimIndex,this);this._store.each(s,r?Pt(e,r):e)},i.prototype.filterSelf=function(t,e,n){rt(t)&&(n=e,e=t,t=[]);var r=n||this,s=kn(lo(t),this._getStoreDimIndex,this);return this._store=this._store.filter(s,r?Pt(e,r):e),this},i.prototype.selectRange=function(t){var e=this,n={},r=kt(t);return A(r,function(s){var a=e._getStoreDimIndex(s);n[a]=t[s]}),this._store=this._store.selectRange(n),this},i.prototype.mapArray=function(t,e,n){rt(t)&&(n=e,e=t,t=[]),n=n||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},n),r},i.prototype.map=function(t,e,n,r){var s=n||r||this,a=kn(lo(t),this._getStoreDimIndex,this),o=ju(this);return o._store=this._store.map(a,s?Pt(e,s):e),o},i.prototype.modify=function(t,e,n,r){var s=n||r||this,a=kn(lo(t),this._getStoreDimIndex,this);this._store.modify(a,s?Pt(e,s):e)},i.prototype.downSample=function(t,e,n,r){var s=ju(this);return s._store=this._store.downSample(this._getStoreDimIndex(t),e,n,r),s},i.prototype.lttbDownSample=function(t,e){var n=ju(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),n},i.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},i.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new oe(n,e,e&&e.ecModel)},i.prototype.diff=function(t){var e=this;return new F3(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Ku(t,n)},function(n){return Ku(e,n)})},i.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},i.prototype.setVisual=function(t,e){this._visual=this._visual||{},ao(t)?N(this._visual,t):this._visual[t]=e},i.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],r=n&&n[e];return r??this.getVisual(e)},i.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},i.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,r=n[t];r||(r=n[t]={});var s=r[e];return s==null&&(s=this.getVisual(e),z(s)?s=s.slice():ao(s)&&(s=N({},s)),r[e]=s),s},i.prototype.setItemVisual=function(t,e,n){var r=this._itemVisuals[t]||{};this._itemVisuals[t]=r,ao(e)?N(r,e):r[e]=n},i.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},i.prototype.setLayout=function(t,e){ao(t)?N(this._layout,t):this._layout[t]=e},i.prototype.getLayout=function(t){return this._layout[t]},i.prototype.getItemLayout=function(t){return this._itemLayouts[t]},i.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?N(this._itemLayouts[t]||{},e):e},i.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},i.prototype.setItemGraphicEl=function(t,e){var n=this.hostModel&&this.hostModel.seriesIndex;ZN(n,this.dataType,t,e),this._graphicEls[t]=e},i.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},i.prototype.eachItemGraphicEl=function(t,e){A(this._graphicEls,function(n,r){n&&t&&t.call(e,n,r)})},i.prototype.cloneShallow=function(t){return t||(t=new i(this._schema?this._schema:kn(this.dimensions,this._getDimInfo,this),this.hostModel)),Qd(t,this),t._store=this._store,t},i.prototype.wrapMethod=function(t,e){var n=this[t];rt(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var r=n.apply(this,arguments);return e.apply(this,[r].concat(ym(arguments)))})},i.internalField=function(){Mw=function(t){var e=t._invertedIndicesMap;A(e,function(n,r){var s=t._dimInfos[r],a=s.ordinalMeta,o=t._store;if(a){n=e[r]=new Y3(a.categories.length);for(var l=0;l<n.length;l++)n[l]=Rw;for(var l=0;l<o.count();l++)n[o.get(s.storeDimIndex,l)]=l}})},oo=function(t,e,n){return $i(t._getCategory(e,n),null)},Ku=function(t,e){var n=t._idList[e];return n==null&&t._idDimIdx!=null&&(n=oo(t,t._idDimIdx,e)),n==null&&(n=H3+e),n},lo=function(t){return z(t)||(t=t!=null?[t]:[]),t},ju=function(t){var e=new i(t._schema?t._schema:kn(t.dimensions,t._getDimInfo,t),t.hostModel);return Qd(e,t),e},Qd=function(t,e){A(U3.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,A(X3,function(n){t[n]=at(e[n])}),t._calculationInfo=N({},e._calculationInfo)},tg=function(t,e){var n=t._nameList,r=t._idList,s=t._nameDimIdx,a=t._idDimIdx,o=n[e],l=r[e];if(o==null&&s!=null&&(n[e]=o=oo(t,s,e)),l==null&&a!=null&&(r[e]=l=oo(t,a,e)),l==null&&o!=null){var u=t._nameRepeatCount,h=u[o]=(u[o]||0)+1;l=o,h>1&&(l+="__ec__"+h),r[e]=l}}}(),i}();const Rh=K3;function j3(i,t){sy(i)||(i=ay(i)),t=t||{};var e=t.coordDimensions||[],n=t.dimensionsDefine||i.dimensionsDefine||[],r=nt(),s=[],a=q3(i,e,n,t.dimensionsCount),o=t.canOmitUnusedDimensions&&cI(a),l=n===i.dimensionsDefine,u=l?hI(i):uI(n),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(i,a));for(var c=nt(h),f=new yE(a),d=0;d<f.length;d++)f[d]=-1;function g(C){var I=f[C];if(I<0){var E=n[C],R=Y(E)?E:{name:E},M=new Ah,k=R.name;k!=null&&u.get(k)!=null&&(M.name=M.displayName=k),R.type!=null&&(M.type=R.type),R.displayName!=null&&(M.displayName=R.displayName);var L=s.length;return f[C]=L,M.storeDimIndex=C,s.push(M),M}return s[I]}if(!o)for(var d=0;d<a;d++)g(d);c.each(function(C,I){var E=ve(C).slice();if(E.length===1&&!$(E[0])&&E[0]<0){c.set(I,!1);return}var R=c.set(I,[]);A(E,function(M,k){var L=$(M)?u.get(M):M;L!=null&&L<a&&(R[k]=L,v(g(L),I,k))})});var p=0;A(e,function(C){var I,E,R,M;if($(C))I=C,M={};else{M=C,I=M.name;var k=M.ordinalMeta;M.ordinalMeta=null,M=N({},M),M.ordinalMeta=k,E=M.dimsDef,R=M.otherDims,M.name=M.coordDim=M.coordDimIndex=M.dimsDef=M.otherDims=null}var L=c.get(I);if(L!==!1){if(L=ve(L),!L.length)for(var D=0;D<(E&&E.length||1);D++){for(;p<a&&g(p).coordDim!=null;)p++;p<a&&L.push(p++)}A(L,function(O,F){var B=g(O);if(l&&M.type!=null&&(B.type=M.type),v(St(B,M),I,F),B.name==null&&E){var G=E[F];!Y(G)&&(G={name:G}),B.name=B.displayName=G.name,B.defaultTooltip=G.defaultTooltip}R&&St(B.otherDims,R)})}});function v(C,I,E){tE.get(I)!=null?C.otherDims[I]=E:(C.coordDim=I,C.coordDimIndex=E,r.set(I,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var w=m||"value";function S(C){C.name==null&&(C.name=C.coordDim)}if(o)A(s,function(C){S(C)}),s.sort(function(C,I){return C.storeDimIndex-I.storeDimIndex});else for(var x=0;x<a;x++){var b=g(x),T=b.coordDim;T==null&&(b.coordDim=J3(w,r,_),b.coordDimIndex=0,(!m||y<=0)&&(b.isExtraCoord=!0),y--),S(b),b.type==null&&(rE(i,x)===Be.Must||b.isExtraCoord&&(b.otherDims.itemName!=null||b.otherDims.seriesName!=null))&&(b.type="ordinal")}return Z3(s),new oI({source:i,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function Z3(i){for(var t=nt(),e=0;e<i.length;e++){var n=i[e],r=n.name,s=t.get(r)||0;s>0&&(n.name=r+(s-1)),s++,t.set(r,s)}}function q3(i,t,e,n){var r=Math.max(i.dimensionsDetectedCount||1,t.length,e.length,n||0);return A(t,function(s){var a;Y(s)&&(a=s.dimsDef)&&(r=Math.max(r,a.length))}),r}function J3(i,t,e){if(e||t.hasKey(i)){for(var n=0;t.hasKey(i+n);)n++;i+=n}return t.set(i,!0),i}var Q3=function(){function i(t){this.coordSysDims=[],this.axisMap=nt(),this.categoryAxisMap=nt(),this.coordSysName=t}return i}();function t5(i){var t=i.get("coordinateSystem"),e=new Q3(t),n=e5[t];if(n)return n(i,e,e.axisMap,e.categoryAxisMap),e}var e5={cartesian2d:function(i,t,e,n){var r=i.getReferringComponents("xAxis",Si).models[0],s=i.getReferringComponents("yAxis",Si).models[0];t.coordSysDims=["x","y"],e.set("x",r),e.set("y",s),ks(r)&&(n.set("x",r),t.firstCategoryDimIndex=0),ks(s)&&(n.set("y",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(i,t,e,n){var r=i.getReferringComponents("singleAxis",Si).models[0];t.coordSysDims=["single"],e.set("single",r),ks(r)&&(n.set("single",r),t.firstCategoryDimIndex=0)},polar:function(i,t,e,n){var r=i.getReferringComponents("polar",Si).models[0],s=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",s),e.set("angle",a),ks(s)&&(n.set("radius",s),t.firstCategoryDimIndex=0),ks(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(i,t,e,n){t.coordSysDims=["lng","lat"]},parallel:function(i,t,e,n){var r=i.ecModel,s=r.getComponent("parallel",i.get("parallelIndex")),a=t.coordSysDims=s.dimensions.slice();A(s.parallelAxisIndex,function(o,l){var u=r.getComponent("parallelAxis",o),h=a[l];e.set(h,u),ks(u)&&(n.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function ks(i){return i.get("type")==="category"}function i5(i,t,e){e=e||{};var n=e.byIndex,r=e.stackedCoordDimension,s,a,o;n5(t)?s=t:(a=t.schema,s=a.dimensions,o=t.store);var l=!!(i&&i.get("stack")),u,h,c,f;if(A(s,function(y,_){$(y)&&(s[_]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!r||r===y.coordDim)&&(h=y))}),h&&!n&&!u&&(n=!0),h){c="__\0ecstackresult_"+i.id,f="__\0ecstackedover_"+i.id,u&&(u.createInvertedIndices=!0);var d=h.coordDim,g=h.type,p=0;A(s,function(y){y.coordDim===d&&p++});var v={name:c,coordDim:d,coordDimIndex:p,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},m={name:f,coordDim:f,coordDimIndex:p+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};a?(o&&(v.storeDimIndex=o.ensureCalculationDimension(f,g),m.storeDimIndex=o.ensureCalculationDimension(c,g)),a.appendCalculationDimension(v),a.appendCalculationDimension(m)):(s.push(v),s.push(m))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:f,stackResultDimension:c}}function n5(i){return!lI(i.schema)}function yy(i,t){return!!t&&t===i.getCalculationInfo("stackedDimension")}function fI(i,t){return yy(i,t)?i.getCalculationInfo("stackResultDimension"):t}function r5(i,t){var e=i.get("coordinateSystem"),n=ry.get(e),r;return t&&t.coordSysDims&&(r=H(t.coordSysDims,function(s){var a={name:s},o=t.axisMap.get(s);if(o){var l=o.get("type");a.type=z3(l)}return a})),r||(r=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),r}function s5(i,t,e){var n,r;return e&&A(i,function(s,a){var o=s.coordDim,l=e.categoryAxisMap.get(o);l&&(n==null&&(n=a),s.ordinalMeta=l.getOrdinalMeta(),t&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(r=!0)}),!r&&n!=null&&(i[n].otherDims.itemName=0),n}function dI(i,t,e){e=e||{};var n=t.getSourceManager(),r,s=!1;i?(s=!0,r=ay(i)):(r=n.getSource(),s=r.sourceFormat===ci);var a=t5(t),o=r5(t,a),l=e.useEncodeDefaulter,u=rt(l)?l:l?Et(Xz,o,t):null,h={coordDimensions:o,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!s},c=j3(r,h),f=s5(c.dimensions,e.createInvertedIndices,a),d=s?null:n.getSharedDataStore(c),g=i5(t,{schema:c,store:d}),p=new Rh(c,t);p.setCalculationInfo(g);var v=f!=null&&a5(r)?function(m,y,_,w){return w===f?_:this.defaultDimValueGetter(m,y,_,w)}:null;return p.hasItemOption=!1,p.initData(s?r:d,null,v),p}function a5(i){if(i.sourceFormat===ci){var t=o5(i.data||[]);return!z($l(t))}}function o5(i){for(var t=0;t<i.length&&i[t]==null;)t++;return i[t]}var gI=function(){function i(t){this._setting=t||{},this._extent=[1/0,-1/0]}return i.prototype.getSetting=function(t){return this._setting[t]},i.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},i.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},i.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},i.prototype.isBlank=function(){return this._isBlank},i.prototype.setBlank=function(t){this._isBlank=t},i}();Qc(gI);const wn=gI;var l5=0,u5=function(){function i(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++l5}return i.createByAxisModel=function(t){var e=t.option,n=e.data,r=n&&H(n,h5);return new i({categories:r,needCollect:!r,deduplication:e.dedplication!==!1})},i.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},i.prototype.parseAndCollect=function(t){var e,n=this._needCollect;if(!$(t)&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var r=this._getOrCreateMap();return e=r.get(t),e==null&&(n?(e=this.categories.length,this.categories[e]=t,r.set(t,e)):e=NaN),e},i.prototype._getOrCreateMap=function(){return this._map||(this._map=nt(this.categories))},i}();function h5(i){return Y(i)&&i.value!=null?i.value:i+""}const Kp=u5;function jp(i){return i.type==="interval"||i.type==="log"}function c5(i,t,e,n){var r={},s=i[1]-i[0],a=r.interval=PT(s/t,!0);e!=null&&a<e&&(a=r.interval=e),n!=null&&a>n&&(a=r.interval=n);var o=r.intervalPrecision=pI(a),l=r.niceTickExtent=[Yt(Math.ceil(i[0]/a)*a,o),Yt(Math.floor(i[1]/a)*a,o)];return f5(l,i),r}function eg(i){var t=Math.pow(10,Mm(i)),e=i/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,Yt(e*t)}function pI(i){return wa(i)+2}function Lw(i,t,e){i[t]=Math.max(Math.min(i[t],e[1]),e[0])}function f5(i,t){!isFinite(i[0])&&(i[0]=t[0]),!isFinite(i[1])&&(i[1]=t[1]),Lw(i,0,t),Lw(i,1,t),i[0]>i[1]&&(i[0]=i[1])}function _f(i,t){return i>=t[0]&&i<=t[1]}function wf(i,t){return t[1]===t[0]?.5:(i-t[0])/(t[1]-t[0])}function xf(i,t){return i*(t[1]-t[0])+t[0]}var vI=function(i){j(t,i);function t(e){var n=i.call(this,e)||this;n.type="ordinal";var r=n.getSetting("ordinalMeta");return r||(r=new Kp({})),z(r)&&(r=new Kp({categories:H(r,function(s){return Y(s)?s.value:s})})),n._ordinalMeta=r,n._extent=n.getSetting("extent")||[0,r.categories.length-1],n}return t.prototype.parse=function(e){return e==null?NaN:$(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),_f(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),wf(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(xf(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],n=this._extent,r=n[0];r<=n[1];)e.push({value:r}),r++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=e.ordinalNumbers,r=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],a=0,o=this._ordinalMeta.categories.length,l=Math.min(o,n.length);a<l;++a){var u=n[a];r[a]=u,s[u]=a}for(var h=0;a<o;++a){for(;s[h]!=null;)h++;r.push(h),s[h]=a}},t.prototype._getTickNumber=function(e){var n=this._ticksByOrdinalNumber;return n&&e>=0&&e<n.length?n[e]:e},t.prototype.getRawOrdinalNumber=function(e){var n=this._ordinalNumbersByTick;return n&&e>=0&&e<n.length?n[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var n=this.getRawOrdinalNumber(e.value),r=this._ordinalMeta.categories[n];return r==null?"":r+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(wn);wn.registerClass(vI);const mI=vI;var Tr=Yt,yI=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return _f(e,this._extent)},t.prototype.normalize=function(e){return wf(e,this._extent)},t.prototype.scale=function(e){return xf(e,this._extent)},t.prototype.setExtent=function(e,n){var r=this._extent;isNaN(e)||(r[0]=parseFloat(e)),isNaN(n)||(r[1]=parseFloat(n))},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=pI(e)},t.prototype.getTicks=function(e){var n=this._interval,r=this._extent,s=this._niceExtent,a=this._intervalPrecision,o=[];if(!n)return o;var l=1e4;r[0]<s[0]&&(e?o.push({value:Tr(s[0]-n,a)}):o.push({value:r[0]}));for(var u=s[0];u<=s[1]&&(o.push({value:u}),u=Tr(u+n,a),u!==o[o.length-1].value);)if(o.length>l)return[];var h=o.length?o[o.length-1].value:s[1];return r[1]>h&&(e?o.push({value:Tr(h+n,a)}):o.push({value:r[1]})),o},t.prototype.getMinorTicks=function(e){for(var n=this.getTicks(!0),r=[],s=this.getExtent(),a=1;a<n.length;a++){for(var o=n[a],l=n[a-1],u=0,h=[],c=o.value-l.value,f=c/e;u<e-1;){var d=Tr(l.value+(u+1)*f);d>s[0]&&d<s[1]&&h.push(d),u++}r.push(h)}return r},t.prototype.getLabel=function(e,n){if(e==null)return"";var r=n&&n.precision;r==null?r=wa(e.value)||0:r==="auto"&&(r=this._intervalPrecision);var s=Tr(e.value,r,!0);return ZC(s)},t.prototype.calcNiceTicks=function(e,n,r){e=e||5;var s=this._extent,a=s[1]-s[0];if(isFinite(a)){a<0&&(a=-a,s.reverse());var o=c5(s,e,n,r);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var r=Math.abs(n[0]);e.fixMax||(n[1]+=r/2),n[0]-=r/2}else n[1]=1;var s=n[1]-n[0];isFinite(s)||(n[0]=0,n[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(n[0]=Tr(Math.floor(n[0]/a)*a)),e.fixMax||(n[1]=Tr(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(e,n){this._niceExtent=[e,n]},t.type="interval",t}(wn);wn.registerClass(yI);const Ul=yI;var _I=typeof Float32Array<"u",d5=_I?Float32Array:Array;function ig(i){return z(i)?_I?new Float32Array(i):i:new d5(i)}var g5="__ec_stack_";function _y(i){return i.get("stack")||g5+i.seriesIndex}function wy(i){return i.dim+i.index}function wI(i,t){var e=[];return t.eachSeriesByType(i,function(n){SI(n)&&e.push(n)}),e}function p5(i){var t={};A(i,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),f=h.dim+"_"+h.index,d=c.getDimensionIndex(c.mapDimension(h.dim)),g=c.getStore(),p=0,v=g.count();p<v;++p){var m=g.get(d,p);t[f]?t[f].push(m):t[f]=[m]}});var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(r){r.sort(function(l,u){return l-u});for(var s=null,a=1;a<r.length;++a){var o=r[a]-r[a-1];o>0&&(s=s===null?o:Math.min(s,o))}e[n]=s}}return e}function xI(i){var t=p5(i),e=[];return A(i,function(n){var r=n.coordinateSystem,s=r.getBaseAxis(),a=s.getExtent(),o;if(s.type==="category")o=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var l=s.dim+"_"+s.index,u=t[l],h=Math.abs(a[1]-a[0]),c=s.scale.getExtent(),f=Math.abs(c[1]-c[0]);o=u?h/f*u:h}else{var d=n.getData();o=Math.abs(a[1]-a[0])/d.count()}var g=qt(n.get("barWidth"),o),p=qt(n.get("barMaxWidth"),o),v=qt(n.get("barMinWidth")||(bI(n)?.5:1),o),m=n.get("barGap"),y=n.get("barCategoryGap");e.push({bandWidth:o,barWidth:g,barMaxWidth:p,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:wy(s),stackId:_y(n)})}),v5(e)}function v5(i){var t={};A(i,function(n,r){var s=n.axisKey,a=n.bandWidth,o=t[s]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;t[s]=o;var u=n.stackId;l[u]||o.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=n.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(o.remainedWidth,h),o.remainedWidth-=h);var c=n.barMaxWidth;c&&(l[u].maxWidth=c);var f=n.barMinWidth;f&&(l[u].minWidth=f);var d=n.barGap;d!=null&&(o.gap=d);var g=n.barCategoryGap;g!=null&&(o.categoryGap=g)});var e={};return A(t,function(n,r){e[r]={};var s=n.stacks,a=n.bandWidth,o=n.categoryGap;if(o==null){var l=kt(s).length;o=Math.max(35-l*4,15)+"%"}var u=qt(o,a),h=qt(n.gap,1),c=n.remainedWidth,f=n.autoWidthCount,d=(c-u)/(f+(f-1)*h);d=Math.max(d,0),A(s,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var w=m.width;y&&(w=Math.min(w,y)),_&&(w=Math.max(w,_)),m.width=w,c-=w+h*w,f--}else{var w=d;y&&y<w&&(w=Math.min(y,c)),_&&_>w&&(w=_),w!==d&&(m.width=w,c-=w+h*w,f--)}}),d=(c-u)/(f+(f-1)*h),d=Math.max(d,0);var g=0,p;A(s,function(m,y){m.width||(m.width=d),p=m,g+=m.width*(1+h)}),p&&(g-=p.width*h);var v=-g/2;A(s,function(m,y){e[r][y]=e[r][y]||{bandWidth:a,offset:v,width:m.width},v+=m.width*(1+h)})}),e}function m5(i,t,e){if(i&&t){var n=i[wy(t)];return n!=null&&e!=null?n[_y(e)]:n}}function y5(i,t){var e=wI(i,t),n=xI(e);A(e,function(r){var s=r.getData(),a=r.coordinateSystem,o=a.getBaseAxis(),l=_y(r),u=n[wy(o)][l],h=u.offset,c=u.width;s.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function _5(i){return{seriesType:i,plan:EE(),reset:function(t){if(SI(t)){var e=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),s=n.getOtherAxis(r),a=e.getDimensionIndex(e.mapDimension(s.dim)),o=e.getDimensionIndex(e.mapDimension(r.dim)),l=t.get("showBackground",!0),u=e.mapDimension(s.dim),h=e.getCalculationInfo("stackResultDimension"),c=yy(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),f=s.isHorizontal(),d=w5(r,s),g=bI(t),p=t.get("barMinHeight")||0,v=h&&e.getDimensionIndex(h),m=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(_,w){for(var S=_.count,x=g&&ig(S*3),b=g&&l&&ig(S*3),T=g&&ig(S),C=n.master.getRect(),I=f?C.width:C.height,E,R=w.getStore(),M=0;(E=_.next())!=null;){var k=R.get(c?v:a,E),L=R.get(o,E),D=d,O=void 0;c&&(O=+k-R.get(a,E));var F=void 0,B=void 0,G=void 0,K=void 0;if(f){var P=n.dataToPoint([k,L]);if(c){var ct=n.dataToPoint([O,L]);D=ct[0]}F=D,B=P[1]+y,G=P[0]-D,K=m,Math.abs(G)<p&&(G=(G<0?-1:1)*p)}else{var P=n.dataToPoint([L,k]);if(c){var ct=n.dataToPoint([L,O]);D=ct[1]}F=P[0]+y,B=D,G=m,K=P[1]-D,Math.abs(K)<p&&(K=(K<=0?-1:1)*p)}g?(x[M]=F,x[M+1]=B,x[M+2]=f?G:K,b&&(b[M]=f?C.x:F,b[M+1]=f?B:C.y,b[M+2]=I),T[E]=E):w.setItemLayout(E,{x:F,y:B,width:G,height:K}),M+=3}g&&w.setLayout({largePoints:x,largeDataIndices:T,largeBackgroundPoints:b,valueAxisHorizontal:f})}}}}}}function SI(i){return i.coordinateSystem&&i.coordinateSystem.type==="cartesian2d"}function bI(i){return i.pipelineContext&&i.pipelineContext.large}function w5(i,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var x5=function(i,t,e,n){for(;e<n;){var r=e+n>>>1;i[r][1]<t?e=r+1:n=r}return e},TI=function(i){j(t,i);function t(e){var n=i.call(this,e)||this;return n.type="time",n}return t.prototype.getLabel=function(e){var n=this.getSetting("useUTC");return of(e.value,S1[Nz(oa(this._minLevelUnit))]||S1.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,n,r){var s=this.getSetting("useUTC"),a=this.getSetting("locale");return Bz(e,n,r,a,s)},t.prototype.getTicks=function(){var e=this._interval,n=this._extent,r=[];if(!e)return r;r.push({value:n[0],level:0});var s=this.getSetting("useUTC"),a=A5(this._minLevelUnit,this._approxInterval,s,n);return r=r.concat(a),r.push({value:n[1],level:0}),r},t.prototype.calcNiceExtent=function(e){var n=this._extent;if(n[0]===n[1]&&(n[0]-=ai,n[1]+=ai),n[1]===-1/0&&n[0]===1/0){var r=new Date;n[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),n[0]=n[1]-ai}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,n,r){e=e||10;var s=this._extent,a=s[1]-s[0];this._approxInterval=a/e,n!=null&&this._approxInterval<n&&(this._approxInterval=n),r!=null&&this._approxInterval>r&&(this._approxInterval=r);var o=Zu.length,l=Math.min(x5(Zu,this._approxInterval,0,o),o-1);this._interval=Zu[l][1],this._minLevelUnit=Zu[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return Ot(e)?e:+vn(e)},t.prototype.contain=function(e){return _f(this.parse(e),this._extent)},t.prototype.normalize=function(e){return wf(this.parse(e),this._extent)},t.prototype.scale=function(e){return xf(e,this._extent)},t.type="time",t}(Ul),Zu=[["second",Qm],["minute",ty],["hour",Fo],["quarter-day",Fo*6],["half-day",Fo*12],["day",ai*1.2],["half-week",ai*3.5],["week",ai*7],["month",ai*31],["quarter",ai*95],["half-year",x1/2],["year",x1]];function S5(i,t,e,n){var r=vn(t),s=vn(e),a=function(g){return b1(r,g,n)===b1(s,g,n)},o=function(){return a("year")},l=function(){return o()&&a("month")},u=function(){return l()&&a("day")},h=function(){return u()&&a("hour")},c=function(){return h()&&a("minute")},f=function(){return c()&&a("second")},d=function(){return f()&&a("millisecond")};switch(i){case"year":return o();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return f();case"millisecond":return d()}}function b5(i,t){return i/=ai,i>16?16:i>7.5?7:i>3.5?4:i>1.5?2:1}function T5(i){var t=30*ai;return i/=t,i>6?6:i>3?3:i>2?2:1}function C5(i){return i/=Fo,i>12?12:i>6?6:i>3.5?4:i>2?2:1}function kw(i,t){return i/=t?ty:Qm,i>30?30:i>20?20:i>15?15:i>10?10:i>5?5:i>2?2:1}function E5(i){return PT(i,!0)}function I5(i,t,e){var n=new Date(i);switch(oa(t)){case"year":case"month":n[YC(e)](0);case"day":n[HC(e)](1);case"hour":n[UC(e)](0);case"minute":n[XC(e)](0);case"second":n[KC(e)](0),n[jC(e)](0)}return n.getTime()}function A5(i,t,e,n){var r=1e4,s=VC,a=0;function o(I,E,R,M,k,L,D){for(var O=new Date(E),F=E,B=O[M]();F<R&&F<=n[1];)D.push({value:F}),B+=I,O[k](B),F=O.getTime();D.push({value:F,notAdd:!0})}function l(I,E,R){var M=[],k=!E.length;if(!S5(oa(I),n[0],n[1],e)){k&&(E=[{value:I5(new Date(n[0]),I,e)},{value:n[1]}]);for(var L=0;L<E.length-1;L++){var D=E[L].value,O=E[L+1].value;if(D!==O){var F=void 0,B=void 0,G=void 0,K=!1;switch(I){case"year":F=Math.max(1,Math.round(t/ai/365)),B=ey(e),G=zz(e);break;case"half-year":case"quarter":case"month":F=T5(t),B=la(e),G=YC(e);break;case"week":case"half-week":case"day":F=b5(t),B=lf(e),G=HC(e),K=!0;break;case"half-day":case"quarter-day":case"hour":F=C5(t),B=pl(e),G=UC(e);break;case"minute":F=kw(t,!0),B=uf(e),G=XC(e);break;case"second":F=kw(t,!1),B=hf(e),G=KC(e);break;case"millisecond":F=E5(t),B=cf(e),G=jC(e);break}o(F,D,O,B,G,K,M),I==="year"&&R.length>1&&L===0&&R.unshift({value:R[0].value-F})}}for(var L=0;L<M.length;L++)R.push(M[L]);return M}}for(var u=[],h=[],c=0,f=0,d=0;d<s.length&&a++<r;++d){var g=oa(s[d]);if(Fz(s[d])){l(s[d],u[u.length-1]||[],h);var p=s[d+1]?oa(s[d+1]):null;if(g!==p){if(h.length){f=c,h.sort(function(I,E){return I.value-E.value});for(var v=[],m=0;m<h.length;++m){var y=h[m].value;(m===0||h[m-1].value!==y)&&(v.push(h[m]),y>=n[0]&&y<=n[1]&&c++)}var _=(n[1]-n[0])/t;if(c>_*1.5&&f>_/1.5||(u.push(v),c>_||i===s[d]))break}h=[]}}}for(var w=ae(H(u,function(I){return ae(I,function(E){return E.value>=n[0]&&E.value<=n[1]&&!E.notAdd})}),function(I){return I.length>0}),S=[],x=w.length-1,d=0;d<w.length;++d)for(var b=w[d],T=0;T<b.length;++T)S.push({value:b[T].value,level:x-d});S.sort(function(I,E){return I.value-E.value});for(var C=[],d=0;d<S.length;++d)(d===0||S[d].value!==S[d-1].value)&&C.push(S[d]);return C}wn.registerClass(TI);const R5=TI;var Dw=wn.prototype,$o=Ul.prototype,M5=Yt,L5=Math.floor,k5=Math.ceil,qu=Math.pow,mi=Math.log,xy=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new Ul,e._interval=0,e}return t.prototype.getTicks=function(e){var n=this._originalScale,r=this._extent,s=n.getExtent(),a=$o.getTicks.call(this,e);return H(a,function(o){var l=o.value,u=Yt(qu(this.base,l));return u=l===r[0]&&this._fixMin?Ju(u,s[0]):u,u=l===r[1]&&this._fixMax?Ju(u,s[1]):u,{value:u}},this)},t.prototype.setExtent=function(e,n){var r=mi(this.base);e=mi(Math.max(0,e))/r,n=mi(Math.max(0,n))/r,$o.setExtent.call(this,e,n)},t.prototype.getExtent=function(){var e=this.base,n=Dw.getExtent.call(this);n[0]=qu(e,n[0]),n[1]=qu(e,n[1]);var r=this._originalScale,s=r.getExtent();return this._fixMin&&(n[0]=Ju(n[0],s[0])),this._fixMax&&(n[1]=Ju(n[1],s[1])),n},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var n=this.base;e[0]=mi(e[0])/mi(n),e[1]=mi(e[1])/mi(n),Dw.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(e){e=e||10;var n=this._extent,r=n[1]-n[0];if(!(r===1/0||r<=0)){var s=DF(r),a=e/r*s;for(a<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var o=[Yt(k5(n[0]/s)*s),Yt(L5(n[1]/s)*s)];this._interval=s,this._niceExtent=o}},t.prototype.calcNiceExtent=function(e){$o.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=mi(e)/mi(this.base),_f(e,this._extent)},t.prototype.normalize=function(e){return e=mi(e)/mi(this.base),wf(e,this._extent)},t.prototype.scale=function(e){return e=xf(e,this._extent),qu(this.base,e)},t.type="log",t}(wn),CI=xy.prototype;CI.getMinorTicks=$o.getMinorTicks;CI.getLabel=$o.getLabel;function Ju(i,t){return M5(i,wa(t))}wn.registerClass(xy);const D5=xy;var P5=function(){function i(t,e,n){this._prepareParams(t,e,n)}return i.prototype._prepareParams=function(t,e,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var r=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var s=this._modelMinRaw=e.get("min",!0);rt(s)?this._modelMinNum=Qu(t,s({min:n[0],max:n[1]})):s!=="dataMin"&&(this._modelMinNum=Qu(t,s));var a=this._modelMaxRaw=e.get("max",!0);if(rt(a)?this._modelMaxNum=Qu(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=Qu(t,a)),r)this._axisDataLen=e.getCategories().length;else{var o=e.get("boundaryGap"),l=z(o)?o:[o||0,o||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[jn(l[0],1),jn(l[1],1)]}},i.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,n=this._dataMax,r=this._axisDataLen,s=this._boundaryGapInner,a=t?null:n-e||Math.abs(e),o=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=o!=null,h=l!=null;o==null&&(o=t?r?0:NaN:e-s[0]*a),l==null&&(l=t?r?r-1:NaN:n+s[1]*a),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Zh(o)||Zh(l)||t&&!r;this._needCrossZero&&(o>0&&l>0&&!u&&(o=0),o<0&&l<0&&!h&&(l=0));var f=this._determinedMin,d=this._determinedMax;return f!=null&&(o=f,u=!0),d!=null&&(l=d,h=!0),{min:o,max:l,minFixed:u,maxFixed:h,isBlank:c}},i.prototype.modifyDataMinMax=function(t,e){this[F5[t]]=e},i.prototype.setDeterminedMinMax=function(t,e){var n=O5[t];this[n]=e},i.prototype.freeze=function(){this.frozen=!0},i}(),O5={min:"_determinedMin",max:"_determinedMax"},F5={min:"_dataMin",max:"_dataMax"};function N5(i,t,e){var n=i.rawExtentInfo;return n||(n=new P5(i,t,e),i.rawExtentInfo=n,n)}function Qu(i,t){return t==null?null:Zh(t)?NaN:i.parse(t)}function EI(i,t){var e=i.type,n=N5(i,t,i.getExtent()).calculate();i.setBlank(n.isBlank);var r=n.min,s=n.max,a=t.ecModel;if(a&&e==="time"){var o=wI("bar",a),l=!1;if(A(o,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=xI(o),h=B5(r,s,t,u);r=h.min,s=h.max}}return{extent:[r,s],fixMin:n.minFixed,fixMax:n.maxFixed}}function B5(i,t,e,n){var r=e.axis.getExtent(),s=r[1]-r[0],a=m5(n,e.axis);if(a===void 0)return{min:i,max:t};var o=1/0;A(a,function(d){o=Math.min(d.offset,o)});var l=-1/0;A(a,function(d){l=Math.max(d.offset+d.width,l)}),o=Math.abs(o),l=Math.abs(l);var u=o+l,h=t-i,c=1-(o+l)/s,f=h/c-h;return t+=f*(l/u),i-=f*(o/u),{min:i,max:t}}function Pw(i,t){var e=t,n=EI(i,e),r=n.extent,s=e.get("splitNumber");i instanceof D5&&(i.base=e.get("logBase"));var a=i.type,o=e.get("interval"),l=a==="interval"||a==="time";i.setExtent(r[0],r[1]),i.calcNiceExtent({splitNumber:s,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),o!=null&&i.setInterval&&i.setInterval(o)}function z5(i,t){if(t=t||i.get("type"),t)switch(t){case"category":return new mI({ordinalMeta:i.getOrdinalMeta?i.getOrdinalMeta():i.getCategories(),extent:[1/0,-1/0]});case"time":return new R5({locale:i.ecModel.getLocaleModel(),useUTC:i.ecModel.get("useUTC")});default:return new(wn.getClass(t)||Ul)}}function G5(i){var t=i.scale.getExtent(),e=t[0],n=t[1];return!(e>0&&n>0||e<0&&n<0)}function Xl(i){var t=i.getLabelModel().get("formatter"),e=i.type==="category"?i.scale.getExtent()[0]:null;return i.scale.type==="time"?function(n){return function(r,s){return i.scale.getFormattedLabel(r,s,n)}}(t):$(t)?function(n){return function(r){var s=i.scale.getLabel(r),a=n.replace("{value}",s??"");return a}}(t):rt(t)?function(n){return function(r,s){return e!=null&&(s=r.value-e),n(Sy(i,r),s,r.level!=null?{level:r.level}:null)}}(t):function(n){return i.scale.getLabel(n)}}function Sy(i,t){return i.type==="category"?i.scale.getLabel(t):t.value}function $5(i){var t=i.model,e=i.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var n,r,s=e.getExtent();e instanceof mI?r=e.count():(n=e.getTicks(),r=n.length);var a=i.getLabelModel(),o=Xl(i),l,u=1;r>40&&(u=Math.ceil(r/40));for(var h=0;h<r;h+=u){var c=n?n[h]:{value:s[0]+h},f=o(c,h),d=a.getTextRect(f),g=V5(d,a.get("rotate")||0);l?l.union(g):l=g}return l}}function V5(i,t){var e=t*Math.PI/180,n=i.width,r=i.height,s=n*Math.abs(Math.cos(e))+Math.abs(r*Math.sin(e)),a=n*Math.abs(Math.sin(e))+Math.abs(r*Math.cos(e)),o=new pt(i.x,i.y,s,a);return o}function by(i){var t=i.get("interval");return t??"auto"}function II(i){return i.type==="category"&&by(i.getLabelModel())===0}function W5(i,t){var e={};return A(i.mapDimensionsAll(t),function(n){e[fI(i,n)]=!0}),kt(e)}var Y5=function(){function i(){}return i.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},i.prototype.getCoordSysModel=function(){},i}(),Ow=[],H5={registerPreprocessor:rI,registerProcessor:sI,registerPostInit:R3,registerPostUpdate:M3,registerUpdateLifecycle:vy,registerAction:Ba,registerCoordinateSystem:L3,registerLayout:k3,registerVisual:ss,registerTransform:P3,registerLoading:aI,registerMap:D3,registerImpl:u3,PRIORITY:S3,ComponentModel:Tt,ComponentView:Hi,SeriesModel:Ta,ChartView:ha,registerComponentModel:function(i){Tt.registerClass(i)},registerComponentView:function(i){Hi.registerClass(i)},registerSeriesModel:function(i){Ta.registerClass(i)},registerChartView:function(i){ha.registerClass(i)},registerSubTypeDefaulter:function(i,t){Tt.registerSubTypeDefaulter(i,t)},registerPainter:function(i,t){IF(i,t)}};function Qn(i){if(z(i)){A(i,function(t){Qn(t)});return}gt(Ow,i)>=0||(Ow.push(i),rt(i)&&(i={install:i}),i.install(H5))}var Sl=Bt();function U5(i){return i.type==="category"?K5(i):Z5(i)}function X5(i,t){return i.type==="category"?j5(i,t):{ticks:H(i.scale.getTicks(),function(e){return e.value})}}function K5(i){var t=i.getLabelModel(),e=AI(i,t);return!t.get("show")||i.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function AI(i,t){var e=RI(i,"labels"),n=by(t),r=MI(e,n);if(r)return r;var s,a;return rt(n)?s=DI(i,n):(a=n==="auto"?q5(i):n,s=kI(i,a)),LI(e,n,{labels:s,labelCategoryInterval:a})}function j5(i,t){var e=RI(i,"ticks"),n=by(t),r=MI(e,n);if(r)return r;var s,a;if((!t.get("show")||i.scale.isBlank())&&(s=[]),rt(n))s=DI(i,n,!0);else if(n==="auto"){var o=AI(i,i.getLabelModel());a=o.labelCategoryInterval,s=H(o.labels,function(l){return l.tickValue})}else a=n,s=kI(i,a,!0);return LI(e,n,{ticks:s,tickCategoryInterval:a})}function Z5(i){var t=i.scale.getTicks(),e=Xl(i);return{labels:H(t,function(n,r){return{level:n.level,formattedLabel:e(n,r),rawLabel:i.scale.getLabel(n),tickValue:n.value}})}}function RI(i,t){return Sl(i)[t]||(Sl(i)[t]=[])}function MI(i,t){for(var e=0;e<i.length;e++)if(i[e].key===t)return i[e].value}function LI(i,t,e){return i.push({key:t,value:e}),e}function q5(i){var t=Sl(i).autoInterval;return t??(Sl(i).autoInterval=i.calculateCategoryInterval())}function J5(i){var t=Q5(i),e=Xl(i),n=(t.axisRotate-t.labelRotate)/180*Math.PI,r=i.scale,s=r.getExtent(),a=r.count();if(s[1]-s[0]<1)return 0;var o=1;a>40&&(o=Math.max(1,Math.floor(a/40)));for(var l=s[0],u=i.dataToCoord(l+1)-i.dataToCoord(l),h=Math.abs(u*Math.cos(n)),c=Math.abs(u*Math.sin(n)),f=0,d=0;l<=s[1];l+=o){var g=0,p=0,v=Im(e({value:l}),t.font,"center","top");g=v.width*1.3,p=v.height*1.3,f=Math.max(f,g,7),d=Math.max(d,p,7)}var m=f/h,y=d/c;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),w=Sl(i.model),S=i.getExtent(),x=w.lastAutoInterval,b=w.lastTickCount;return x!=null&&b!=null&&Math.abs(x-_)<=1&&Math.abs(b-a)<=1&&x>_&&w.axisExtent0===S[0]&&w.axisExtent1===S[1]?_=x:(w.lastTickCount=a,w.lastAutoInterval=_,w.axisExtent0=S[0],w.axisExtent1=S[1]),_}function Q5(i){var t=i.getLabelModel();return{axisRotate:i.getRotate?i.getRotate():i.isHorizontal&&!i.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function kI(i,t,e){var n=Xl(i),r=i.scale,s=r.getExtent(),a=i.getLabelModel(),o=[],l=Math.max((t||0)+1,1),u=s[0],h=r.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=II(i),f=a.get("showMinLabel")||c,d=a.get("showMaxLabel")||c;f&&u!==s[0]&&p(s[0]);for(var g=u;g<=s[1];g+=l)p(g);d&&g-l!==s[1]&&p(s[1]);function p(v){var m={value:v};o.push(e?v:{formattedLabel:n(m),rawLabel:r.getLabel(m),tickValue:v})}return o}function DI(i,t,e){var n=i.scale,r=Xl(i),s=[];return A(n.getTicks(),function(a){var o=n.getLabel(a),l=a.value;t(a.value,o)&&s.push(e?l:{formattedLabel:r(a),rawLabel:o,tickValue:l})}),s}var Fw=[0,1],tV=function(){function i(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return i.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=n&&t<=r},i.prototype.containData=function(t){return this.scale.contain(t)},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.getPixelPrecision=function(t){return MF(t||this.scale.getExtent(),this._extent)},i.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},i.prototype.dataToCoord=function(t,e){var n=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&r.type==="ordinal"&&(n=n.slice(),Nw(n,r.count())),k0(t,Fw,n,e)},i.prototype.coordToData=function(t,e){var n=this._extent,r=this.scale;this.onBand&&r.type==="ordinal"&&(n=n.slice(),Nw(n,r.count()));var s=k0(t,n,Fw,e);return this.scale.scale(s)},i.prototype.pointToData=function(t,e){},i.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=X5(this,e),r=n.ticks,s=H(r,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),a=e.get("alignWithLabel");return eV(this,s,a,t.clamp),s},i.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),r=H(n,function(s){return H(s,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return r},i.prototype.getViewLabels=function(){return U5(this).labels},i.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},i.prototype.getTickModel=function(){return this.model.getModel("axisTick")},i.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);n===0&&(n=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/n},i.prototype.calculateCategoryInterval=function(){return J5(this)},i}();function Nw(i,t){var e=i[1]-i[0],n=t,r=e/n/2;i[0]+=r,i[1]-=r}function eV(i,t,e,n){var r=t.length;if(!i.onBand||e||!r)return;var s=i.getExtent(),a,o;if(r===1)t[0].coord=s[0],a=t[1]={coord:s[1]};else{var l=t[r-1].tickValue-t[0].tickValue,u=(t[r-1].coord-t[0].coord)/l;A(t,function(d){d.coord-=u/2});var h=i.scale.getExtent();o=1+h[1]-t[r-1].tickValue,a={coord:t[r-1].coord+u*o},t.push(a)}var c=s[0]>s[1];f(t[0].coord,s[0])&&(n?t[0].coord=s[0]:t.shift()),n&&f(s[0],t[0].coord)&&t.unshift({coord:s[0]}),f(s[1],a.coord)&&(n?a.coord=s[1]:t.pop()),n&&f(a.coord,s[1])&&t.push({coord:s[1]});function f(d,g){return d=Yt(d),g=Yt(g),c?d>g:d<g}}const iV=tV;function nV(i){for(var t=[],e=0;e<i.length;e++){var n=i[e];if(!n.defaultAttr.ignore){var r=n.label,s=r.getComputedTransform(),a=r.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=r.style.margin||0,u=a.clone();u.applyTransform(s),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=o?new oc(a,s):null;t.push({label:r,labelLine:n.labelLine,rect:u,localRect:a,obb:h,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:o,transform:s})}}return t}function rV(i){var t=[];i.sort(function(p,v){return v.priority-p.priority});var e=new pt(0,0,0,0);function n(p){if(!p.ignore){var v=p.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}p.ignore=!0}for(var r=0;r<i.length;r++){var s=i[r],a=s.axisAligned,o=s.localRect,l=s.transform,u=s.label,h=s.labelLine;e.copy(s.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var c=s.obb,f=!1,d=0;d<t.length;d++){var g=t[d];if(e.intersect(g.rect)){if(a&&g.axisAligned){f=!0;break}if(g.obb||(g.obb=new oc(g.localRect,g.transform)),c||(c=new oc(o,l)),c.intersect(g.obb)){f=!0;break}}}f?(n(u),h&&n(h)):(u.attr("ignore",s.defaultAttr.ignore),h&&h.attr("ignore",s.defaultAttr.labelGuideIgnore),t.push(s))}}var sV=function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Tt);const aV=sV;var Zp=function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Si).models[0]},t.type="cartesian2dAxis",t}(Tt);Ti(Zp,Y5);var PI={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},oV=ht({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},PI),Ty=ht({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},PI),lV=ht({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Ty),uV=St({logBase:10},Ty);const hV={category:oV,value:Ty,time:lV,log:uV};var cV={value:1,category:1,time:1,log:1};function Bw(i,t,e,n){A(cV,function(r,s){var a=ht(ht({},hV[s],!0),n,!0),o=function(l){j(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+s,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var f=yl(this),d=f?df(h):{},g=c.getTheme();ht(h,g.get(s+"Axis")),ht(h,this.getDefaultOption()),h.type=zw(h),f&&Sa(h,d,f)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=Kp.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+s,u.defaultOption=a,u}(e);i.registerComponentModel(o)}),i.registerSubTypeDefaulter(t+"Axis",zw)}function zw(i){return i.type||(i.data?"category":"value")}var fV=function(){function i(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return i.prototype.getAxis=function(t){return this._axes[t]},i.prototype.getAxes=function(){return H(this._dimList,function(t){return this._axes[t]},this)},i.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),ae(this.getAxes(),function(e){return e.scale.type===t})},i.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},i}();const dV=fV;var qp=["x","y"];function Gw(i){return i.type==="interval"||i.type==="time"}var gV=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=qp,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!Gw(e)||!Gw(n))){var r=e.getExtent(),s=n.getExtent(),a=this.dataToPoint([r[0],s[0]]),o=this.dataToPoint([r[1],s[1]]),l=r[1]-r[0],u=s[1]-s[0];if(!(!l||!u)){var h=(o[0]-a[0])/l,c=(o[1]-a[1])/u,f=a[0]-r[0]*h,d=a[1]-s[0]*c,g=this._transform=[h,0,0,c,f,d];this._invTransform=bm([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var n=this.getAxis("x"),r=this.getAxis("y");return n.contain(n.toLocalCoord(e[0]))&&r.contain(r.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,n){var r=this.dataToPoint(e),s=this.dataToPoint(n),a=this.getArea(),o=new pt(r[0],r[1],s[0]-r[0],s[1]-r[1]);return a.intersect(o)},t.prototype.dataToPoint=function(e,n,r){r=r||[];var s=e[0],a=e[1];if(this._transform&&s!=null&&isFinite(s)&&a!=null&&isFinite(a))return ui(r,e,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return r[0]=o.toGlobalCoord(o.dataToCoord(s,n)),r[1]=l.toGlobalCoord(l.dataToCoord(a,n)),r},t.prototype.clampData=function(e,n){var r=this.getAxis("x").scale,s=this.getAxis("y").scale,a=r.getExtent(),o=s.getExtent(),l=r.parse(e[0]),u=s.parse(e[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),n},t.prototype.pointToData=function(e,n){var r=[];if(this._invTransform)return ui(r,e,this._invTransform);var s=this.getAxis("x"),a=this.getAxis("y");return r[0]=s.coordToData(s.toLocalCoord(e[0]),n),r[1]=a.coordToData(a.toLocalCoord(e[1]),n),r},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var n=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),s=Math.min(n[0],n[1])-e,a=Math.min(r[0],r[1])-e,o=Math.max(n[0],n[1])-s+e,l=Math.max(r[0],r[1])-a+e;return new pt(s,a,o,l)},t}(dV),pV=function(i){j(t,i);function t(e,n,r,s,a){var o=i.call(this,e,n,r)||this;return o.index=0,o.type=s||"value",o.position=a||"bottom",o}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),e&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(e,n){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(iV);const vV=pV;function Jp(i,t,e){e=e||{};var n=i.coordinateSystem,r=t.axis,s={},a=r.getAxesOnZeroOf()[0],o=r.position,l=a?"onZero":o,u=r.dim,h=n.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],f={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,g=u==="x"?[c[2]-d,c[3]+d]:[c[0]-d,c[1]+d];if(a){var p=a.toGlobalCoord(a.dataToCoord(0));g[f.onZero]=Math.max(Math.min(p,g[1]),g[0])}s.position=[u==="y"?g[f[l]]:c[0],u==="x"?g[f[l]]:c[3]],s.rotation=Math.PI/2*(u==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=v[o],s.labelOffset=a?g[f[o]]-g[f.onZero]:0,t.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),ya(e.labelInside,t.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var m=t.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-m:m,s.z2=1,s}function $w(i){return i.get("coordinateSystem")==="cartesian2d"}function Vw(i){var t={xAxisModel:null,yAxisModel:null};return A(t,function(e,n){var r=n.replace(/Model$/,""),s=i.getReferringComponents(r,Si).models[0];t[n]=s}),t}var ng=Math.log;function mV(i,t,e){var n=Ul.prototype,r=n.getTicks.call(e),s=n.getTicks.call(e,!0),a=r.length-1,o=n.getInterval.call(e),l=EI(i,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(i.type==="log"){var f=ng(i.base);u=[ng(u[0])/f,ng(u[1])/f]}i.setExtent(u[0],u[1]),i.calcNiceExtent({splitNumber:a,fixMin:h,fixMax:c});var d=n.getExtent.call(i);h&&(u[0]=d[0]),c&&(u[1]=d[1]);var g=n.getInterval.call(i),p=u[0],v=u[1];if(h&&c)g=(v-p)/a;else if(h)for(v=u[0]+g*a;v<u[1]&&isFinite(v)&&isFinite(u[1]);)g=eg(g),v=u[0]+g*a;else if(c)for(p=u[1]-g*a;p>u[0]&&isFinite(p)&&isFinite(u[0]);)g=eg(g),p=u[1]-g*a;else{var m=i.getTicks().length-1;m>a&&(g=eg(g));var y=g*a;v=Math.ceil(u[1]/g)*g,p=Yt(v-y),p<0&&u[0]>=0?(p=0,v=Yt(y)):v>0&&u[1]<=0&&(v=0,p=-Yt(y))}var _=(r[0].value-s[0].value)/o,w=(r[a].value-s[a].value)/o;n.setExtent.call(i,p+g*_,v+g*w),n.setInterval.call(i,g),(_||w)&&n.setNiceExtent.call(i,p+g,v-g)}var yV=function(){function i(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=qp,this._initCartesian(t,e,n),this.model=t}return i.prototype.getRect=function(){return this._rect},i.prototype.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model);function r(a){var o,l=kt(a),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var f=+l[c],d=a[f],g=d.model,p=d.scale;jp(p)&&g.get("alignTicks")&&g.get("interval")==null?h.push(d):(Pw(p,g),jp(p)&&(o=d))}h.length&&(o||(o=h.pop(),Pw(o.scale,o.model)),A(h,function(v){mV(v.scale,v.model,o.scale)}))}}r(n.x),r(n.y);var s={};A(n.x,function(a){Ww(n,"y",a,s)}),A(n.y,function(a){Ww(n,"x",a,s)}),this.resize(this.model,e)},i.prototype.resize=function(t,e,n){var r=t.getBoxLayoutParams(),s=!n&&t.get("containLabel"),a=ml(r,{width:e.getWidth(),height:e.getHeight()});this._rect=a;var o=this._axesList;l(),s&&(A(o,function(u){if(!u.model.get(["axisLabel","inside"])){var h=$5(u);if(h){var c=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);a[c]-=h[c]+f,u.position==="top"?a.y+=h.height+f:u.position==="left"&&(a.x+=h.width+f)}}}),l()),A(this._coordsList,function(u){u.calcAffineTransform()});function l(){A(o,function(u){var h=u.isHorizontal(),c=h?[0,a.width]:[0,a.height],f=u.inverse?1:0;u.setExtent(c[f],c[1-f]),_V(u,h?a.x:a.y)})}},i.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(n!=null)return n[e||0]},i.prototype.getAxes=function(){return this._axesList.slice()},i.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var n="x"+t+"y"+e;return this._coordsMap[n]}Y(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,s=this._coordsList;r<s.length;r++)if(s[r].getAxis("x").index===t||s[r].getAxis("y").index===e)return s[r]},i.prototype.getCartesians=function(){return this._coordsList.slice()},i.prototype.convertToPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},i.prototype.convertFromPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},i.prototype._findConvertTarget=function(t){var e=t.seriesModel,n=t.xAxisModel||e&&e.getReferringComponents("xAxis",Si).models[0],r=t.yAxisModel||e&&e.getReferringComponents("yAxis",Si).models[0],s=t.gridModel,a=this._coordsList,o,l;if(e)o=e.coordinateSystem,gt(a,o)<0&&(o=null);else if(n&&r)o=this.getCartesian(n.componentIndex,r.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(r)l=this.getAxis("y",r.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},i.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},i.prototype._initCartesian=function(t,e,n){var r=this,s=this,a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,A(o.x,function(h,c){A(o.y,function(f,d){var g="x"+c+"y"+d,p=new gV(g);p.master=r,p.model=t,r._coordsMap[g]=p,r._coordsList.push(p),p.addAxis(h),p.addAxis(f)})});function u(h){return function(c,f){if(rg(c,t)){var d=c.get("position");h==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var g=new vV(h,z5(c),[0,0],c.get("type"),d),p=g.type==="category";g.onBand=p&&c.get("boundaryGap"),g.inverse=c.get("inverse"),c.axis=g,g.model=c,g.grid=s,g.index=f,s._axesList.push(g),o[h][f]=g,l[h]++}}}},i.prototype._updateScale=function(t,e){A(this._axesList,function(r){if(r.scale.setExtent(1/0,-1/0),r.type==="category"){var s=r.model.get("categorySortInfo");r.scale.setSortInfo(s)}}),t.eachSeries(function(r){if($w(r)){var s=Vw(r),a=s.xAxisModel,o=s.yAxisModel;if(!rg(a,e)||!rg(o,e))return;var l=this.getCartesian(a.componentIndex,o.componentIndex),u=r.getData(),h=l.getAxis("x"),c=l.getAxis("y");n(u,h),n(u,c)}},this);function n(r,s){A(W5(r,s.dim),function(a){s.scale.unionExtentFromData(r,a)})}},i.prototype.getTooltipAxes=function(t){var e=[],n=[];return A(this.getCartesians(),function(r){var s=t!=null&&t!=="auto"?r.getAxis(t):r.getBaseAxis(),a=r.getOtherAxis(s);gt(e,s)<0&&e.push(s),gt(n,a)<0&&n.push(a)}),{baseAxes:e,otherAxes:n}},i.create=function(t,e){var n=[];return t.eachComponent("grid",function(r,s){var a=new i(r,t,e);a.name="grid_"+s,a.resize(r,e,!0),r.coordinateSystem=a,n.push(a)}),t.eachSeries(function(r){if($w(r)){var s=Vw(r),a=s.xAxisModel,o=s.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;r.coordinateSystem=u.getCartesian(a.componentIndex,o.componentIndex)}}),n},i.dimensions=qp,i}();function rg(i,t){return i.getCoordSysModel()===t}function Ww(i,t,e,n){e.getAxesOnZeroOf=function(){return s?[s]:[]};var r=i[t],s,a=e.model,o=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)Yw(r[l])&&(s=r[l]);else for(var u in r)if(r.hasOwnProperty(u)&&Yw(r[u])&&!n[h(r[u])]){s=r[u];break}s&&(n[h(s)]=!0);function h(c){return c.dim+"_"+c.index}}function Yw(i){return i&&i.type!=="category"&&i.type!=="time"&&G5(i)}function _V(i,t){var e=i.getExtent(),n=e[0]+e[1];i.toGlobalCoord=i.dim==="x"?function(r){return r+t}:function(r){return n-r+t},i.toLocalCoord=i.dim==="x"?function(r){return r-t}:function(r){return n-r+t}}const wV=yV;var Vn=Math.PI,Ur=function(){function i(t,e){this.group=new De,this.opt=e,this.axisModel=t,St(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return i.prototype.hasBuilder=function(t){return!!Hw[t]},i.prototype.add=function(t){Hw[t](this.opt,this.axisModel,this.group,this._transformGroup)},i.prototype.getGroup=function(){return this.group},i.innerTextLayout=function(t,e,n){var r=DT(e-t),s,a;return nc(r)?(a=n>0?"top":"bottom",s="center"):nc(r-Vn)?(a=n>0?"bottom":"top",s="center"):(a="middle",r>0&&r<Vn?s=n>0?"right":"left":s=n>0?"left":"right"),{rotation:r,textAlign:s,textVerticalAlign:a}},i.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},i.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},i}(),Hw={axisLine:function(i,t,e,n){var r=t.get(["axisLine","show"]);if(r==="auto"&&i.handleAutoShown&&(r=i.handleAutoShown("axisLine")),!!r){var s=t.axis.getExtent(),a=n.transform,o=[s[0],0],l=[s[1],0],u=o[0]>l[0];a&&(ui(o,o,a),ui(l,l,a));var h=N({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new Zn({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:i.strokeContainThreshold||5,silent:!0,z2:1});gl(c.shape,c.style.lineWidth),c.anid="line",e.add(c);var f=t.get(["axisLine","symbol"]);if(f!=null){var d=t.get(["axisLine","symbolSize"]);$(f)&&(f=[f,f]),($(d)||Ot(d))&&(d=[d,d]);var g=fy(t.get(["axisLine","symbolOffset"])||0,d),p=d[0],v=d[1];A([{rotate:i.rotation+Math.PI/2,offset:g[0],r:0},{rotate:i.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(m,y){if(f[y]!=="none"&&f[y]!=null){var _=mf(f[y],-p/2,-v/2,p,v,h.stroke,!0),w=m.r+m.offset,S=u?l:o;_.attr({rotation:m.rotate,x:S[0]+w*Math.cos(i.rotation),y:S[1]-w*Math.sin(i.rotation),silent:!0,z2:11}),e.add(_)}})}}},axisTickLabel:function(i,t,e,n){var r=bV(e,n,t,i),s=CV(e,n,t,i);if(SV(t,s,r),TV(e,n,t,i.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=nV(H(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));rV(a)}},axisName:function(i,t,e,n){var r=ya(i.axisName,t.get("name"));if(r){var s=t.get("nameLocation"),a=i.nameDirection,o=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[s==="start"?u[0]-h*l:s==="end"?u[1]+h*l:(u[0]+u[1])/2,Xw(s)?i.labelOffset+a*l:0],f,d=t.get("nameRotate");d!=null&&(d=d*Vn/180);var g;Xw(s)?f=Ur.innerTextLayout(i.rotation,d??i.rotation,a):(f=xV(i.rotation,s,d||0,u),g=i.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(f.rotation)),!isFinite(g)&&(g=null)));var p=o.getFont(),v=t.get("nameTruncate",!0)||{},m=v.ellipsis,y=ya(i.nameTruncateMaxWidth,v.maxWidth,g),_=new Pe({x:c[0],y:c[1],rotation:f.rotation,silent:Ur.isLabelSilent(t),style:Jn(o,{text:r,font:p,overflow:"truncate",width:y,ellipsis:m,fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(Xm({el:_,componentModel:t,itemName:r}),_.__fullText=r,_.anid="name",t.get("triggerEvent")){var w=Ur.makeAxisEventDataBase(t);w.targetType="axisName",w.name=r,dt(_).eventData=w}n.add(_),_.updateTransform(),e.add(_),_.decomposeTransform()}}};function xV(i,t,e,n){var r=DT(e-i),s,a,o=n[0]>n[1],l=t==="start"&&!o||t!=="start"&&o;return nc(r-Vn/2)?(a=l?"bottom":"top",s="center"):nc(r-Vn*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",r<Vn*1.5&&r>Vn/2?s=l?"left":"right":s=l?"right":"left"),{rotation:r,textAlign:s,textVerticalAlign:a}}function SV(i,t,e){if(!II(i.axis)){var n=i.get(["axisLabel","showMinLabel"]),r=i.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var s=t[0],a=t[1],o=t[t.length-1],l=t[t.length-2],u=e[0],h=e[1],c=e[e.length-1],f=e[e.length-2];n===!1?(Ze(s),Ze(u)):Uw(s,a)&&(n?(Ze(a),Ze(h)):(Ze(s),Ze(u))),r===!1?(Ze(o),Ze(c)):Uw(l,o)&&(r?(Ze(l),Ze(f)):(Ze(o),Ze(c)))}}function Ze(i){i&&(i.ignore=!0)}function Uw(i,t){var e=i&&i.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!e||!n)){var r=xm([]);return Sm(r,r,-i.rotation),e.applyTransform(ra([],r,i.getLocalTransform())),n.applyTransform(ra([],r,t.getLocalTransform())),e.intersect(n)}}function Xw(i){return i==="middle"||i==="center"}function OI(i,t,e,n,r){for(var s=[],a=[],o=[],l=0;l<i.length;l++){var u=i[l].coord;a[0]=u,a[1]=0,o[0]=u,o[1]=e,t&&(ui(a,a,t),ui(o,o,t));var h=new Zn({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:n,z2:2,autoBatch:!0,silent:!0});gl(h.shape,h.style.lineWidth),h.anid=r+"_"+i[l].tickValue,s.push(h)}return s}function bV(i,t,e,n){var r=e.axis,s=e.getModel("axisTick"),a=s.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=n.tickDirection*s.get("length"),u=r.getTicksCoords(),h=OI(u,t.transform,l,St(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)i.add(h[c]);return h}}function TV(i,t,e,n){var r=e.axis,s=e.getModel("minorTick");if(!(!s.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=n*s.get("length"),u=St(o.getLineStyle(),St(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),h=0;h<a.length;h++)for(var c=OI(a[h],t.transform,l,u,"minorticks_"+h),f=0;f<c.length;f++)i.add(c[f])}}function CV(i,t,e,n){var r=e.axis,s=ya(n.axisLabelShow,e.get(["axisLabel","show"]));if(!(!s||r.scale.isBlank())){var a=e.getModel("axisLabel"),o=a.get("margin"),l=r.getViewLabels(),u=(ya(n.labelRotate,a.get("rotate"))||0)*Vn/180,h=Ur.innerTextLayout(n.rotation,u,n.labelDirection),c=e.getCategories&&e.getCategories(!0),f=[],d=Ur.isLabelSilent(e),g=e.get("triggerEvent");return A(l,function(p,v){var m=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,_=p.rawLabel,w=a;if(c&&c[m]){var S=c[m];Y(S)&&S.textStyle&&(w=new oe(S.textStyle,a,e.ecModel))}var x=w.getTextColor()||e.get(["axisLine","lineStyle","color"]),b=r.dataToCoord(m),T=w.getShallow("align",!0)||h.textAlign,C=et(w.getShallow("alignMinLabel",!0),T),I=et(w.getShallow("alignMaxLabel",!0),T),E=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||h.textVerticalAlign,R=et(w.getShallow("verticalAlignMinLabel",!0),E),M=et(w.getShallow("verticalAlignMaxLabel",!0),E),k=new Pe({x:b,y:n.labelOffset+n.labelDirection*o,rotation:h.rotation,silent:d,z2:10+(p.level||0),style:Jn(w,{text:y,align:v===0?C:v===l.length-1?I:T,verticalAlign:v===0?R:v===l.length-1?M:E,fill:rt(x)?x(r.type==="category"?_:r.type==="value"?m+"":m,v):x})});if(k.anid="label_"+m,g){var L=Ur.makeAxisEventDataBase(e);L.targetType="axisLabel",L.value=_,L.tickIndex=v,r.type==="category"&&(L.dataIndex=m),dt(k).eventData=L}t.add(k),k.updateTransform(),f.push(k),i.add(k),k.decomposeTransform()}),f}}const FI=Ur;function EV(i,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return IV(e,i,t),e.seriesInvolved&&RV(e,i),e}function IV(i,t,e){var n=t.getComponent("tooltip"),r=t.getComponent("axisPointer"),s=r.get("link",!0)||[],a=[];A(e.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=bl(o.model),u=i.coordSysAxesInfo[l]={};i.coordSysMap[l]=o;var h=o.model,c=h.getModel("tooltip",n);if(A(o.getAxes(),Et(p,!1,null)),o.getTooltipAxes&&n&&c.get("show")){var f=c.get("trigger")==="axis",d=c.get(["axisPointer","type"])==="cross",g=o.getTooltipAxes(c.get(["axisPointer","axis"]));(f||d)&&A(g.baseAxes,Et(p,d?"cross":!0,f)),d&&A(g.otherAxes,Et(p,"cross",!1))}function p(v,m,y){var _=y.model.getModel("axisPointer",r),w=_.get("show");if(!(!w||w==="auto"&&!v&&!Qp(_))){m==null&&(m=_.get("triggerTooltip")),_=v?AV(y,c,r,t,v,m):_;var S=_.get("snap"),x=_.get("triggerEmphasis"),b=bl(y.model),T=m||S||y.type==="category",C=i.axesInfo[b]={key:b,axis:y,coordSys:o,axisPointerModel:_,triggerTooltip:m,triggerEmphasis:x,involveSeries:T,snap:S,useHandle:Qp(_),seriesModels:[],linkGroup:null};u[b]=C,i.seriesInvolved=i.seriesInvolved||T;var I=MV(s,y);if(I!=null){var E=a[I]||(a[I]={axesInfo:{}});E.axesInfo[b]=C,E.mapper=s[I].mapper,C.linkGroup=E}}}})}function AV(i,t,e,n,r,s){var a=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};A(o,function(f){l[f]=at(a.get(f))}),l.snap=i.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),r==="cross"){var h=a.get(["label","show"]);if(u.show=h??!0,!s){var c=l.lineStyle=a.get("crossStyle");c&&St(u,c.textStyle)}}return i.model.getModel("axisPointer",new oe(l,e,n))}function RV(i,t){t.eachSeries(function(e){var n=e.coordinateSystem,r=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!n||r==="none"||r===!1||r==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||A(i.coordSysAxesInfo[bl(n.model)],function(a){var o=a.axis;n.getAxis(o.dim)===o&&(a.seriesModels.push(e),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=e.getData().count())})})}function MV(i,t){for(var e=t.model,n=t.dim,r=0;r<i.length;r++){var s=i[r]||{};if(sg(s[n+"AxisId"],e.id)||sg(s[n+"AxisIndex"],e.componentIndex)||sg(s[n+"AxisName"],e.name))return r}}function sg(i,t){return i==="all"||z(i)&&gt(i,t)>=0||i===t}function LV(i){var t=Cy(i);if(t){var e=t.axisPointerModel,n=t.axis.scale,r=e.option,s=e.get("status"),a=e.get("value");a!=null&&(a=n.parse(a));var o=Qp(e);s==null&&(r.status=o?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,o&&(r.status=t.axis.scale.isBlank()?"hide":"show")}}function Cy(i){var t=(i.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[bl(i)]}function kV(i){var t=Cy(i);return t&&t.axisPointerModel}function Qp(i){return!!i.get(["handle","show"])}function bl(i){return i.type+"||"+i.id}var Kw={},DV=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,r,s){this.axisPointerClass&&LV(e),i.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,r,!0)},t.prototype.updateAxisPointer=function(e,n,r,s){this._doUpdateAxisPointerClass(e,r,!1)},t.prototype.remove=function(e,n){var r=this._axisPointer;r&&r.remove(n)},t.prototype.dispose=function(e,n){this._disposeAxisPointer(n),i.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,r){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var a=kV(e);a?(this._axisPointer||(this._axisPointer=new s)).render(e,a,n,r):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,n){Kw[e]=n},t.getAxisPointerClass=function(e){return e&&Kw[e]},t.type="axis",t}(Hi);const NI=DV;var tv=Bt();function PV(i,t,e,n){var r=e.axis;if(!r.scale.isBlank()){var s=e.getModel("splitArea"),a=s.getModel("areaStyle"),o=a.get("color"),l=n.coordinateSystem.getRect(),u=r.getTicksCoords({tickModel:s,clamp:!0});if(u.length){var h=o.length,c=tv(i).splitAreaColors,f=nt(),d=0;if(c)for(var g=0;g<u.length;g++){var p=c.get(u[g].tickValue);if(p!=null){d=(p+(h-1)*g)%h;break}}var v=r.toGlobalCoord(u[0].coord),m=a.getAreaStyle();o=z(o)?o:[o];for(var g=1;g<u.length;g++){var y=r.toGlobalCoord(u[g].coord),_=void 0,w=void 0,S=void 0,x=void 0;r.isHorizontal()?(_=v,w=l.y,S=y-_,x=l.height,v=_+S):(_=l.x,w=v,S=l.width,x=y-w,v=w+x);var b=u[g-1].tickValue;b!=null&&f.set(b,d),t.add(new Ut({anid:b!=null?"area_"+b:null,shape:{x:_,y:w,width:S,height:x},style:St({fill:o[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%h}tv(i).splitAreaColors=f}}}function OV(i){tv(i).splitAreaColors=null}var FV=["axisLine","axisTickLabel","axisName"],NV=["splitArea","splitLine","minorSplitLine"],BI=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,n,r,s){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!e.get("show")){var o=e.getCoordSysModel(),l=Jp(o,e),u=new FI(e,N({handleAutoShown:function(c){for(var f=o.coordinateSystem.getCartesians(),d=0;d<f.length;d++)if(jp(f[d].getOtherAxis(e.axis).scale))return!0;return!1}},l));A(FV,u.add,u),this._axisGroup.add(u.getGroup()),A(NV,function(c){e.get([c,"show"])&&BV[c](this,this._axisGroup,e,o)},this);var h=s&&s.type==="changeAxisOrder"&&s.isInitSort;h||OC(a,this._axisGroup,e),i.prototype.render.call(this,e,n,r,s)}},t.prototype.remove=function(){OV(this)},t.type="cartesianAxis",t}(NI),BV={splitLine:function(i,t,e,n){var r=e.axis;if(!r.scale.isBlank()){var s=e.getModel("splitLine"),a=s.getModel("lineStyle"),o=a.get("color");o=z(o)?o:[o];for(var l=n.coordinateSystem.getRect(),u=r.isHorizontal(),h=0,c=r.getTicksCoords({tickModel:s}),f=[],d=[],g=a.getLineStyle(),p=0;p<c.length;p++){var v=r.toGlobalCoord(c[p].coord);u?(f[0]=v,f[1]=l.y,d[0]=v,d[1]=l.y+l.height):(f[0]=l.x,f[1]=v,d[0]=l.x+l.width,d[1]=v);var m=h++%o.length,y=c[p].tickValue,_=new Zn({anid:y!=null?"line_"+c[p].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:St({stroke:o[m]},g),silent:!0});gl(_.shape,g.lineWidth),t.add(_)}}},minorSplitLine:function(i,t,e,n){var r=e.axis,s=e.getModel("minorSplitLine"),a=s.getModel("lineStyle"),o=n.coordinateSystem.getRect(),l=r.isHorizontal(),u=r.getMinorTicksCoords();if(u.length)for(var h=[],c=[],f=a.getLineStyle(),d=0;d<u.length;d++)for(var g=0;g<u[d].length;g++){var p=r.toGlobalCoord(u[d][g].coord);l?(h[0]=p,h[1]=o.y,c[0]=p,c[1]=o.y+o.height):(h[0]=o.x,h[1]=p,c[0]=o.x+o.width,c[1]=p);var v=new Zn({anid:"minor_line_"+u[d][g].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:f,silent:!0});gl(v.shape,f.lineWidth),t.add(v)}},splitArea:function(i,t,e,n){PV(i,t,e,n)}},zI=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(BI),zV=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=zI.type,e}return t.type="yAxis",t}(BI),GV=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,n){this.group.removeAll(),e.get("show")&&this.group.add(new Ut({shape:e.coordinateSystem.getRect(),style:St({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Hi),jw={offset:0};function $V(i){i.registerComponentView(GV),i.registerComponentModel(aV),i.registerCoordinateSystem("cartesian2d",wV),Bw(i,"x",Zp,jw),Bw(i,"y",Zp,jw),i.registerComponentView(zI),i.registerComponentView(zV),i.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var Mr=Bt(),Zw=at,ag=Pt,VV=function(){function i(){this._dragging=!1,this.animationThreshold=15}return i.prototype.render=function(t,e,n,r){var s=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,!(!r&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var u={};this.makeElOption(u,s,t,e,n);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(!o)o=this._group=new De,this.createPointerEl(o,u,t,e),this.createLabelEl(o,u,t,e),n.getZr().add(o);else{var f=Et(qw,e,c);this.updatePointerEl(o,u,f),this.updateLabelEl(o,u,f,e)}Qw(o,e,!0),this._renderHandle(s)}},i.prototype.remove=function(t){this.clear(t)},i.prototype.dispose=function(t){this.clear(t)},i.prototype.determineAnimation=function(t,e){var n=e.get("animation"),r=t.axis,s=r.type==="category",a=e.get("snap");if(!a&&!s)return!1;if(n==="auto"||n==null){var o=this.animationThreshold;if(s&&r.getBandWidth()>o)return!0;if(a){var l=Cy(t).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/l>o}return!1}return n===!0},i.prototype.makeElOption=function(t,e,n,r,s){},i.prototype.createPointerEl=function(t,e,n,r){var s=e.pointer;if(s){var a=Mr(t).pointerEl=new pz[s.type](Zw(e.pointer));t.add(a)}},i.prototype.createLabelEl=function(t,e,n,r){if(e.label){var s=Mr(t).labelEl=new Pe(Zw(e.label));t.add(s),Jw(s,r)}},i.prototype.updatePointerEl=function(t,e,n){var r=Mr(t).pointerEl;r&&e.pointer&&(r.setStyle(e.pointer.style),n(r,{shape:e.pointer.shape}))},i.prototype.updateLabelEl=function(t,e,n,r){var s=Mr(t).labelEl;s&&(s.setStyle(e.label.style),n(s,{x:e.label.x,y:e.label.y}),Jw(s,r))},i.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,n=this._api.getZr(),r=this._handle,s=e.getModel("handle"),a=e.get("status");if(!s.get("show")||!a||a==="hide"){r&&n.remove(r),this._handle=null;return}var o;this._handle||(o=!0,r=this._handle=Um(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){hT(u.event)},onmousedown:ag(this._onHandleDragMove,this,0,0),drift:ag(this._onHandleDragMove,this),ondragend:ag(this._onHandleDragEnd,this)}),n.add(r)),Qw(r,e,!1),r.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");z(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,AE(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},i.prototype._moveHandleToValue=function(t,e){qw(this._axisPointerModel,!e&&this._moveAnimation,this._handle,og(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},i.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(og(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(og(r)),Mr(n).lastProp=null,this._doDispatchAxisPointer()}},i.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},i.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},i.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,r=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),r&&e.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),zp(this,"_doDispatchAxisPointer")},i.prototype.doClear=function(){},i.prototype.buildLabel=function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}},i}();function qw(i,t,e,n){GI(Mr(e).lastProp,n)||(Mr(e).lastProp=n,t?Yi(e,n,i):(e.stopAnimation(),e.attr(n)))}function GI(i,t){if(Y(i)&&Y(t)){var e=!0;return A(t,function(n,r){e=e&&GI(i[r],n)}),!!e}else return i===t}function Jw(i,t){i[t.get(["label","show"])?"show":"hide"]()}function og(i){return{x:i.x||0,y:i.y||0,rotation:i.rotation||0}}function Qw(i,t,e){var n=t.get("z"),r=t.get("zlevel");i&&i.traverse(function(s){s.type!=="group"&&(n!=null&&(s.z=n),r!=null&&(s.zlevel=r),s.silent=e)})}const WV=VV;function YV(i){var t=i.get("type"),e=i.getModel(t+"Style"),n;return t==="line"?(n=e.getLineStyle(),n.fill=null):t==="shadow"&&(n=e.getAreaStyle(),n.stroke=null),n}function HV(i,t,e,n,r){var s=e.get("value"),a=$I(s,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),o=e.getModel("label"),l=ff(o.get("padding")||0),u=o.getFont(),h=Im(a,u),c=r.position,f=h.width+l[1]+l[3],d=h.height+l[0]+l[2],g=r.align;g==="right"&&(c[0]-=f),g==="center"&&(c[0]-=f/2);var p=r.verticalAlign;p==="bottom"&&(c[1]-=d),p==="middle"&&(c[1]-=d/2),UV(c,f,d,n);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),i.label={x:c[0],y:c[1],style:Jn(o,{text:a,font:u,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function UV(i,t,e,n){var r=n.getWidth(),s=n.getHeight();i[0]=Math.min(i[0]+t,r)-t,i[1]=Math.min(i[1]+e,s)-e,i[0]=Math.max(i[0],0),i[1]=Math.max(i[1],0)}function $I(i,t,e,n,r){i=t.scale.parse(i);var s=t.scale.getLabel({value:i},{precision:r.precision}),a=r.formatter;if(a){var o={value:Sy(t,{value:i}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};A(n,function(l){var u=e.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&o.seriesData.push(c)}),$(a)?s=a.replace("{value}",s):rt(a)&&(s=a(o))}return s}function VI(i,t,e){var n=na();return Sm(n,n,e.rotation),up(n,n,e.position),Hm([i.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],n)}function XV(i,t,e,n,r,s){var a=FI.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=r.get(["label","margin"]),HV(t,n,r,s,{position:VI(n.axis,i,e),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function KV(i,t,e){return e=e||0,{x1:i[e],y1:i[1-e],x2:t[e],y2:t[1-e]}}function jV(i,t,e){return e=e||0,{x:i[e],y:i[1-e],width:t[e],height:t[1-e]}}var ZV=function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,n,r,s,a){var o=r.axis,l=o.grid,u=s.get("type"),h=tx(l,o).getOtherAxis(o).getGlobalExtent(),c=o.toGlobalCoord(o.dataToCoord(n,!0));if(u&&u!=="none"){var f=YV(s),d=qV[u](o,c,h);d.style=f,e.graphicKey=d.type,e.pointer=d}var g=Jp(l.model,r);XV(n,e,g,r,s,a)},t.prototype.getHandleTransform=function(e,n,r){var s=Jp(n.axis.grid.model,n,{labelInside:!1});s.labelMargin=r.get(["handle","margin"]);var a=VI(n.axis,e,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,n,r,s){var a=r.axis,o=a.grid,l=a.getGlobalExtent(!0),u=tx(o,a).getOtherAxis(a).getGlobalExtent(),h=a.dim==="x"?0:1,c=[e.x,e.y];c[h]+=n[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var f=(u[1]+u[0])/2,d=[f,f];d[h]=c[h];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:d,tooltipOption:g[h]}},t}(WV);function tx(i,t){var e={};return e[t.dim+"AxisIndex"]=t.index,i.getCartesian(e)}var qV={line:function(i,t,e){var n=KV([t,e[0]],[t,e[1]],ex(i));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(i,t,e){var n=Math.max(1,i.getBandWidth()),r=e[1]-e[0];return{type:"Rect",shape:jV([t-n/2,e[0]],[n,r],ex(i))}}};function ex(i){return i.dim==="x"?0:1}const JV=ZV;var QV=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Tt);const tW=QV;var ln=Bt(),eW=A;function WI(i,t,e){if(!it.node){var n=t.getZr();ln(n).records||(ln(n).records={}),iW(n,t);var r=ln(n).records[i]||(ln(n).records[i]={});r.handler=e}}function iW(i,t){if(ln(i).initialized)return;ln(i).initialized=!0,e("click",Et(ix,"click")),e("mousemove",Et(ix,"mousemove")),e("globalout",rW);function e(n,r){i.on(n,function(s){var a=sW(t);eW(ln(i).records,function(o){o&&r(o,s,a.dispatchAction)}),nW(a.pendings,t)})}}function nW(i,t){var e=i.showTip.length,n=i.hideTip.length,r;e?r=i.showTip[e-1]:n&&(r=i.hideTip[n-1]),r&&(r.dispatchAction=null,t.dispatchAction(r))}function rW(i,t,e){i.handler("leave",null,e)}function ix(i,t,e,n){t.handler(i,e,n)}function sW(i){var t={showTip:[],hideTip:[]},e=function(n){var r=t[n.type];r?r.push(n):(n.dispatchAction=e,i.dispatchAction(n))};return{dispatchAction:e,pendings:t}}function ev(i,t){if(!it.node){var e=t.getZr(),n=(ln(e).records||{})[i];n&&(ln(e).records[i]=null)}}var aW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,r){var s=n.getComponent("tooltip"),a=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";WI("axisPointer",r,function(o,l,u){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,n){ev("axisPointer",n)},t.prototype.dispose=function(e,n){ev("axisPointer",n)},t.type="axisPointer",t}(Hi);const oW=aW;function YI(i,t){var e=[],n=i.seriesIndex,r;if(n==null||!(r=t.getSeriesByIndex(n)))return{point:[]};var s=r.getData(),a=Vl(s,i);if(a==null||a<0||z(a))return{point:[]};var o=s.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)e=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(i.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,f=u.dim,d=c==="x"||c==="radius"?1:0,g=s.mapDimension(f),p=[];p[d]=s.get(g,a),p[1-d]=s.get(s.getCalculationInfo("stackResultDimension"),a),e=l.dataToPoint(p)||[]}else e=l.dataToPoint(s.getValues(H(l.dimensions,function(m){return s.mapDimension(m)}),a))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),e=[v.x+v.width/2,v.y+v.height/2]}return{point:e,el:o}}var nx=Bt();function lW(i,t,e){var n=i.currTrigger,r=[i.x,i.y],s=i,a=i.dispatchAction||Pt(e.dispatchAction,e),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){Mh(r)&&(r=YI({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var l=Mh(r),u=s.axesInfo,h=o.axesInfo,c=n==="leave"||Mh(r),f={},d={},g={list:[],map:{}},p={showPointer:Et(hW,d),showTooltip:Et(cW,g)};A(o.coordSysMap,function(m,y){var _=l||m.containPoint(r);A(o.coordSysAxesInfo[y],function(w,S){var x=w.axis,b=pW(u,w);if(!c&&_&&(!u||b)){var T=b&&b.value;T==null&&!l&&(T=x.pointToData(r)),T!=null&&rx(w,T,p,!1,f)}})});var v={};return A(h,function(m,y){var _=m.linkGroup;_&&!d[y]&&A(_.axesInfo,function(w,S){var x=d[S];if(w!==m&&x){var b=x.value;_.mapper&&(b=m.axis.scale.parse(_.mapper(b,sx(w),sx(m)))),v[m.key]=b}})}),A(v,function(m,y){rx(h[y],m,p,!0,f)}),fW(d,h,f),dW(g,r,i,a),gW(h,a,e),f}}function rx(i,t,e,n,r){var s=i.axis;if(!(s.scale.isBlank()||!s.containData(t))){if(!i.involveSeries){e.showPointer(i,t);return}var a=uW(t,i),o=a.payloadBatch,l=a.snapToValue;o[0]&&r.seriesIndex==null&&N(r,o[0]),!n&&i.snap&&s.containData(l)&&l!=null&&(t=l),e.showPointer(i,t,o),e.showTooltip(i,a,l)}}function uW(i,t){var e=t.axis,n=e.dim,r=i,s=[],a=Number.MAX_VALUE,o=-1;return A(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(n),c,f;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(h,i,e);f=d.dataIndices,c=d.nestestValue}else{if(f=l.getData().indicesOfNearest(h[0],i,e.type==="category"?.5:null),!f.length)return;c=l.getData().get(h[0],f[0])}if(!(c==null||!isFinite(c))){var g=i-c,p=Math.abs(g);p<=a&&((p<a||g>=0&&o<0)&&(a=p,o=g,r=c,s.length=0),A(f,function(v){s.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:s,snapToValue:r}}function hW(i,t,e,n){i[t.key]={value:e,payloadBatch:n}}function cW(i,t,e,n){var r=e.payloadBatch,s=t.axis,a=s.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!r.length)){var l=t.coordSys.model,u=bl(l),h=i.map[u];h||(h=i.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},i.list.push(h)),h.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function fW(i,t,e){var n=e.axesInfo=[];A(t,function(r,s){var a=r.axisPointerModel.option,o=i[s];o?(!r.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function dW(i,t,e,n){if(Mh(t)||!i.list.length){n({type:"hideTip"});return}var r=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:i.list})}function gW(i,t,e){var n=e.getZr(),r="axisPointerLastHighlights",s=nx(n)[r]||{},a=nx(n)[r]={};A(i,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&A(c.seriesDataIndices,function(f){var d=f.seriesIndex+" | "+f.dataIndex;a[d]=f})});var o=[],l=[];A(s,function(u,h){!a[h]&&l.push(u)}),A(a,function(u,h){!s[h]&&o.push(u)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function pW(i,t){for(var e=0;e<(i||[]).length;e++){var n=i[e];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function sx(i){var t=i.axis.model,e={},n=e.axisDim=i.axis.dim;return e.axisIndex=e[n+"AxisIndex"]=t.componentIndex,e.axisName=e[n+"AxisName"]=t.name,e.axisId=e[n+"AxisId"]=t.id,e}function Mh(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}function HI(i){NI.registerAxisPointerClass("CartesianAxisPointer",JV),i.registerComponentModel(tW),i.registerComponentView(oW),i.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!z(e)&&(t.axisPointer.link=[e])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=EV(t,e)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},lW)}function vW(i){Qn($V),Qn(HI)}function mW(i,t){var e=ff(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),i=new Ut({shape:{x:i.x-e[3],y:i.y-e[0],width:i.width+e[1]+e[3],height:i.height+e[0]+e[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),i}var yW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Tt);const _W=yW;function UI(i){var t=i.get("confine");return t!=null?!!t:i.get("renderMode")==="richText"}function XI(i){if(it.domSupported){for(var t=document.documentElement.style,e=0,n=i.length;e<n;e++)if(i[e]in t)return i[e]}}var KI=XI(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wW=XI(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function jI(i,t){if(!i)return t;t=qC(t,!0);var e=i.indexOf(t);return i=e===-1?t:"-"+i.slice(0,e)+"-"+t,i.toLowerCase()}function xW(i,t){var e=i.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i);return e?t?e[t]:e:null}var SW=jI(wW,"transition"),Ey=jI(KI,"transform"),bW="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(it.transform3dSupported?"will-change:transform;":"");function TW(i){return i=i==="left"?"right":i==="right"?"left":i==="top"?"bottom":"top",i}function CW(i,t,e){if(!$(e)||e==="inside")return"";var n=i.get("backgroundColor"),r=i.get("borderWidth");t=vl(t);var s=TW(e),a=Math.max(Math.round(r)*1.5,6),o="",l=Ey+":",u;gt(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(u=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(u=s==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=a+r,f=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),d=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-c)/2)*100)/100;o+=";"+s+":-"+d+"px";var g=t+" solid "+r+"px;",p=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+n+";"];return'<div style="'+p.join("")+'"></div>'}function EW(i,t){var e="cubic-bezier(0.23,1,0.32,1)",n=" "+i/2+"s "+e,r="opacity"+n+",visibility"+n;return t||(n=" "+i+"s "+e,r+=it.transformSupported?","+Ey+n:",left"+n+",top"+n),SW+":"+r}function ax(i,t,e){var n=i.toFixed(0)+"px",r=t.toFixed(0)+"px";if(!it.transformSupported)return e?"top:"+r+";left:"+n+";":[["top",r],["left",n]];var s=it.transform3dSupported,a="translate"+(s?"3d":"")+"("+n+","+r+(s?",0":"")+")";return e?"top:0;left:0;"+Ey+":"+a+";":[["top",0],["left",0],[KI,a]]}function IW(i){var t=[],e=i.get("fontSize"),n=i.getTextColor();n&&t.push("color:"+n),t.push("font:"+i.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var r=i.get("textShadowColor"),s=i.get("textShadowBlur")||0,a=i.get("textShadowOffsetX")||0,o=i.get("textShadowOffsetY")||0;return r&&s&&t.push("text-shadow:"+a+"px "+o+"px "+s+"px "+r),A(["decoration","align"],function(l){var u=i.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function AW(i,t,e){var n=[],r=i.get("transitionDuration"),s=i.get("backgroundColor"),a=i.get("shadowBlur"),o=i.get("shadowColor"),l=i.get("shadowOffsetX"),u=i.get("shadowOffsetY"),h=i.getModel("textStyle"),c=CE(i,"html"),f=l+"px "+u+"px "+a+"px "+o;return n.push("box-shadow:"+f),t&&r&&n.push(EW(r,e)),s&&n.push("background-color:"+s),A(["width","color","radius"],function(d){var g="border-"+d,p=qC(g),v=i.get(p);v!=null&&n.push(g+":"+v+(d==="color"?"":"px"))}),n.push(IW(h)),c!=null&&n.push("padding:"+ff(c).join("px ")+"px"),n.join(";")+";"}function ox(i,t,e,n,r){var s=t&&t.painter;if(e){var a=s&&s.getViewportRoot();a&&pO(i,a,e,n,r)}else{i[0]=n,i[1]=r;var o=s&&s.getViewportRootOffset();o&&(i[0]+=o.offsetLeft,i[1]+=o.offsetTop)}i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}var RW=function(){function i(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,it.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var r=this._zr=t.getZr(),s=e.appendTo,a=s&&($(s)?document.querySelector(s):hl(s)?s:rt(s)&&s(t.getDom()));ox(this._styleCoord,r,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(n),this._api=t,this._container=a;var o=this;n.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!o._enterable){var u=r.handler,h=r.painter.getViewportRoot();Je(h,l,!0),u.dispatch("mousemove",l)}},n.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return i.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),n=xW(e,"position"),r=e.style;r.position!=="absolute"&&n!=="absolute"&&(r.position="relative")}var s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},i.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,r=n.style,s=this._styleCoord;n.innerHTML?r.cssText=bW+AW(t,!this._firstShow,this._longHide)+ax(s[0],s[1],!0)+("border-color:"+vl(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},i.prototype.setContent=function(t,e,n,r,s){var a=this.el;if(t==null){a.innerHTML="";return}var o="";if($(s)&&n.get("trigger")==="item"&&!UI(n)&&(o=CW(n,r,s)),$(t))a.innerHTML=t+o;else if(t){a.innerHTML="",z(t)||(t=[t]);for(var l=0;l<t.length;l++)hl(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(o&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=o,a.appendChild(u)}}},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},i.prototype.moveTo=function(t,e){var n=this._styleCoord;if(ox(n,this._zr,this._container,t,e),n[0]!=null&&n[1]!=null){var r=this.el.style,s=ax(n[0],n[1]);A(s,function(a){r[a[0]]=a[1]})}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},i.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",it.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Pt(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},i}();const MW=RW;var LW=function(){function i(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),ux(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return i.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},i.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},i.prototype.setContent=function(t,e,n,r,s){var a=this;Y(t)&&Te(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new Pe({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:o.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:CE(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),A(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),A(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=lx(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},i.prototype.moveTo=function(t,e){var n=this.el;if(n){var r=this._styleCoord;ux(r,this._zr,t,e),t=r[0],e=r[1];var s=n.style,a=Fn(s.borderWidth||0),o=lx(s);n.x=t+a+o.left,n.y=e+a+o.top,n.markRedraw()}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},i.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Pt(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this._zr.remove(this.el)},i}();function Fn(i){return Math.max(0,i)}function lx(i){var t=Fn(i.shadowBlur||0),e=Fn(i.shadowOffsetX||0),n=Fn(i.shadowOffsetY||0);return{left:Fn(t-e),right:Fn(t+e),top:Fn(t-n),bottom:Fn(t+n)}}function ux(i,t,e,n){i[0]=e,i[1]=n,i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}const kW=LW;var DW=new Ut({shape:{x:-1,y:-1,width:2,height:2}}),PW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){if(!(it.node||!n.getDom())){var r=e.getComponent("tooltip"),s=this._renderMode=KF(r.get("renderMode"));this._tooltipContent=s==="richText"?new kW(n):new MW(n,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(e,n,r){if(!(it.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=n,this._api=r;var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?AE(this,"_updatePosition",50,"fixRate"):zp(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,n=e.get("triggerOn");WI("itemTooltip",this._api,Pt(function(r,s,a){n!=="none"&&(n.indexOf(r)>=0?this._tryShow(s,a):r==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,n=this._ecModel,r=this._api,s=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(e,n,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,n,r,s){if(!(s.from===this.uid||it.node||!r.getDom())){var a=hx(s,r);this._ticket="";var o=s.dataByCoordSys,l=BW(s,n,r);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var h=DW;h.x=s.x,h.y=s.y,h.update(),dt(h).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:h},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,n,r,s))return;var c=YI(s,n),f=c.point[0],d=c.point[1];f!=null&&d!=null&&this._tryShow({offsetX:f,offsetY:d,target:c.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:r.getZr().findHover(s.x,s.y).target},a))}},t.prototype.manuallyHideTip=function(e,n,r,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(hx(s,r))},t.prototype._manuallyAxisShowTip=function(e,n,r,s){var a=s.seriesIndex,o=s.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var u=n.getSeriesByIndex(a);if(u){var h=u.getData(),c=uo([h.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},t.prototype._tryShow=function(e,n){var r=e.target,s=this._tooltipModel;if(s){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(r){var o=dt(r);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;bo(r,function(h){if(dt(h).dataIndex!=null)return l=h,!0;if(dt(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(e,l,n):u?this._showComponentItemTooltip(e,u,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(e,n){var r=e.get("showDelay");n=Pt(n,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(n,r):n()},t.prototype._showAxisTooltip=function(e,n){var r=this._ecModel,s=this._tooltipModel,a=[n.offsetX,n.offsetY],o=uo([n.tooltipOption],s),l=this._renderMode,u=[],h=Qr("section",{blocks:[],noHeader:!0}),c=[],f=new Wd;A(e,function(y){A(y.dataByAxis,function(_){var w=r.getComponent(_.axisDim+"Axis",_.axisIndex),S=_.value;if(!(!w||S==null)){var x=$I(S,w.axis,r,_.seriesDataIndices,_.valueLabelOpt),b=Qr("section",{header:x,noHeader:!Oi(x),sortBlocks:!0,blocks:[]});h.blocks.push(b),A(_.seriesDataIndices,function(T){var C=r.getSeriesByIndex(T.seriesIndex),I=T.dataIndexInside,E=C.getDataParams(I);if(!(E.dataIndex<0)){E.axisDim=_.axisDim,E.axisIndex=_.axisIndex,E.axisType=_.axisType,E.axisId=_.axisId,E.axisValue=Sy(w.axis,{value:S}),E.axisValueLabel=x,E.marker=f.makeTooltipMarker("item",vl(E.color),l);var R=W1(C.formatTooltip(I,!0,null)),M=R.frag;if(M){var k=uo([C],s).get("valueFormatter");b.blocks.push(k?N({valueFormatter:k},M):M)}R.text&&c.push(R.text),u.push(E)}})}})}),h.blocks.reverse(),c.reverse();var d=n.position,g=o.get("order"),p=K1(h,f,l,g,r.get("useUTC"),o.get("textStyle"));p&&c.unshift(p);var v=l==="richText"?`

`:"<br/>",m=c.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(o,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(o,m,u,Math.random()+"",a[0],a[1],d,null,f)})},t.prototype._showSeriesItemTooltip=function(e,n,r){var s=this._ecModel,a=dt(n),o=a.seriesIndex,l=s.getSeriesByIndex(o),u=a.dataModel||l,h=a.dataIndex,c=a.dataType,f=u.getData(c),d=this._renderMode,g=e.positionDefault,p=uo([f.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),v=p.get("trigger");if(!(v!=null&&v!=="item")){var m=u.getDataParams(h,c),y=new Wd;m.marker=y.makeTooltipMarker("item",vl(m.color),d);var _=W1(u.formatTooltip(h,!1,c)),w=p.get("order"),S=p.get("valueFormatter"),x=_.frag,b=x?K1(S?N({valueFormatter:S},x):x,y,d,w,s.get("useUTC"),p.get("textStyle")):_.text,T="item_"+u.name+"_"+h;this._showOrMove(p,function(){this._showTooltipContent(p,b,m,T,e.offsetX,e.offsetY,e.position,e.target,y)}),r({type:"showTip",dataIndexInside:h,dataIndex:f.getRawIndex(h),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,n,r){var s=dt(n),a=s.tooltipConfig,o=a.option||{};if($(o)){var l=o;o={content:l,formatter:l}}var u=[o],h=this._ecModel.getComponent(s.componentMainType,s.componentIndex);h&&u.push(h),u.push({formatter:o.content});var c=e.positionDefault,f=uo(u,this._tooltipModel,c?{position:c}:null),d=f.get("content"),g=Math.random()+"",p=new Wd;this._showOrMove(f,function(){var v=at(f.get("formatterParams")||{});this._showTooltipContent(f,d,v,g,e.offsetX,e.offsetY,e.position,n,p)}),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,n,r,s,a,o,l,u,h){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var c=this._tooltipContent;c.setEnterable(e.get("enterable"));var f=e.get("formatter");l=l||e.get("position");var d=n,g=this._getNearestPoint([a,o],r,e.get("trigger"),e.get("borderColor")),p=g.color;if(f)if($(f)){var v=e.ecModel.get("useUTC"),m=z(r)?r[0]:r,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=f,y&&(d=of(m.axisValue,d,v)),d=JC(d,r,!0)}else if(rt(f)){var _=Pt(function(w,S){w===this._ticket&&(c.setContent(S,h,e,p,l),this._updatePosition(e,l,a,o,c,r,u))},this);this._ticket=s,d=f(r,s,_)}else d=f;c.setContent(d,h,e,p,l),c.show(e,p),this._updatePosition(e,l,a,o,c,r,u)}},t.prototype._getNearestPoint=function(e,n,r,s){if(r==="axis"||z(n))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!z(n))return{color:s||n.color||n.borderColor}},t.prototype._updatePosition=function(e,n,r,s,a,o,l){var u=this._api.getWidth(),h=this._api.getHeight();n=n||e.get("position");var c=a.getSize(),f=e.get("align"),d=e.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),rt(n)&&(n=n([r,s],o,a.el,g,{viewSize:[u,h],contentSize:c.slice()})),z(n))r=qt(n[0],u),s=qt(n[1],h);else if(Y(n)){var p=n;p.width=c[0],p.height=c[1];var v=ml(p,{width:u,height:h});r=v.x,s=v.y,f=null,d=null}else if($(n)&&l){var m=NW(n,g,c,e.get("borderWidth"));r=m[0],s=m[1]}else{var m=OW(r,s,a,u,h,f?null:20,d?null:20);r=m[0],s=m[1]}if(f&&(r-=cx(f)?c[0]/2:f==="right"?c[0]:0),d&&(s-=cx(d)?c[1]/2:d==="bottom"?c[1]:0),UI(e)){var m=FW(r,s,a,u,h);r=m[0],s=m[1]}a.moveTo(r,s)},t.prototype._updateContentNotChangedOnAxis=function(e,n){var r=this._lastDataByCoordSys,s=this._cbParamsList,a=!!r&&r.length===e.length;return a&&A(r,function(o,l){var u=o.dataByAxis||[],h=e[l]||{},c=h.dataByAxis||[];a=a&&u.length===c.length,a&&A(u,function(f,d){var g=c[d]||{},p=f.seriesDataIndices||[],v=g.seriesDataIndices||[];a=a&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&p.length===v.length,a&&A(p,function(m,y){var _=v[y];a=a&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),s&&A(f.seriesDataIndices,function(m){var y=m.seriesIndex,_=n[y],w=s[y];_&&w&&w.data!==_.data&&(a=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=n,!!a},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,n){it.node||!n.getDom()||(zp(this,"_updatePosition"),this._tooltipContent.dispose(),ev("itemTooltip",n))},t.type="tooltip",t}(Hi);function uo(i,t,e){var n=t.ecModel,r;e?(r=new oe(e,n,n),r=new oe(t.option,r,n)):r=t;for(var s=i.length-1;s>=0;s--){var a=i[s];a&&(a instanceof oe&&(a=a.get("tooltip",!0)),$(a)&&(a={formatter:a}),a&&(r=new oe(a,r,n)))}return r}function hx(i,t){return i.dispatchAction||Pt(t.dispatchAction,t)}function OW(i,t,e,n,r,s,a){var o=e.getSize(),l=o[0],u=o[1];return s!=null&&(i+l+s+2>n?i-=l+s:i+=s),a!=null&&(t+u+a>r?t-=u+a:t+=a),[i,t]}function FW(i,t,e,n,r){var s=e.getSize(),a=s[0],o=s[1];return i=Math.min(i+a,n)-a,t=Math.min(t+o,r)-o,i=Math.max(i,0),t=Math.max(t,0),[i,t]}function NW(i,t,e,n){var r=e[0],s=e[1],a=Math.ceil(Math.SQRT2*n)+8,o=0,l=0,u=t.width,h=t.height;switch(i){case"inside":o=t.x+u/2-r/2,l=t.y+h/2-s/2;break;case"top":o=t.x+u/2-r/2,l=t.y-s-a;break;case"bottom":o=t.x+u/2-r/2,l=t.y+h+a;break;case"left":o=t.x-r-a,l=t.y+h/2-s/2;break;case"right":o=t.x+u+a,l=t.y+h/2-s/2}return[o,l]}function cx(i){return i==="center"||i==="middle"}function BW(i,t,e){var n=km(i).queryOptionMap,r=n.keys()[0];if(!(!r||r==="series")){var s=Wl(t,r,n.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=e.getViewOfComponentModel(a),l;if(o.group.traverse(function(u){var h=dt(u).tooltipConfig;if(h&&h.name===i.name)return l=u,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}const zW=PW;function GW(i){Qn(HI),i.registerComponentModel(_W),i.registerComponentView(zW),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Re),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Re)}var $W=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Tt),VW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,r){if(this.group.removeAll(),!!e.get("show")){var s=this.group,a=e.getModel("textStyle"),o=e.getModel("subtextStyle"),l=e.get("textAlign"),u=et(e.get("textBaseline"),e.get("textVerticalAlign")),h=new Pe({style:Jn(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),f=e.get("subtext"),d=new Pe({style:Jn(o,{text:f,fill:o.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),p=e.get("sublink"),v=e.get("triggerEvent",!0);h.silent=!g&&!v,d.silent=!p&&!v,g&&h.on("click",function(){C1(g,"_"+e.get("target"))}),p&&d.on("click",function(){C1(p,"_"+e.get("subtarget"))}),dt(h).eventData=dt(d).eventData=v?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(h),f&&s.add(d);var m=s.getBoundingRect(),y=e.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=ml(y,{width:r.getWidth(),height:r.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=e.get("top")||e.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),s.x=_.x,s.y=_.y,s.markRedraw();var w={align:l,verticalAlign:u};h.setStyle(w),d.setStyle(w),m=s.getBoundingRect();var S=_.margin,x=e.getItemStyle(["color","opacity"]);x.fill=e.get("backgroundColor");var b=new Ut({shape:{x:m.x-S[3],y:m.y-S[0],width:m.width+S[1]+S[3],height:m.height+S[0]+S[2],r:e.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});s.add(b)}},t.type="title",t}(Hi);function WW(i){i.registerComponentModel($W),i.registerComponentView(VW)}function YW(i,t){if(!i)return!1;for(var e=z(i)?i:[i],n=0;n<e.length;n++)if(e[n]&&e[n][t])return!0;return!1}function th(i){wp(i,"label",["show"])}var eh=Bt(),ZI=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,n,r){this.mergeDefaultAndTheme(e,r),this._mergeOption(e,r,!1,!0)},t.prototype.isAnimationEnabled=function(){if(it.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},t.prototype._mergeOption=function(e,n,r,s){var a=this.mainType;r||n.eachSeries(function(o){var l=o.get(this.mainType,!0),u=eh(o)[a];if(!l||!l.data){eh(o)[a]=null;return}u?u._mergeOption(l,n,!0):(s&&th(l),A(l.data,function(h){h instanceof Array?(th(h[0]),th(h[1])):th(h)}),u=this.createMarkerModelFromSeries(l,this,n),N(u,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),u.__hostSeries=o),eh(o)[a]=u},this)},t.prototype.formatTooltip=function(e,n,r){var s=this.getData(),a=this.getRawValue(e),o=s.getName(e);return Qr("section",{header:this.name,blocks:[Qr("nameValue",{name:o,value:a,noName:!o,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,n){return eh(e)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Tt);Ti(ZI,vE.prototype);const mc=ZI;function HW(i,t){var e=i.mapDimensionsAll("defaultedLabel"),n=e.length;if(n===1){var r=ba(i,t,e[0]);return r!=null?r+"":null}else if(n){for(var s=[],a=0;a<e.length;a++)s.push(ba(i,t,e[a]));return s.join(" ")}}function UW(i,t){var e=i.mapDimensionsAll("defaultedLabel");if(!z(t))return t+"";for(var n=[],r=0;r<e.length;r++){var s=i.getDimensionIndex(e[r]);s>=0&&n.push(t[s])}return n.join(" ")}function XW(i){return!(isNaN(parseFloat(i.x))&&isNaN(parseFloat(i.y)))}function KW(i){return!isNaN(parseFloat(i.x))&&!isNaN(parseFloat(i.y))}function ih(i,t,e,n,r,s){var a=[],o=yy(t,n),l=o?t.getCalculationInfo("stackResultDimension"):n,u=Iy(t,l,i),h=t.indicesOfNearest(l,u)[0];a[r]=t.get(e,h),a[s]=t.get(l,h);var c=t.get(n,h),f=wa(t.get(n,h));return f=Math.min(f,20),f>=0&&(a[s]=+a[s].toFixed(f)),[a,c]}var lg={min:Et(ih,"min"),max:Et(ih,"max"),average:Et(ih,"average"),median:Et(ih,"median")};function fx(i,t){if(t){var e=i.getData(),n=i.coordinateSystem,r=n&&n.dimensions;if(!KW(t)&&!z(t.coord)&&z(r)){var s=qI(t,e,n,i);if(t=at(t),t.type&&lg[t.type]&&s.baseAxis&&s.valueAxis){var a=gt(r,s.baseAxis.dim),o=gt(r,s.valueAxis.dim),l=lg[t.type](e,s.baseDataDim,s.valueDataDim,a,o);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!z(r))t.coord=[];else for(var u=t.coord,h=0;h<2;h++)lg[u[h]]&&(u[h]=Iy(e,e.mapDimension(r[h]),u[h]));return t}}function qI(i,t,e,n){var r={};return i.valueIndex!=null||i.valueDim!=null?(r.valueDataDim=i.valueIndex!=null?t.getDimension(i.valueIndex):i.valueDim,r.valueAxis=e.getAxis(jW(n,r.valueDataDim)),r.baseAxis=e.getOtherAxis(r.valueAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim)):(r.baseAxis=n.getBaseAxis(),r.valueAxis=e.getOtherAxis(r.baseAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim),r.valueDataDim=t.mapDimension(r.valueAxis.dim)),r}function jW(i,t){var e=i.getData().getDimensionInfo(t);return e&&e.coordDim}function dx(i,t){return i&&i.containData&&t.coord&&!XW(t)?i.containData(t.coord):!0}function ZW(i,t){return i?function(e,n,r,s){var a=s<2?e.coord&&e.coord[s]:e.value;return ua(a,t[s])}:function(e,n,r,s){return ua(e.value,t[s])}}function Iy(i,t,e){if(e==="average"){var n=0,r=0;return i.each(t,function(s,a){isNaN(s)||(n+=s,r++)}),n/r}else return e==="median"?i.getMedian(t):i.getDataExtent(t)[e==="max"?1:0]}var ug=Bt(),qW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=nt()},t.prototype.render=function(e,n,r){var s=this,a=this.markerGroupMap;a.each(function(o){ug(o).keep=!1}),n.eachSeries(function(o){var l=mc.getMarkerModelFromSeries(o,s.type);l&&s.renderSeries(o,l,n,r)}),a.each(function(o){!ug(o).keep&&s.group.remove(o.group)})},t.prototype.markKeep=function(e){ug(e).keep=!0},t.prototype.toggleBlurSeries=function(e,n){var r=this;A(e,function(s){var a=mc.getMarkerModelFromSeries(s,r.type);if(a){var o=a.getData();o.eachItemGraphicEl(function(l){l&&(n?sC(l):Bm(l))})}})},t.type="marker",t}(Hi);const JW=qW;var QW=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(mc);const tY=QW;var gx=Zn.prototype,hg=$m.prototype,JI=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return i}();(function(i){j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t})(JI);function cg(i){return isNaN(+i.cpx1)||isNaN(+i.cpy1)}var eY=function(i){j(t,i);function t(e){var n=i.call(this,e)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new JI},t.prototype.buildPath=function(e,n){cg(n)?gx.buildPath.call(this,e,n):hg.buildPath.call(this,e,n)},t.prototype.pointAt=function(e){return cg(this.shape)?gx.pointAt.call(this,e):hg.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var n=this.shape,r=cg(n)?[n.x2-n.x1,n.y2-n.y1]:hg.tangentAt.call(this,e);return _m(r,r)},t}(_t);const iY=eY;var fg=["fromSymbol","toSymbol"];function px(i){return"_"+i+"Type"}function vx(i,t,e){var n=t.getItemVisual(e,i);if(!n||n==="none")return n;var r=t.getItemVisual(e,i+"Size"),s=t.getItemVisual(e,i+"Rotate"),a=t.getItemVisual(e,i+"Offset"),o=t.getItemVisual(e,i+"KeepAspect"),l=NE(r),u=fy(a||0,l);return n+l+u+(s||"")+(o||"")}function mx(i,t,e){var n=t.getItemVisual(e,i);if(!(!n||n==="none")){var r=t.getItemVisual(e,i+"Size"),s=t.getItemVisual(e,i+"Rotate"),a=t.getItemVisual(e,i+"Offset"),o=t.getItemVisual(e,i+"KeepAspect"),l=NE(r),u=fy(a||0,l),h=mf(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,o);return h.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,h.name=i,h}}function nY(i){var t=new iY({name:"line",subPixelOptimize:!0});return iv(t.shape,i),t}function iv(i,t){i.x1=t[0][0],i.y1=t[0][1],i.x2=t[1][0],i.y2=t[1][1],i.percent=1;var e=t[2];e?(i.cpx1=e[0],i.cpy1=e[1]):(i.cpx1=NaN,i.cpy1=NaN)}var rY=function(i){j(t,i);function t(e,n,r){var s=i.call(this)||this;return s._createLine(e,n,r),s}return t.prototype._createLine=function(e,n,r){var s=e.hostModel,a=e.getItemLayout(n),o=nY(a);o.shape.percent=0,qn(o,{shape:{percent:1}},s,n),this.add(o),A(fg,function(l){var u=mx(l,e,n);this.add(u),this[px(l)]=vx(l,e,n)},this),this._updateCommonStl(e,n,r)},t.prototype.updateData=function(e,n,r){var s=e.hostModel,a=this.childOfName("line"),o=e.getItemLayout(n),l={shape:{}};iv(l.shape,o),Yi(a,l,s,n),A(fg,function(u){var h=vx(u,e,n),c=px(u);if(this[c]!==h){this.remove(this.childOfName(u));var f=mx(u,e,n);this.add(f)}this[c]=h},this),this._updateCommonStl(e,n,r)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,n,r){var s=e.hostModel,a=this.childOfName("line"),o=r&&r.emphasisLineStyle,l=r&&r.blurLineStyle,u=r&&r.selectLineStyle,h=r&&r.labelStatesModels,c=r&&r.emphasisDisabled,f=r&&r.focus,d=r&&r.blurScope;if(!r||e.hasItemOption){var g=e.getItemModel(n),p=g.getModel("emphasis");o=p.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),c=p.get("disabled"),f=p.get("focus"),d=p.get("blurScope"),h=jm(g)}var v=e.getItemVisual(n,"style"),m=v.stroke;a.useStyle(v),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=o,a.ensureState("blur").style=l,a.ensureState("select").style=u,A(fg,function(x){var b=this.childOfName(x);if(b){b.setColor(m),b.style.opacity=v.opacity;for(var T=0;T<Wi.length;T++){var C=Wi[T],I=a.getState(C);if(I){var E=I.style||{},R=b.ensureState(C),M=R.style||(R.style={});E.stroke!=null&&(M[b.__isEmptyBrush?"stroke":"fill"]=E.stroke),E.opacity!=null&&(M.opacity=E.opacity)}}b.markRedraw()}},this);var y=s.getRawValue(n);Km(this,h,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(x,b){return s.getFormattedLabel(x,b,e.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?e.getName(n):isFinite(y)?Yt(y):y)+""});var _=this.getTextContent();if(_){var w=h.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=w.get("position")||"middle";var S=w.get("distance");z(S)||(S=[S,S]),_.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),hC(this,f,d,c)},t.prototype.highlight=function(){sc(this)},t.prototype.downplay=function(){ac(this)},t.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},t.prototype.setLinePoints=function(e){var n=this.childOfName("line");iv(n.shape,e),n.dirty()},t.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),r=e.childOfName("toSymbol"),s=e.getTextContent();if(!n&&!r&&(!s||s.ignore))return;for(var a=1,o=this.parent;o;)o.scaleX&&(a/=o.scaleX),o=o.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),f=lT([],c,h);_m(f,f);function d(I,E){var R=I.__specifiedRotation;if(R==null){var M=l.tangentAt(E);I.attr("rotation",(E===1?-1:1)*Math.PI/2-Math.atan2(M[1],M[0]))}else I.attr("rotation",R)}if(n&&(n.setPosition(h),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),r&&(r.setPosition(c),d(r,1),r.scaleX=r.scaleY=a*u,r.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var g=void 0,p=void 0,v=s.__labelDistance,m=v[0]*a,y=v[1]*a,_=u/2,w=l.tangentAt(_),S=[w[1],-w[0]],x=l.pointAt(_);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var b=w[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var T=-Math.atan2(w[1],w[0]);c[0]<h[0]&&(T=Math.PI+T),s.rotation=T}var C=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-y,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=y,p="top";break;default:C=0,p="middle"}switch(s.__position){case"end":s.x=f[0]*m+c[0],s.y=f[1]*y+c[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",p=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":s.x=-f[0]*m+h[0],s.y=-f[1]*y+h[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",p=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=m*b+h[0],s.y=h[1]+C,g=w[0]<0?"right":"left",s.originX=-m*b,s.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=x[0],s.y=x[1]+C,g="center",s.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-m*b+c[0],s.y=c[1]+C,g=w[0]>=0?"right":"left",s.originX=m*b,s.originY=-C;break}s.scaleX=s.scaleY=a,s.setStyle({verticalAlign:s.__verticalAlign||p,align:s.__align||g})}},t}(De);const sY=rY;var aY=function(){function i(t){this.group=new De,this._LineCtor=t||sY}return i.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var n=this,r=n.group,s=n._lineData;n._lineData=t,s||r.removeAll();var a=yx(t);t.diff(s).add(function(o){e._doAdd(t,o,a)}).update(function(o,l){e._doUpdate(s,t,l,o,a)}).remove(function(o){r.remove(s.getItemGraphicEl(o))}).execute()},i.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},i.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=yx(t),this._lineData=null,this.group.removeAll()},i.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function n(o){!o.isGroup&&!oY(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var s=e.getItemLayout(r);if(dg(s)){var a=new this._LineCtor(e,r,this._seriesScope);a.traverse(n),this.group.add(a),e.setItemGraphicEl(r,a),this._progressiveEls.push(a)}}},i.prototype.remove=function(){this.group.removeAll()},i.prototype.eachRendered=function(t){rf(this._progressiveEls||this.group,t)},i.prototype._doAdd=function(t,e,n){var r=t.getItemLayout(e);if(dg(r)){var s=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,s),this.group.add(s)}},i.prototype._doUpdate=function(t,e,n,r,s){var a=t.getItemGraphicEl(n);if(!dg(e.getItemLayout(r))){this.group.remove(a);return}a?a.updateData(e,r,s):a=new this._LineCtor(e,r,s),e.setItemGraphicEl(r,a),this.group.add(a)},i}();function oY(i){return i.animators&&i.animators.length>0}function yx(i){var t=i.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:jm(t)}}function _x(i){return isNaN(i[0])||isNaN(i[1])}function dg(i){return i&&!_x(i[0])&&!_x(i[1])}const lY=aY;function Ay(i,t){return i.type===t}var nh=Bt(),uY=function(i,t,e,n){var r=i.getData(),s;if(z(n))s=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var o=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)o=t.getAxis(n.yAxis!=null?"y":"x"),l=ya(n.yAxis,n.xAxis);else{var u=qI(n,r,t,i);o=u.valueAxis;var h=fI(r,u.valueDataDim);l=Iy(r,h,a)}var c=o.dim==="x"?0:1,f=1-c,d=at(n),g={coord:[]};d.type=null,d.coord=[],d.coord[f]=-1/0,g.coord[f]=1/0;var p=e.get("precision");p>=0&&Ot(l)&&(l=+l.toFixed(Math.min(p,20))),d.coord[c]=g.coord[c]=l,s=[d,g,{type:a,valueIndex:n.valueIndex,value:l}]}else s=[]}var v=[fx(i,s[0]),fx(i,s[1]),N({},s[2])];return v[2].type=v[2].type||null,ht(v[2],v[0]),ht(v[2],v[1]),v};function yc(i){return!isNaN(i)&&!isFinite(i)}function xx(i,t,e,n){var r=1-i,s=n.dimensions[i];return yc(t[r])&&yc(e[r])&&t[i]===e[i]&&n.getAxis(s).containData(t[i])}function hY(i,t){if(i.type==="cartesian2d"){var e=t[0].coord,n=t[1].coord;if(e&&n&&(xx(1,e,n,i)||xx(0,e,n,i)))return!0}return dx(i,t[0])&&dx(i,t[1])}function gg(i,t,e,n,r){var s=n.coordinateSystem,a=i.getItemModel(t),o,l=qt(a.get("x"),r.getWidth()),u=qt(a.get("y"),r.getHeight());if(!isNaN(l)&&!isNaN(u))o=[l,u];else{if(n.getMarkerPosition)o=n.getMarkerPosition(i.getValues(i.dimensions,t));else{var h=s.dimensions,c=i.get(h[0],t),f=i.get(h[1],t);o=s.dataToPoint([c,f])}if(Ay(s,"cartesian2d")){var d=s.getAxis("x"),g=s.getAxis("y"),h=s.dimensions;yc(i.get(h[0],t))?o[0]=d.toGlobalCoord(d.getExtent()[e?0:1]):yc(i.get(h[1],t))&&(o[1]=g.toGlobalCoord(g.getExtent()[e?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}i.setItemLayout(t,o)}var cY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,n,r){n.eachSeries(function(s){var a=mc.getMarkerModelFromSeries(s,"markLine");if(a){var o=a.getData(),l=nh(a).from,u=nh(a).to;l.each(function(h){gg(l,h,!0,s,r),gg(u,h,!1,s,r)}),o.each(function(h){o.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,n,r,s){var a=e.coordinateSystem,o=e.id,l=e.getData(),u=this.markerGroupMap,h=u.get(o)||u.set(o,new lY);this.group.add(h.group);var c=fY(a,e,n),f=c.from,d=c.to,g=c.line;nh(n).from=f,nh(n).to=d,n.setData(g);var p=n.get("symbol"),v=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");z(p)||(p=[p,p]),z(v)||(v=[v,v]),z(m)||(m=[m,m]),z(y)||(y=[y,y]),c.from.each(function(w){_(f,w,!0),_(d,w,!1)}),g.each(function(w){var S=g.getItemModel(w).getModel("lineStyle").getLineStyle();g.setItemLayout(w,[f.getItemLayout(w),d.getItemLayout(w)]),S.stroke==null&&(S.stroke=f.getItemVisual(w,"style").fill),g.setItemVisual(w,{fromSymbolKeepAspect:f.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(w,"symbolOffset"),fromSymbolRotate:f.getItemVisual(w,"symbolRotate"),fromSymbolSize:f.getItemVisual(w,"symbolSize"),fromSymbol:f.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:S})}),h.updateData(g),c.line.eachItemGraphicEl(function(w){dt(w).dataModel=n,w.traverse(function(S){dt(S).dataModel=n})});function _(w,S,x){var b=w.getItemModel(S);gg(w,S,x,e,s);var T=b.getModel("itemStyle").getItemStyle();T.fill==null&&(T.fill=FE(l,"color")),w.setItemVisual(S,{symbolKeepAspect:b.get("symbolKeepAspect"),symbolOffset:et(b.get("symbolOffset",!0),y[x?0:1]),symbolRotate:et(b.get("symbolRotate",!0),m[x?0:1]),symbolSize:et(b.get("symbolSize"),v[x?0:1]),symbol:et(b.get("symbol",!0),p[x?0:1]),style:T})}this.markKeep(h),h.group.silent=n.get("silent")||e.get("silent")},t.type="markLine",t}(JW);function fY(i,t,e){var n;i?n=H(i&&i.dimensions,function(u){var h=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return N(N({},h),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var r=new Rh(n,e),s=new Rh(n,e),a=new Rh([],e),o=H(e.get("data"),Et(uY,t,i,e));i&&(o=ae(o,Et(hY,i)));var l=ZW(!!i,n);return r.initData(H(o,function(u){return u[0]}),null,l),s.initData(H(o,function(u){return u[1]}),null,l),a.initData(H(o,function(u){return u[2]})),a.hasItemOption=!0,{from:r,to:s,line:a}}const dY=cY;function gY(i){i.registerComponentModel(tY),i.registerComponentView(dY),i.registerPreprocessor(function(t){YW(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var pY=function(i,t){if(t==="all")return{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}},vY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,n,r){this.mergeDefaultAndTheme(e,r),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,n){i.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},t.prototype._updateSelector=function(e){var n=e.selector,r=this.ecModel;n===!0&&(n=e.selector=["all","inverse"]),z(n)&&A(n,function(s,a){$(s)&&(s={type:s}),n[a]=ht(s,pY(r,s.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var n=!1,r=0;r<e.length;r++){var s=e[r].get("name");if(this.isSelected(s)){this.select(s),n=!0;break}}!n&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var n=[],r=[];e.eachRawSeries(function(l){var u=l.name;r.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,f=c.getAllNames();e.isSeriesFiltered(l)||(r=r.concat(f)),f.length?n=n.concat(f):h=!0}else h=!0;h&&Lm(l)&&n.push(l.name)}),this._availableNames=r;var s=this.get("data")||n,a=nt(),o=H(s,function(l){return($(l)||Ot(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new oe(l,this,this.ecModel))},this);this._data=ae(o,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var n=this.option.selected,r=this.get("selectedMode");if(r==="single"){var s=this._data;A(s,function(a){n[a.get("name")]=!1})}n[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var n=this.option.selected;n.hasOwnProperty(e)||(n[e]=!0),this[n[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,n=this.option.selected;A(e,function(r){n[r.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,n=this.option.selected;A(e,function(r){var s=r.get("name",!0);n.hasOwnProperty(s)||(n[s]=!0),n[s]=!n[s]})},t.prototype.isSelected=function(e){var n=this.option.selected;return!(n.hasOwnProperty(e)&&!n[e])&&gt(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Tt);const nv=vY;var Ds=Et,rv=A,rh=De,mY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new rh),this.group.add(this._selectorGroup=new rh),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,n,r){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var a=e.get("align"),o=e.get("orient");(!a||a==="auto")&&(a=e.get("left")==="right"&&o==="vertical"?"right":"left");var l=e.get("selector",!0),u=e.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(a,e,n,r,l,o,u);var h=e.getBoxLayoutParams(),c={width:r.getWidth(),height:r.getHeight()},f=e.get("padding"),d=ml(h,c,f),g=this.layoutInner(e,a,d,s,l,u),p=ml(St({width:g.width,height:g.height},h),c,f);this.group.x=p.x-g.x,this.group.y=p.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=mW(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,n,r,s,a,o,l){var u=this.getContentGroup(),h=nt(),c=n.get("selectedMode"),f=[];r.eachRawSeries(function(d){!d.get("legendHoverLink")&&f.push(d.id)}),rv(n.getData(),function(d,g){var p=d.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var v=new rh;v.newline=!0,u.add(v);return}var m=r.getSeriesByName(p)[0];if(!h.get(p))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),S=y.getVisual("style"),x=this._createItem(m,p,g,d,n,e,_,S,w,c,s);x.on("click",Ds(Sx,p,null,s,f)).on("mouseover",Ds(sv,m.name,null,s,f)).on("mouseout",Ds(av,m.name,null,s,f)),r.ssr&&x.eachChild(function(b){var T=dt(b);T.seriesIndex=m.seriesIndex,T.dataIndex=g,T.ssrType="legend"}),h.set(p,!0)}else r.eachRawSeries(function(b){if(!h.get(p)&&b.legendVisualProvider){var T=b.legendVisualProvider;if(!T.containName(p))return;var C=T.indexOfName(p),I=T.getItemVisual(C,"style"),E=T.getItemVisual(C,"legendIcon"),R=Wr(I.fill);R&&R[3]===0&&(R[3]=.2,I=N(N({},I),{fill:Tm(R,"rgba")}));var M=this._createItem(b,p,g,d,n,e,{},I,E,c,s);M.on("click",Ds(Sx,null,p,s,f)).on("mouseover",Ds(sv,null,p,s,f)).on("mouseout",Ds(av,null,p,s,f)),r.ssr&&M.eachChild(function(k){var L=dt(k);L.seriesIndex=b.seriesIndex,L.dataIndex=g,L.ssrType="legend"}),h.set(p,!0)}},this)},this),a&&this._createSelector(a,n,s,o,l)},t.prototype._createSelector=function(e,n,r,s,a){var o=this.getSelectorGroup();rv(e,function(u){var h=u.type,c=new Pe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});o.add(c);var f=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);Km(c,{normal:f,emphasis:d},{defaultText:u.title}),Ip(c)})},t.prototype._createItem=function(e,n,r,s,a,o,l,u,h,c,f){var d=e.visualDrawType,g=a.get("itemWidth"),p=a.get("itemHeight"),v=a.isSelected(n),m=s.get("symbolRotate"),y=s.get("symbolKeepAspect"),_=s.get("icon");h=_||h||"roundRect";var w=yY(h,s,l,u,d,v,f),S=new rh,x=s.getModel("textStyle");if(rt(e.getLegendIcon)&&(!_||_==="inherit"))S.add(e.getLegendIcon({itemWidth:g,itemHeight:p,icon:h,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var b=_==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;S.add(_Y({itemWidth:g,itemHeight:p,icon:h,iconRotate:b,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var T=o==="left"?g+5:-5,C=o,I=a.get("formatter"),E=n;$(I)&&I?E=I.replace("{name}",n??""):rt(I)&&(E=I(n));var R=v?x.getTextColor():s.get("inactiveColor");S.add(new Pe({style:Jn(x,{text:E,x:T,y:p/2,fill:R,align:C,verticalAlign:"middle"},{inheritColor:R})}));var M=new Ut({shape:S.getBoundingRect(),style:{fill:"transparent"}}),k=s.getModel("tooltip");return k.get("show")&&Xm({el:M,componentModel:a,itemName:n,itemTooltipOption:k.option}),S.add(M),S.eachChild(function(L){L.silent=!0}),M.silent=!c,this.getContentGroup().add(S),Ip(S),S.__legendDataIndex=r,S},t.prototype.layoutInner=function(e,n,r,s,a,o){var l=this.getContentGroup(),u=this.getSelectorGroup();No(e.get("orient"),l,e.get("itemGap"),r.width,r.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),a){No("horizontal",u,e.get("selectorItemGap",!0));var f=u.getBoundingRect(),d=[-f.x,-f.y],g=e.get("selectorButtonGap",!0),p=e.getOrient().index,v=p===0?"width":"height",m=p===0?"height":"width",y=p===0?"y":"x";o==="end"?d[p]+=h[v]+g:c[p]+=f[v]+g,d[1-p]+=h[m]/2-f[m]/2,u.x=d[0],u.y=d[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[v]=h[v]+g+f[v],_[m]=Math.max(h[m],f[m]),_[y]=Math.min(0,f[y]+d[1-p]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Hi);function yY(i,t,e,n,r,s,a){function o(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),rv(v,function(y,_){v[_]==="inherit"&&(v[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=i.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?n.decal:Yp(c,a),u.fill==="inherit"&&(u.fill=n[r]),u.stroke==="inherit"&&(u.stroke=n[h]),u.opacity==="inherit"&&(u.opacity=(r==="fill"?n:e).opacity),o(u,n);var f=t.getModel("lineStyle"),d=f.getLineStyle();if(o(d,e),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!s){var g=t.get("inactiveBorderWidth"),p=u[h];u.lineWidth=g==="auto"?n.lineWidth>0&&p?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=f.get("inactiveColor"),d.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function _Y(i){var t=i.icon||"roundRect",e=mf(t,0,0,i.itemWidth,i.itemHeight,i.itemStyle.fill,i.symbolKeepAspect);return e.setStyle(i.itemStyle),e.rotation=(i.iconRotate||0)*Math.PI/180,e.setOrigin([i.itemWidth/2,i.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function Sx(i,t,e,n){av(i,t,e,n),e.dispatchAction({type:"legendToggleSelect",name:i??t}),sv(i,t,e,n)}function QI(i){for(var t=i.getZr().storage.getDisplayList(),e,n=0,r=t.length;n<r&&!(e=t[n].states.emphasis);)n++;return e&&e.hoverLayer}function sv(i,t,e,n){QI(e)||e.dispatchAction({type:"highlight",seriesName:i,name:t,excludeSeriesId:n})}function av(i,t,e,n){QI(e)||e.dispatchAction({type:"downplay",seriesName:i,name:t,excludeSeriesId:n})}const tA=mY;function wY(i){var t=i.findComponents({mainType:"legend"});t&&t.length&&i.filterSeries(function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0})}function ho(i,t,e){var n={},r=i==="toggleSelected",s;return e.eachComponent("legend",function(a){r&&s!=null?a[s?"select":"unSelect"](t.name):i==="allSelect"||i==="inverseSelect"?a[i]():(a[i](t.name),s=a.isSelected(t.name));var o=a.getData();A(o,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&h:n[u]=h}})}),i==="allSelect"||i==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function xY(i){i.registerAction("legendToggleSelect","legendselectchanged",Et(ho,"toggleSelected")),i.registerAction("legendAllSelect","legendselectall",Et(ho,"allSelect")),i.registerAction("legendInverseSelect","legendinverseselect",Et(ho,"inverseSelect")),i.registerAction("legendSelect","legendselected",Et(ho,"select")),i.registerAction("legendUnSelect","legendunselected",Et(ho,"unSelect"))}function eA(i){i.registerComponentModel(nv),i.registerComponentView(tA),i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,wY),i.registerSubTypeDefaulter("legend",function(){return"plain"}),xY(i)}var SY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,n,r){var s=df(e);i.prototype.init.call(this,e,n,r),bx(this,e,s)},t.prototype.mergeOption=function(e,n){i.prototype.mergeOption.call(this,e,n),bx(this,this.option,e)},t.type="legend.scroll",t.defaultOption=zC(nv.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(nv);function bx(i,t,e){var n=i.getOrient(),r=[1,1];r[n.index]=0,Sa(t,e,{type:"box",ignoreSize:!!r})}const bY=SY;var Tx=De,pg=["width","height"],vg=["x","y"],TY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){i.prototype.init.call(this),this.group.add(this._containerGroup=new Tx),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Tx)},t.prototype.resetInner=function(){i.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,n,r,s,a,o,l){var u=this;i.prototype.renderInner.call(this,e,n,r,s,a,o,l);var h=this._controllerGroup,c=n.get("pageIconSize",!0),f=z(c)?c:[c,c];g("pagePrev",0);var d=n.getModel("pageTextStyle");h.add(new Pe({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(p,v){var m=p+"DataIndex",y=Um(n.get("pageIcons",!0)[n.getOrient().name][v],{onclick:Pt(u._pageGo,u,m,n,s)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=p,h.add(y)}},t.prototype.layoutInner=function(e,n,r,s,a,o){var l=this.getSelectorGroup(),u=e.getOrient().index,h=pg[u],c=vg[u],f=pg[1-u],d=vg[1-u];a&&No("horizontal",l,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),p=l.getBoundingRect(),v=[-p.x,-p.y],m=at(r);a&&(m[h]=r[h]-p[h]-g);var y=this._layoutContentAndController(e,s,m,u,h,f,d,c);if(a){if(o==="end")v[u]+=y[h]+g;else{var _=p[h]+g;v[u]-=_,y[c]-=_}y[h]+=p[h]+g,v[1-u]+=y[d]+y[f]/2-p[f]/2,y[f]=Math.max(y[f],p[f]),y[d]=Math.min(y[d],p[d]+v[1-u]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(e,n,r,s,a,o,l,u){var h=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;No(e.get("orient"),h,e.get("itemGap"),s?r.width:null,s?null:r.height),No("horizontal",f,e.get("pageButtonItemGap",!0));var d=h.getBoundingRect(),g=f.getBoundingRect(),p=this._showController=d[a]>r[a],v=[-d.x,-d.y];n||(v[s]=h[u]);var m=[0,0],y=[-g.x,-g.y],_=et(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(p){var w=e.get("pageButtonPosition",!0);w==="end"?y[s]+=r[a]-g[a]:m[s]+=g[a]+_}y[1-s]+=d[o]/2-g[o]/2,h.setPosition(v),c.setPosition(m),f.setPosition(y);var S={x:0,y:0};if(S[a]=p?r[a]:d[a],S[o]=Math.max(d[o],g[o]),S[l]=Math.min(0,g[l]+y[1-s]),c.__rectSize=r[a],p){var x={x:0,y:0};x[a]=Math.max(r[a]-g[a]-_,0),x[o]=S[o],c.setClipPath(new Ut({shape:x})),c.__rectSize=x[a]}else f.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(e);return b.pageIndex!=null&&Yi(h,{x:b.contentPosition[0],y:b.contentPosition[1]},p?e:null),this._updatePageInfoView(e,b),S},t.prototype._pageGo=function(e,n,r){var s=this._getPageInfo(n)[e];s!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:n.id})},t.prototype._updatePageInfoView=function(e,n){var r=this._controllerGroup;A(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",f=n[c]!=null,d=r.childOfName(h);d&&(d.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),d.cursor=f?"pointer":"default")});var s=r.childOfName("pageText"),a=e.get("pageFormatter"),o=n.pageIndex,l=o!=null?o+1:0,u=n.pageCount;s&&a&&s.setStyle("text",$(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(e){var n=e.get("scrollDataIndex",!0),r=this.getContentGroup(),s=this._containerGroup.__rectSize,a=e.getOrient().index,o=pg[a],l=vg[a],u=this._findTargetItemIndex(n),h=r.children(),c=h[u],f=h.length,d=f?1:0,g={contentPosition:[r.x,r.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return g;var p=w(c);g.contentPosition[a]=-p.s;for(var v=u+1,m=p,y=p,_=null;v<=f;++v)_=w(h[v]),(!_&&y.e>m.s+s||_&&!S(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=_;for(var v=u-1,m=p,y=p,_=null;v>=-1;--v)_=w(h[v]),(!_||!S(y,_.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=_;return g;function w(x){if(x){var b=x.getBoundingRect(),T=b[l]+x[l];return{s:T,e:T+b[o],i:x.__legendDataIndex}}}function S(x,b){return x.e>=b&&x.s<=b+s}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var n,r=this.getContentGroup(),s;return r.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===e&&(n=o)}),n??s},t.type="legend.scroll",t}(tA);const CY=TY;function EY(i){i.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;n!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(r){r.setScrollDataIndex(n)})})}function IY(i){Qn(eA),i.registerComponentModel(bY),i.registerComponentView(CY),EY(i)}function AY(i){Qn(eA),Qn(IY)}function RY(i,t,e,n,r){var s=i.getArea(),a=s.x,o=s.y,l=s.width,u=s.height,h=e.get(["lineStyle","width"])||2;a-=h/2,o-=h/2,l+=h,u+=h,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var c=new Ut({shape:{x:a,y:o,width:l,height:u}});if(t){var f=i.getBaseAxis(),d=f.isHorizontal(),g=f.inverse;d?(g&&(c.shape.x+=l),c.shape.width=0):(g||(c.shape.y+=u),c.shape.height=0);var p=rt(r)?function(v){r(v,c)}:null;qn(c,{shape:{width:l,height:u,x:a,y:o}},e,null,n,p)}return c}function MY(i,t,e){var n=i.getArea(),r=Yt(n.r0,1),s=Yt(n.r,1),a=new Hl({shape:{cx:Yt(i.cx,1),cy:Yt(i.cy,1),r0:r,r:s,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var o=i.getBaseAxis().dim==="angle";o?a.shape.endAngle=n.startAngle:a.shape.r=r,qn(a,{shape:{endAngle:n.endAngle,r:s}},e)}return a}function LY(i,t,e,n,r){if(i){if(i.type==="polar")return MY(i,t,e);if(i.type==="cartesian2d")return RY(i,t,e,n,r)}else return null;return null}var kY={average:function(i){for(var t=0,e=0,n=0;n<i.length;n++)isNaN(i[n])||(t+=i[n],e++);return e===0?NaN:t/e},sum:function(i){for(var t=0,e=0;e<i.length;e++)t+=i[e]||0;return t},max:function(i){for(var t=-1/0,e=0;e<i.length;e++)i[e]>t&&(t=i[e]);return isFinite(t)?t:NaN},min:function(i){for(var t=1/0,e=0;e<i.length;e++)i[e]<t&&(t=i[e]);return isFinite(t)?t:NaN},minmax:function(i){for(var t=-1/0,e=-1/0,n=0;n<i.length;n++){var r=i[n],s=Math.abs(r);s>t&&(t=s,e=r)}return isFinite(e)?e:NaN},nearest:function(i){return i[0]}},DY=function(i){return Math.round(i.length/2)};function PY(i){return{seriesType:i,reset:function(t,e,n){var r=t.getData(),s=t.get("sampling"),a=t.coordinateSystem,o=r.count();if(o>10&&a.type==="cartesian2d"&&s){var l=a.getBaseAxis(),u=a.getOtherAxis(l),h=l.getExtent(),c=n.getDevicePixelRatio(),f=Math.abs(h[1]-h[0])*(c||1),d=Math.round(o/f);if(isFinite(d)&&d>1){s==="lttb"&&t.setData(r.lttbDownSample(r.mapDimension(u.dim),1/d));var g=void 0;$(s)?g=kY[s]:rt(s)&&(g=s),g&&t.setData(r.downSample(r.mapDimension(u.dim),1/d,g,DY))}}}}}var iA=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,n){return dI(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,n,r){var s=this.coordinateSystem;if(s&&s.clampData){var a=s.clampData(e),o=s.dataToPoint(a);if(r)A(s.getAxes(),function(f,d){if(f.type==="category"&&n!=null){var g=f.getTicksCoords(),p=f.getTickModel().get("alignWithLabel"),v=a[d],m=n[d]==="x1"||n[d]==="y1";if(m&&!p&&(v+=1),g.length<2)return;if(g.length===2){o[d]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var y=void 0,_=void 0,w=1,S=0;S<g.length;S++){var x=g[S].coord,b=S===g.length-1?g[S-1].tickValue+w:g[S].tickValue;if(b===v){_=x;break}else if(b<v)y=x;else if(y!=null&&b>v){_=(x+y)/2;break}S===1&&(w=b-g[0].tickValue)}_==null&&(y?y&&(_=g[g.length-1].coord):_=g[0].coord),o[d]=f.toGlobalCoord(_)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=s.getBaseAxis().isHorizontal()?0:1;o[c]+=u+h/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Ta);Ta.registerClass(iA);const Cx=iA;var OY=function(i){j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return dI(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>e&&(e=n),e},t.prototype.brushSelector=function(e,n,r){return r.rect(n.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=zC(Cx.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Cx);const FY=OY;var NY=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),BY=function(i){j(t,i);function t(e){var n=i.call(this,e)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new NY},t.prototype.buildPath=function(e,n){var r=n.cx,s=n.cy,a=Math.max(n.r0||0,0),o=Math.max(n.r,0),l=(o-a)*.5,u=a+l,h=n.startAngle,c=n.endAngle,f=n.clockwise,d=Math.PI*2,g=f?c-h<d:h-c<d;g||(h=c-(f?d:-d));var p=Math.cos(h),v=Math.sin(h),m=Math.cos(c),y=Math.sin(c);g?(e.moveTo(p*a+r,v*a+s),e.arc(p*u+r,v*u+s,l,-Math.PI+h,h,!f)):e.moveTo(p*o+r,v*o+s),e.arc(r,s,o,h,c,!f),e.arc(m*u+r,y*u+s,l,c-Math.PI*2,c-Math.PI,!f),a!==0&&e.arc(r,s,a,c,h,f)},t}(_t);const Ex=BY;function zY(i,t){t=t||{};var e=t.isRoundCap;return function(n,r,s){var a=r.position;if(!a||a instanceof Array)return ic(n,r,s);var o=i(a),l=r.distance!=null?r.distance:5,u=this.shape,h=u.cx,c=u.cy,f=u.r,d=u.r0,g=(f+d)/2,p=u.startAngle,v=u.endAngle,m=(p+v)/2,y=e?Math.abs(f-d)/2:0,_=Math.cos,w=Math.sin,S=h+f*_(p),x=c+f*w(p),b="left",T="top";switch(o){case"startArc":S=h+(d-l)*_(m),x=c+(d-l)*w(m),b="center",T="top";break;case"insideStartArc":S=h+(d+l)*_(m),x=c+(d+l)*w(m),b="center",T="bottom";break;case"startAngle":S=h+g*_(p)+sh(p,l+y,!1),x=c+g*w(p)+ah(p,l+y,!1),b="right",T="middle";break;case"insideStartAngle":S=h+g*_(p)+sh(p,-l+y,!1),x=c+g*w(p)+ah(p,-l+y,!1),b="left",T="middle";break;case"middle":S=h+g*_(m),x=c+g*w(m),b="center",T="middle";break;case"endArc":S=h+(f+l)*_(m),x=c+(f+l)*w(m),b="center",T="bottom";break;case"insideEndArc":S=h+(f-l)*_(m),x=c+(f-l)*w(m),b="center",T="top";break;case"endAngle":S=h+g*_(v)+sh(v,l+y,!0),x=c+g*w(v)+ah(v,l+y,!0),b="left",T="middle";break;case"insideEndAngle":S=h+g*_(v)+sh(v,-l+y,!0),x=c+g*w(v)+ah(v,-l+y,!0),b="right",T="middle";break;default:return ic(n,r,s)}return n=n||{},n.x=S,n.y=x,n.align=b,n.verticalAlign=T,n}}function GY(i,t,e,n){if(Ot(n)){i.setTextConfig({rotation:n});return}else if(z(t)){i.setTextConfig({rotation:0});return}var r=i.shape,s=r.clockwise?r.startAngle:r.endAngle,a=r.clockwise?r.endAngle:r.startAngle,o=(s+a)/2,l,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=s;break;case"endAngle":case"insideEndAngle":l=a;break;default:i.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),i.setTextConfig({rotation:h})}function sh(i,t,e){return t*Math.sin(i)*(e?-1:1)}function ah(i,t,e){return t*Math.cos(i)*(e?1:-1)}function $Y(i,t,e){var n=i.get("borderRadius");if(n==null)return e?{cornerRadius:0}:null;z(n)||(n=[n,n,n,n]);var r=Math.abs(t.r||0-t.r0||0);return{cornerRadius:H(n,function(s){return jn(s,r)})}}var mg=Math.max,yg=Math.min;function VY(i,t){var e=i.getArea&&i.getArea();if(Ay(i,"cartesian2d")){var n=i.getBaseAxis();if(n.type!=="category"||!n.onBand){var r=t.getLayout("bandWidth");n.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var WY=function(i){j(t,i);function t(){var e=i.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,n,r,s){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var a=e.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,n,r):this._renderNormal(e,n,r,s))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,n){this._progressiveEls=[],this._incrementalRenderLarge(e,n)},t.prototype.eachRendered=function(e){rf(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(e,n,r,s){var a=this.group,o=e.getData(),l=this._data,u=e.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var f=e.isAnimationEnabled()?e:null,d=YY(e,u);d&&this._enableRealtimeSort(d,o,r);var g=e.get("clip",!0)||d,p=VY(u,o);a.removeClipPath();var v=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),_=y.get("borderRadius")||0,w=[],S=this._backgroundEls,x=s&&s.isInitSort,b=s&&s.type==="changeAxisOrder";function T(E){var R=oh[u.type](o,E),M=qY(u,c,R);return M.useStyle(y.getItemStyle()),u.type==="cartesian2d"?M.setShape("r",_):M.setShape("cornerRadius",_),w[E]=M,M}o.diff(l).add(function(E){var R=o.getItemModel(E),M=oh[u.type](o,E,R);if(m&&T(E),!(!o.hasValue(E)||!Lx[u.type](M))){var k=!1;g&&(k=Ix[u.type](p,M));var L=Ax[u.type](e,o,E,M,c,f,h.model,!1,v);d&&(L.forceLabelAnimation=!0),kx(L,o,E,R,M,e,c,u.type==="polar"),x?L.attr({shape:M}):d?Rx(d,f,L,M,E,c,!1,!1):qn(L,{shape:M},e,E),o.setItemGraphicEl(E,L),a.add(L),L.ignore=k}}).update(function(E,R){var M=o.getItemModel(E),k=oh[u.type](o,E,M);if(m){var L=void 0;S.length===0?L=T(R):(L=S[R],L.useStyle(y.getItemStyle()),u.type==="cartesian2d"?L.setShape("r",_):L.setShape("cornerRadius",_),w[E]=L);var D=oh[u.type](o,E),O=rA(c,D,u);Yi(L,{shape:O},f,E)}var F=l.getItemGraphicEl(R);if(!o.hasValue(E)||!Lx[u.type](k)){a.remove(F);return}var B=!1;if(g&&(B=Ix[u.type](p,k),B&&a.remove(F)),F?tz(F):F=Ax[u.type](e,o,E,k,c,f,h.model,!!F,v),d&&(F.forceLabelAnimation=!0),b){var G=F.getTextContent();if(G){var K=Zm(G);K.prevValue!=null&&(K.prevValue=K.value)}}else kx(F,o,E,M,k,e,c,u.type==="polar");x?F.attr({shape:k}):d?Rx(d,f,F,k,E,c,!0,b):Yi(F,{shape:k},e,E,null),o.setItemGraphicEl(E,F),F.ignore=B,a.add(F)}).remove(function(E){var R=l.getItemGraphicEl(E);R&&Lp(R,e,E)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new De);C.removeAll();for(var I=0;I<w.length;++I)C.add(w[I]);a.add(C),this._backgroundEls=w,this._data=o},t.prototype._renderLarge=function(e,n,r){this._clear(),Px(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,n){this._removeBackground(),Px(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var n=e.get("clip",!0)&&LY(e.coordinateSystem,!1,e),r=this.group;n?r.setClipPath(n):r.removeClipPath()},t.prototype._enableRealtimeSort=function(e,n,r){var s=this;if(n.count()){var a=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,e,r),this._isFirstFrame=!1;else{var o=function(l){var u=n.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(a.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){s._updateSortWithinSameData(n,o,a,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,n,r){var s=[];return e.each(e.mapDimension(n.dim),function(a,o){var l=r(o);l=l??NaN,s.push({dataIndex:o,mappedValue:l,ordinalNumber:a})}),s.sort(function(a,o){return o.mappedValue-a.mappedValue}),{ordinalNumbers:H(s,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,n,r){for(var s=r.scale,a=e.mapDimension(r.dim),o=Number.MAX_VALUE,l=0,u=s.getOrdinalMeta().categories.length;l<u;++l){var h=e.rawIndexOf(a,s.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:n(e.indexOfRawIndex(h));if(c>o)return!0;o=c}return!1},t.prototype._isOrderDifferentInView=function(e,n){for(var r=n.scale,s=r.getExtent(),a=Math.max(0,s[0]),o=Math.min(s[1],r.getOrdinalMeta().categories.length-1);a<=o;++a)if(e.ordinalNumbers[a]!==r.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(e,n,r,s){if(this._isOrderChangedWithinSameData(e,n,r)){var a=this._dataSort(e,r,n);this._isOrderDifferentInView(a,r)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(e,n,r){var s=n.baseAxis,a=this._dataSort(e,s,function(o){return e.get(e.mapDimension(n.otherAxis.dim),o)});r.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:a})},t.prototype.remove=function(e,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(e,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var n=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(s){Lp(s,e,dt(s).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ha),Ix={cartesian2d:function(i,t){var e=t.width<0?-1:1,n=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var r=i.x+i.width,s=i.y+i.height,a=mg(t.x,i.x),o=yg(t.x+t.width,r),l=mg(t.y,i.y),u=yg(t.y+t.height,s),h=o<a,c=u<l;return t.x=h&&a>r?o:a,t.y=c&&l>s?u:l,t.width=h?0:o-a,t.height=c?0:u-l,e<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(i,t){var e=t.r0<=t.r?1:-1;if(e<0){var n=t.r;t.r=t.r0,t.r0=n}var r=yg(t.r,i.r),s=mg(t.r0,i.r0);t.r=r,t.r0=s;var a=r-s<0;if(e<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},Ax={cartesian2d:function(i,t,e,n,r,s,a,o,l){var u=new Ut({shape:N({},n),z2:1});if(u.__dataIndex=e,u.name="item",s){var h=u.shape,c=r?"height":"width";h[c]=0}return u},polar:function(i,t,e,n,r,s,a,o,l){var u=!r&&l?Ex:Hl,h=new u({shape:n,z2:1});h.name="item";var c=nA(r);if(h.calculateTextPosition=zY(c,{isRoundCap:u===Ex}),s){var f=h.shape,d=r?"r":"endAngle",g={};f[d]=r?n.r0:n.startAngle,g[d]=n[d],(o?Yi:qn)(h,{shape:g},s)}return h}};function YY(i,t){var e=i.get("realtimeSort",!0),n=t.getBaseAxis();if(e&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function Rx(i,t,e,n,r,s,a,o){var l,u;s?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),o||(a?Yi:qn)(e,{shape:l},t,r,null);var h=t?i.baseAxis.model:null;(a?Yi:qn)(e,{shape:u},h,r)}function Mx(i,t){for(var e=0;e<t.length;e++)if(!isFinite(i[t[e]]))return!0;return!1}var HY=["x","y","width","height"],UY=["cx","cy","r","startAngle","endAngle"],Lx={cartesian2d:function(i){return!Mx(i,HY)},polar:function(i){return!Mx(i,UY)}},oh={cartesian2d:function(i,t,e){var n=i.getItemLayout(t),r=e?KY(e,n):0,s=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+s*r/2,y:n.y+a*r/2,width:n.width-s*r,height:n.height-a*r}},polar:function(i,t,e){var n=i.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function XY(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function nA(i){return function(t){var e=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+e;default:return n}}}(i)}function kx(i,t,e,n,r,s,a,o){var l=t.getItemVisual(e,"style");if(o){if(!s.get("roundCap")){var h=i.shape,c=$Y(n.getModel("itemStyle"),h,!0);N(h,c),i.setShape(h)}}else{var u=n.get(["itemStyle","borderRadius"])||0;i.setShape("r",u)}i.useStyle(l);var f=n.getShallow("cursor");f&&i.attr("cursor",f);var d=o?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",g=jm(n);Km(i,g,{labelFetcher:s,labelDataIndex:e,defaultText:HW(s.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var p=i.getTextContent();if(o&&p){var v=n.get(["label","position"]);i.textConfig.inside=v==="middle"?!0:null,GY(i,v==="outside"?d:v,nA(a),n.get(["label","rotate"]))}wz(p,g,s.getRawValue(e),function(y){return UW(t,y)});var m=n.getModel(["emphasis"]);hC(i,m.get("focus"),m.get("blurScope"),m.get("disabled")),gB(i,n),XY(r)&&(i.style.fill="none",i.style.stroke="none",A(i.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function KY(i,t){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var n=i.get(["itemStyle","borderWidth"])||0,r=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,r,s)}var jY=function(){function i(){}return i}(),Dx=function(i){j(t,i);function t(e){var n=i.call(this,e)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new jY},t.prototype.buildPath=function(e,n){for(var r=n.points,s=this.baseDimIdx,a=1-this.baseDimIdx,o=[],l=[],u=this.barWidth,h=0;h<r.length;h+=3)l[s]=u,l[a]=r[h+2],o[s]=r[h+s],o[a]=r[h+a],e.rect(o[0],o[1],l[0],l[1])},t}(_t);function Px(i,t,e,n){var r=i.getData(),s=r.getLayout("valueAxisHorizontal")?1:0,a=r.getLayout("largeDataIndices"),o=r.getLayout("size"),l=i.getModel("backgroundStyle"),u=r.getLayout("largeBackgroundPoints");if(u){var h=new Dx({shape:{points:u},incremental:!!n,silent:!0,z2:0});h.baseDimIdx=s,h.largeDataIndices=a,h.barWidth=o,h.useStyle(l.getItemStyle()),t.add(h),e&&e.push(h)}var c=new Dx({shape:{points:r.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=s,c.largeDataIndices=a,c.barWidth=o,t.add(c),c.useStyle(r.getVisual("style")),dt(c).seriesIndex=i.seriesIndex,i.get("silent")||(c.on("mousedown",Ox),c.on("mousemove",Ox)),e&&e.push(c)}var Ox=cy(function(i){var t=this,e=ZY(t,i.offsetX,i.offsetY);dt(t).dataIndex=e>=0?e:null},30,!1);function ZY(i,t,e){for(var n=i.baseDimIdx,r=1-n,s=i.shape.points,a=i.largeDataIndices,o=[],l=[],u=i.barWidth,h=0,c=s.length/3;h<c;h++){var f=h*3;if(l[n]=u,l[r]=s[f+2],o[n]=s[f+n],o[r]=s[f+r],l[r]<0&&(o[r]+=l[r],l[r]=-l[r]),t>=o[0]&&t<=o[0]+l[0]&&e>=o[1]&&e<=o[1]+l[1])return a[h]}return-1}function rA(i,t,e){if(Ay(e,"cartesian2d")){var n=t,r=e.getArea();return{x:i?n.x:r.x,y:i?r.y:n.y,width:i?n.width:r.width,height:i?r.height:n.height}}else{var r=e.getArea(),s=t;return{cx:r.cx,cy:r.cy,r0:i?r.r0:s.r0,r:i?r.r:s.r,startAngle:i?s.startAngle:0,endAngle:i?s.endAngle:Math.PI*2}}}function qY(i,t,e){var n=i.type==="polar"?Hl:Ut;return new n({shape:rA(t,e,i),silent:!0,z2:0})}const JY=WY;function QY(i){i.registerChartView(JY),i.registerSeriesModel(FY),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,Et(y5,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,_5("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,PY("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(r){t.sortInfo&&r.axis.setCategorySortInfo(t.sortInfo)})})}function Fx(i,t,e){var n=ka.createCanvas(),r=t.getWidth(),s=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=s+"px",n.setAttribute("data-zr-dom-id",i)),n.width=r*e,n.height=s*e,n}var tH=function(i){yt(t,i);function t(e,n,r){var s=i.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;r=r||ec,typeof e=="string"?a=Fx(e,n,r):Y(e)&&(a=e,e=a.id),s.id=e,s.dom=a;var o=a.style;return o&&(oT(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=n,s.dpr=r,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Fx("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,n,r,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,u=new pt(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var _=new pt(0,0,0,0);_.copy(y),a.push(_)}else{for(var w=!1,S=1/0,x=0,b=0;b<a.length;++b){var T=a[b];if(T.intersect(y)){var C=new pt(0,0,0,0);C.copy(T),C.union(y),a[b]=C,w=!0;break}else if(l){u.copy(y),u.union(T);var I=y.width*y.height,E=T.width*T.height,R=u.width*u.height,M=R-I-E;M<S&&(S=M,x=b)}}if(l&&(a[x].union(y),w=!0),!w){var _=new pt(0,0,0,0);_.copy(y),a.push(_)}l||(l=a.length>=o)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var f=e[c];if(f){var d=f.shouldBePainted(r,s,!0,!0),g=f.__isRendered&&(f.__dirty&Ve||!d)?f.getPrevPaintRect():null;g&&h(g);var p=d&&(f.__dirty&Ve||!f.__isRendered)?f.getPaintRect():null;p&&h(p)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var f=n[c],d=f&&f.shouldBePainted(r,s,!0,!0);if(f&&(!d||!f.__zr)&&f.__isRendered){var g=f.getPrevPaintRect();g&&h(g)}}var v;do{v=!1;for(var c=0;c<a.length;){if(a[c].isZero()){a.splice(c,1);continue}for(var m=c+1;m<a.length;)a[c].intersect(a[m])?(v=!0,a[c].union(a[m]),a.splice(m,1)):m++;c++}}while(v);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,n){var r=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=e+"px",a.height=n+"px"),s.width=e*r,s.height=n*r,o&&(o.width=e*r,o.height=n*r,r!==1&&this.ctxBack.scale(r,r))},t.prototype.clear=function(e,n,r){var s=this.dom,a=this.ctx,o=s.width,l=s.height;n=n||this.clearColor;var u=this.motionBlur&&!e,h=this.lastFrameAlpha,c=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/c,l/c));var d=this.domBack;function g(p,v,m,y){if(a.clearRect(p,v,m,y),n&&n!=="transparent"){var _=void 0;if(qc(n)){var w=n.global||n.__width===m&&n.__height===y;_=w&&n.__canvasGradient||Vp(a,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=_,n.__width=m,n.__height=y}else tO(n)&&(n.scaleX=n.scaleX||c,n.scaleY=n.scaleY||c,_=Wp(a,n,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));a.save(),a.fillStyle=_||n,a.fillRect(p,v,m,y),a.restore()}u&&(a.save(),a.globalAlpha=h,a.drawImage(d,p,v,m,y),a.restore())}!r||u?g(0,0,o,l):r.length&&A(r,function(p){g(p.x*c,p.y*c,p.width*c,p.height*c)})},t}(Xi);const _g=tH;var Nx=1e5,Cr=314159,lh=.01,eH=.001;function iH(i){return i?i.__builtin__?!0:!(typeof i.resize!="function"||typeof i.refresh!="function"):!1}function nH(i,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+i+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var rH=function(){function i(t,e,n,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=N({},n||{}),this.dpr=n.devicePixelRatio||ec,this._singleCanvas=s,this.root=t;var a=t.style;a&&(oT(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var h=t,c=h.width,f=h.height;n.width!=null&&(c=n.width),n.height!=null&&(f=n.height),this.dpr=n.devicePixelRatio||1,h.width=c*this.dpr,h.height=f*this.dpr,this._width=c,this._height=f;var d=new _g(h,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Cr]=d,d.zlevel=Cr,o.push(Cr),this._domRoot=t}else{this._width=Hu(t,0,n),this._height=Hu(t,1,n);var u=this._domRoot=nH(this._width,this._height);t.appendChild(u)}}return i.prototype.getType=function(){return"canvas"},i.prototype.isSingleCanvas=function(){return this._singleCanvas},i.prototype.getViewportRoot=function(){return this._domRoot},i.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},i.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var s=0;s<r.length;s++){var a=r[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},i.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},i.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),!!e){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<e;a++){var o=t[a];o.__inHover&&(n||(n=this._hoverlayer=this.getLayer(Nx)),s||(s=n.ctx,s.save()),zr(s,o,r,a===e-1))}s&&s.restore()}},i.prototype.getHoverLayer=function(){return this.getLayer(Nx)},i.prototype.paintOne=function(t,e){$E(t,e)},i.prototype._paintList=function(t,e,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,e,n),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;hp(function(){l._paintList(t,e,n,r)})}}},i.prototype._compositeManually=function(){var t=this.getLayer(Cr).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)})},i.prototype._doPaintList=function(t,e,n){for(var r=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&s.push(u)}for(var h=!0,c=!1,f=function(p){var v=s[p],m=v.ctx,y=a&&v.createRepaintRects(t,e,d._width,d._height),_=n?v.__startIndex:v.__drawIndex,w=!n&&v.incremental&&Date.now,S=w&&Date.now(),x=v.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,x,y);else if(_===v.__startIndex){var b=t[_];(!b.incremental||!b.notClear||n)&&v.clear(!1,x,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=v.__startIndex);var T,C=function(M){var k={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(T=_;T<v.__endIndex;T++){var L=t[T];if(L.__inHover&&(c=!0),r._doPaintEl(L,v,a,M,k,T===v.__endIndex-1),w){var D=Date.now()-S;if(D>15)break}}k.prevElClipPaths&&m.restore()};if(y)if(y.length===0)T=v.__endIndex;else for(var I=d.dpr,E=0;E<y.length;++E){var R=y[E];m.save(),m.beginPath(),m.rect(R.x*I,R.y*I,R.width*I,R.height*I),m.clip(),C(R),m.restore()}else m.save(),C(),m.restore();v.__drawIndex=T,v.__drawIndex<v.__endIndex&&(h=!1)},d=this,g=0;g<s.length;g++)f(g);return it.wxa&&A(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:h,needsRefreshHover:c}},i.prototype._doPaintEl=function(t,e,n,r,s,a){var o=e.ctx;if(n){var l=t.getPaintRect();(!r||l&&l.intersect(r))&&(zr(o,t,s,a),t.setPrevPaintRect(l))}else zr(o,t,s,a)},i.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Cr);var n=this._layers[t];return n||(n=new _g("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ht(n,this._layerConfig[t],!0):this._layerConfig[t-lh]&&ht(n,this._layerConfig[t-lh],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},i.prototype.insertLayer=function(t,e){var n=this._layers,r=this._zlevelList,s=r.length,a=this._domRoot,o=null,l=-1;if(!n[t]&&iH(e)){if(s>0&&t>r[0]){for(l=0;l<s-1&&!(r[l]<t&&r[l+1]>t);l++);o=n[r[l]]}if(r.splice(l+1,0,t),n[t]=e,!e.virtual)if(o){var u=o.dom;u.nextSibling?a.insertBefore(e.dom,u.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.painter||(e.painter=this)}},i.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var s=n[r];t.call(e,this._layers[s],s)}},i.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var s=n[r],a=this._layers[s];a.__builtin__&&t.call(e,a,s)}},i.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var s=n[r],a=this._layers[s];a.__builtin__||t.call(e,a,s)}},i.prototype.getLayers=function(){return this._layers},i.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,f){c.__dirty=c.__used=!1});function e(c){s&&(s.__endIndex!==c&&(s.__dirty=!0),s.__endIndex=c)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var r=t[n];if(r.zlevel!==t[n-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<t.length;l++){var r=t[l],u=r.zlevel,h=void 0;o!==u&&(o=u,a=0),r.incremental?(h=this.getLayer(u+eH,this._needsManuallyCompositing),h.incremental=!0,a=1):h=this.getLayer(u+(a>0?lh:0),this._needsManuallyCompositing),h.__builtin__||mm("ZLevel "+u+" has been used by unkown layer "+h.id),h!==s&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,e(l),s=h),r.__dirty&Ve&&!r.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(c,f){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},i.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},i.prototype._clearLayer=function(t){t.clear()},i.prototype.setBackgroundColor=function(t){this._backgroundColor=t,A(this._layers,function(e){e.setUnpainted()})},i.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?ht(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var s=this._zlevelList[r];if(s===t||s===t+lh){var a=this._layers[s];ht(a,n[t],!0)}}}},i.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(gt(n,t),1))},i.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts,s=this.root;if(t!=null&&(r.width=t),e!=null&&(r.height=e),t=Hu(s,0,r),e=Hu(s,1,r),n.style.display="",this._width!==t||e!==this._height){n.style.width=t+"px",n.style.height=e+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(Cr).resize(t,e)}return this},i.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},i.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},i.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Cr].dom;var e=new _g("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,s=e.dom.height;this.eachLayer(function(c){c.__builtin__?n.drawImage(c.dom,0,0,r,s):c.renderToCanvas&&(n.save(),c.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,u=o.length;l<u;l++){var h=o[l];zr(n,h,a,l===u-1)}return e.dom},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i}();const sH=rH;function aH(i){i.registerPainter("canvas",sH)}const oH={title:{text:"ChartTitle"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:0,right:0},grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:[],yAxis:[{type:"value"}],series:[]};function lH(i){let t,e,n,r;return{c(){t=ue("div"),e=Yo("chart"),ge(t,"id",i[0]),ge(t,"class","chart svelte-z30o4v")},m(s,a){le(s,t,a),$e(t,e),n||(r=Xx(i[1].call(null,t)),n=!0)},p(s,[a]){a&1&&ge(t,"id",s[0])},i:ut,o:ut,d(s){s&&Jt(t),n=!1,r()}}}function uH(i,t,e){Qn([WW,GW,vW,AY,gY,QY,aH]);let{config:n}=t,r,s;const a=o=>{if(n){r=oH,r.title.text=n.title,n.xAxisData.forEach(u=>{r.xAxis.push(u)}),n.series.forEach(u=>{r.series.push(Object.assign(Object.assign({},u),{type:"bar",emphasis:{focus:"series"}}))});const l=I3(o);l&&r&&l.setOption(r)}};return i.$$set=o=>{"config"in o&&e(2,n=o.config)},i.$$.update=()=>{i.$$.dirty&4&&n&&e(0,s=`chart-${n.title.split(" ")[0]}`)},[s,a,n]}class hH extends Il{constructor(t){super(),El(this,t,uH,lH,Ca,{config:2})}}function Ry(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let as=Ry();function sA(i){as=i}const aA=/[&<>"']/,cH=new RegExp(aA.source,"g"),oA=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,fH=new RegExp(oA.source,"g"),dH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bx=i=>dH[i];function ze(i,t){if(t){if(aA.test(i))return i.replace(cH,Bx)}else if(oA.test(i))return i.replace(fH,Bx);return i}const gH=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function pH(i){return i.replace(gH,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const vH=/(^|[^\[])\^/g;function wt(i,t){let e=typeof i=="string"?i:i.source;t=t||"";const n={replace:(r,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(vH,"$1"),e=e.replace(r,a),n},getRegex:()=>new RegExp(e,t)};return n}function zx(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const Vo={exec:()=>null};function Gx(i,t){const e=i.replace(/\|/g,(s,a,o)=>{let l=!1,u=a;for(;--u>=0&&o[u]==="\\";)l=!l;return l?"|":" |"}),n=e.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function uh(i,t,e){const n=i.length;if(n===0)return"";let r=0;for(;r<n;){const s=i.charAt(n-r-1);if(s===t&&!e)r++;else if(s!==t&&e)r++;else break}return i.slice(0,n-r)}function mH(i,t){if(i.indexOf(t[1])===-1)return-1;let e=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===t[0])e++;else if(i[n]===t[1]&&(e--,e<0))return n;return-1}function $x(i,t,e,n){const r=t.href,s=t.title?ze(t.title):null,a=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){n.state.inLink=!0;const o={type:"link",raw:e,href:r,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,o}return{type:"image",raw:e,href:r,title:s,text:ze(a)}}function yH(i,t){const e=i.match(/^(\s+)(?:```)/);if(e===null)return t;const n=e[1];return t.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[a]=s;return a.length>=n.length?r.slice(n.length):r}).join(`
`)}class _c{constructor(t){bt(this,"options");bt(this,"rules");bt(this,"lexer");this.options=t||as}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:uh(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=yH(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(/#$/.test(n)){const r=uh(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const n=uh(e[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:s,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const a=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",l="",u=!1;for(;t;){let h=!1;if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;o=e[0],t=t.substring(o.length);let c=e[2].split(`
`,1)[0].replace(/^\t+/,m=>" ".repeat(3*m.length)),f=t.split(`
`,1)[0],d=0;this.options.pedantic?(d=2,l=c.trimStart()):(d=e[2].search(/[^ ]/),d=d>4?1:d,l=c.slice(d),d+=e[1].length);let g=!1;if(!c&&/^ *$/.test(f)&&(o+=f+`
`,t=t.substring(f.length+1),h=!0),!h){const m=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;t;){const S=t.split(`
`,1)[0];if(f=S,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(f)||w.test(f)||m.test(f)||y.test(t))break;if(f.search(/[^ ]/)>=d||!f.trim())l+=`
`+f.slice(d);else{if(g||c.search(/[^ ]/)>=4||_.test(c)||w.test(c)||y.test(c))break;l+=`
`+f}!g&&!f.trim()&&(g=!0),o+=S+`
`,t=t.substring(S.length+1),c=f.slice(d)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(o)&&(u=!0));let p=null,v;this.options.gfm&&(p=/^\[[ xX]\] /.exec(l),p&&(v=p[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!p,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){const c=s.items[h].tokens.filter(d=>d.type==="space"),f=c.length>0&&c.some(d=>/\n.*\n/.test(d.raw));s.loose=f}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const n=Gx(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),s=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?a.align.push("right"):/^ *:-+: *$/.test(o)?a.align.push("center"):/^ *:-+ *$/.test(o)?a.align.push("left"):a.align.push(null);for(const o of n)a.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of s)a.rows.push(Gx(o,a.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:ze(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const a=uh(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=mH(e[2],"()");if(a>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);a&&(r=a[1],s=a[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),$x(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(/\s+/g," "),s=e[r.toLowerCase()];if(!s){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return $x(n,s,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...r[0]].length-1;let o,l,u=a,h=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+a);(r=c.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(l=[...o].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&a%3&&!((a+l)%3)){h+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+h);const f=[...r[0]][0].length,d=t.slice(0,a+r.index+f+l);if(Math.min(a,l)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(/\n/g," ");const r=/[^ ]/.test(n),s=/^ /.test(n)&&/ $/.test(n);return r&&s&&(n=n.substring(1,n.length-1)),n=ze(n,!0),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=ze(e[1]),r="mailto:"+n):(n=ze(e[1]),r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=ze(e[0]),s="mailto:"+r;else{let a;do a=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(a!==e[0]);r=ze(e[0]),e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let n;return this.lexer.state.inRawBlock?n=e[0]:n=ze(e[0]),{type:"text",raw:e[0],text:n}}}}const _H=/^(?: *(?:\n|$))+/,wH=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,xH=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Kl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,SH=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,lA=/(?:[*+-]|\d{1,9}[.)])/,uA=wt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,lA).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),My=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bH=/^[^\n]+/,Ly=/(?!\s*\])(?:\\.|[^\[\]\\])+/,TH=wt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ly).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),CH=wt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lA).getRegex(),Sf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ky=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,EH=wt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ky).replace("tag",Sf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),hA=wt(My).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sf).getRegex(),IH=wt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",hA).getRegex(),Dy={blockquote:IH,code:wH,def:TH,fences:xH,heading:SH,hr:Kl,html:EH,lheading:uA,list:CH,newline:_H,paragraph:hA,table:Vo,text:bH},Vx=wt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sf).getRegex(),AH={...Dy,table:Vx,paragraph:wt(My).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Vx).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sf).getRegex()},RH={...Dy,html:wt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ky).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Vo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:wt(My).replace("hr",Kl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",uA).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},cA=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,MH=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,fA=/^( {2,}|\\)\n(?!\s*$)/,LH=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,jl="\\p{P}\\p{S}",kH=wt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,jl).getRegex(),DH=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,PH=wt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,jl).getRegex(),OH=wt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,jl).getRegex(),FH=wt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,jl).getRegex(),NH=wt(/\\([punct])/,"gu").replace(/punct/g,jl).getRegex(),BH=wt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zH=wt(ky).replace("(?:-->|$)","-->").getRegex(),GH=wt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zH).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$H=wt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",wc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),dA=wt(/^!?\[(label)\]\[(ref)\]/).replace("label",wc).replace("ref",Ly).getRegex(),gA=wt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ly).getRegex(),VH=wt("reflink|nolink(?!\\()","g").replace("reflink",dA).replace("nolink",gA).getRegex(),Py={_backpedal:Vo,anyPunctuation:NH,autolink:BH,blockSkip:DH,br:fA,code:MH,del:Vo,emStrongLDelim:PH,emStrongRDelimAst:OH,emStrongRDelimUnd:FH,escape:cA,link:$H,nolink:gA,punctuation:kH,reflink:dA,reflinkSearch:VH,tag:GH,text:LH,url:Vo},WH={...Py,link:wt(/^!?\[(label)\]\((.*?)\)/).replace("label",wc).getRegex(),reflink:wt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wc).getRegex()},ov={...Py,escape:wt(cA).replace("])","~|])").getRegex(),url:wt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},YH={...ov,br:wt(fA).replace("{2,}","*").getRegex(),text:wt(ov.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},hh={normal:Dy,gfm:AH,pedantic:RH},co={normal:Py,gfm:ov,breaks:YH,pedantic:WH};class Ni{constructor(t){bt(this,"tokens");bt(this,"options");bt(this,"state");bt(this,"tokenizer");bt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||as,this.options.tokenizer=this.options.tokenizer||new _c,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:hh.normal,inline:co.normal};this.options.pedantic?(e.block=hh.pedantic,e.inline=co.pedantic):this.options.gfm&&(e.block=hh.gfm,this.options.breaks?e.inline=co.breaks:e.inline=co.gfm),this.tokenizer.rules=e}static get rules(){return{block:hh,inline:co}}static lex(t,e){return new Ni(e).lex(t)}static lexInline(t,e){return new Ni(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,l,u)=>l+"    ".repeat(u.length));let n,r,s,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(n=o.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},l),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(s=t.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){r=e[e.length-1],a&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),a=s.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,s,a=t,o,l,u;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)h.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(n=h.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(t,a,u)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),e.push(n);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const c=t.slice(1);let f;this.options.extensions.startInline.forEach(d=>{f=d.call({lexer:this},c),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(s=t.substring(0,h+1))}if(n=this.tokenizer.inlineText(s)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return e}}class xc{constructor(t){bt(this,"options");this.options=t||as}code(t,e,n){var s;const r=(s=(e||"").match(/^\S*/))==null?void 0:s[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+ze(r)+'">'+(n?t:ze(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:ze(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,n){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,n){const r=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+t+"</"+r+`>
`}listitem(t,e,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){const r=zx(t);if(r===null)return n;t=r;let s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+=">"+n+"</a>",s}image(t,e,n){const r=zx(t);if(r===null)return n;t=r;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${e}"`),s+=">",s}text(t){return t}}class Oy{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class Bi{constructor(t){bt(this,"options");bt(this,"renderer");bt(this,"textRenderer");this.options=t||as,this.options.renderer=this.options.renderer||new xc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Oy}static parse(t,e){return new Bi(e).parse(t)}static parseInline(t,e){return new Bi(e).parseInline(t)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){n+=o||"";continue}}switch(s.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const a=s;n+=this.renderer.heading(this.parseInline(a.tokens),a.depth,pH(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{const a=s;n+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{const a=s;let o="",l="";for(let h=0;h<a.header.length;h++)l+=this.renderer.tablecell(this.parseInline(a.header[h].tokens),{header:!0,align:a.align[h]});o+=this.renderer.tablerow(l);let u="";for(let h=0;h<a.rows.length;h++){const c=a.rows[h];l="";for(let f=0;f<c.length;f++)l+=this.renderer.tablecell(this.parseInline(c[f].tokens),{header:!1,align:a.align[f]});u+=this.renderer.tablerow(l)}n+=this.renderer.table(o,u);continue}case"blockquote":{const a=s,o=this.parse(a.tokens);n+=this.renderer.blockquote(o);continue}case"list":{const a=s,o=a.ordered,l=a.start,u=a.loose;let h="";for(let c=0;c<a.items.length;c++){const f=a.items[c],d=f.checked,g=f.task;let p="";if(f.task){const v=this.renderer.checkbox(!!d);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=v+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=v+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:v+" "}):p+=v+" "}p+=this.parse(f.tokens,u),h+=this.renderer.listitem(p,g,!!d)}n+=this.renderer.list(h,o,l);continue}case"html":{const a=s;n+=this.renderer.html(a.text,a.block);continue}case"paragraph":{const a=s;n+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=s,o=a.tokens?this.parseInline(a.tokens):a.text;for(;r+1<t.length&&t[r+1].type==="text";)a=t[++r],o+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);n+=e?this.renderer.paragraph(o):o;continue}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,e){e=e||this.renderer;let n="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=a||"";continue}}switch(s.type){case"escape":{const a=s;n+=e.text(a.text);break}case"html":{const a=s;n+=e.html(a.text);break}case"link":{const a=s;n+=e.link(a.href,a.title,this.parseInline(a.tokens,e));break}case"image":{const a=s;n+=e.image(a.href,a.title,a.text);break}case"strong":{const a=s;n+=e.strong(this.parseInline(a.tokens,e));break}case"em":{const a=s;n+=e.em(this.parseInline(a.tokens,e));break}case"codespan":{const a=s;n+=e.codespan(a.text);break}case"br":{n+=e.br();break}case"del":{const a=s;n+=e.del(this.parseInline(a.tokens,e));break}case"text":{const a=s;n+=e.text(a.text);break}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}}class Wo{constructor(t){bt(this,"options");this.options=t||as}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}bt(Wo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Tl,lv,Sc,pA;class HH{constructor(...t){If(this,Tl);If(this,Sc);bt(this,"defaults",Ry());bt(this,"options",this.setOptions);bt(this,"parse",iu(this,Tl,lv).call(this,Ni.lex,Bi.parse));bt(this,"parseInline",iu(this,Tl,lv).call(this,Ni.lexInline,Bi.parseInline));bt(this,"Parser",Bi);bt(this,"Renderer",xc);bt(this,"TextRenderer",Oy);bt(this,"Lexer",Ni);bt(this,"Tokenizer",_c);bt(this,"Hooks",Wo);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)n=n.concat(this.walkTokens(l.tokens,e));for(const l of o.rows)for(const u of l)n=n.concat(this.walkTokens(u.tokens,e));break}case"list":{const o=a;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=a;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const u=o[l].flat(1/0);n=n.concat(this.walkTokens(u,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const a=e.renderers[s.name];a?e.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[s.level];a?a.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new xc(this.defaults);for(const a in n.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(a==="options")continue;const o=a,l=n.renderer[o],u=s[o];s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new _c(this.defaults);for(const a in n.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=n.tokenizer[o],u=s[o];s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new Wo;for(const a in n.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;const o=a,l=n.hooks[o],u=s[o];Wo.passThroughHooks.has(a)?s[o]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(f=>u.call(s,f));const c=l.call(s,h);return u.call(s,c)}:s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,a=n.walkTokens;r.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Ni.lex(t,e??this.defaults)}parser(t,e){return Bi.parse(t,e??this.defaults)}}Tl=new WeakSet,lv=function(t,e){return(n,r)=>{const s={...r},a={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const o=iu(this,Sc,pA).call(this,!!a.silent,!!a.async);if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(l=>t(l,a)).then(l=>a.hooks?a.hooks.processAllTokens(l):l).then(l=>a.walkTokens?Promise.all(this.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>e(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(o);try{a.hooks&&(n=a.hooks.preprocess(n));let l=t(n,a);a.hooks&&(l=a.hooks.processAllTokens(l)),a.walkTokens&&this.walkTokens(l,a.walkTokens);let u=e(l,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(l){return o(l)}}},Sc=new WeakSet,pA=function(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+ze(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}};const ts=new HH;function mt(i,t){return ts.parse(i,t)}mt.options=mt.setOptions=function(i){return ts.setOptions(i),mt.defaults=ts.defaults,sA(mt.defaults),mt};mt.getDefaults=Ry;mt.defaults=as;mt.use=function(...i){return ts.use(...i),mt.defaults=ts.defaults,sA(mt.defaults),mt};mt.walkTokens=function(i,t){return ts.walkTokens(i,t)};mt.parseInline=ts.parseInline;mt.Parser=Bi;mt.parser=Bi.parse;mt.Renderer=xc;mt.TextRenderer=Oy;mt.Lexer=Ni;mt.lexer=Ni.lex;mt.Tokenizer=_c;mt.Hooks=Wo;mt.parse=mt;mt.options;mt.setOptions;mt.use;mt.walkTokens;mt.parseInline;Bi.parse;Ni.lex;function UH(i){let t,e,n,r,s,a;return{c(){t=ue("div"),e=ue("h1"),n=Yo(i[0]),r=Zs(),s=ue("h2"),a=Yo(i[1]),ge(e,"class","svelte-ywrv2"),ge(s,"class","svelte-ywrv2"),ge(t,"class","header svelte-ywrv2")},m(o,l){le(o,t,l),$e(t,e),$e(e,n),$e(t,r),$e(t,s),$e(s,a)},p(o,[l]){l&1&&Vy(n,o[0]),l&2&&Vy(a,o[1])},i:ut,o:ut,d(o){o&&Jt(t)}}}function XH(i,t,e){let{title:n}=t,{subTitle:r}=t;return i.$$set=s=>{"title"in s&&e(0,n=s.title),"subTitle"in s&&e(1,r=s.subTitle)},[n,r]}class KH extends Il{constructor(t){super(),El(this,t,XH,UH,Ca,{title:0,subTitle:1})}}function Wx(i,t,e){const n=i.slice();return n[6]=t[e],n[8]=e,n}function jH(i){let t,e,n={ctx:i,current:null,token:null,hasCatch:!1,pending:rU,then:JH,catch:qH,value:5,blocks:[,,,]};return $A(i[2],n),{c(){t=bc(),n.block.c()},m(r,s){le(r,t,s),n.block.m(r,n.anchor=s),n.mount=()=>t.parentNode,n.anchor=t,e=!0},p(r,s){i=r,VA(n,i,s)},i(r){e||(Ae(n.block),e=!0)},o(r){for(let s=0;s<3;s+=1){const a=n.blocks[s];oi(a)}e=!1},d(r){r&&Jt(t),n.block.d(r),n.token=null,n=null}}}function ZH(i){let t;return{c(){t=ue("div"),t.textContent="Please define config path as search param, e.g. ?config=/public/conf.yaml",ge(t,"class","error")},m(e,n){le(e,t,n)},p:ut,i:ut,o:ut,d(e){e&&Jt(t)}}}function qH(i){return{c:ut,m:ut,p:ut,i:ut,o:ut,d:ut}}function JH(i){let t,e,n,r,s,a,o,l,u;e=new B2({props:{steps:i[5].steps}});let h=i[5].title&&QH(i);function c(d){i[3](d)}let f={$$slots:{default:[nU]},$$scope:{ctx:i}};return i[0]!==void 0&&(f.value=i[0]),o=new rM({props:f}),Lh.push(()=>WA(o,"value",c)),{c(){t=ue("div"),kh(e.$$.fragment),n=Zs(),r=ue("section"),h&&h.c(),s=Zs(),a=ue("div"),kh(o.$$.fragment),ge(t,"class","map svelte-1qx0jlg"),ge(a,"class","section-container svelte-1qx0jlg")},m(d,g){le(d,t,g),Uo(e,t,null),le(d,n,g),le(d,r,g),h&&h.m(r,null),$e(r,s),$e(r,a),Uo(o,a,null),u=!0},p(d,g){d[5].title&&h.p(d,g);const p={};g&513&&(p.$$scope={dirty:g,ctx:d}),!l&&g&1&&(l=!0,p.value=d[0],BA(()=>l=!1)),o.$set(p)},i(d){u||(Ae(e.$$.fragment,d),Ae(h),Ae(o.$$.fragment,d),u=!0)},o(d){oi(e.$$.fragment,d),oi(h),oi(o.$$.fragment,d),u=!1},d(d){d&&Jt(t),Xo(e),d&&Jt(n),d&&Jt(r),h&&h.d(),Xo(o)}}}function QH(i){let t,e;return t=new KH({props:{title:i[5].title,subTitle:i[5].subTitle}}),{c(){kh(t.$$.fragment)},m(n,r){Uo(t,n,r),e=!0},p:ut,i(n){e||(Ae(t.$$.fragment,n),e=!0)},o(n){oi(t.$$.fragment,n),e=!1},d(n){Xo(t,n)}}}function tU(i){let t,e;return t=new hH({props:{config:i[6].chart}}),{c(){kh(t.$$.fragment)},m(n,r){Uo(t,n,r),e=!0},p:ut,i(n){e||(Ae(t.$$.fragment,n),e=!0)},o(n){oi(t.$$.fragment,n),e=!1},d(n){Xo(t,n)}}}function eU(i){let t,e=mt.parse(i[6].content)+"",n;return{c(){t=new PA(!1),n=bc(),t.a=n},m(r,s){t.m(e,r,s),le(r,n,s)},p:ut,i:ut,o:ut,d(r){r&&Jt(n),r&&t.d()}}}function iU(i){let t,e=i[6].attribution+"";return{c(){t=ue("span"),ge(t,"class","attribution")},m(n,r){le(n,t,r),t.innerHTML=e},p:ut,d(n){n&&Jt(t)}}}function Yx(i){let t,e,n,r,s,a,o,l,u;const h=[eU,tU],c=[];function f(g,p){return g[6].content?0:g[6].chart?1:-1}~(n=f(i))&&(r=c[n]=h[n](i));let d=i[6].attribution&&iU(i);return{c(){t=ue("div"),e=ue("div"),r&&r.c(),s=Zs(),d&&d.c(),a=Zs(),o=ue("p"),l=Zs(),ge(e,"class","step-content svelte-1qx0jlg"),ge(t,"class","step svelte-1qx0jlg"),Wy(t,"active",i[0]===i[8])},m(g,p){le(g,t,p),$e(t,e),~n&&c[n].m(e,null),$e(e,s),d&&d.m(e,null),$e(t,a),$e(t,o),$e(t,l),u=!0},p(g,p){r&&r.p(g,p),g[6].attribution&&d.p(g,p),(!u||p&1)&&Wy(t,"active",g[0]===g[8])},i(g){u||(Ae(r),u=!0)},o(g){oi(r),u=!1},d(g){g&&Jt(t),~n&&c[n].d(),d&&d.d()}}}function nU(i){let t,e,n=i[5].steps,r=[];for(let a=0;a<n.length;a+=1)r[a]=Yx(Wx(i,n,a));const s=a=>oi(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=bc()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);le(a,t,o),e=!0},p(a,o){if(o&5){n=a[5].steps;let l;for(l=0;l<n.length;l+=1){const u=Wx(a,n,l);r[l]?(r[l].p(u,o),Ae(r[l],1)):(r[l]=Yx(u),r[l].c(),Ae(r[l],1),r[l].m(t.parentNode,t))}for(jx(),l=n.length;l<r.length;l+=1)s(l);Zx()}},i(a){if(!e){for(let o=0;o<n.length;o+=1)Ae(r[o]);e=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)oi(r[o]);e=!1},d(a){LA(r,a),a&&Jt(t)}}}function rU(i){let t;return{c(){t=ue("div"),t.textContent="Waiting",ge(t,"class","error")},m(e,n){le(e,t,n)},p:ut,i:ut,o:ut,d(e){e&&Jt(t)}}}function sU(i){let t,e,n,r;const s=[ZH,jH],a=[];function o(l,u){return l[1]?1:0}return t=o(i),e=a[t]=s[t](i),{c(){e.c(),n=bc()},m(l,u){a[t].m(l,u),le(l,n,u),r=!0},p(l,[u]){e.p(l,u)},i(l){r||(Ae(e),r=!0)},o(l){oi(e),r=!1},d(l){a[t].d(l),l&&Jt(n)}}}function aU(i,t,e){let n;EA(i,Rg,l=>e(0,n=l));const s=(()=>{const u=new URL(window.location.href).searchParams.get("config");return u||console.error("No config path defined."),u})(),a=fetch(s).then(l=>l.text()).then(l=>eM(l));function o(l){n=l,Rg.set(n)}return[n,s,a,o]}class oU extends Il{constructor(t){super(),El(this,t,aU,sU,Ca,{})}}new oU({target:document.body});
