var GM=Object.defineProperty;var zM=(n,t,e)=>t in n?GM(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var It=(n,t,e)=>zM(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();const oT=!1;var qm=Array.isArray,Jm=Array.from,VM=Object.defineProperty,Za=Object.getOwnPropertyDescriptor,lT=Object.getOwnPropertyDescriptors,WM=Object.prototype,YM=Array.prototype,ef=Object.getPrototypeOf;const qa=()=>{};function $M(n){return typeof(n==null?void 0:n.then)=="function"}function HM(n){return n()}function fv(n){for(var t=0;t<n.length;t++)n[t]()}const Hi=2,uT=4,ju=8,Qm=16,Hn=32,Zu=64,Us=128,nf=256,Me=512,Pr=1024,Lo=2048,Ni=4096,Do=8192,UM=16384,ty=32768,XM=65536,KM=1<<18,hT=1<<19,Ja=Symbol("$state"),jM=Symbol("");function cT(n){return n===this.v}function fT(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}function ey(n){return!fT(n,this.v)}function ZM(n){throw new Error("effect_in_teardown")}function qM(){throw new Error("effect_in_unowned_derived")}function JM(n){throw new Error("effect_orphan")}function QM(){throw new Error("effect_update_depth_exceeded")}function tL(n){throw new Error("props_invalid_value")}function eL(){throw new Error("state_descriptors_fixed")}function nL(){throw new Error("state_prototype_fixed")}function iL(){throw new Error("state_unsafe_local_read")}function rL(){throw new Error("state_unsafe_mutation")}function Ne(n){return{f:0,v:n,reactions:null,equals:cT,version:0}}function go(n,t=!1){var i;const e=Ne(n);return t||(e.equals=ey),Nt!==null&&Nt.l!==null&&((i=Nt.l).s??(i.s=[])).push(e),e}function xs(n,t=!1){return sL(go(n,t))}function sL(n){return kt!==null&&kt.f&Hi&&(ci===null?AL([n]):ci.push(n)),n}function se(n,t){return kt!==null&&nd()&&kt.f&(Hi|Qm)&&(ci===null||!ci.includes(n))&&rL(),Ul(n,t)}function Ul(n,t){return n.equals(t)||(n.v=t,n.version=LT(),dT(n,Pr),nd()&&dt!==null&&dt.f&Me&&!(dt.f&Hn)&&(ye!==null&&ye.includes(n)?(Un(dt,Pr),id(dt)):Ir===null?RL([n]):Ir.push(n))),t}function dT(n,t){var e=n.reactions;if(e!==null)for(var i=nd(),r=e.length,s=0;s<r;s++){var a=e[s],o=a.f;o&Pr||!i&&a===dt||(Un(a,t),o&(Me|Us)&&(o&Hi?dT(a,Lo):id(a)))}}const aL=1,oL=2,lL=16,uL=1,hL=2,cL=4,fL=8,dL=16,gL=1,pL=2,qe=Symbol();let vL=!1;function Da(n,t=null,e){if(typeof n!="object"||n===null||Ja in n)return n;const i=ef(n);if(i!==WM&&i!==YM)return n;var r=new Map,s=qm(n),a=Ne(0);s&&r.set("length",Ne(n.length));var o;return new Proxy(n,{defineProperty(l,u,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&eL();var c=r.get(u);return c===void 0?(c=Ne(h.value),r.set(u,c)):se(c,Da(h.value,o)),!0},deleteProperty(l,u){var h=r.get(u);if(h===void 0)u in l&&r.set(u,Ne(qe));else{if(s&&typeof u=="string"){var c=r.get("length"),f=Number(u);Number.isInteger(f)&&f<c.v&&se(c,f)}se(h,qe),Y0(a)}return!0},get(l,u,h){var g;if(u===Ja)return n;var c=r.get(u),f=u in l;if(c===void 0&&(!f||(g=Za(l,u))!=null&&g.writable)&&(c=Ne(Da(f?l[u]:qe,o)),r.set(u,c)),c!==void 0){var d=$(c);return d===qe?void 0:d}return Reflect.get(l,u,h)},getOwnPropertyDescriptor(l,u){var h=Reflect.getOwnPropertyDescriptor(l,u);if(h&&"value"in h){var c=r.get(u);c&&(h.value=$(c))}else if(h===void 0){var f=r.get(u),d=f==null?void 0:f.v;if(f!==void 0&&d!==qe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return h},has(l,u){var d;if(u===Ja)return!0;var h=r.get(u),c=h!==void 0&&h.v!==qe||Reflect.has(l,u);if(h!==void 0||dt!==null&&(!c||(d=Za(l,u))!=null&&d.writable)){h===void 0&&(h=Ne(c?Da(l[u],o):qe),r.set(u,h));var f=$(h);if(f===qe)return!1}return c},set(l,u,h,c){var _;var f=r.get(u),d=u in l;if(s&&u==="length")for(var g=h;g<f.v;g+=1){var v=r.get(g+"");v!==void 0?se(v,qe):g in l&&(v=Ne(qe),r.set(g+"",v))}f===void 0?(!d||(_=Za(l,u))!=null&&_.writable)&&(f=Ne(void 0),se(f,Da(h,o)),r.set(u,f)):(d=f.v!==qe,se(f,Da(h,o)));var p=Reflect.getOwnPropertyDescriptor(l,u);if(p!=null&&p.set&&p.set.call(c,h),!d){if(s&&typeof u=="string"){var m=r.get("length"),y=Number(u);Number.isInteger(y)&&y>=m.v&&se(m,y+1)}Y0(a)}return!0},ownKeys(l){$(a);var u=Reflect.ownKeys(l).filter(f=>{var d=r.get(f);return d===void 0||d.v!==qe});for(var[h,c]of r)c.v!==qe&&!(h in l)&&u.push(h);return u},setPrototypeOf(){nL()}})}function Y0(n,t=1){se(n,n.v+t)}var $0,gT,pT;function mL(){if($0===void 0){$0=window;var n=Element.prototype,t=Node.prototype;gT=Za(t,"firstChild").get,pT=Za(t,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__e=void 0,Text.prototype.__t=void 0}}function vT(n=""){return document.createTextNode(n)}function du(n){return gT.call(n)}function Qf(n){return pT.call(n)}function yn(n){return du(n)}function sa(n,t){{var e=du(n);return e instanceof Comment&&e.data===""?Qf(e):e}}function Ml(n,t=1,e=!1){let i=n;for(;t--;)i=Qf(i);return i}function yL(n){n.textContent=""}function rf(n){var t=Hi|Pr;dt===null?t|=Us:dt.f|=hT;const e={children:null,deps:null,equals:cT,f:t,fn:n,reactions:null,v:null,version:0,parent:dt};if(kt!==null&&kt.f&Hi){var i=kt;(i.children??(i.children=[])).push(e)}return e}function _L(n){const t=rf(n);return t.equals=ey,t}function mT(n){var t=n.children;if(t!==null){n.children=null;for(var e=0;e<t.length;e+=1){var i=t[e];i.f&Hi?ny(i):Yr(i)}}}function yT(n){var t,e=dt;gi(n.parent);try{mT(n),t=DT(n)}finally{gi(e)}return t}function _T(n){var t=yT(n),e=(Ga||n.f&Us)&&n.deps!==null?Lo:Me;Un(n,e),n.equals(t)||(n.v=t,n.version=LT())}function ny(n){mT(n),pu(n,0),Un(n,Do),n.v=n.children=n.deps=n.reactions=null}function wT(n){dt===null&&kt===null&&JM(),kt!==null&&kt.f&Us&&qM(),oy&&ZM()}function wL(n,t){var e=t.last;e===null?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}function ko(n,t,e,i=!0){var r=(n&Zu)!==0,s=dt,a={ctx:Nt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|Pr,first:null,fn:t,last:null,next:null,parent:r?null:s,prev:null,teardown:null,transitions:null,version:0};if(e){var o=to;try{H0(!0),Ju(a),a.f|=UM}catch(h){throw Yr(a),h}finally{H0(o)}}else t!==null&&id(a);var l=e&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&hT)===0;if(!l&&!r&&i&&(s!==null&&wL(a,s),kt!==null&&kt.f&Hi)){var u=kt;(u.children??(u.children=[])).push(a)}return a}function xL(n){const t=ko(ju,null,!1);return Un(t,Me),t.teardown=n,t}function dv(n){wT();var t=dt!==null&&(dt.f&Hn)!==0&&Nt!==null&&!Nt.m;if(t){var e=Nt;(e.e??(e.e=[])).push({fn:n,effect:dt,reaction:kt})}else{var i=td(n);return i}}function SL(n){return wT(),ed(n)}function bL(n){const t=ko(Zu,n,!0);return()=>{Yr(t)}}function td(n){return ko(uT,n,!1)}function iy(n,t){var e=Nt,i={effect:null,ran:!1};e.l.r1.push(i),i.effect=ed(()=>{n(),!i.ran&&(i.ran=!0,se(e.l.r2,!0),Oo(t))})}function ry(){var n=Nt;ed(()=>{if($(n.l.r2)){for(var t of n.l.r1){var e=t.effect;e.f&Me&&Un(e,Lo),Po(e)&&Ju(e),t.ran=!1}n.l.r2.v=!1}})}function ed(n){return ko(ju,n,!0)}function sy(n){return qu(n)}function qu(n,t=0){return ko(ju|Qm|t,n,!0)}function Fi(n,t=!0){return ko(ju|Hn,n,!0,t)}function xT(n){var t=n.teardown;if(t!==null){const e=oy,i=kt;U0(!0),Or(null);try{t.call(null)}finally{U0(e),Or(i)}}}function ST(n){var t=n.deriveds;if(t!==null){n.deriveds=null;for(var e=0;e<t.length;e+=1)ny(t[e])}}function bT(n,t=!1){var e=n.first;for(n.first=n.last=null;e!==null;){var i=e.next;Yr(e,t),e=i}}function TL(n){for(var t=n.first;t!==null;){var e=t.next;t.f&Hn||Yr(t),t=e}}function Yr(n,t=!0){var e=!1;if((t||n.f&KM)&&n.nodes_start!==null){var i=n.nodes_start,r=n.nodes_end,s=kt,a=dt;Or(null),gi(null);try{for(;i!==null;){var o=i===r?null:Qf(i);i.remove(),i=o}}finally{Or(s),gi(a)}e=!0}ST(n),bT(n,t&&!e),pu(n,0),Un(n,Do);var l=n.transitions;if(l!==null)for(const h of l)h.stop();xT(n);var u=n.parent;u!==null&&u.first!==null&&TT(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.parent=n.fn=n.nodes_start=n.nodes_end=null}function TT(n){var t=n.parent,e=n.prev,i=n.next;e!==null&&(e.next=i),i!==null&&(i.prev=e),t!==null&&(t.first===n&&(t.first=i),t.last===n&&(t.last=e))}function Qa(n,t){var e=[];ay(n,e,!0),CT(e,()=>{Yr(n),t&&t()})}function CT(n,t){var e=n.length;if(e>0){var i=()=>--e||t();for(var r of n)r.out(i)}else t()}function ay(n,t,e){if(!(n.f&Ni)){if(n.f^=Ni,n.transitions!==null)for(const a of n.transitions)(a.is_global||e)&&t.push(a);for(var i=n.first;i!==null;){var r=i.next,s=(i.f&ty)!==0||(i.f&Hn)!==0;ay(i,t,s?e:!1),i=r}}}function Ls(n){ET(n,!0)}function ET(n,t){if(n.f&Ni){n.f^=Ni,Po(n)&&Ju(n);for(var e=n.first;e!==null;){var i=e.next,r=(e.f&ty)!==0||(e.f&Hn)!==0;ET(e,r?t:!1),e=i}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||t)&&s.in()}}let sf=!1,gv=[];function IT(){sf=!1;const n=gv.slice();gv=[],fv(n)}function AT(n){sf||(sf=!0,queueMicrotask(IT)),gv.push(n)}function CL(){sf&&IT()}function EL(n){throw new Error("lifecycle_outside_component")}const RT=0,IL=1;let Oc=RT,gu=!1,to=!1,oy=!1;function H0(n){to=n}function U0(n){oy=n}let Ss=[],eo=0;let kt=null;function Or(n){kt=n}let dt=null;function gi(n){dt=n}let ci=null;function AL(n){ci=n}let ye=null,Je=0,Ir=null;function RL(n){Ir=n}let MT=0,Ga=!1,Nt=null;function X0(n){Nt=n}function LT(){return++MT}function nd(){return Nt!==null&&Nt.l===null}function Po(n){var a,o;var t=n.f;if(t&Pr)return!0;if(t&Lo){var e=n.deps,i=(t&Us)!==0;if(e!==null){var r;if(t&nf){for(r=0;r<e.length;r++)((a=e[r]).reactions??(a.reactions=[])).push(n);n.f^=nf}for(r=0;r<e.length;r++){var s=e[r];if(Po(s)&&_T(s),i&&dt!==null&&!Ga&&!((o=s==null?void 0:s.reactions)!=null&&o.includes(n))&&(s.reactions??(s.reactions=[])).push(n),s.version>n.version)return!0}}i||Un(n,Me)}return!1}function ML(n,t,e){throw n}function DT(n){var c;var t=ye,e=Je,i=Ir,r=kt,s=Ga,a=ci,o=n.f;ye=null,Je=0,Ir=null,kt=o&(Hn|Zu)?null:n,Ga=!to&&(o&Us)!==0,ci=null;try{var l=(0,n.fn)(),u=n.deps;if(ye!==null){var h;if(pu(n,Je),u!==null&&Je>0)for(u.length=Je+ye.length,h=0;h<ye.length;h++)u[Je+h]=ye[h];else n.deps=u=ye;if(!Ga)for(h=Je;h<u.length;h++)((c=u[h]).reactions??(c.reactions=[])).push(n)}else u!==null&&Je<u.length&&(pu(n,Je),u.length=Je);return l}finally{ye=t,Je=e,Ir=i,kt=r,Ga=s,ci=a}}function LL(n,t){let e=t.reactions;if(e!==null){var i=e.indexOf(n);if(i!==-1){var r=e.length-1;r===0?e=t.reactions=null:(e[i]=e[r],e.pop())}}e===null&&t.f&Hi&&(ye===null||!ye.includes(t))&&(Un(t,Lo),t.f&(Us|nf)||(t.f^=nf),pu(t,0))}function pu(n,t){var e=n.deps;if(e!==null)for(var i=t;i<e.length;i++)LL(n,e[i])}function Ju(n){var t=n.f;if(!(t&Do)){Un(n,Me);var e=dt,i=Nt;dt=n,Nt=n.ctx;try{ST(n),t&Qm?TL(n):bT(n),xT(n);var r=DT(n);n.teardown=typeof r=="function"?r:null,n.version=MT}catch(s){ML(s)}finally{dt=e,Nt=i}}}function kT(){eo>1e3&&(eo=0,QM()),eo++}function PT(n){var t=n.length;if(t!==0){kT();var e=to;to=!0;try{for(var i=0;i<t;i++){var r=n[i];r.f&Me||(r.f^=Me);var s=[];OT(r,s),DL(s)}}finally{to=e}}}function DL(n){var t=n.length;if(t!==0)for(var e=0;e<t;e++){var i=n[e];!(i.f&(Do|Ni))&&Po(i)&&(Ju(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?TT(i):i.fn=null))}}function kL(){if(gu=!1,eo>1001)return;const n=Ss;Ss=[],PT(n),gu||(eo=0)}function id(n){Oc===RT&&(gu||(gu=!0,queueMicrotask(kL)));for(var t=n;t.parent!==null;){t=t.parent;var e=t.f;if(e&(Zu|Hn)){if(!(e&Me))return;t.f^=Me}}Ss.push(t)}function OT(n,t){var e=n.first,i=[];t:for(;e!==null;){var r=e.f,s=(r&Hn)!==0,a=s&&(r&Me)!==0;if(!a&&!(r&Ni))if(r&ju){s?e.f^=Me:Po(e)&&Ju(e);var o=e.first;if(o!==null){e=o;continue}}else r&uT&&i.push(e);var l=e.next;if(l===null){let c=e.parent;for(;c!==null;){if(n===c)break t;var u=c.next;if(u!==null){e=u;continue t}c=c.parent}}e=l}for(var h=0;h<i.length;h++)o=i[h],t.push(o),OT(o,t)}function NT(n){var t=Oc,e=Ss;try{kT();const r=[];Oc=IL,Ss=r,gu=!1,PT(e);var i=n==null?void 0:n();return CL(),(Ss.length>0||r.length>0)&&NT(),eo=0,i}finally{Oc=t,Ss=e}}function $(n){var o;var t=n.f,e=(t&Hi)!==0;if(e&&t&Do){var i=yT(n);return ny(n),i}if(kt!==null){ci!==null&&ci.includes(n)&&iL();var r=kt.deps;ye===null&&r!==null&&r[Je]===n?Je++:ye===null?ye=[n]:ye.push(n),Ir!==null&&dt!==null&&dt.f&Me&&!(dt.f&Hn)&&Ir.includes(n)&&(Un(dt,Pr),id(dt))}else if(e&&n.deps===null){var s=n,a=s.parent;a!==null&&!((o=a.deriveds)!=null&&o.includes(s))&&(a.deriveds??(a.deriveds=[])).push(s)}return e&&(s=n,Po(s)&&_T(s)),n.v}function Oo(n){const t=kt;try{return kt=null,n()}finally{kt=t}}const PL=~(Pr|Lo|Me);function Un(n,t){n.f=n.f&PL|t}function Qu(n,t=!1,e){Nt={p:Nt,c:null,e:null,m:!1,s:n,x:null,l:null},t||(Nt.l={s:null,u:null,r1:[],r2:Ne(!1)})}function th(n){const t=Nt;if(t!==null){const a=t.e;if(a!==null){var e=dt,i=kt;t.e=null;try{for(var r=0;r<a.length;r++){var s=a[r];gi(s.effect),Or(s.reaction),td(s.fn)}}finally{gi(e),Or(i)}}Nt=t.p,t.m=!0}return{}}function vu(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ja in n)pv(n);else if(!Array.isArray(n))for(let t in n){const e=n[t];typeof e=="object"&&e&&Ja in e&&pv(e)}}}function pv(n,t=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!t.has(n)){t.add(n),n instanceof Date&&n.getTime();for(let i in n)try{pv(n[i],t)}catch{}const e=ef(n);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const i=lT(e);for(let r in i){const s=i[r].get;if(s)try{s.call(n)}catch{}}}}}const OL=new Set,K0=new Set;function Ch(n){var p;var t=this,e=t.ownerDocument,i=n.type,r=((p=n.composedPath)==null?void 0:p.call(n))||[],s=r[0]||n.target,a=0,o=n.__root;if(o){var l=r.indexOf(o);if(l!==-1&&(t===document||t===window)){n.__root=t;return}var u=r.indexOf(t);if(u===-1)return;l<=u&&(a=l)}if(s=r[a]||n.target,s!==t){VM(n,"currentTarget",{configurable:!0,get(){return s||e}});try{for(var h,c=[];s!==null;){var f=s.assignedSlot||s.parentNode||s.host||null;try{var d=s["__"+i];if(d!==void 0&&!s.disabled)if(qm(d)){var[g,...v]=d;g.apply(s,[n,...v])}else d.call(s,n)}catch(m){h?c.push(m):h=m}if(n.cancelBubble||f===t||f===null)break;s=f}if(h){for(let m of c)queueMicrotask(()=>{throw m});throw h}}finally{n.__root=t,delete n.currentTarget}}}function FT(n){var t=document.createElement("template");return t.innerHTML=n,t.content}function af(n,t){var e=dt;e.nodes_start===null&&(e.nodes_start=n,e.nodes_end=t)}function Qi(n,t){var e=(t&gL)!==0,i=(t&pL)!==0,r,s=!n.startsWith("<!>");return()=>{r===void 0&&(r=FT(s?n:"<!>"+n),e||(r=du(r)));var a=i?document.importNode(r,!0):r.cloneNode(!0);if(e){var o=du(a),l=a.lastChild;af(o,l)}else af(a,a);return a}}function el(){var n=document.createDocumentFragment(),t=document.createComment(""),e=vT();return n.append(t,e),af(t,e),n}function Oe(n,t){n!==null&&n.before(t)}const NL=["touchstart","touchmove"];function FL(n){return NL.includes(n)}function j0(n,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=e,n.nodeValue=e==null?"":e+"")}function BL(n,t){return GL(n,t)}const aa=new Map;function GL(n,{target:t,anchor:e,props:i={},events:r,context:s,intro:a=!0}){mL();var o=new Set,l=c=>{for(var f=0;f<c.length;f++){var d=c[f];if(!o.has(d)){o.add(d);var g=FL(d);t.addEventListener(d,Ch,{passive:g});var v=aa.get(d);v===void 0?(document.addEventListener(d,Ch,{passive:g}),aa.set(d,1)):aa.set(d,v+1)}}};l(Jm(OL)),K0.add(l);var u=void 0,h=bL(()=>{var c=e??t.appendChild(vT());return Fi(()=>{if(s){Qu({});var f=Nt;f.c=s}r&&(i.$$events=r),u=n(c,i)||{},s&&th()}),()=>{var g;for(var f of o){t.removeEventListener(f,Ch);var d=aa.get(f);--d===0?(document.removeEventListener(f,Ch),aa.delete(f)):aa.set(f,d)}K0.delete(l),Z0.delete(u),c!==e&&((g=c.parentNode)==null||g.removeChild(c))}});return Z0.set(u,h),u}let Z0=new WeakMap;const gg=0,Eh=1,pg=2;function zL(n,t,e,i,r){var s=n,a=nd(),o=Nt,l,u,h,c,f=(a?Ne:go)(void 0),d=(a?Ne:go)(void 0),g=!1;function v(m,y){g=!0,y&&(gi(p),Or(p),X0(o)),m===gg&&e&&(u?Ls(u):u=Fi(()=>e(s))),m===Eh&&i&&(h?Ls(h):h=Fi(()=>i(s,f))),m===pg&&r&&(c?Ls(c):c=Fi(()=>r(s,d))),m!==gg&&u&&Qa(u,()=>u=null),m!==Eh&&h&&Qa(h,()=>h=null),m!==pg&&c&&Qa(c,()=>c=null),y&&(X0(null),Or(null),gi(null),NT())}var p=qu(()=>{if(l!==(l=t())){if($M(l)){var m=l;g=!1,m.then(y=>{m===l&&(Ul(f,y),v(Eh,!0))},y=>{m===l&&(Ul(d,y),v(pg,!0))}),AT(()=>{g||v(gg,!0)})}else Ul(f,l),v(Eh,!1);return()=>l=null}})}function nl(n,t,e,i=null,r=!1){var s=n,a=null,o=null,l=null,u=r?ty:0;qu(()=>{l!==(l=!!t())&&(l?(a?Ls(a):a=Fi(()=>e(s)),o&&Qa(o,()=>{o=null})):(o?Ls(o):i&&(o=Fi(()=>i(s))),a&&Qa(a,()=>{a=null})))},u)}let vg=null;function VL(n,t){return t}function WL(n,t,e,i){for(var r=[],s=t.length,a=0;a<s;a++)ay(t[a].e,r,!0);var o=s>0&&r.length===0&&e!==null;if(o){var l=e.parentNode;yL(l),l.append(e),i.clear(),wr(n,t[0].prev,t[s-1].next)}CT(r,()=>{for(var u=0;u<s;u++){var h=t[u];o||(i.delete(h.k),wr(n,h.prev,h.next)),Yr(h.e,!o)}})}function YL(n,t,e,i,r,s=null){var a=n,o={flags:t,items:new Map,first:null},l=null,u=!1;qu(()=>{var h=e(),c=qm(h)?h:h==null?[]:Jm(h),f=c.length;u&&f===0||(u=f===0,$L(c,o,a,r,t,i),s!==null&&(f===0?l?Ls(l):l=Fi(()=>s(a)):l!==null&&Qa(l,()=>{l=null})),e())})}function $L(n,t,e,i,r,s){var a=n.length,o=t.items,l=t.first,u=l,h,c=null,f=[],d=[],g,v,p,m;for(m=0;m<a;m+=1){if(g=n[m],v=s(g,m),p=o.get(v),p===void 0){var y=u?u.e.nodes_start:e;c=UL(y,t,c,c===null?t.first:c.next,g,v,m,i,r),o.set(v,c),f=[],d=[],u=c.next;continue}if(HL(p,g,m),p.e.f&Ni&&Ls(p.e),p!==u){if(h!==void 0&&h.has(p)){if(f.length<d.length){var _=d[0],w;c=_.prev;var S=f[0],x=f[f.length-1];for(w=0;w<f.length;w+=1)q0(f[w],_,e);for(w=0;w<d.length;w+=1)h.delete(d[w]);wr(t,S.prev,x.next),wr(t,c,S),wr(t,x,_),u=_,c=x,m-=1,f=[],d=[]}else h.delete(p),q0(p,u,e),wr(t,p.prev,p.next),wr(t,p,c===null?t.first:c.next),wr(t,c,p),c=p;continue}for(f=[],d=[];u!==null&&u.k!==v;)u.e.f&Ni||(h??(h=new Set)).add(u),d.push(u),u=u.next;if(u===null)continue;p=u}f.push(p),c=p,u=p.next}if(u!==null||h!==void 0){for(var b=h===void 0?[]:Jm(h);u!==null;)u.e.f&Ni||b.push(u),u=u.next;var T=b.length;if(T>0){var C=null;WL(t,b,C,o)}}dt.first=t.first&&t.first.e,dt.last=c&&c.e}function HL(n,t,e,i){Ul(n.v,t),n.i=e}function UL(n,t,e,i,r,s,a,o,l){var u=vg;try{var h=(l&aL)!==0,c=(l&lL)===0,f=h?c?go(r):Ne(r):r,d=l&oL?Ne(a):a,g={i:d,v:f,k:s,a:null,e:null,prev:e,next:i};return vg=g,g.e=Fi(()=>o(n,f,d),vL),g.e.prev=e&&e.e,g.e.next=i&&i.e,e===null?t.first=g:(e.next=g,e.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{vg=u}}function q0(n,t,e){for(var i=n.next?n.next.e.nodes_start:e,r=t?t.e.nodes_start:e,s=n.e.nodes_start;s!==i;){var a=Qf(s);r.before(s),s=a}}function wr(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function J0(n,t,e,i,r){var s=n,a="",o;qu(()=>{a!==(a=t()??"")&&(o!==void 0&&(Yr(o),o=void 0),a!==""&&(o=Fi(()=>{var l=a+"",u=FT(l);af(du(u),u.lastChild),s.before(u)})))})}function XL(n,t,e,i,r){var o;var s=(o=t.$$slots)==null?void 0:o[e],a=!1;s===!0&&(s=t.children,a=!0),s===void 0||s(n,a?()=>i:i)}function BT(n,t,e){td(()=>{var i=Oo(()=>t(n,e==null?void 0:e())||{});if(i!=null&&i.destroy)return()=>i.destroy()})}function ly(n,t,e,i){var r=n.__attributes??(n.__attributes={});r[t]!==(r[t]=e)&&(t==="loading"&&(n[jM]=e),e==null?n.removeAttribute(t):typeof e!="string"&&KL(n).includes(t)?n[t]=e:n.setAttribute(t,e))}var Q0=new Map;function KL(n){var t=Q0.get(n.nodeName);if(t)return t;Q0.set(n.nodeName,t=[]);for(var e,i=ef(n);i.constructor.name!=="Element";){e=lT(i);for(var r in e)e[r].set&&t.push(r);i=ef(i)}return t}function jL(n,t,e){if(e){if(n.classList.contains(t))return;n.classList.add(t)}else{if(!n.classList.contains(t))return;n.classList.remove(t)}}function t1(n,t){return n===t||(n==null?void 0:n[Ja])===t}function ZL(n={},t,e,i){return td(()=>{var r,s;return ed(()=>{r=s,s=[],Oo(()=>{n!==e(...s)&&(t(n,...s),r&&t1(e(...r),n)&&t(null,...r))})}),()=>{AT(()=>{s&&t1(e(...s),n)&&t(null,...s)})}}),n}function rd(n=!1){const t=Nt,e=t.l.u;if(!e)return;let i=()=>vu(t.s);if(n){let r=0,s={};const a=rf(()=>{let o=!1;const l=t.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],o=!0);return o&&r++,r});i=()=>$(a)}e.b.length&&SL(()=>{e1(t,i),fv(e.b)}),dv(()=>{const r=Oo(()=>e.m.map(HM));return()=>{for(const s of r)typeof s=="function"&&s()}}),e.a.length&&dv(()=>{e1(t,i),fv(e.a)})}function e1(n,t){if(n.l.s)for(const e of n.l.s)$(e);t()}function n1(n){for(var t=dt,e=dt;t!==null&&!(t.f&(Hn|Zu));)t=t.parent;try{return gi(t),n()}finally{gi(e)}}function ki(n,t,e,i){var S;var r=(e&uL)!==0,s=(e&hL)!==0,a=(e&fL)!==0,o=(e&dL)!==0,l=n[t],u=(S=Za(n,t))==null?void 0:S.set,h=i,c=!0,f=!1,d=()=>(f=!0,c&&(c=!1,o?h=Oo(i):h=i),h);l===void 0&&i!==void 0&&(u&&s&&tL(),l=d(),u&&u(l));var g;if(s)g=()=>{var x=n[t];return x===void 0?d():(c=!0,f=!1,x)};else{var v=n1(()=>(r?rf:_L)(()=>n[t]));v.f|=XM,g=()=>{var x=$(v);return x!==void 0&&(h=void 0),x===void 0?h:x}}if(!(e&cL))return g;if(u){var p=n.$$legacy;return function(x,b){return arguments.length>0?((!s||!b||p)&&u(b?g():x),x):g()}}var m=!1,y=!1,_=go(l),w=n1(()=>rf(()=>{var x=g(),b=$(_),T=kt;return m||x===void 0&&T.f&Do?(m=!1,y=!0,b):(y=!1,_.v=x)}));return r||(w.equals=ey),function(x,b){var T=$(w);if(arguments.length>0){const C=b?$(w):s&&a?Da(x):x;return w.equals(C)||(m=!0,se(_,C),f&&h!==void 0&&(h=C),$(w)),x}return T}}function qL(n,t,e){if(n==null)return t(void 0),qa;const i=n.subscribe(t,e);return i.unsubscribe?()=>i.unsubscribe():i}function JL(n,t,e){const i=e[t]??(e[t]={store:null,source:go(void 0),unsubscribe:qa});if(i.store!==n)if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=qa;else{var r=!0;i.unsubscribe=qL(n,s=>{r?i.source.v=s:se(i.source,s)}),r=!1}return $(i.source)}function QL(n,t){return n.set(t),t}function t2(){const n={};return xL(()=>{for(var t in n)n[t].unsubscribe()}),n}function e2(n){Nt===null&&EL(),Nt.l!==null?n2(Nt).m.push(n):dv(()=>{const t=Oo(n);if(typeof t=="function")return t})}function n2(n){var t=n.l;return t.u??(t.u={a:[],b:[],m:[]})}const i2="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(i2);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vv=function(n,t){return vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},vv(n,t)};function et(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vv(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var r2=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),s2=function(){function n(){this.browser=new r2,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),tt=new s2;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(tt.wxa=!0,tt.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?tt.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(tt.node=!0,tt.svgSupported=!0):a2(navigator.userAgent,tt);function a2(n,t){var e=t.browser,i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);i&&(e.firefox=!0,e.version=i[1]),r&&(e.ie=!0,e.version=r[1]),s&&(e.edge=!0,e.version=s[1],e.newEdge=+s[1].split(".")[0]>18),a&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported=typeof document<"u";var o=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in o||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}var uy=12,o2="sans-serif",Fs=uy+"px "+o2,l2=20,u2=100,h2="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function c2(n){var t={};if(typeof JSON>"u")return t;for(var e=0;e<n.length;e++){var i=String.fromCharCode(e+32),r=(n.charCodeAt(e)-l2)/u2;t[i]=r}return t}var f2=c2(h2),No={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,t;return function(e,i){if(!n){var r=No.createCanvas();n=r&&r.getContext("2d")}if(n)return t!==i&&(t=n.font=i||Fs),n.measureText(e);e=e||"",i=i||Fs;var s=/((?:\d+)?\.?\d*)px/.exec(i),a=s&&+s[1]||uy,o=0;if(i.indexOf("mono")>=0)o=a*e.length;else for(var l=0;l<e.length;l++){var u=f2[e[l]];o+=u==null?a:u*a}return{width:o}}}(),loadImage:function(n,t,e){var i=new Image;return i.onload=t,i.onerror=e,i.src=n,i}},GT=Fo(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,t){return n["[object "+t+"]"]=!0,n},{}),zT=Fo(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,t){return n["[object "+t+"Array]"]=!0,n},{}),eh=Object.prototype.toString,sd=Array.prototype,d2=sd.forEach,g2=sd.filter,hy=sd.slice,p2=sd.map,i1=(function(){}).constructor,Ih=i1?i1.prototype:null,cy="__proto__",v2=2311;function VT(){return v2++}function fy(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];typeof console<"u"&&console.error.apply(console,n)}function ut(n){if(n==null||typeof n!="object")return n;var t=n,e=eh.call(n);if(e==="[object Array]"){if(!Xl(n)){t=[];for(var i=0,r=n.length;i<r;i++)t[i]=ut(n[i])}}else if(zT[e]){if(!Xl(n)){var s=n.constructor;if(s.from)t=s.from(n);else{t=new s(n.length);for(var i=0,r=n.length;i<r;i++)t[i]=n[i]}}}else if(!GT[e]&&!Xl(n)&&!mu(n)){t={};for(var a in n)n.hasOwnProperty(a)&&a!==cy&&(t[a]=ut(n[a]))}return t}function mt(n,t,e){if(!Z(t)||!Z(n))return e?ut(t):n;for(var i in t)if(t.hasOwnProperty(i)&&i!==cy){var r=n[i],s=t[i];Z(s)&&Z(r)&&!V(s)&&!V(r)&&!mu(s)&&!mu(r)&&!r1(s)&&!r1(r)&&!Xl(s)&&!Xl(r)?mt(r,s,e):(e||!(i in n))&&(n[i]=ut(t[i]))}return n}function G(n,t){if(Object.assign)Object.assign(n,t);else for(var e in t)t.hasOwnProperty(e)&&e!==cy&&(n[e]=t[e]);return n}function Pt(n,t,e){for(var i=zt(t),r=0;r<i.length;r++){var s=i[r];n[s]==null&&(n[s]=t[s])}return n}function bt(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var e=0,i=n.length;e<i;e++)if(n[e]===t)return e}return-1}function m2(n,t){var e=n.prototype;function i(){}i.prototype=t.prototype,n.prototype=new i;for(var r in e)e.hasOwnProperty(r)&&(n.prototype[r]=e[r]);n.prototype.constructor=n,n.superClass=t}function Xn(n,t,e){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++){var s=i[r];s!=="constructor"&&n[s]==null&&(n[s]=t[s])}else Pt(n,t)}function Xe(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function A(n,t,e){if(n&&t)if(n.forEach&&n.forEach===d2)n.forEach(t,e);else if(n.length===+n.length)for(var i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);else for(var s in n)n.hasOwnProperty(s)&&t.call(e,n[s],s,n)}function j(n,t,e){if(!n)return[];if(!t)return dy(n);if(n.map&&n.map===p2)return n.map(t,e);for(var i=[],r=0,s=n.length;r<s;r++)i.push(t.call(e,n[r],r,n));return i}function Fo(n,t,e,i){if(n&&t){for(var r=0,s=n.length;r<s;r++)e=t.call(i,e,n[r],r,n);return e}}function xe(n,t,e){if(!n)return[];if(!t)return dy(n);if(n.filter&&n.filter===g2)return n.filter(t,e);for(var i=[],r=0,s=n.length;r<s;r++)t.call(e,n[r],r,n)&&i.push(n[r]);return i}function zt(n){if(!n)return[];if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}function y2(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];return function(){return n.apply(t,e.concat(hy.call(arguments)))}}var Yt=Ih&&lt(Ih.bind)?Ih.call.bind(Ih.bind):y2;function Gt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return n.apply(this,t.concat(hy.call(arguments)))}}function V(n){return Array.isArray?Array.isArray(n):eh.call(n)==="[object Array]"}function lt(n){return typeof n=="function"}function U(n){return typeof n=="string"}function mv(n){return eh.call(n)==="[object String]"}function $t(n){return typeof n=="number"}function Z(n){var t=typeof n;return t==="function"||!!n&&t==="object"}function r1(n){return!!GT[eh.call(n)]}function Ke(n){return!!zT[eh.call(n)]}function mu(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function ad(n){return n.colorStops!=null}function _2(n){return n.image!=null}function of(n){return n!==n}function po(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=0,i=n.length;e<i;e++)if(n[e]!=null)return n[e]}function st(n,t){return n??t}function Nc(n,t,e){return n??t??e}function dy(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return hy.apply(n,t)}function WT(n){if(typeof n=="number")return[n,n,n,n];var t=n.length;return t===2?[n[0],n[1],n[0],n[1]]:t===3?[n[0],n[1],n[2],n[1]]:n}function Ui(n,t){if(!n)throw new Error(t)}function ai(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var YT="__ec_primitive__";function yv(n){n[YT]=!0}function Xl(n){return n[YT]}var w2=function(){function n(){this.data={}}return n.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,e){return this.data[t]=e,this},n.prototype.keys=function(){return zt(this.data)},n.prototype.forEach=function(t){var e=this.data;for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},n}(),$T=typeof Map=="function";function x2(){return $T?new Map:new w2}var S2=function(){function n(t){var e=V(t);this.data=x2();var i=this;t instanceof n?t.each(r):t&&A(t,r);function r(s,a){e?i.set(s,a):i.set(a,s)}}return n.prototype.hasKey=function(t){return this.data.has(t)},n.prototype.get=function(t){return this.data.get(t)},n.prototype.set=function(t,e){return this.data.set(t,e),e},n.prototype.each=function(t,e){this.data.forEach(function(i,r){t.call(e,i,r)})},n.prototype.keys=function(){var t=this.data.keys();return $T?Array.from(t):t},n.prototype.removeKey=function(t){this.data.delete(t)},n}();function ot(n){return new S2(n)}function b2(n,t){for(var e=new n.constructor(n.length+t.length),i=0;i<n.length;i++)e[i]=n[i];for(var r=n.length,i=0;i<t.length;i++)e[i+r]=t[i];return e}function od(n,t){var e;if(Object.create)e=Object.create(n);else{var i=function(){};i.prototype=n,e=new i}return t&&G(e,t),e}function HT(n){var t=n.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function vo(n,t){return n.hasOwnProperty(t)}function Ue(){}var T2=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _v=function(n,t){return _v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},_v(n,t)};function At(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_v(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Bo(n,t){return n==null&&(n=0),t==null&&(t=0),[n,t]}function C2(n){return[n[0],n[1]]}function s1(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function UT(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function E2(n){return Math.sqrt(I2(n))}function I2(n){return n[0]*n[0]+n[1]*n[1]}function mg(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}function gy(n,t){var e=E2(t);return e===0?(n[0]=0,n[1]=0):(n[0]=t[0]/e,n[1]=t[1]/e),n}function wv(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var A2=wv;function R2(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}var no=R2;function An(n,t,e){var i=t[0],r=t[1];return n[0]=e[0]*i+e[2]*r+e[4],n[1]=e[1]*i+e[3]*r+e[5],n}function za(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function Va(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}var oa=function(){function n(t,e){this.target=t,this.topTarget=e&&e.topTarget}return n}(),M2=function(){function n(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new oa(e,t),"dragstart",t.event))},n.prototype._drag=function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,r=t.offsetY,s=i-this._x,a=r-this._y;this._x=i,this._y=r,e.drift(s,a,t),this.handler.dispatchToElement(new oa(e,t),"drag",t.event);var o=this.handler.findHover(i,r,e).target,l=this._dropTarget;this._dropTarget=o,e!==o&&(l&&o!==l&&this.handler.dispatchToElement(new oa(l,t),"dragleave",t.event),o&&o!==l&&this.handler.dispatchToElement(new oa(o,t),"dragenter",t.event))}},n.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new oa(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new oa(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},n}(),yi=function(){function n(t){t&&(this._$eventProcessor=t)}return n.prototype.on=function(t,e,i,r){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof e=="function"&&(r=i,i=e,e=null),!i||!t)return this;var a=this._$eventProcessor;e!=null&&a&&a.normalizeQuery&&(e=a.normalizeQuery(e)),s[t]||(s[t]=[]);for(var o=0;o<s[t].length;o++)if(s[t][o].h===i)return this;var l={h:i,query:e,ctx:r||this,callAtLast:i.zrEventfulCallAtLast},u=s[t].length-1,h=s[t][u];return h&&h.callAtLast?s[t].splice(u,0,l):s[t].push(l),this},n.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},n.prototype.off=function(t,e){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var r=[],s=0,a=i[t].length;s<a;s++)i[t][s].h!==e&&r.push(i[t][s]);i[t]=r}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},n.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[t],s=this._$eventProcessor;if(r)for(var a=e.length,o=r.length,l=0;l<o;l++){var u=r[l];if(!(s&&s.filter&&u.query!=null&&!s.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,e[0]);break;case 2:u.h.call(u.ctx,e[0],e[1]);break;default:u.h.apply(u.ctx,e);break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},n.prototype.triggerWithContext=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[t],s=this._$eventProcessor;if(r)for(var a=e.length,o=e[a-1],l=r.length,u=0;u<l;u++){var h=r[u];if(!(s&&s.filter&&h.query!=null&&!s.filter(t,h.query)))switch(a){case 0:h.h.call(o);break;case 1:h.h.call(o,e[0]);break;case 2:h.h.call(o,e[0],e[1]);break;default:h.h.apply(o,e.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},n}(),L2=Math.log(2);function xv(n,t,e,i,r,s){var a=i+"-"+r,o=n.length;if(s.hasOwnProperty(a))return s[a];if(t===1){var l=Math.round(Math.log((1<<o)-1&~r)/L2);return n[e][l]}for(var u=i|1<<e,h=e+1;i&1<<h;)h++;for(var c=0,f=0,d=0;f<o;f++){var g=1<<f;g&r||(c+=(d%2?-1:1)*n[e][f]*xv(n,t-1,h,u,r|g,s),d++)}return s[a]=c,c}function a1(n,t){var e=[[n[0],n[1],1,0,0,0,-t[0]*n[0],-t[0]*n[1]],[0,0,0,n[0],n[1],1,-t[1]*n[0],-t[1]*n[1]],[n[2],n[3],1,0,0,0,-t[2]*n[2],-t[2]*n[3]],[0,0,0,n[2],n[3],1,-t[3]*n[2],-t[3]*n[3]],[n[4],n[5],1,0,0,0,-t[4]*n[4],-t[4]*n[5]],[0,0,0,n[4],n[5],1,-t[5]*n[4],-t[5]*n[5]],[n[6],n[7],1,0,0,0,-t[6]*n[6],-t[6]*n[7]],[0,0,0,n[6],n[7],1,-t[7]*n[6],-t[7]*n[7]]],i={},r=xv(e,8,0,0,0,i);if(r!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*xv(e,7,a===0?1:0,1<<a,1<<o,i)/r*t[a];return function(l,u,h){var c=u*s[6]+h*s[7]+1;l[0]=(u*s[0]+h*s[1]+s[2])/c,l[1]=(u*s[3]+h*s[4]+s[5])/c}}}var o1="___zrEVENTSAVED",yg=[];function D2(n,t,e,i,r){return Sv(yg,t,i,r,!0)&&Sv(n,e,yg[0],yg[1])}function Sv(n,t,e,i,r){if(t.getBoundingClientRect&&tt.domSupported&&!XT(t)){var s=t[o1]||(t[o1]={}),a=k2(t,s),o=P2(a,s,r);if(o)return o(n,e,i),!0}return!1}function k2(n,t){var e=t.markers;if(e)return e;e=t.markers=[];for(var i=["left","right"],r=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,u=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[u]+":0",i[1-l]+":auto",r[1-u]+":auto",""].join("!important;"),n.appendChild(a),e.push(a)}return e}function P2(n,t,e){for(var i=e?"invTrans":"trans",r=t[i],s=t.srcCoords,a=[],o=[],l=!0,u=0;u<4;u++){var h=n[u].getBoundingClientRect(),c=2*u,f=h.left,d=h.top;a.push(f,d),l=l&&s&&f===s[c]&&d===s[c+1],o.push(n[u].offsetLeft,n[u].offsetTop)}return l&&r?r:(t.srcCoords=a,t[i]=e?a1(o,a):a1(a,o))}function XT(n){return n.nodeName.toUpperCase()==="CANVAS"}var O2=/([&<>"'])/g,N2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function en(n){return n==null?"":(n+"").replace(O2,function(t,e){return N2[e]})}var F2=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_g=[],B2=tt.browser.firefox&&+tt.browser.version.split(".")[0]<39;function bv(n,t,e,i){return e=e||{},i?l1(n,t,e):B2&&t.layerX!=null&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):t.offsetX!=null?(e.zrX=t.offsetX,e.zrY=t.offsetY):l1(n,t,e),e}function l1(n,t,e){if(tt.domSupported&&n.getBoundingClientRect){var i=t.clientX,r=t.clientY;if(XT(n)){var s=n.getBoundingClientRect();e.zrX=i-s.left,e.zrY=r-s.top;return}else if(Sv(_g,n,i,r)){e.zrX=_g[0],e.zrY=_g[1];return}}e.zrX=e.zrY=0}function py(n){return n||window.event}function vn(n,t,e){if(t=py(t),t.zrX!=null)return t;var i=t.type,r=i&&i.indexOf("touch")>=0;if(r){var a=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&bv(n,a,t,e)}else{bv(n,t,t,e);var s=G2(t);t.zrDelta=s?s/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&F2.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function G2(n){var t=n.wheelDelta;if(t)return t;var e=n.deltaX,i=n.deltaY;if(e==null||i==null)return t;var r=Math.abs(i!==0?i:e),s=i>0?-1:i<0?1:e>0?-1:1;return 3*r*s}function z2(n,t,e,i){n.addEventListener(t,e,i)}function V2(n,t,e,i){n.removeEventListener(t,e,i)}var KT=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},W2=function(){function n(){this._track=[]}return n.prototype.recognize=function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(t,e,i){var r=t.touches;if(r){for(var s={points:[],touches:[],target:e,event:t},a=0,o=r.length;a<o;a++){var l=r[a],u=bv(i,l,{});s.points.push([u.zrX,u.zrY]),s.touches.push(l)}this._track.push(s)}},n.prototype._recognize=function(t){for(var e in wg)if(wg.hasOwnProperty(e)){var i=wg[e](this._track,t);if(i)return i}},n}();function u1(n){var t=n[1][0]-n[0][0],e=n[1][1]-n[0][1];return Math.sqrt(t*t+e*e)}function Y2(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var wg={pinch:function(n,t){var e=n.length;if(e){var i=(n[e-1]||{}).points,r=(n[e-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var s=u1(i)/u1(r);!isFinite(s)&&(s=1),t.pinchScale=s;var a=Y2(i);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:n[0].target,event:t}}}}};function io(){return[1,0,0,1,0,0]}function vy(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function $2(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function ro(n,t,e){var i=t[0]*e[0]+t[2]*e[1],r=t[1]*e[0]+t[3]*e[1],s=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],o=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];return n[0]=i,n[1]=r,n[2]=s,n[3]=a,n[4]=o,n[5]=l,n}function Tv(n,t,e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+e[0],n[5]=t[5]+e[1],n}function my(n,t,e,i){i===void 0&&(i=[0,0]);var r=t[0],s=t[2],a=t[4],o=t[1],l=t[3],u=t[5],h=Math.sin(e),c=Math.cos(e);return n[0]=r*c+o*h,n[1]=-r*h+o*c,n[2]=s*c+l*h,n[3]=-s*h+c*l,n[4]=c*(a-i[0])+h*(u-i[1])+i[0],n[5]=c*(u-i[1])-h*(a-i[0])+i[1],n}function H2(n,t,e){var i=e[0],r=e[1];return n[0]=t[0]*i,n[1]=t[1]*r,n[2]=t[2]*i,n[3]=t[3]*r,n[4]=t[4]*i,n[5]=t[5]*r,n}function yy(n,t){var e=t[0],i=t[2],r=t[4],s=t[1],a=t[3],o=t[5],l=e*a-s*i;return l?(l=1/l,n[0]=a*l,n[1]=-s*l,n[2]=-i*l,n[3]=e*l,n[4]=(i*o-a*r)*l,n[5]=(s*r-e*o)*l,n):null}var Lt=function(){function n(t,e){this.x=t||0,this.y=e||0}return n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(t,e){return this.x=t,this.y=e,this},n.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},n.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},n.prototype.distanceSquare=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(t){if(t){var e=this.x,i=this.y;return this.x=t[0]*e+t[2]*i+t[4],this.y=t[1]*e+t[3]*i+t[5],this}},n.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},n.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},n.set=function(t,e,i){t.x=e,t.y=i},n.copy=function(t,e){t.x=e.x,t.y=e.y},n.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.lenSquare=function(t){return t.x*t.x+t.y*t.y},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.add=function(t,e,i){t.x=e.x+i.x,t.y=e.y+i.y},n.sub=function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y},n.scale=function(t,e,i){t.x=e.x*i,t.y=e.y*i},n.scaleAndAdd=function(t,e,i,r){t.x=e.x+i.x*r,t.y=e.y+i.y*r},n.lerp=function(t,e,i,r){var s=1-r;t.x=s*e.x+r*i.x,t.y=s*e.y+r*i.y},n}(),Ah=Math.min,Rh=Math.max,Xr=new Lt,Kr=new Lt,jr=new Lt,Zr=new Lt,il=new Lt,rl=new Lt,Tt=function(){function n(t,e,i,r){i<0&&(t=t+i,i=-i),r<0&&(e=e+r,r=-r),this.x=t,this.y=e,this.width=i,this.height=r}return n.prototype.union=function(t){var e=Ah(t.x,this.x),i=Ah(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Rh(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Rh(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=e,this.y=i},n.prototype.applyTransform=function(t){n.applyTransform(this,this,t)},n.prototype.calculateTransform=function(t){var e=this,i=t.width/e.width,r=t.height/e.height,s=io();return Tv(s,s,[-e.x,-e.y]),H2(s,s,[i,r]),Tv(s,s,[t.x,t.y]),s},n.prototype.intersect=function(t,e){if(!t)return!1;t instanceof n||(t=n.create(t));var i=this,r=i.x,s=i.x+i.width,a=i.y,o=i.y+i.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,f=!(s<l||u<r||o<h||c<a);if(e){var d=1/0,g=0,v=Math.abs(s-l),p=Math.abs(u-r),m=Math.abs(o-h),y=Math.abs(c-a),_=Math.min(v,p),w=Math.min(m,y);s<l||u<r?_>g&&(g=_,v<p?Lt.set(rl,-v,0):Lt.set(rl,p,0)):_<d&&(d=_,v<p?Lt.set(il,v,0):Lt.set(il,-p,0)),o<h||c<a?w>g&&(g=w,m<y?Lt.set(rl,0,-m):Lt.set(rl,0,y)):_<d&&(d=_,m<y?Lt.set(il,0,m):Lt.set(il,0,-y))}return e&&Lt.copy(e,f?il:rl),f},n.prototype.contain=function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){n.copy(this,t)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},n.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},n.applyTransform=function(t,e,i){if(!i){t!==e&&n.copy(t,e);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],s=i[3],a=i[4],o=i[5];t.x=e.x*r+a,t.y=e.y*s+o,t.width=e.width*r,t.height=e.height*s,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Xr.x=jr.x=e.x,Xr.y=Zr.y=e.y,Kr.x=Zr.x=e.x+e.width,Kr.y=jr.y=e.y+e.height,Xr.transform(i),Zr.transform(i),Kr.transform(i),jr.transform(i),t.x=Ah(Xr.x,Kr.x,jr.x,Zr.x),t.y=Ah(Xr.y,Kr.y,jr.y,Zr.y);var l=Rh(Xr.x,Kr.x,jr.x,Zr.x),u=Rh(Xr.y,Kr.y,jr.y,Zr.y);t.width=l-t.x,t.height=u-t.y},n}(),jT="silent";function U2(n,t,e){return{type:n,event:e,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:e.zrX,offsetY:e.zrY,gestureEvent:e.gestureEvent,pinchX:e.pinchX,pinchY:e.pinchY,pinchScale:e.pinchScale,wheelDelta:e.zrDelta,zrByTouch:e.zrByTouch,which:e.which,stop:X2}}function X2(){KT(this.event)}var K2=function(n){At(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.handler=null,e}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(yi),sl=function(){function n(t,e){this.x=t,this.y=e}return n}(),j2=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],xg=new Tt(0,0,0,0),ZT=function(n){At(t,n);function t(e,i,r,s,a){var o=n.call(this)||this;return o._hovered=new sl(0,0),o.storage=e,o.painter=i,o.painterRoot=s,o._pointerSize=a,r=r||new K2,o.proxy=null,o.setHandlerProxy(r),o._draggingMgr=new M2(o),o}return t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(A(j2,function(i){e.on&&e.on(i,this[i],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var i=e.zrX,r=e.zrY,s=qT(this,i,r),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new sl(i,r):this.findHover(i,r),u=l.target,h=this.proxy;h.setCursor&&h.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(l,"mousemove",e),u&&u!==o&&this.dispatchToElement(l,"mouseover",e)},t.prototype.mouseout=function(e){var i=e.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",e),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new sl(0,0)},t.prototype.dispatch=function(e,i){var r=this[e];r&&r.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var i=this.proxy;i.setCursor&&i.setCursor(e)},t.prototype.dispatchToElement=function(e,i,r){e=e||{};var s=e.target;if(!(s&&s.silent)){for(var a="on"+i,o=U2(i,e,r);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(i,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(i,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(i,o)}))}},t.prototype.findHover=function(e,i,r){var s=this.storage.getDisplayList(),a=new sl(e,i);if(h1(s,a,e,i,r),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,u=l/2,h=new Tt(e-u,i-u,l,l),c=s.length-1;c>=0;c--){var f=s[c];f!==r&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(xg.copy(f.getBoundingRect()),f.transform&&xg.applyTransform(f.transform),xg.intersect(h)&&o.push(f))}if(o.length)for(var d=4,g=Math.PI/12,v=Math.PI*2,p=0;p<u;p+=d)for(var m=0;m<v;m+=g){var y=e+p*Math.cos(m),_=i+p*Math.sin(m);if(h1(o,a,y,_,r),a.target)return a}}return a},t.prototype.processGesture=function(e,i){this._gestureMgr||(this._gestureMgr=new W2);var r=this._gestureMgr;i==="start"&&r.clear();var s=r.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if(i==="end"&&r.clear(),s){var a=s.type;e.gestureEvent=a;var o=new sl;o.target=s.target,this.dispatchToElement(o,a,s.event)}},t}(yi);A(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){ZT.prototype[n]=function(t){var e=t.zrX,i=t.zrY,r=qT(this,e,i),s,a;if((n!=="mouseup"||!r)&&(s=this.findHover(e,i),a=s.target),n==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||A2(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,t)}});function Z2(n,t,e){if(n[n.rectHover?"rectContain":"contain"](t,e)){for(var i=n,r=void 0,s=!1;i;){if(i.ignoreClip&&(s=!0),!s){var a=i.getClipPath();if(a&&!a.contain(t,e))return!1}i.silent&&(r=!0);var o=i.__hostTarget;i=o||i.parent}return r?jT:!0}return!1}function h1(n,t,e,i,r){for(var s=n.length-1;s>=0;s--){var a=n[s],o=void 0;if(a!==r&&!a.ignore&&(o=Z2(a,e,i))&&(!t.topTarget&&(t.topTarget=a),o!==jT)){t.target=a;break}}}function qT(n,t,e){var i=n.painter;return t<0||t>i.getWidth()||e<0||e>i.getHeight()}var JT=32,al=7;function q2(n){for(var t=0;n>=JT;)t|=n&1,n>>=1;return n+t}function c1(n,t,e,i){var r=t+1;if(r===e)return 1;if(i(n[r++],n[t])<0){for(;r<e&&i(n[r],n[r-1])<0;)r++;J2(n,t,r)}else for(;r<e&&i(n[r],n[r-1])>=0;)r++;return r-t}function J2(n,t,e){for(e--;t<e;){var i=n[t];n[t++]=n[e],n[e--]=i}}function f1(n,t,e,i,r){for(i===t&&i++;i<e;i++){for(var s=n[i],a=t,o=i,l;a<o;)l=a+o>>>1,r(s,n[l])<0?o=l:a=l+1;var u=i-a;switch(u){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;u>0;)n[a+u]=n[a+u-1],u--}n[a]=s}}function Sg(n,t,e,i,r,s){var a=0,o=0,l=1;if(s(n,t[e+r])>0){for(o=i-r;l<o&&s(n,t[e+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}else{for(o=r+1;l<o&&s(n,t[e+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}for(a++;a<l;){var h=a+(l-a>>>1);s(n,t[e+h])>0?a=h+1:l=h}return l}function bg(n,t,e,i,r,s){var a=0,o=0,l=1;if(s(n,t[e+r])<0){for(o=r+1;l<o&&s(n,t[e+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}else{for(o=i-r;l<o&&s(n,t[e+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}for(a++;a<l;){var h=a+(l-a>>>1);s(n,t[e+h])<0?l=h:a=h+1}return l}function Q2(n,t){var e=al,i,r,s=0,a=[];i=[],r=[];function o(d,g){i[s]=d,r[s]=g,s+=1}function l(){for(;s>1;){var d=s-2;if(d>=1&&r[d-1]<=r[d]+r[d+1]||d>=2&&r[d-2]<=r[d]+r[d-1])r[d-1]<r[d+1]&&d--;else if(r[d]>r[d+1])break;h(d)}}function u(){for(;s>1;){var d=s-2;d>0&&r[d-1]<r[d+1]&&d--,h(d)}}function h(d){var g=i[d],v=r[d],p=i[d+1],m=r[d+1];r[d]=v+m,d===s-3&&(i[d+1]=i[d+2],r[d+1]=r[d+2]),s--;var y=bg(n[p],n,g,v,0,t);g+=y,v-=y,v!==0&&(m=Sg(n[g+v-1],n,p,m,m-1,t),m!==0&&(v<=m?c(g,v,p,m):f(g,v,p,m)))}function c(d,g,v,p){var m=0;for(m=0;m<g;m++)a[m]=n[d+m];var y=0,_=v,w=d;if(n[w++]=n[_++],--p===0){for(m=0;m<g;m++)n[w+m]=a[y+m];return}if(g===1){for(m=0;m<p;m++)n[w+m]=n[_+m];n[w+p]=a[y];return}for(var S=e,x,b,T;;){x=0,b=0,T=!1;do if(t(n[_],a[y])<0){if(n[w++]=n[_++],b++,x=0,--p===0){T=!0;break}}else if(n[w++]=a[y++],x++,b=0,--g===1){T=!0;break}while((x|b)<S);if(T)break;do{if(x=bg(n[_],a,y,g,0,t),x!==0){for(m=0;m<x;m++)n[w+m]=a[y+m];if(w+=x,y+=x,g-=x,g<=1){T=!0;break}}if(n[w++]=n[_++],--p===0){T=!0;break}if(b=Sg(a[y],n,_,p,0,t),b!==0){for(m=0;m<b;m++)n[w+m]=n[_+m];if(w+=b,_+=b,p-=b,p===0){T=!0;break}}if(n[w++]=a[y++],--g===1){T=!0;break}S--}while(x>=al||b>=al);if(T)break;S<0&&(S=0),S+=2}if(e=S,e<1&&(e=1),g===1){for(m=0;m<p;m++)n[w+m]=n[_+m];n[w+p]=a[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)n[w+m]=a[y+m]}}function f(d,g,v,p){var m=0;for(m=0;m<p;m++)a[m]=n[v+m];var y=d+g-1,_=p-1,w=v+p-1,S=0,x=0;if(n[w--]=n[y--],--g===0){for(S=w-(p-1),m=0;m<p;m++)n[S+m]=a[m];return}if(p===1){for(w-=g,y-=g,x=w+1,S=y+1,m=g-1;m>=0;m--)n[x+m]=n[S+m];n[w]=a[_];return}for(var b=e;;){var T=0,C=0,I=!1;do if(t(a[_],n[y])<0){if(n[w--]=n[y--],T++,C=0,--g===0){I=!0;break}}else if(n[w--]=a[_--],C++,T=0,--p===1){I=!0;break}while((T|C)<b);if(I)break;do{if(T=g-bg(a[_],n,d,g,g-1,t),T!==0){for(w-=T,y-=T,g-=T,x=w+1,S=y+1,m=T-1;m>=0;m--)n[x+m]=n[S+m];if(g===0){I=!0;break}}if(n[w--]=a[_--],--p===1){I=!0;break}if(C=p-Sg(n[y],a,0,p,p-1,t),C!==0){for(w-=C,_-=C,p-=C,x=w+1,S=_+1,m=0;m<C;m++)n[x+m]=a[S+m];if(p<=1){I=!0;break}}if(n[w--]=n[y--],--g===0){I=!0;break}b--}while(T>=al||C>=al);if(I)break;b<0&&(b=0),b+=2}if(e=b,e<1&&(e=1),p===1){for(w-=g,y-=g,x=w+1,S=y+1,m=g-1;m>=0;m--)n[x+m]=n[S+m];n[w]=a[_]}else{if(p===0)throw new Error;for(S=w-(p-1),m=0;m<p;m++)n[S+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:o}}function Fc(n,t,e,i){e||(e=0),i||(i=n.length);var r=i-e;if(!(r<2)){var s=0;if(r<JT){s=c1(n,e,i,t),f1(n,e,i,e+s,t);return}var a=Q2(n,t),o=q2(r);do{if(s=c1(n,e,i,t),s<o){var l=r;l>o&&(l=o),f1(n,e,e+l,e+s,t),s=l}a.pushRun(e,s),a.mergeRuns(),r-=s,e+=s}while(r!==0);a.forceMergeRuns()}}var sn=1,Ll=2,ka=4,d1=!1;function Tg(){d1||(d1=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function g1(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}var tD=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=g1}return n.prototype.traverse=function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},n.prototype.getDisplayList=function(t,e){e=e||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(e),i},n.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,r=0,s=e.length;r<s;r++)this._updateAndAddDisplayable(e[r],null,t);i.length=this._displayListLen,Fc(i,g1)},n.prototype._updateAndAddDisplayable=function(t,e,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var r=t.getClipPath();if(t.ignoreClip)e=null;else if(r){e?e=e.slice():e=[];for(var s=r,a=t;s;)s.parent=a,s.updateTransform(),e.push(s),a=s,s=s.getClipPath()}if(t.childrenRef){for(var o=t.childrenRef(),l=0;l<o.length;l++){var u=o[l];t.__dirty&&(u.__dirty|=sn),this._updateAndAddDisplayable(u,e,i)}t.__dirty=0}else{var h=t;e&&e.length?h.__clipPaths=e:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(Tg(),h.z=0),isNaN(h.z2)&&(Tg(),h.z2=0),isNaN(h.zlevel)&&(Tg(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,i);var f=t.getTextGuideLine();f&&this._updateAndAddDisplayable(f,e,i);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,i)}},n.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},n.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);return}var r=bt(this._roots,t);r>=0&&this._roots.splice(r,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),lf;lf=tt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var Kl={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)))},elasticOut:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/i)+1)},elasticInOut:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),(n*=2)<1?-.5*(e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)):e*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)*.5+1)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-Kl.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?Kl.bounceIn(n*2)*.5:Kl.bounceOut(n*2-1)*.5+.5}},Mh=Math.pow,Ar=Math.sqrt,uf=1e-8,QT=1e-4,p1=Ar(3),Lh=1/3,ii=Bo(),wn=Bo(),so=Bo();function Sr(n){return n>-uf&&n<uf}function tC(n){return n>uf||n<-uf}function Ee(n,t,e,i,r){var s=1-r;return s*s*(s*n+3*r*t)+r*r*(r*i+3*s*e)}function v1(n,t,e,i,r){var s=1-r;return 3*(((t-n)*s+2*(e-t)*r)*s+(i-e)*r*r)}function eC(n,t,e,i,r,s){var a=i+3*(t-e)-n,o=3*(e-t*2+n),l=3*(t-n),u=n-r,h=o*o-3*a*l,c=o*l-9*a*u,f=l*l-3*o*u,d=0;if(Sr(h)&&Sr(c))if(Sr(o))s[0]=0;else{var g=-l/o;g>=0&&g<=1&&(s[d++]=g)}else{var v=c*c-4*h*f;if(Sr(v)){var p=c/h,g=-o/a+p,m=-p/2;g>=0&&g<=1&&(s[d++]=g),m>=0&&m<=1&&(s[d++]=m)}else if(v>0){var y=Ar(v),_=h*o+1.5*a*(-c+y),w=h*o+1.5*a*(-c-y);_<0?_=-Mh(-_,Lh):_=Mh(_,Lh),w<0?w=-Mh(-w,Lh):w=Mh(w,Lh);var g=(-o-(_+w))/(3*a);g>=0&&g<=1&&(s[d++]=g)}else{var S=(2*h*o-3*a*c)/(2*Ar(h*h*h)),x=Math.acos(S)/3,b=Ar(h),T=Math.cos(x),g=(-o-2*b*T)/(3*a),m=(-o+b*(T+p1*Math.sin(x)))/(3*a),C=(-o+b*(T-p1*Math.sin(x)))/(3*a);g>=0&&g<=1&&(s[d++]=g),m>=0&&m<=1&&(s[d++]=m),C>=0&&C<=1&&(s[d++]=C)}}return d}function nC(n,t,e,i,r){var s=6*e-12*t+6*n,a=9*t+3*i-3*n-9*e,o=3*t-3*n,l=0;if(Sr(a)){if(tC(s)){var u=-o/s;u>=0&&u<=1&&(r[l++]=u)}}else{var h=s*s-4*a*o;if(Sr(h))r[0]=-s/(2*a);else if(h>0){var c=Ar(h),u=(-s+c)/(2*a),f=(-s-c)/(2*a);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function hf(n,t,e,i,r,s){var a=(t-n)*r+n,o=(e-t)*r+t,l=(i-e)*r+e,u=(o-a)*r+a,h=(l-o)*r+o,c=(h-u)*r+u;s[0]=n,s[1]=a,s[2]=u,s[3]=c,s[4]=c,s[5]=h,s[6]=l,s[7]=i}function eD(n,t,e,i,r,s,a,o,l,u,h){var c,f=.005,d=1/0,g,v,p,m;ii[0]=l,ii[1]=u;for(var y=0;y<1;y+=.05)wn[0]=Ee(n,e,r,a,y),wn[1]=Ee(t,i,s,o,y),p=no(ii,wn),p<d&&(c=y,d=p);d=1/0;for(var _=0;_<32&&!(f<QT);_++)g=c-f,v=c+f,wn[0]=Ee(n,e,r,a,g),wn[1]=Ee(t,i,s,o,g),p=no(wn,ii),g>=0&&p<d?(c=g,d=p):(so[0]=Ee(n,e,r,a,v),so[1]=Ee(t,i,s,o,v),m=no(so,ii),v<=1&&m<d?(c=v,d=m):f*=.5);return Ar(d)}function nD(n,t,e,i,r,s,a,o,l){for(var u=n,h=t,c=0,f=1/l,d=1;d<=l;d++){var g=d*f,v=Ee(n,e,r,a,g),p=Ee(t,i,s,o,g),m=v-u,y=p-h;c+=Math.sqrt(m*m+y*y),u=v,h=p}return c}function Fe(n,t,e,i){var r=1-i;return r*(r*n+2*i*t)+i*i*e}function m1(n,t,e,i){return 2*((1-i)*(t-n)+i*(e-t))}function iD(n,t,e,i,r){var s=n-2*t+e,a=2*(t-n),o=n-i,l=0;if(Sr(s)){if(tC(a)){var u=-o/a;u>=0&&u<=1&&(r[l++]=u)}}else{var h=a*a-4*s*o;if(Sr(h)){var u=-a/(2*s);u>=0&&u<=1&&(r[l++]=u)}else if(h>0){var c=Ar(h),u=(-a+c)/(2*s),f=(-a-c)/(2*s);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function iC(n,t,e){var i=n+e-2*t;return i===0?.5:(n-t)/i}function cf(n,t,e,i,r){var s=(t-n)*i+n,a=(e-t)*i+t,o=(a-s)*i+s;r[0]=n,r[1]=s,r[2]=o,r[3]=o,r[4]=a,r[5]=e}function rD(n,t,e,i,r,s,a,o,l){var u,h=.005,c=1/0;ii[0]=a,ii[1]=o;for(var f=0;f<1;f+=.05){wn[0]=Fe(n,e,r,f),wn[1]=Fe(t,i,s,f);var d=no(ii,wn);d<c&&(u=f,c=d)}c=1/0;for(var g=0;g<32&&!(h<QT);g++){var v=u-h,p=u+h;wn[0]=Fe(n,e,r,v),wn[1]=Fe(t,i,s,v);var d=no(wn,ii);if(v>=0&&d<c)u=v,c=d;else{so[0]=Fe(n,e,r,p),so[1]=Fe(t,i,s,p);var m=no(so,ii);p<=1&&m<c?(u=p,c=m):h*=.5}}return Ar(c)}function sD(n,t,e,i,r,s,a){for(var o=n,l=t,u=0,h=1/a,c=1;c<=a;c++){var f=c*h,d=Fe(n,e,r,f),g=Fe(t,i,s,f),v=d-o,p=g-l;u+=Math.sqrt(v*v+p*p),o=d,l=g}return u}var aD=/cubic-bezier\(([0-9,\.e ]+)\)/;function rC(n){var t=n&&aD.exec(n);if(t){var e=t[1].split(","),i=+ai(e[0]),r=+ai(e[1]),s=+ai(e[2]),a=+ai(e[3]);if(isNaN(i+r+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:eC(0,i,s,1,l,o)&&Ee(0,r,a,1,o[0])}}}var oD=function(){function n(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Ue,this.ondestroy=t.ondestroy||Ue,this.onrestart=t.onrestart||Ue,t.easing&&this.setEasing(t.easing)}return n.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var i=this._life,r=t-this._startTime-this._pausedTime,s=r/i;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=r%i;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(t){this.easing=t,this.easingFunc=lt(t)?t:Kl[t]||rC(t)},n}(),sC=function(){function n(t){this.value=t}return n}(),lD=function(){function n(){this._len=0}return n.prototype.insert=function(t){var e=new sC(t);return this.insertEntry(e),e},n.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.prototype.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),nh=function(){function n(t){this._list=new lD,this._maxSize=10,this._map={},this._maxSize=t}return n.prototype.put=function(t,e){var i=this._list,r=this._map,s=null;if(r[t]==null){var a=i.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete r[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=e:o=new sC(e),o.key=t,i.insertEntry(o),r[t]=o}return s},n.prototype.get=function(t){var e=this._map[t],i=this._list;if(e!=null)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),y1={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jl(n){return n=Math.round(n),n<0?0:n>255?255:n}function _1(n){return n<0?0:n>1?1:n}function Cg(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?jl(parseFloat(t)/100*255):jl(parseInt(t,10))}function Zl(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?_1(parseFloat(t)/100):_1(parseFloat(t))}function Eg(n,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?n+(t-n)*e*6:e*2<1?t:e*3<2?n+(t-n)*(2/3-e)*6:n}function pn(n,t,e,i,r){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function Cv(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}var aC=new nh(20),Dh=null;function la(n,t){Dh&&Cv(Dh,t),Dh=aC.put(n,Dh||t.slice())}function Ds(n,t){if(n){t=t||[];var e=aC.get(n);if(e)return Cv(t,e);n=n+"";var i=n.replace(/ /g,"").toLowerCase();if(i in y1)return Cv(t,y1[i]),la(n,t),t;var r=i.length;if(i.charAt(0)==="#"){if(r===4||r===5){var s=parseInt(i.slice(1,4),16);if(!(s>=0&&s<=4095)){pn(t,0,0,0,1);return}return pn(t,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,r===5?parseInt(i.slice(4),16)/15:1),la(n,t),t}else if(r===7||r===9){var s=parseInt(i.slice(1,7),16);if(!(s>=0&&s<=16777215)){pn(t,0,0,0,1);return}return pn(t,(s&16711680)>>16,(s&65280)>>8,s&255,r===9?parseInt(i.slice(7),16)/255:1),la(n,t),t}return}var a=i.indexOf("("),o=i.indexOf(")");if(a!==-1&&o+1===r){var l=i.substr(0,a),u=i.substr(a+1,o-(a+1)).split(","),h=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?pn(t,+u[0],+u[1],+u[2],1):pn(t,0,0,0,1);h=Zl(u.pop());case"rgb":if(u.length>=3)return pn(t,Cg(u[0]),Cg(u[1]),Cg(u[2]),u.length===3?h:Zl(u[3])),la(n,t),t;pn(t,0,0,0,1);return;case"hsla":if(u.length!==4){pn(t,0,0,0,1);return}return u[3]=Zl(u[3]),w1(u,t),la(n,t),t;case"hsl":if(u.length!==3){pn(t,0,0,0,1);return}return w1(u,t),la(n,t),t;default:return}}pn(t,0,0,0,1)}}function w1(n,t){var e=(parseFloat(n[0])%360+360)%360/360,i=Zl(n[1]),r=Zl(n[2]),s=r<=.5?r*(i+1):r+i-r*i,a=r*2-s;return t=t||[],pn(t,jl(Eg(a,s,e+1/3)*255),jl(Eg(a,s,e)*255),jl(Eg(a,s,e-1/3)*255),1),n.length===4&&(t[3]=n[3]),t}function x1(n,t){var e=Ds(n);if(e){for(var i=0;i<3;i++)e[i]=e[i]*(1-t)|0,e[i]>255?e[i]=255:e[i]<0&&(e[i]=0);return _y(e,e.length===4?"rgba":"rgb")}}function _y(n,t){if(!(!n||!n.length)){var e=n[0]+","+n[1]+","+n[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(e+=","+n[3]),t+"("+e+")"}}function ff(n,t){var e=Ds(n);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var S1=new nh(100);function b1(n){if(U(n)){var t=S1.get(n);return t||(t=x1(n,-.1),S1.put(n,t)),t}else if(ad(n)){var e=G({},n);return e.colorStops=j(n.colorStops,function(i){return{offset:i.offset,color:x1(i.color,-.1)}}),e}return n}function uD(n){return n.type==="linear"}function hD(n){return n.type==="radial"}(function(){return tt.hasGlobalWindow&&lt(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var Ev=Array.prototype.slice;function Li(n,t,e){return(t-n)*e+n}function Ig(n,t,e,i){for(var r=t.length,s=0;s<r;s++)n[s]=Li(t[s],e[s],i);return n}function cD(n,t,e,i){for(var r=t.length,s=r&&t[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=Li(t[a][o],e[a][o],i)}return n}function kh(n,t,e,i){for(var r=t.length,s=0;s<r;s++)n[s]=t[s]+e[s]*i;return n}function T1(n,t,e,i){for(var r=t.length,s=r&&t[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=t[a][o]+e[a][o]*i}return n}function fD(n,t){for(var e=n.length,i=t.length,r=e>i?t:n,s=Math.min(e,i),a=r[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(e,i);o++)r.push({offset:a.offset,color:a.color.slice()})}function dD(n,t,e){var i=n,r=t;if(!(!i.push||!r.push)){var s=i.length,a=r.length;if(s!==a){var o=s>a;if(o)i.length=a;else for(var l=s;l<a;l++)i.push(e===1?r[l]:Ev.call(r[l]))}for(var u=i[0]&&i[0].length,l=0;l<i.length;l++)if(e===1)isNaN(i[l])&&(i[l]=r[l]);else for(var h=0;h<u;h++)isNaN(i[l][h])&&(i[l][h]=r[l][h])}}function Bc(n){if(Xe(n)){var t=n.length;if(Xe(n[0])){for(var e=[],i=0;i<t;i++)e.push(Ev.call(n[i]));return e}return Ev.call(n)}return n}function Gc(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function gD(n){return Xe(n&&n[0])?2:1}var Ph=0,zc=1,oC=2,Dl=3,Iv=4,Av=5,C1=6;function E1(n){return n===Iv||n===Av}function Oh(n){return n===zc||n===oC}var ol=[0,0,0,0],pD=function(){function n(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(t,e,i){this._needsSort=!0;var r=this.keyframes,s=r.length,a=!1,o=C1,l=e;if(Xe(e)){var u=gD(e);o=u,(u===1&&!$t(e[0])||u===2&&!$t(e[0][0]))&&(a=!0)}else if($t(e)&&!of(e))o=Ph;else if(U(e))if(!isNaN(+e))o=Ph;else{var h=Ds(e);h&&(l=h,o=Dl)}else if(ad(e)){var c=G({},l);c.colorStops=j(e.colorStops,function(d){return{offset:d.offset,color:Ds(d.color)}}),uD(e)?o=Iv:hD(e)&&(o=Av),l=c}s===0?this.valType=o:(o!==this.valType||o===C1)&&(a=!0),this.discrete=this.discrete||a;var f={time:t,value:l,rawValue:e,percent:0};return i&&(f.easing=i,f.easingFunc=lt(i)?i:Kl[i]||rC(i)),r.push(f),f},n.prototype.prepare=function(t,e){var i=this.keyframes;this._needsSort&&i.sort(function(v,p){return v.time-p.time});for(var r=this.valType,s=i.length,a=i[s-1],o=this.discrete,l=Oh(r),u=E1(r),h=0;h<s;h++){var c=i[h],f=c.value,d=a.value;c.percent=c.time/t,o||(l&&h!==s-1?dD(f,d,r):u&&fD(f.colorStops,d.colorStops))}if(!o&&r!==Av&&e&&this.needsAnimate()&&e.needsAnimate()&&r===e.valType&&!e._finished){this._additiveTrack=e;for(var g=i[0].value,h=0;h<s;h++)r===Ph?i[h].additiveValue=i[h].value-g:r===Dl?i[h].additiveValue=kh([],i[h].value,g,-1):Oh(r)&&(i[h].additiveValue=r===zc?kh([],i[h].value,g,-1):T1([],i[h].value,g,-1))}},n.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,r=i?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,u=s===Dl,h,c=this._lastFr,f=Math.min,d,g;if(o===1)d=g=a[0];else{if(e<0)h=0;else if(e<this._lastFrP){var v=f(c+1,o-1);for(h=v;h>=0&&!(a[h].percent<=e);h--);h=f(h,o-2)}else{for(h=c;h<o&&!(a[h].percent>e);h++);h=f(h-1,o-2)}g=a[h+1],d=a[h]}if(d&&g){this._lastFr=h,this._lastFrP=e;var p=g.percent-d.percent,m=p===0?1:f((e-d.percent)/p,1);g.easingFunc&&(m=g.easingFunc(m));var y=i?this._additiveValue:u?ol:t[l];if((Oh(s)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:g.rawValue;else if(Oh(s))s===zc?Ig(y,d[r],g[r],m):cD(y,d[r],g[r],m);else if(E1(s)){var _=d[r],w=g[r],S=s===Iv;t[l]={type:S?"linear":"radial",x:Li(_.x,w.x,m),y:Li(_.y,w.y,m),colorStops:j(_.colorStops,function(b,T){var C=w.colorStops[T];return{offset:Li(b.offset,C.offset,m),color:Gc(Ig([],b.color,C.color,m))}}),global:w.global},S?(t[l].x2=Li(_.x2,w.x2,m),t[l].y2=Li(_.y2,w.y2,m)):t[l].r=Li(_.r,w.r,m)}else if(u)Ig(y,d[r],g[r],m),i||(t[l]=Gc(y));else{var x=Li(d[r],g[r],m);i?this._additiveValue=x:t[l]=x}i&&this._addToTarget(t)}}},n.prototype._addToTarget=function(t){var e=this.valType,i=this.propName,r=this._additiveValue;e===Ph?t[i]=t[i]+r:e===Dl?(Ds(t[i],ol),kh(ol,ol,r,1),t[i]=Gc(ol)):e===zc?kh(t[i],t[i],r,1):e===oC&&T1(t[i],t[i],r,1)},n}(),wy=function(){function n(t,e,i,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&r){fy("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=i}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(t){this._target=t},n.prototype.when=function(t,e,i){return this.whenWithKeys(t,e,zt(e),i)},n.prototype.whenWithKeys=function(t,e,i,r){for(var s=this._tracks,a=0;a<i.length;a++){var o=i[a],l=s[o];if(!l){l=s[o]=new pD(o);var u=void 0,h=this._getAdditiveTrack(o);if(h){var c=h.keyframes,f=c[c.length-1];u=f&&f.value,h.valType===Dl&&u&&(u=Gc(u))}else u=this._target[o];if(u==null)continue;t>0&&l.addKeyframe(0,Bc(u),r),this._trackKeys.push(o)}l.addKeyframe(t,Bc(e[o]),r)}return this._maxTime=Math.max(this._maxTime,t),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,i=0;i<e;i++)t[i].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var i=0;i<e.length;i++)e[i].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,i=0;i<e.length;i++)t[e[i]].setFinished()},n.prototype._getAdditiveTrack=function(t){var e,i=this._additiveAnimators;if(i)for(var r=0;r<i.length;r++){var s=i[r].getTrack(t);s&&(e=s)}return e},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,i=[],r=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),u=o.keyframes,h=u.length;if(o.prepare(r,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var c=u[h-1];c&&(e._target[o.propName]=c.rawValue),o.setFinished()}else i.push(o)}if(i.length||this._force){var f=new oD({life:r,loop:this._loop,delay:this._delay||0,onframe:function(d){e._started=2;var g=e._additiveAnimators;if(g){for(var v=!1,p=0;p<g.length;p++)if(g[p]._clip){v=!0;break}v||(e._additiveAnimators=null)}for(var p=0;p<i.length;p++)i[p].step(e._target,d);var m=e._onframeCbs;if(m)for(var p=0;p<m.length;p++)m[p](e._target,d)},ondestroy:function(){e._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),t&&f.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return j(this._trackKeys,function(e){return t._tracks[e]})},n.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var i=this._tracks,r=this._trackKeys,s=0;s<t.length;s++){var a=i[t[s]];a&&!a.isFinished()&&(e?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<r.length;s++)if(!i[r[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(t,e,i){if(t){e=e||this._trackKeys;for(var r=0;r<e.length;r++){var s=e[r],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[i?0:o.length-1];l&&(t[s]=Bc(l.rawValue))}}}},n.prototype.__changeFinalValue=function(t,e){e=e||zt(t);for(var i=0;i<e.length;i++){var r=e[i],s=this._tracks[r];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,t[r]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();function Wa(){return new Date().getTime()}var vD=function(n){At(t,n);function t(e){var i=n.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,e=e||{},i.stage=e.stage||{},i}return t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var i=e.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(e){if(e.animation){var i=e.prev,r=e.next;i?i.next=r:this._head=r,r?r.prev=i:this._tail=i,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var i=e.getClip();i&&this.removeClip(i),e.animation=null},t.prototype.update=function(e){for(var i=Wa()-this._pausedTime,r=i-this._time,s=this._head;s;){var a=s.next,o=s.step(i,r);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=i,e||(this.trigger("frame",r),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;function i(){e._running&&(lf(i),!e._paused&&e.update())}lf(i)},t.prototype.start=function(){this._running||(this._time=Wa(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Wa(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Wa()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var i=e.next;e.prev=e.next=e.animation=null,e=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(e,i){i=i||{},this.start();var r=new wy(e,i.loop);return this.addAnimator(r),r},t}(yi),mD=300,Ag=tt.domSupported,Rg=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=j(n,function(r){var s=r.replace("mouse","pointer");return e.hasOwnProperty(s)?s:r});return{mouse:n,touch:t,pointer:i}}(),I1={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},A1=!1;function Rv(n){var t=n.pointerType;return t==="pen"||t==="touch"}function yD(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function Mg(n){n&&(n.zrByTouch=!0)}function _D(n,t){return vn(n.dom,new wD(n,t),!0)}function lC(n,t){for(var e=t,i=!1;e&&e.nodeType!==9&&!(i=e.domBelongToZr||e!==t&&e===n.painterRoot);)e=e.parentNode;return i}var wD=function(){function n(t,e){this.stopPropagation=Ue,this.stopImmediatePropagation=Ue,this.preventDefault=Ue,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return n}(),Bn={mousedown:function(n){n=vn(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=vn(this.dom,n);var t=this.__mayPointerCapture;t&&(n.zrX!==t[0]||n.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=vn(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=vn(this.dom,n);var t=n.toElement||n.relatedTarget;lC(this,t)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){A1=!0,n=vn(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){A1||(n=vn(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=vn(this.dom,n),Mg(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Bn.mousemove.call(this,n),Bn.mousedown.call(this,n)},touchmove:function(n){n=vn(this.dom,n),Mg(n),this.handler.processGesture(n,"change"),Bn.mousemove.call(this,n)},touchend:function(n){n=vn(this.dom,n),Mg(n),this.handler.processGesture(n,"end"),Bn.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<mD&&Bn.click.call(this,n)},pointerdown:function(n){Bn.mousedown.call(this,n)},pointermove:function(n){Rv(n)||Bn.mousemove.call(this,n)},pointerup:function(n){Bn.mouseup.call(this,n)},pointerout:function(n){Rv(n)||Bn.mouseout.call(this,n)}};A(["click","dblclick","contextmenu"],function(n){Bn[n]=function(t){t=vn(this.dom,t),this.trigger(n,t)}});var Mv={pointermove:function(n){Rv(n)||Mv.mousemove.call(this,n)},pointerup:function(n){Mv.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function xD(n,t){var e=t.domHandlers;tt.pointerEventsSupported?A(Rg.pointer,function(i){Vc(t,i,function(r){e[i].call(n,r)})}):(tt.touchEventsSupported&&A(Rg.touch,function(i){Vc(t,i,function(r){e[i].call(n,r),yD(t)})}),A(Rg.mouse,function(i){Vc(t,i,function(r){r=py(r),t.touching||e[i].call(n,r)})}))}function SD(n,t){tt.pointerEventsSupported?A(I1.pointer,e):tt.touchEventsSupported||A(I1.mouse,e);function e(i){function r(s){s=py(s),lC(n,s.target)||(s=_D(n,s),t.domHandlers[i].call(n,s))}Vc(t,i,r,{capture:!0})}}function Vc(n,t,e,i){n.mounted[t]=e,n.listenerOpts[t]=i,z2(n.domTarget,t,e,i)}function Lg(n){var t=n.mounted;for(var e in t)t.hasOwnProperty(e)&&V2(n.domTarget,e,t[e],n.listenerOpts[e]);n.mounted={}}var R1=function(){function n(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return n}(),bD=function(n){At(t,n);function t(e,i){var r=n.call(this)||this;return r.__pointerCapturing=!1,r.dom=e,r.painterRoot=i,r._localHandlerScope=new R1(e,Bn),Ag&&(r._globalHandlerScope=new R1(document,Mv)),xD(r,r._localHandlerScope),r}return t.prototype.dispose=function(){Lg(this._localHandlerScope),Ag&&Lg(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,Ag&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var i=this._globalHandlerScope;e?SD(this,i):Lg(i)}},t}(yi),uC=1;tt.hasGlobalWindow&&(uC=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var df=uC,Lv=.4,Dv="#333",kv="#ccc",TD="#eee",M1=vy,L1=5e-5;function qr(n){return n>L1||n<-L1}var Jr=[],ua=[],Dg=io(),kg=Math.abs,xy=function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return qr(this.rotation)||qr(this.x)||qr(this.y)||qr(this.scaleX-1)||qr(this.scaleY-1)||qr(this.skewX)||qr(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),i=this.transform;if(!(e||t)){i&&(M1(i),this.invTransform=null);return}i=i||io(),e?this.getLocalTransform(i):M1(i),t&&(e?ro(i,t,i):$2(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},n.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(Jr);var i=Jr[0]<0?-1:1,r=Jr[1]<0?-1:1,s=((Jr[0]-i)*e+i)/Jr[0]||0,a=((Jr[1]-r)*e+r)/Jr[1]||0;t[0]*=s,t[1]*=s,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||io(),yy(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],r=Math.atan2(t[1],t[0]),s=Math.PI/2+r-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(s),e=Math.sqrt(e),this.skewX=s,this.skewY=0,this.rotation=-r,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=i,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||io(),ro(ua,t.invTransform,e),e=ua);var i=this.originX,r=this.originY;(i||r)&&(Dg[4]=i,Dg[5]=r,ro(ua,e,Dg),ua[4]-=i,ua[5]-=r,e=ua),this.setLocalTransform(e)}},n.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,e){var i=[t,e],r=this.invTransform;return r&&An(i,i,r),i},n.prototype.transformCoordToGlobal=function(t,e){var i=[t,e],r=this.transform;return r&&An(i,i,r),i},n.prototype.getLineScale=function(){var t=this.transform;return t&&kg(t[0]-1)>1e-10&&kg(t[3]-1)>1e-10?Math.sqrt(kg(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){CD(this,t)},n.getLocalTransform=function(t,e){e=e||[];var i=t.originX||0,r=t.originY||0,s=t.scaleX,a=t.scaleY,o=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,f=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(i||r||o||l){var g=i+o,v=r+l;e[4]=-g*s-f*v*a,e[5]=-v*a-d*g*s}else e[4]=e[5]=0;return e[0]=s,e[3]=a,e[1]=d*s,e[2]=f*a,u&&my(e,e,u),e[4]+=i+h,e[5]+=r+c,e},n.initDefaultProps=function(){var t=n.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),n}(),yu=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function CD(n,t){for(var e=0;e<yu.length;e++){var i=yu[e];n[i]=t[i]}}var D1={};function an(n,t){t=t||Fs;var e=D1[t];e||(e=D1[t]=new nh(500));var i=e.get(n);return i==null&&(i=No.measureText(n,t).width,e.put(n,i)),i}function k1(n,t,e,i){var r=an(n,t),s=by(t),a=kl(0,r,e),o=Pa(0,s,i),l=new Tt(a,o,r,s);return l}function Sy(n,t,e,i){var r=((n||"")+"").split(`
`),s=r.length;if(s===1)return k1(r[0],t,e,i);for(var a=new Tt(0,0,0,0),o=0;o<r.length;o++){var l=k1(r[o],t,e,i);o===0?a.copy(l):a.union(l)}return a}function kl(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Pa(n,t,e){return e==="middle"?n-=t/2:e==="bottom"&&(n-=t),n}function by(n){return an("",n)}function Nr(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function gf(n,t,e){var i=t.position||"inside",r=t.distance!=null?t.distance:5,s=e.height,a=e.width,o=s/2,l=e.x,u=e.y,h="left",c="top";if(i instanceof Array)l+=Nr(i[0],e.width),u+=Nr(i[1],e.height),h=null,c=null;else switch(i){case"left":l-=r,u+=o,h="right",c="middle";break;case"right":l+=r+a,u+=o,c="middle";break;case"top":l+=a/2,u-=r,h="center",c="bottom";break;case"bottom":l+=a/2,u+=s+r,h="center";break;case"inside":l+=a/2,u+=o,h="center",c="middle";break;case"insideLeft":l+=r,u+=o,c="middle";break;case"insideRight":l+=a-r,u+=o,h="right",c="middle";break;case"insideTop":l+=a/2,u+=r,h="center";break;case"insideBottom":l+=a/2,u+=s-r,h="center",c="bottom";break;case"insideTopLeft":l+=r,u+=r;break;case"insideTopRight":l+=a-r,u+=r,h="right";break;case"insideBottomLeft":l+=r,u+=s-r,c="bottom";break;case"insideBottomRight":l+=a-r,u+=s-r,h="right",c="bottom";break}return n=n||{},n.x=l,n.y=u,n.align=h,n.verticalAlign=c,n}var Pg="__zr_normal__",Og=yu.concat(["ignore"]),ED=Fo(yu,function(n,t){return n[t]=!0,n},{ignore:!1}),ha={},ID=new Tt(0,0,0,0),ld=function(){function n(t){this.id=VT(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,e,i){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=t,r[5]+=e,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,r=i.local,s=e.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=r?this:null;var u=!1;if(s.copyTransform(e),i.position!=null){var h=ID;i.layoutRect?h.copy(i.layoutRect):h.copy(this.getBoundingRect()),r||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(ha,i,h):gf(ha,i,h),s.x=ha.x,s.y=ha.y,a=ha.align,o=ha.verticalAlign;var c=i.origin;if(c&&i.rotation!=null){var f=void 0,d=void 0;c==="center"?(f=h.width*.5,d=h.height*.5):(f=Nr(c[0],h.width),d=Nr(c[1],h.height)),u=!0,s.originX=-s.x+f+(r?0:h.x),s.originY=-s.y+d+(r?0:h.y)}}i.rotation!=null&&(s.rotation=i.rotation);var g=i.offset;g&&(s.x+=g[0],s.y+=g[1],u||(s.originX=-g[0],s.originY=-g[1]));var v=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,p=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;v&&this.canBeInsideText()?(m=i.insideFill,y=i.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=i.outsideFill,y=i.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==p.fill||y!==p.stroke||_!==p.autoStroke||a!==p.align||o!==p.verticalAlign)&&(l=!0,p.fill=m,p.stroke=y,p.autoStroke=_,p.align=a,p.verticalAlign=o,e.setDefaultTextStyle(p)),e.__dirty|=sn,l&&e.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?kv:Dv},n.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),i=typeof e=="string"&&Ds(e);i||(i=[255,255,255,1]);for(var r=i[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*r+(s?0:255)*(1-r);return i[3]=1,_y(i,"rgba")},n.prototype.traverse=function(t,e){},n.prototype.attrKV=function(t,e){t==="textConfig"?this.setTextConfig(e):t==="textContent"?this.setTextContent(e):t==="clipPath"?this.setClipPath(e):t==="extra"?(this.extra=this.extra||{},G(this.extra,e)):this[t]=e},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,e){if(typeof t=="string")this.attrKV(t,e);else if(Z(t))for(var i=t,r=zt(i),s=0;s<r.length;s++){var a=r[s];this.attrKV(a,t[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,i=0;i<this.animators.length;i++){var r=this.animators[i],s=r.__fromStateTransition;if(!(r.getLoop()||s&&s!==Pg)){var a=r.targetName,o=a?e[a]:e;r.saveTo(o)}}},n.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,Og)},n.prototype._savePrimaryToNormal=function(t,e,i){for(var r=0;r<i.length;r++){var s=i[r];t[s]!=null&&!(s in e)&&(e[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},n.prototype.clearStates=function(t){this.useState(Pg,!1,t)},n.prototype.useState=function(t,e,i,r){var s=t===Pg,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!(bt(o,t)>=0&&(e||o.length===1))){var u;if(this.stateProxy&&!s&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!s){fy("State "+t+" not exists.");return}s||this.saveCurrentToNormalState(u);var h=!!(u&&u.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,e,!i&&!this.__inHover&&l&&l.duration>0,l);var c=this._textContent,f=this._textGuide;return c&&c.useState(t,e,i,h),f&&f.useState(t,e,i,h),s?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~sn),u}}},n.prototype.useStates=function(t,e,i){if(!t.length)this.clearStates();else{var r=[],s=this.currentStates,a=t.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(t[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var u=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(u,t)),h||(h=this.states[u]),h&&r.push(h)}var c=r[a-1],f=!!(c&&c.hoverLayer||i);f&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(r),g=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&g&&g.duration>0,g);var v=this._textContent,p=this._textGuide;v&&v.useStates(t,e,f),p&&p.useStates(t,e,f),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~sn)}},n.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},n.prototype.removeState=function(t){var e=bt(this.currentStates,t);if(e>=0){var i=this.currentStates.slice();i.splice(e,1),this.useStates(i)}},n.prototype.replaceState=function(t,e,i){var r=this.currentStates.slice(),s=bt(r,t),a=bt(r,e)>=0;s>=0?a?r.splice(s,1):r[s]=e:i&&!a&&r.push(e),this.useStates(r)},n.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var e={},i,r=0;r<t.length;r++){var s=t[r];G(e,s),s.textConfig&&(i=i||{},G(i,s.textConfig))}return i&&(e.textConfig=i),e},n.prototype._applyStateObj=function(t,e,i,r,s,a){var o=!(e&&r);e&&e.textConfig?(this.textConfig=G({},r?this.textConfig:i.textConfig),G(this.textConfig,e.textConfig)):o&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},u=!1,h=0;h<Og.length;h++){var c=Og[h],f=s&&ED[c];e&&e[c]!=null?f?(u=!0,l[c]=e[c]):this[c]=e[c]:o&&i[c]!=null&&(f?(u=!0,l[c]=i[c]):this[c]=i[c])}if(!s)for(var h=0;h<this.animators.length;h++){var d=this.animators[h],g=d.targetName;d.getLoop()||d.__changeFinalValue(g?(e||i)[g]:e||i)}u&&this._transitionState(t,l,a)},n.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new xy,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),G(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=sn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,i=this._textGuide;e&&(e.__inHover=t),i&&(i.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,e,i){var r=t?this[t]:this,s=new wy(r,e,i);return t&&(s.targetName=t),this.addAnimator(s,t),s},n.prototype.addAnimator=function(t,e){var i=this.__zr,r=this;t.during(function(){r.updateDuringAnimation(e)}).done(function(){var s=r.animators,a=bt(s,t);a>=0&&s.splice(a,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,e){for(var i=this.animators,r=i.length,s=[],a=0;a<r;a++){var o=i[a];!t||t===o.scope?o.stop(e):s.push(o)}return this.animators=s,this},n.prototype.animateTo=function(t,e,i){Ng(this,t,e,i)},n.prototype.animateFrom=function(t,e,i){Ng(this,t,e,i,!0)},n.prototype._transitionState=function(t,e,i,r){for(var s=Ng(this,e,i,r),a=0;a<s.length;a++)s[a].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var t=n.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=sn;function e(i,r,s,a){Object.defineProperty(t,i,{get:function(){if(!this[r]){var l=this[r]=[];o(this,l)}return this[r]},set:function(l){this[s]=l[0],this[a]=l[1],this[r]=l,o(this,l)}});function o(l,u){Object.defineProperty(u,0,{get:function(){return l[s]},set:function(h){l[s]=h}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(h){l[a]=h}})}}Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))}(),n}();Xn(ld,yi);Xn(ld,xy);function Ng(n,t,e,i,r){e=e||{};var s=[];hC(n,"",n,t,e,i,s,r);var a=s.length,o=!1,l=e.done,u=e.aborted,h=function(){o=!0,a--,a<=0&&(o?l&&l():u&&u())},c=function(){a--,a<=0&&(o?l&&l():u&&u())};a||l&&l(),s.length>0&&e.during&&s[0].during(function(g,v){e.during(v)});for(var f=0;f<s.length;f++){var d=s[f];h&&d.done(h),c&&d.aborted(c),e.force&&d.duration(e.duration),d.start(e.easing)}return s}function Fg(n,t,e){for(var i=0;i<e;i++)n[i]=t[i]}function AD(n){return Xe(n[0])}function RD(n,t,e){if(Xe(t[e]))if(Xe(n[e])||(n[e]=[]),Ke(t[e])){var i=t[e].length;n[e].length!==i&&(n[e]=new t[e].constructor(i),Fg(n[e],t[e],i))}else{var r=t[e],s=n[e],a=r.length;if(AD(r))for(var o=r[0].length,l=0;l<a;l++)s[l]?Fg(s[l],r[l],o):s[l]=Array.prototype.slice.call(r[l]);else Fg(s,r,a);s.length=r.length}else n[e]=t[e]}function MD(n,t){return n===t||Xe(n)&&Xe(t)&&LD(n,t)}function LD(n,t){var e=n.length;if(e!==t.length)return!1;for(var i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function hC(n,t,e,i,r,s,a,o){for(var l=zt(i),u=r.duration,h=r.delay,c=r.additive,f=r.setToFinal,d=!Z(s),g=n.animators,v=[],p=0;p<l.length;p++){var m=l[p],y=i[m];if(y!=null&&e[m]!=null&&(d||s[m]))if(Z(y)&&!Xe(y)&&!ad(y)){if(t){o||(e[m]=y,n.updateDuringAnimation(t));continue}hC(n,m,e[m],y,r,s&&s[m],a,o)}else v.push(m);else o||(e[m]=y,n.updateDuringAnimation(t),v.push(m))}var _=v.length;if(!c&&_)for(var w=0;w<g.length;w++){var S=g[w];if(S.targetName===t){var x=S.stopTracks(v);if(x){var b=bt(g,S);g.splice(b,1)}}}if(r.force||(v=xe(v,function(E){return!MD(i[E],e[E])}),_=v.length),_>0||r.force&&!a.length){var T=void 0,C=void 0,I=void 0;if(o){C={},f&&(T={});for(var w=0;w<_;w++){var m=v[w];C[m]=e[m],f?T[m]=i[m]:e[m]=i[m]}}else if(f){I={};for(var w=0;w<_;w++){var m=v[w];I[m]=Bc(e[m]),RD(e,i,m)}}var S=new wy(e,!1,!1,c?xe(g,function(R){return R.targetName===t}):null);S.targetName=t,r.scope&&(S.scope=r.scope),f&&T&&S.whenWithKeys(0,T,v),I&&S.whenWithKeys(0,I,v),S.whenWithKeys(u??500,o?C:i,v).delay(h||0),n.addAnimator(S,t),a.push(S)}}var Le=function(n){At(t,n);function t(e){var i=n.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(e),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var i=this._children,r=0;r<i.length;r++)if(i[r].name===e)return i[r]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,i){if(e&&e!==this&&e.parent!==this&&i&&i.parent===this){var r=this._children,s=r.indexOf(i);s>=0&&(r.splice(s,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,i){var r=bt(this._children,e);return r>=0&&this.replaceAt(i,r),this},t.prototype.replaceAt=function(e,i){var r=this._children,s=r[i];if(e&&e!==this&&e.parent!==this&&e!==s){r[i]=e,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var i=this.__zr;i&&i!==e.__zr&&e.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(e){var i=this.__zr,r=this._children,s=bt(r,e);return s<0?this:(r.splice(s,1),e.parent=null,i&&e.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,i=this.__zr,r=0;r<e.length;r++){var s=e[r];i&&s.removeSelfFromZr(i),s.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,i){for(var r=this._children,s=0;s<r.length;s++){var a=r[s];e.call(i,a,s)}return this},t.prototype.traverse=function(e,i){for(var r=0;r<this._children.length;r++){var s=this._children[r],a=e.call(i,s);s.isGroup&&!a&&s.traverse(e,i)}return this},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.removeSelfFromZr(e)}},t.prototype.getBoundingRect=function(e){for(var i=new Tt(0,0,0,0),r=e||this._children,s=[],a=null,o=0;o<r.length;o++){var l=r[o];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),h=l.getLocalTransform(s);h?(Tt.applyTransform(i,u,h),a=a||i.clone(),a.union(i)):(a=a||u.clone(),a.union(u))}}return a||i},t}(ld);Le.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Wc={},cC={};function DD(n){delete cC[n]}function kD(n){if(!n)return!1;if(typeof n=="string")return ff(n,1)<Lv;if(n.colorStops){for(var t=n.colorStops,e=0,i=t.length,r=0;r<i;r++)e+=ff(t[r].color,1);return e/=i,e<Lv}return!1}var PD=function(){function n(t,e,i){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=e,this.id=t;var s=new tD,a=i.renderer||"canvas";Wc[a]||(a=zt(Wc)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var o=new Wc[a](e,s,i,t),l=i.ssr||o.ssrOnly;this.storage=s,this.painter=o;var u=!tt.node&&!tt.worker&&!l?new bD(o.getViewportRoot(),o.root):null,h=i.useCoarsePointer,c=h==null||h==="auto"?tt.touchEventsSupported:!!h,f=44,d;c&&(d=st(i.pointerSize,f)),this.handler=new ZT(s,o,u,o.root,d),this.animation=new vD({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},n.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=kD(t))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(t){var e,i=Wa();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var r=Wa();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},n.prototype.on=function(t,e,i){return this._disposed||this.handler.on(t,e,i),this},n.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},n.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},n.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Le&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,DD(this.id))},n}();function P1(n,t){var e=new PD(VT(),n,t);return cC[e.id]=e,e}function OD(n,t){Wc[n]=t}var O1=1e-4,fC=20;function ND(n){return n.replace(/^\s+|\s+$/g,"")}function N1(n,t,e,i){var r=t[0],s=t[1],a=e[0],o=e[1],l=s-r,u=o-a;if(l===0)return u===0?a:(a+o)/2;if(i)if(l>0){if(n<=r)return a;if(n>=s)return o}else{if(n>=r)return a;if(n<=s)return o}else{if(n===r)return a;if(n===s)return o}return(n-r)/l*u+a}function ce(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return U(n)?ND(n).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):n==null?NaN:+n}function ae(n,t,e){return t==null&&(t=10),t=Math.min(Math.max(0,t),fC),n=(+n).toFixed(t),e?n:+n}function mo(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(n*t)/t===n)return e}return FD(n)}function FD(n){var t=n.toString().toLowerCase(),e=t.indexOf("e"),i=e>0?+t.slice(e+1):0,r=e>0?e:t.length,s=t.indexOf("."),a=s<0?0:r-1-s;return Math.max(0,a-i)}function BD(n,t){var e=Math.log,i=Math.LN10,r=Math.floor(e(n[1]-n[0])/i),s=Math.round(e(Math.abs(t[1]-t[0]))/i),a=Math.min(Math.max(-r+s,0),20);return isFinite(a)?a:20}function GD(n,t){var e=Math.max(mo(n),mo(t)),i=n+t;return e>fC?i:ae(i,e)}function dC(n){var t=Math.PI*2;return(n%t+t)%t}function pf(n){return n>-O1&&n<O1}var zD=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Xi(n){if(n instanceof Date)return n;if(U(n)){var t=zD.exec(n);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function VD(n){return Math.pow(10,Ty(n))}function Ty(n){if(n===0)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function gC(n,t){var e=Ty(n),i=Math.pow(10,e),r=n/i,s;return r<1.5?s=1:r<2.5?s=2:r<4?s=3:r<7?s=5:s=10,n=s*i,e>=-20?+n.toFixed(e<0?-e:0):n}function vf(n){var t=parseFloat(n);return t==n&&(t!==0||!U(n)||n.indexOf("x")<=0)?t:NaN}function WD(n){return!isNaN(vf(n))}function pC(){return Math.round(Math.random()*9)}function vC(n,t){return t===0?n:vC(t,n%t)}function F1(n,t){return n==null?t:t==null?n:n*t/vC(n,t)}function Be(n){throw new Error(n)}var mC="series\0",YD="\0_ec_\0";function Ae(n){return n instanceof Array?n:n==null?[]:[n]}function Pv(n,t,e){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var i=0,r=e.length;i<r;i++){var s=e[i];!n.emphasis[t].hasOwnProperty(s)&&n[t].hasOwnProperty(s)&&(n.emphasis[t][s]=n[t][s])}}}var B1=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function ih(n){return Z(n)&&!V(n)&&!(n instanceof Date)?n.value:n}function $D(n){return Z(n)&&!(n instanceof Array)}function HD(n,t,e){var i=e==="normalMerge",r=e==="replaceMerge",s=e==="replaceAll";n=n||[],t=(t||[]).slice();var a=ot();A(t,function(l,u){if(!Z(l)){t[u]=null;return}});var o=UD(n,a,e);return(i||r)&&XD(o,n,a,t),i&&KD(o,t),i||r?jD(o,t,r):s&&ZD(o,t),qD(o),o}function UD(n,t,e){var i=[];if(e==="replaceAll")return i;for(var r=0;r<n.length;r++){var s=n[r];s&&s.id!=null&&t.set(s.id,r),i.push({existing:e==="replaceMerge"||_u(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return i}function XD(n,t,e,i){A(i,function(r,s){if(!(!r||r.id==null)){var a=ql(r.id),o=e.get(a);if(o!=null){var l=n[o];Ui(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=t[o],i[s]=null}}})}function KD(n,t){A(t,function(e,i){if(!(!e||e.name==null))for(var r=0;r<n.length;r++){var s=n[r].existing;if(!n[r].newOption&&s&&(s.id==null||e.id==null)&&!_u(e)&&!_u(s)&&yC("name",s,e)){n[r].newOption=e,t[i]=null;return}}})}function jD(n,t,e){A(t,function(i){if(i){for(var r,s=0;(r=n[s])&&(r.newOption||_u(r.existing)||r.existing&&i.id!=null&&!yC("id",i,r.existing));)s++;r?(r.newOption=i,r.brandNew=e):n.push({newOption:i,brandNew:e,existing:null,keyInfo:null}),s++}})}function ZD(n,t){A(t,function(e){n.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function qD(n){var t=ot();A(n,function(e){var i=e.existing;i&&t.set(i.id,e)}),A(n,function(e){var i=e.newOption;Ui(!i||i.id==null||!t.get(i.id)||t.get(i.id)===e,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,e),!e.keyInfo&&(e.keyInfo={})}),A(n,function(e,i){var r=e.existing,s=e.newOption,a=e.keyInfo;if(Z(s)){if(a.name=s.name!=null?ql(s.name):r?r.name:mC+i,r)a.id=ql(r.id);else if(s.id!=null)a.id=ql(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(t.get(a.id))}t.set(a.id,e)}})}function yC(n,t,e){var i=fi(t[n],null),r=fi(e[n],null);return i!=null&&r!=null&&i===r}function ql(n){return fi(n,"")}function fi(n,t){return n==null?t:U(n)?n:$t(n)||mv(n)?n+"":t}function Cy(n){var t=n.name;return!!(t&&t.indexOf(mC))}function _u(n){return n&&n.id!=null&&ql(n.id).indexOf(YD)===0}function JD(n,t,e){A(n,function(i){var r=i.newOption;Z(r)&&(i.keyInfo.mainType=t,i.keyInfo.subType=QD(t,r,i.existing,e))})}function QD(n,t,e,i){var r=t.type?t.type:e?e.subType:i.determineSubType(n,t);return r}function rh(n,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return V(t.dataIndex)?j(t.dataIndex,function(e){return n.indexOfRawIndex(e)}):n.indexOfRawIndex(t.dataIndex);if(t.name!=null)return V(t.name)?j(t.name,function(e){return n.indexOfName(e)}):n.indexOfName(t.name)}function jt(){var n="__ec_inner_"+tk++;return function(t){return t[n]||(t[n]={})}}var tk=pC();function Bg(n,t,e){var i=Ey(t,e),r=i.mainTypeSpecified,s=i.queryOptionMap,a=i.others,o=a,l=e?e.defaultMainType:null;return!r&&l&&s.set(l,{}),s.each(function(u,h){var c=sh(n,h,u,{useDefault:l===h,enableAll:e&&e.enableAll!=null?e.enableAll:!0,enableNone:e&&e.enableNone!=null?e.enableNone:!0});o[h+"Models"]=c.models,o[h+"Model"]=c.models[0]}),o}function Ey(n,t){var e;if(U(n)){var i={};i[n+"Index"]=0,e=i}else e=n;var r=ot(),s={},a=!1;return A(e,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=u[1],c=(u[2]||"").toLowerCase();if(!(!h||!c||t&&t.includeMainTypes&&bt(t.includeMainTypes,h)<0)){a=a||!!h;var f=r.get(h)||r.set(h,{});f[c]=o}}),{mainTypeSpecified:a,queryOptionMap:r,others:s}}var Vn={useDefault:!0,enableAll:!1,enableNone:!1};function sh(n,t,e,i){i=i||Vn;var r=e.index,s=e.id,a=e.name,o={models:null,specified:r!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=i.useDefault&&(l=n.getComponent(t))?[l]:[],o}return r==="none"||r===!1?(Ui(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(r==="all"&&(Ui(i.enableAll,'`"all"` is not a valid value on index option.'),r=s=a=null),o.models=n.queryComponents({mainType:t,index:r,id:s,name:a}),o)}function _C(n,t,e){n.setAttribute?n.setAttribute(t,e):n[t]=e}function ek(n,t){return n.getAttribute?n.getAttribute(t):n[t]}function nk(n){return n==="auto"?tt.domSupported?"html":"richText":n||"html"}var ik=".",Qr="___EC__COMPONENT__CONTAINER___",wC="___EC__EXTENDED_CLASS___";function oi(n){var t={main:"",sub:""};if(n){var e=n.split(ik);t.main=e[0]||"",t.sub=e[1]||""}return t}function rk(n){Ui(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function sk(n){return!!(n&&n[wC])}function Iy(n,t){n.$constructor=n,n.extend=function(e){var i=this,r;return ak(i)?r=function(s){et(a,s);function a(){return s.apply(this,arguments)||this}return a}(i):(r=function(){(e.$constructor||i).apply(this,arguments)},m2(r,this)),G(r.prototype,e),r[wC]=!0,r.extend=this.extend,r.superCall=uk,r.superApply=hk,r.superClass=i,r}}function ak(n){return lt(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function xC(n,t){n.extend=t.extend}var ok=Math.round(Math.random()*10);function lk(n){var t=["__\0is_clz",ok++].join("_");n.prototype[t]=!0,n.isInstance=function(e){return!!(e&&e[t])}}function uk(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];return this.superClass.prototype[t].apply(n,e)}function hk(n,t,e){return this.superClass.prototype[t].apply(n,e)}function ud(n){var t={};n.registerClass=function(i){var r=i.type||i.prototype.type;if(r){rk(r),i.prototype.type=r;var s=oi(r);if(!s.sub)t[s.main]=i;else if(s.sub!==Qr){var a=e(s);a[s.sub]=i}}return i},n.getClass=function(i,r,s){var a=t[i];if(a&&a[Qr]&&(a=r?a[r]:null),s&&!a)throw new Error(r?"Component "+i+"."+(r||"")+" is used but not imported.":i+".type should be specified.");return a},n.getClassesByMainType=function(i){var r=oi(i),s=[],a=t[r.main];return a&&a[Qr]?A(a,function(o,l){l!==Qr&&s.push(o)}):s.push(a),s},n.hasClass=function(i){var r=oi(i);return!!t[r.main]},n.getAllClassMainTypes=function(){var i=[];return A(t,function(r,s){i.push(s)}),i},n.hasSubTypes=function(i){var r=oi(i),s=t[r.main];return s&&s[Qr]};function e(i){var r=t[i.main];return(!r||!r[Qr])&&(r=t[i.main]={},r[Qr]=!0),r}}function wu(n,t){for(var e=0;e<n.length;e++)n[e][1]||(n[e][1]=n[e][0]);return t=t||!1,function(i,r,s){for(var a={},o=0;o<n.length;o++){var l=n[o][1];if(!(r&&bt(r,l)>=0||s&&bt(s,l)<0)){var u=i.getShallow(l,t);u!=null&&(a[n[o][0]]=u)}}return a}}var ck=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],fk=wu(ck),dk=function(){function n(){}return n.prototype.getAreaStyle=function(t,e){return fk(this,t,e)},n}(),Ov=new nh(50);function gk(n){if(typeof n=="string"){var t=Ov.get(n);return t&&t.image}else return n}function SC(n,t,e,i,r){if(n)if(typeof n=="string"){if(t&&t.__zrImageSrc===n||!e)return t;var s=Ov.get(n),a={hostEl:e,cb:i,cbPayload:r};return s?(t=s.image,!hd(t)&&s.pending.push(a)):(t=No.loadImage(n,G1,G1),t.__zrImageSrc=n,Ov.put(n,t.__cachedImgObj={image:t,pending:[a]})),t}else return n;else return t}function G1(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var e=n.pending[t],i=e.cb;i&&i(this,e.cbPayload),e.hostEl.dirty()}n.pending.length=0}function hd(n){return n&&n.width&&n.height}var Gg=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function pk(n,t,e,i,r){if(!t)return"";var s=(n+"").split(`
`);r=bC(t,e,i,r);for(var a=0,o=s.length;a<o;a++)s[a]=TC(s[a],r);return s.join(`
`)}function bC(n,t,e,i){i=i||{};var r=G({},i);r.font=t,e=st(e,"..."),r.maxIterations=st(i.maxIterations,2);var s=r.minChar=st(i.minChar,0);r.cnCharWidth=an("",t);var a=r.ascCharWidth=an("a",t);r.placeholder=st(i.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<s&&o>=a;l++)o-=a;var u=an(e,t);return u>o&&(e="",u=0),o=n-u,r.ellipsis=e,r.ellipsisWidth=u,r.contentWidth=o,r.containerWidth=n,r}function TC(n,t){var e=t.containerWidth,i=t.font,r=t.contentWidth;if(!e)return"";var s=an(n,i);if(s<=e)return n;for(var a=0;;a++){if(s<=r||a>=t.maxIterations){n+=t.ellipsis;break}var o=a===0?vk(n,r,t.ascCharWidth,t.cnCharWidth):s>0?Math.floor(n.length*r/s):0;n=n.substr(0,o),s=an(n,i)}return n===""&&(n=t.placeholder),n}function vk(n,t,e,i){for(var r=0,s=0,a=n.length;s<a&&r<t;s++){var o=n.charCodeAt(s);r+=0<=o&&o<=127?e:i}return s}function mk(n,t){n!=null&&(n+="");var e=t.overflow,i=t.padding,r=t.font,s=e==="truncate",a=by(r),o=st(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",h=t.width,c;h!=null&&(e==="break"||e==="breakAll")?c=n?CC(n,t.font,h,e==="breakAll",0).lines:[]:c=n?n.split(`
`):[];var f=c.length*o,d=st(t.height,f);if(f>d&&u){var g=Math.floor(d/o);c=c.slice(0,g)}if(n&&s&&h!=null)for(var v=bC(h,r,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),p=0;p<c.length;p++)c[p]=TC(c[p],v);for(var m=d,y=0,p=0;p<c.length;p++)y=Math.max(an(c[p],r),y);h==null&&(h=y);var _=y;return i&&(m+=i[0]+i[2],_+=i[1]+i[3],h+=i[1]+i[3]),l&&(_=h),{lines:c,height:d,outerWidth:_,outerHeight:m,lineHeight:o,calculatedLineHeight:a,contentWidth:y,contentHeight:f,width:h}}var yk=function(){function n(){}return n}(),z1=function(){function n(t){this.tokens=[],t&&(this.tokens=t)}return n}(),_k=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function wk(n,t){var e=new _k;if(n!=null&&(n+=""),!n)return e;for(var i=t.width,r=t.height,s=t.overflow,a=(s==="break"||s==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:s==="breakAll"}:null,o=Gg.lastIndex=0,l;(l=Gg.exec(n))!=null;){var u=l.index;u>o&&zg(e,n.substring(o,u),t,a),zg(e,l[2],t,a,l[1]),o=Gg.lastIndex}o<n.length&&zg(e,n.substring(o,n.length),t,a);var h=[],c=0,f=0,d=t.padding,g=s==="truncate",v=t.lineOverflow==="truncate";function p(O,B,F){O.width=B,O.lineHeight=F,c+=F,f=Math.max(f,B)}t:for(var m=0;m<e.lines.length;m++){for(var y=e.lines[m],_=0,w=0,S=0;S<y.tokens.length;S++){var x=y.tokens[S],b=x.styleName&&t.rich[x.styleName]||{},T=x.textPadding=b.padding,C=T?T[1]+T[3]:0,I=x.font=b.font||t.font;x.contentHeight=by(I);var E=st(b.height,x.contentHeight);if(x.innerHeight=E,T&&(E+=T[0]+T[2]),x.height=E,x.lineHeight=Nc(b.lineHeight,t.lineHeight,E),x.align=b&&b.align||t.align,x.verticalAlign=b&&b.verticalAlign||"middle",v&&r!=null&&c+x.lineHeight>r){S>0?(y.tokens=y.tokens.slice(0,S),p(y,w,_),e.lines=e.lines.slice(0,m+1)):e.lines=e.lines.slice(0,m);break t}var R=b.width,L=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")x.percentWidth=R,h.push(x),x.contentWidth=an(x.text,I);else{if(L){var M=b.backgroundColor,k=M&&M.image;k&&(k=gk(k),hd(k)&&(x.width=Math.max(x.width,k.width*E/k.height)))}var D=g&&i!=null?i-w:null;D!=null&&D<x.width?!L||D<C?(x.text="",x.width=x.contentWidth=0):(x.text=pk(x.text,D-C,I,t.ellipsis,{minChar:t.truncateMinChar}),x.width=x.contentWidth=an(x.text,I)):x.contentWidth=an(x.text,I)}x.width+=C,w+=x.width,b&&(_=Math.max(_,x.lineHeight))}p(y,w,_)}e.outerWidth=e.width=st(i,f),e.outerHeight=e.height=st(r,c),e.contentHeight=c,e.contentWidth=f,d&&(e.outerWidth+=d[1]+d[3],e.outerHeight+=d[0]+d[2]);for(var m=0;m<h.length;m++){var x=h[m],z=x.percentWidth;x.width=parseInt(z,10)/100*e.width}return e}function zg(n,t,e,i,r){var s=t==="",a=r&&e.rich[r]||{},o=n.lines,l=a.font||e.font,u=!1,h,c;if(i){var f=a.padding,d=f?f[1]+f[3]:0;if(a.width!=null&&a.width!=="auto"){var g=Nr(a.width,i.width)+d;o.length>0&&g+i.accumWidth>i.width&&(h=t.split(`
`),u=!0),i.accumWidth=g}else{var v=CC(t,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=v.accumWidth+d,c=v.linesWidths,h=v.lines}}else h=t.split(`
`);for(var p=0;p<h.length;p++){var m=h[p],y=new yk;if(y.styleName=r,y.text=m,y.isLineHolder=!m&&!s,typeof a.width=="number"?y.width=a.width:y.width=c?c[p]:an(m,l),!p&&!u){var _=(o[o.length-1]||(o[0]=new z1)).tokens,w=_.length;w===1&&_[0].isLineHolder?_[0]=y:(m||!w||s)&&_.push(y)}else o.push(new z1([y]))}}function xk(n){var t=n.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var Sk=Fo(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function bk(n){return xk(n)?!!Sk[n]:!0}function CC(n,t,e,i,r){for(var s=[],a=[],o="",l="",u=0,h=0,c=0;c<n.length;c++){var f=n.charAt(c);if(f===`
`){l&&(o+=l,h+=u),s.push(o),a.push(h),o="",l="",u=0,h=0;continue}var d=an(f,t),g=i?!1:!bk(f);if(s.length?h+d>e:r+h+d>e){h?(o||l)&&(g?(o||(o=l,l="",u=0,h=u),s.push(o),a.push(h-u),l+=f,u+=d,o="",h=u):(l&&(o+=l,l="",u=0),s.push(o),a.push(h),o=f,h=d)):g?(s.push(l),a.push(u),l=f,u=d):(s.push(f),a.push(d));continue}h+=d,g?(l+=f,u+=d):(l&&(o+=l,l="",u=0),o+=f)}return!s.length&&!o&&(o=n,l="",u=0),l&&(o+=l),o&&(s.push(o),a.push(h)),s.length===1&&(h+=r),{accumWidth:h,lines:s,linesWidths:a}}var Nv="__zr_style_"+Math.round(Math.random()*10),ks={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},cd={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ks[Nv]=!0;var V1=["z","z2","invisible"],Tk=["invisible"],ah=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype._init=function(e){for(var i=zt(e),r=0;r<i.length;r++){var s=i[r];s==="style"?this.useStyle(e[s]):n.prototype.attrKV.call(this,s,e[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,i,r,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Ck(this,e,i)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(e,i){return this.rectContain(e,i)},t.prototype.traverse=function(e,i){e.call(i,this)},t.prototype.rectContain=function(e,i){var r=this.transformCoordToLocal(e,i),s=this.getBoundingRect();return s.contain(r[0],r[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,r=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new Tt(0,0,0,0)),i?Tt.applyTransform(e,r,i):e.copy(r),(a||o||l)&&(e.width+=a*2+Math.abs(o),e.height+=a*2+Math.abs(l),e.x=Math.min(e.x,e.x+o-a),e.y=Math.min(e.y,e.y+l-a));var u=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-u),e.y=Math.floor(e.y-u),e.width=Math.ceil(e.width+1+u*2),e.height=Math.ceil(e.height+1+u*2))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new Tt(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(e,i){e!=="style"?n.prototype.attrKV.call(this,e,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(e,i){return typeof e=="string"?this.style[e]=i:G(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=Ll,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Ll)},t.prototype.styleUpdated=function(){this.__dirty&=~Ll},t.prototype.createStyle=function(e){return od(ks,e)},t.prototype.useStyle=function(e){e[Nv]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[Nv]},t.prototype._innerSaveToNormal=function(e){n.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,i,V1)},t.prototype._applyStateObj=function(e,i,r,s,a,o){n.prototype._applyStateObj.call(this,e,i,r,s,a,o);var l=!(i&&s),u;if(i&&i.style?a?s?u=i.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,i.style)):(u=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(u,i.style)):l&&(u=r.style),u)if(a){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var c=zt(h),f=0;f<c.length;f++){var d=c[f];d in u&&(u[d]=u[d],this.style[d]=h[d])}for(var g=zt(u),f=0;f<g.length;f++){var d=g[f];this.style[d]=this.style[d]}this._transitionState(e,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?Tk:V1,f=0;f<v.length;f++){var d=v[f];i&&i[d]!=null?this[d]=i[d]:l&&r[d]!=null&&(this[d]=r[d])}},t.prototype._mergeStates=function(e){for(var i=n.prototype._mergeStates.call(this,e),r,s=0;s<e.length;s++){var a=e[s];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},t.prototype._mergeStyle=function(e,i){return G(e,i),e},t.prototype.getAnimationStyleProps=function(){return cd},t.initDefaultProps=function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=sn|Ll}(),t}(ld),Vg=new Tt(0,0,0,0),Wg=new Tt(0,0,0,0);function Ck(n,t,e){return Vg.copy(n.getBoundingRect()),n.transform&&Vg.applyTransform(n.transform),Wg.width=t,Wg.height=e,!Vg.intersect(Wg)}var xn=Math.min,Sn=Math.max,Yg=Math.sin,$g=Math.cos,ts=Math.PI*2,Nh=Bo(),Fh=Bo(),Bh=Bo();function W1(n,t,e,i,r,s){r[0]=xn(n,e),r[1]=xn(t,i),s[0]=Sn(n,e),s[1]=Sn(t,i)}var Y1=[],$1=[];function Ek(n,t,e,i,r,s,a,o,l,u){var h=nC,c=Ee,f=h(n,e,r,a,Y1);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<f;d++){var g=c(n,e,r,a,Y1[d]);l[0]=xn(g,l[0]),u[0]=Sn(g,u[0])}f=h(t,i,s,o,$1);for(var d=0;d<f;d++){var v=c(t,i,s,o,$1[d]);l[1]=xn(v,l[1]),u[1]=Sn(v,u[1])}l[0]=xn(n,l[0]),u[0]=Sn(n,u[0]),l[0]=xn(a,l[0]),u[0]=Sn(a,u[0]),l[1]=xn(t,l[1]),u[1]=Sn(t,u[1]),l[1]=xn(o,l[1]),u[1]=Sn(o,u[1])}function Ik(n,t,e,i,r,s,a,o){var l=iC,u=Fe,h=Sn(xn(l(n,e,r),1),0),c=Sn(xn(l(t,i,s),1),0),f=u(n,e,r,h),d=u(t,i,s,c);a[0]=xn(n,r,f),a[1]=xn(t,s,d),o[0]=Sn(n,r,f),o[1]=Sn(t,s,d)}function Ak(n,t,e,i,r,s,a,o,l){var u=za,h=Va,c=Math.abs(r-s);if(c%ts<1e-4&&c>1e-4){o[0]=n-e,o[1]=t-i,l[0]=n+e,l[1]=t+i;return}if(Nh[0]=$g(r)*e+n,Nh[1]=Yg(r)*i+t,Fh[0]=$g(s)*e+n,Fh[1]=Yg(s)*i+t,u(o,Nh,Fh),h(l,Nh,Fh),r=r%ts,r<0&&(r=r+ts),s=s%ts,s<0&&(s=s+ts),r>s&&!a?s+=ts:r<s&&a&&(r+=ts),a){var f=s;s=r,r=f}for(var d=0;d<s;d+=Math.PI/2)d>r&&(Bh[0]=$g(d)*e+n,Bh[1]=Yg(d)*i+t,u(o,Bh,o),h(l,Bh,l))}var wt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},es=[],ns=[],Qn=[],sr=[],ti=[],ei=[],Hg=Math.min,Ug=Math.max,is=Math.cos,rs=Math.sin,Ci=Math.abs,Fv=Math.PI,vr=Fv*2,Xg=typeof Float32Array<"u",ll=[];function Kg(n){var t=Math.round(n/Fv*1e8)/1e8;return t%2*Fv}function Rk(n,t){var e=Kg(n[0]);e<0&&(e+=vr);var i=e-n[0],r=n[1];r+=i,!t&&r-e>=vr?r=e+vr:t&&e-r>=vr?r=e-vr:!t&&e>r?r=e+(vr-Kg(e-r)):t&&e<r&&(r=e-(vr-Kg(r-e))),n[0]=e,n[1]=r}var yo=function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,e,i){i=i||0,i>0&&(this._ux=Ci(i/df/t)||0,this._uy=Ci(i/df/e)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(wt.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},n.prototype.lineTo=function(t,e){var i=Ci(t-this._xi),r=Ci(e-this._yi),s=i>this._ux||r>this._uy;if(this.addData(wt.L,t,e),this._ctx&&s&&this._ctx.lineTo(t,e),s)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var a=i*i+r*r;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(t,e,i,r,s,a){return this._drawPendingPt(),this.addData(wt.C,t,e,i,r,s,a),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,s,a),this._xi=s,this._yi=a,this},n.prototype.quadraticCurveTo=function(t,e,i,r){return this._drawPendingPt(),this.addData(wt.Q,t,e,i,r),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this._xi=i,this._yi=r,this},n.prototype.arc=function(t,e,i,r,s,a){this._drawPendingPt(),ll[0]=r,ll[1]=s,Rk(ll,a),r=ll[0],s=ll[1];var o=s-r;return this.addData(wt.A,t,e,i,i,r,o,0,a?0:1),this._ctx&&this._ctx.arc(t,e,i,r,s,a),this._xi=is(s)*i+t,this._yi=rs(s)*i+e,this},n.prototype.arcTo=function(t,e,i,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,i,r,s),this},n.prototype.rect=function(t,e,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,i,r),this.addData(wt.R,t,e,i,r),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(wt.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&t.closePath(),this._xi=e,this._yi=i,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var e=t.length;!(this.data&&this.data.length===e)&&Xg&&(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,r=this._len,s=0;s<e;s++)i+=t[s].len();Xg&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+i));for(var s=0;s<e;s++)for(var a=t[s].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},n.prototype.addData=function(t,e,i,r,s,a,o,l,u){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var c=0;c<arguments.length;c++)h[this._len++]=arguments[c]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Xg&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){Qn[0]=Qn[1]=ti[0]=ti[1]=Number.MAX_VALUE,sr[0]=sr[1]=ei[0]=ei[1]=-Number.MAX_VALUE;var t=this.data,e=0,i=0,r=0,s=0,a;for(a=0;a<this._len;){var o=t[a++],l=a===1;switch(l&&(e=t[a],i=t[a+1],r=e,s=i),o){case wt.M:e=r=t[a++],i=s=t[a++],ti[0]=r,ti[1]=s,ei[0]=r,ei[1]=s;break;case wt.L:W1(e,i,t[a],t[a+1],ti,ei),e=t[a++],i=t[a++];break;case wt.C:Ek(e,i,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],ti,ei),e=t[a++],i=t[a++];break;case wt.Q:Ik(e,i,t[a++],t[a++],t[a],t[a+1],ti,ei),e=t[a++],i=t[a++];break;case wt.A:var u=t[a++],h=t[a++],c=t[a++],f=t[a++],d=t[a++],g=t[a++]+d;a+=1;var v=!t[a++];l&&(r=is(d)*c+u,s=rs(d)*f+h),Ak(u,h,c,f,d,g,v,ti,ei),e=is(g)*c+u,i=rs(g)*f+h;break;case wt.R:r=e=t[a++],s=i=t[a++];var p=t[a++],m=t[a++];W1(r,s,r+p,s+m,ti,ei);break;case wt.Z:e=r,i=s;break}za(Qn,Qn,ti),Va(sr,sr,ei)}return a===0&&(Qn[0]=Qn[1]=sr[0]=sr[1]=0),new Tt(Qn[0],Qn[1],sr[0]-Qn[0],sr[1]-Qn[1])},n.prototype._calculateLength=function(){var t=this.data,e=this._len,i=this._ux,r=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,c=0,f=0;f<e;){var d=t[f++],g=f===1;g&&(s=t[f],a=t[f+1],o=s,l=a);var v=-1;switch(d){case wt.M:s=o=t[f++],a=l=t[f++];break;case wt.L:{var p=t[f++],m=t[f++],y=p-s,_=m-a;(Ci(y)>i||Ci(_)>r||f===e-1)&&(v=Math.sqrt(y*y+_*_),s=p,a=m);break}case wt.C:{var w=t[f++],S=t[f++],p=t[f++],m=t[f++],x=t[f++],b=t[f++];v=nD(s,a,w,S,p,m,x,b,10),s=x,a=b;break}case wt.Q:{var w=t[f++],S=t[f++],p=t[f++],m=t[f++];v=sD(s,a,w,S,p,m,10),s=p,a=m;break}case wt.A:var T=t[f++],C=t[f++],I=t[f++],E=t[f++],R=t[f++],L=t[f++],M=L+R;f+=1,g&&(o=is(R)*I+T,l=rs(R)*E+C),v=Ug(I,E)*Hg(vr,Math.abs(L)),s=is(M)*I+T,a=rs(M)*E+C;break;case wt.R:{o=s=t[f++],l=a=t[f++];var k=t[f++],D=t[f++];v=k*2+D*2;break}case wt.Z:{var y=o-s,_=l-a;v=Math.sqrt(y*y+_*_),s=o,a=l;break}}v>=0&&(u[c++]=v,h+=v)}return this._pathLen=h,h},n.prototype.rebuildPath=function(t,e){var i=this.data,r=this._ux,s=this._uy,a=this._len,o,l,u,h,c,f,d=e<1,g,v,p=0,m=0,y,_=0,w,S;if(!(d&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,v=this._pathLen,y=e*v,!y)))t:for(var x=0;x<a;){var b=i[x++],T=x===1;switch(T&&(u=i[x],h=i[x+1],o=u,l=h),b!==wt.L&&_>0&&(t.lineTo(w,S),_=0),b){case wt.M:o=u=i[x++],l=h=i[x++],t.moveTo(u,h);break;case wt.L:{c=i[x++],f=i[x++];var C=Ci(c-u),I=Ci(f-h);if(C>r||I>s){if(d){var E=g[m++];if(p+E>y){var R=(y-p)/E;t.lineTo(u*(1-R)+c*R,h*(1-R)+f*R);break t}p+=E}t.lineTo(c,f),u=c,h=f,_=0}else{var L=C*C+I*I;L>_&&(w=c,S=f,_=L)}break}case wt.C:{var M=i[x++],k=i[x++],D=i[x++],z=i[x++],O=i[x++],B=i[x++];if(d){var E=g[m++];if(p+E>y){var R=(y-p)/E;hf(u,M,D,O,R,es),hf(h,k,z,B,R,ns),t.bezierCurveTo(es[1],ns[1],es[2],ns[2],es[3],ns[3]);break t}p+=E}t.bezierCurveTo(M,k,D,z,O,B),u=O,h=B;break}case wt.Q:{var M=i[x++],k=i[x++],D=i[x++],z=i[x++];if(d){var E=g[m++];if(p+E>y){var R=(y-p)/E;cf(u,M,D,R,es),cf(h,k,z,R,ns),t.quadraticCurveTo(es[1],ns[1],es[2],ns[2]);break t}p+=E}t.quadraticCurveTo(M,k,D,z),u=D,h=z;break}case wt.A:var F=i[x++],W=i[x++],H=i[x++],ct=i[x++],N=i[x++],Vt=i[x++],Bt=i[x++],Ot=!i[x++],ue=H>ct?H:ct,Wt=Ci(H-ct)>.001,_t=N+Vt,K=!1;if(d){var E=g[m++];p+E>y&&(_t=N+Vt*(y-p)/E,K=!0),p+=E}if(Wt&&t.ellipse?t.ellipse(F,W,H,ct,Bt,N,_t,Ot):t.arc(F,W,ue,N,_t,Ot),K)break t;T&&(o=is(N)*H+F,l=rs(N)*ct+W),u=is(_t)*H+F,h=rs(_t)*ct+W;break;case wt.R:o=u=i[x],l=h=i[x+1],c=i[x++],f=i[x++];var rt=i[x++],on=i[x++];if(d){var E=g[m++];if(p+E>y){var ie=y-p;t.moveTo(c,f),t.lineTo(c+Hg(ie,rt),f),ie-=rt,ie>0&&t.lineTo(c+rt,f+Hg(ie,on)),ie-=on,ie>0&&t.lineTo(c+Ug(rt-ie,0),f+on),ie-=rt,ie>0&&t.lineTo(c,f+Ug(on-ie,0));break t}p+=E}t.rect(c,f,rt,on);break;case wt.Z:if(d){var E=g[m++];if(p+E>y){var R=(y-p)/E;t.lineTo(u*(1-R)+o*R,h*(1-R)+l*R);break t}p+=E}t.closePath(),u=o,h=l}}},n.prototype.clone=function(){var t=new n,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},n.CMD=wt,n.initDefaultProps=function(){var t=n.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),n}();function ca(n,t,e,i,r,s,a){if(r===0)return!1;var o=r,l=0,u=n;if(a>t+o&&a>i+o||a<t-o&&a<i-o||s>n+o&&s>e+o||s<n-o&&s<e-o)return!1;if(n!==e)l=(t-i)/(n-e),u=(n*i-e*t)/(n-e);else return Math.abs(s-n)<=o/2;var h=l*s-a+u,c=h*h/(l*l+1);return c<=o/2*o/2}function Mk(n,t,e,i,r,s,a,o,l,u,h){if(l===0)return!1;var c=l;if(h>t+c&&h>i+c&&h>s+c&&h>o+c||h<t-c&&h<i-c&&h<s-c&&h<o-c||u>n+c&&u>e+c&&u>r+c&&u>a+c||u<n-c&&u<e-c&&u<r-c&&u<a-c)return!1;var f=eD(n,t,e,i,r,s,a,o,u,h);return f<=c/2}function Lk(n,t,e,i,r,s,a,o,l){if(a===0)return!1;var u=a;if(l>t+u&&l>i+u&&l>s+u||l<t-u&&l<i-u&&l<s-u||o>n+u&&o>e+u&&o>r+u||o<n-u&&o<e-u&&o<r-u)return!1;var h=rD(n,t,e,i,r,s,o,l);return h<=u/2}var H1=Math.PI*2;function Gh(n){return n%=H1,n<0&&(n+=H1),n}var ul=Math.PI*2;function Dk(n,t,e,i,r,s,a,o,l){if(a===0)return!1;var u=a;o-=n,l-=t;var h=Math.sqrt(o*o+l*l);if(h-u>e||h+u<e)return!1;if(Math.abs(i-r)%ul<1e-4)return!0;if(s){var c=i;i=Gh(r),r=Gh(c)}else i=Gh(i),r=Gh(r);i>r&&(r+=ul);var f=Math.atan2(l,o);return f<0&&(f+=ul),f>=i&&f<=r||f+ul>=i&&f+ul<=r}function ss(n,t,e,i,r,s){if(s>t&&s>i||s<t&&s<i||i===t)return 0;var a=(s-t)/(i-t),o=i<t?1:-1;(a===1||a===0)&&(o=i<t?.5:-.5);var l=a*(e-n)+n;return l===r?1/0:l>r?o:0}var ar=yo.CMD,as=Math.PI*2,kk=1e-4;function Pk(n,t){return Math.abs(n-t)<kk}var Te=[-1,-1,-1],_n=[-1,-1];function Ok(){var n=_n[0];_n[0]=_n[1],_n[1]=n}function Nk(n,t,e,i,r,s,a,o,l,u){if(u>t&&u>i&&u>s&&u>o||u<t&&u<i&&u<s&&u<o)return 0;var h=eC(t,i,s,o,u,Te);if(h===0)return 0;for(var c=0,f=-1,d=void 0,g=void 0,v=0;v<h;v++){var p=Te[v],m=p===0||p===1?.5:1,y=Ee(n,e,r,a,p);y<l||(f<0&&(f=nC(t,i,s,o,_n),_n[1]<_n[0]&&f>1&&Ok(),d=Ee(t,i,s,o,_n[0]),f>1&&(g=Ee(t,i,s,o,_n[1]))),f===2?p<_n[0]?c+=d<t?m:-m:p<_n[1]?c+=g<d?m:-m:c+=o<g?m:-m:p<_n[0]?c+=d<t?m:-m:c+=o<d?m:-m)}return c}function Fk(n,t,e,i,r,s,a,o){if(o>t&&o>i&&o>s||o<t&&o<i&&o<s)return 0;var l=iD(t,i,s,o,Te);if(l===0)return 0;var u=iC(t,i,s);if(u>=0&&u<=1){for(var h=0,c=Fe(t,i,s,u),f=0;f<l;f++){var d=Te[f]===0||Te[f]===1?.5:1,g=Fe(n,e,r,Te[f]);g<a||(Te[f]<u?h+=c<t?d:-d:h+=s<c?d:-d)}return h}else{var d=Te[0]===0||Te[0]===1?.5:1,g=Fe(n,e,r,Te[0]);return g<a?0:s<t?d:-d}}function Bk(n,t,e,i,r,s,a,o){if(o-=t,o>e||o<-e)return 0;var l=Math.sqrt(e*e-o*o);Te[0]=-l,Te[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u>=as-1e-4){i=0,r=as;var h=s?1:-1;return a>=Te[0]+n&&a<=Te[1]+n?h:0}if(i>r){var c=i;i=r,r=c}i<0&&(i+=as,r+=as);for(var f=0,d=0;d<2;d++){var g=Te[d];if(g+n>a){var v=Math.atan2(o,g),h=s?1:-1;v<0&&(v=as+v),(v>=i&&v<=r||v+as>=i&&v+as<=r)&&(v>Math.PI/2&&v<Math.PI*1.5&&(h=-h),f+=h)}}return f}function EC(n,t,e,i,r){for(var s=n.data,a=n.len(),o=0,l=0,u=0,h=0,c=0,f,d,g=0;g<a;){var v=s[g++],p=g===1;switch(v===ar.M&&g>1&&(e||(o+=ss(l,u,h,c,i,r))),p&&(l=s[g],u=s[g+1],h=l,c=u),v){case ar.M:h=s[g++],c=s[g++],l=h,u=c;break;case ar.L:if(e){if(ca(l,u,s[g],s[g+1],t,i,r))return!0}else o+=ss(l,u,s[g],s[g+1],i,r)||0;l=s[g++],u=s[g++];break;case ar.C:if(e){if(Mk(l,u,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],t,i,r))return!0}else o+=Nk(l,u,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],i,r)||0;l=s[g++],u=s[g++];break;case ar.Q:if(e){if(Lk(l,u,s[g++],s[g++],s[g],s[g+1],t,i,r))return!0}else o+=Fk(l,u,s[g++],s[g++],s[g],s[g+1],i,r)||0;l=s[g++],u=s[g++];break;case ar.A:var m=s[g++],y=s[g++],_=s[g++],w=s[g++],S=s[g++],x=s[g++];g+=1;var b=!!(1-s[g++]);f=Math.cos(S)*_+m,d=Math.sin(S)*w+y,p?(h=f,c=d):o+=ss(l,u,f,d,i,r);var T=(i-m)*w/_+m;if(e){if(Dk(m,y,w,S,S+x,b,t,T,r))return!0}else o+=Bk(m,y,w,S,S+x,b,T,r);l=Math.cos(S+x)*_+m,u=Math.sin(S+x)*w+y;break;case ar.R:h=l=s[g++],c=u=s[g++];var C=s[g++],I=s[g++];if(f=h+C,d=c+I,e){if(ca(h,c,f,c,t,i,r)||ca(f,c,f,d,t,i,r)||ca(f,d,h,d,t,i,r)||ca(h,d,h,c,t,i,r))return!0}else o+=ss(f,c,f,d,i,r),o+=ss(h,d,h,c,i,r);break;case ar.Z:if(e){if(ca(l,u,h,c,t,i,r))return!0}else o+=ss(l,u,h,c,i,r);l=h,u=c;break}}return!e&&!Pk(u,c)&&(o+=ss(l,u,h,c,i,r)||0),o!==0}function Gk(n,t,e){return EC(n,0,!1,t,e)}function zk(n,t,e,i){return EC(n,t,!0,e,i)}var IC=Pt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ks),Vk={style:Pt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},cd.style)},jg=yu.concat(["invisible","culling","z","z2","zlevel","parent"]),Rt=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.update=function(){var e=this;n.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new t;r.buildPath===t.prototype.buildPath&&(r.buildPath=function(l){e.buildPath(l,e.shape)}),r.silent=!0;var s=r.style;for(var a in i)s[a]!==i[a]&&(s[a]=i[a]);s.fill=i.fill?i.decal:null,s.decal=null,s.shadowColor=null,i.strokeFirst&&(s.stroke=null);for(var o=0;o<jg.length;++o)r[jg[o]]=this[jg[o]];r.__dirty|=sn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(e){var i=zt(e);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var s=0;s<i.length;s++){var a=i[s],o=e[a];a==="style"?this.style?G(this.style,o):this.useStyle(o):a==="shape"?G(this.shape,o):n.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if(e!=="none"){if(U(e)){var i=ff(e,0);return i>.5?Dv:i>.2?TD:kv}else if(e)return kv}return Dv},t.prototype.getInsideTextStroke=function(e){var i=this.style.fill;if(U(i)){var r=this.__zr,s=!!(r&&r.isDarkMode()),a=ff(e,0)<Lv;if(s===a)return i}},t.prototype.buildPath=function(e,i,r){},t.prototype.pathUpdated=function(){this.__dirty&=~ka},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new yo(!1)},t.prototype.hasStroke=function(){var e=this.style,i=e.stroke;return!(i==null||i==="none"||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style,i=e.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var e=this._rect,i=this.style,r=!e;if(r){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&ka)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),e=a.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||r){o.copy(e);var l=i.strokeNoScale?this.getLineScale():1,u=i.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;u=Math.max(u,h??4)}l>1e-10&&(o.width+=u/l,o.height+=u/l,o.x-=u/l/2,o.y-=u/l/2)}return o}return e},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),s=this.getBoundingRect(),a=this.style;if(e=r[0],i=r[1],s.contain(e,i)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),zk(o,l/u,e,i)))return!0}if(this.hasFill())return Gk(o,e,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=ka,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():e==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(e,i){e==="shape"?this.setShape(i):n.prototype.attrKV.call(this,e,i)},t.prototype.setShape=function(e,i){var r=this.shape;return r||(r=this.shape={}),typeof e=="string"?r[e]=i:G(r,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&ka)},t.prototype.createStyle=function(e){return od(IC,e)},t.prototype._innerSaveToNormal=function(e){n.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.shape&&!i.shape&&(i.shape=G({},this.shape))},t.prototype._applyStateObj=function(e,i,r,s,a,o){n.prototype._applyStateObj.call(this,e,i,r,s,a,o);var l=!(i&&s),u;if(i&&i.shape?a?s?u=i.shape:(u=G({},r.shape),G(u,i.shape)):(u=G({},s?this.shape:r.shape),G(u,i.shape)):l&&(u=r.shape),u)if(a){this.shape=G({},this.shape);for(var h={},c=zt(u),f=0;f<c.length;f++){var d=c[f];typeof u[d]=="object"?this.shape[d]=u[d]:h[d]=u[d]}this._transitionState(e,{shape:h},o)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(e){for(var i=n.prototype._mergeStates.call(this,e),r,s=0;s<e.length;s++){var a=e[s];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},t.prototype.getAnimationStyleProps=function(){return Vk},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var i=function(s){At(a,s);function a(o){var l=s.call(this,o)||this;return e.init&&e.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return ut(e.style)},a.prototype.getDefaultShape=function(){return ut(e.shape)},a}(t);for(var r in e)typeof e[r]=="function"&&(i.prototype[r]=e[r]);return i},t.initDefaultProps=function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=sn|Ll|ka}(),t}(ah),Wk=Pt({strokeFirst:!0,font:Fs,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},IC),mf=function(n){At(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var e=this.style,i=e.stroke;return i!=null&&i!=="none"&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style,i=e.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(e){return od(Wk,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var i=e.text;i!=null?i+="":i="";var r=Sy(i,e.font,e.textAlign,e.textBaseline);if(r.x+=e.x||0,r.y+=e.y||0,this.hasStroke()){var s=e.lineWidth;r.x-=s/2,r.y-=s/2,r.width+=s,r.height+=s}this._rect=r}return this._rect},t.initDefaultProps=function(){var e=t.prototype;e.dirtyRectTolerance=10}(),t}(ah);mf.prototype.type="tspan";var Yk=Pt({x:0,y:0},ks),$k={style:Pt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},cd.style)};function Hk(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Xs=function(n){At(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.createStyle=function(e){return od(Yk,e)},t.prototype._getSize=function(e){var i=this.style,r=i[e];if(r!=null)return r;var s=Hk(i.image)?i.image:this.__image;if(!s)return 0;var a=e==="width"?"height":"width",o=i[a];return o==null?s[e]:s[e]/s[a]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return $k},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Tt(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(ah);Xs.prototype.type="image";function Uk(n,t){var e=t.x,i=t.y,r=t.width,s=t.height,a=t.r,o,l,u,h;r<0&&(e=e+r,r=-r),s<0&&(i=i+s,s=-s),typeof a=="number"?o=l=u=h=a:a instanceof Array?a.length===1?o=l=u=h=a[0]:a.length===2?(o=u=a[0],l=h=a[1]):a.length===3?(o=a[0],l=h=a[1],u=a[2]):(o=a[0],l=a[1],u=a[2],h=a[3]):o=l=u=h=0;var c;o+l>r&&(c=o+l,o*=r/c,l*=r/c),u+h>r&&(c=u+h,u*=r/c,h*=r/c),l+u>s&&(c=l+u,l*=s/c,u*=s/c),o+h>s&&(c=o+h,o*=s/c,h*=s/c),n.moveTo(e+o,i),n.lineTo(e+r-l,i),l!==0&&n.arc(e+r-l,i+l,l,-Math.PI/2,0),n.lineTo(e+r,i+s-u),u!==0&&n.arc(e+r-u,i+s-u,u,0,Math.PI/2),n.lineTo(e+h,i+s),h!==0&&n.arc(e+h,i+s-h,h,Math.PI/2,Math.PI),n.lineTo(e,i+o),o!==0&&n.arc(e+o,i+o,o,Math.PI,Math.PI*1.5)}var Ya=Math.round;function AC(n,t,e){if(t){var i=t.x1,r=t.x2,s=t.y1,a=t.y2;n.x1=i,n.x2=r,n.y1=s,n.y2=a;var o=e&&e.lineWidth;return o&&(Ya(i*2)===Ya(r*2)&&(n.x1=n.x2=bs(i,o,!0)),Ya(s*2)===Ya(a*2)&&(n.y1=n.y2=bs(s,o,!0))),n}}function RC(n,t,e){if(t){var i=t.x,r=t.y,s=t.width,a=t.height;n.x=i,n.y=r,n.width=s,n.height=a;var o=e&&e.lineWidth;return o&&(n.x=bs(i,o,!0),n.y=bs(r,o,!0),n.width=Math.max(bs(i+s,o,!1)-n.x,s===0?0:1),n.height=Math.max(bs(r+a,o,!1)-n.y,a===0?0:1)),n}}function bs(n,t,e){if(!t)return n;var i=Ya(n*2);return(i+Ya(t))%2===0?i/2:(i+(e?1:-1))/2}var Xk=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),Kk={},ne=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new Xk},t.prototype.buildPath=function(e,i){var r,s,a,o;if(this.subPixelOptimize){var l=RC(Kk,i,this.style);r=l.x,s=l.y,a=l.width,o=l.height,l.r=i.r,i=l}else r=i.x,s=i.y,a=i.width,o=i.height;i.r?Uk(e,i):e.rect(r,s,a,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Rt);ne.prototype.type="rect";var U1={fill:"#000"},X1=2,jk={style:Pt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},cd.style)},De=function(n){At(t,n);function t(e){var i=n.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=U1,i.attr(e),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var i=this._children[e];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var i=this.innerTransformable;return i?i.getLocalTransform(e):n.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,tP(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=e},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Tt(0,0,0,0),i=this._children,r=[],s=null,a=0;a<i.length;a++){var o=i[a],l=o.getBoundingRect(),u=o.getLocalTransform(r);u?(e.copy(l),e.applyTransform(u),s=s||e.clone(),s.union(e)):(s=s||l.clone(),s.union(l))}this._rect=s||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||U1},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,i){if(!i)return e;var r=i.rich,s=e.rich||r&&{};return G(e,i),r&&s?(this._mergeRich(s,r),e.rich=s):s&&(e.rich=s),e},t.prototype._mergeRich=function(e,i){for(var r=zt(i),s=0;s<r.length;s++){var a=r[s];e[a]=e[a]||{},G(e[a],i[a])}},t.prototype.getAnimationStyleProps=function(){return jk},t.prototype._getOrCreateChild=function(e){var i=this._children[this._childCursor];return(!i||!(i instanceof e))&&(i=new e),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var e=this.style,i=e.font||Fs,r=e.padding,s=tw(e),a=mk(s,e),o=Zg(e),l=!!e.backgroundColor,u=a.outerHeight,h=a.outerWidth,c=a.contentWidth,f=a.lines,d=a.lineHeight,g=this._defaultStyle,v=e.x||0,p=e.y||0,m=e.align||g.align||"left",y=e.verticalAlign||g.verticalAlign||"top",_=v,w=Pa(p,a.contentHeight,y);if(o||r){var S=kl(v,h,m),x=Pa(p,u,y);o&&this._renderBackground(e,e,S,x,h,u)}w+=d/2,r&&(_=Q1(v,m,r),y==="top"?w+=r[0]:y==="bottom"&&(w-=r[2]));for(var b=0,T=!1,C=J1("fill"in e?e.fill:(T=!0,g.fill)),I=q1("stroke"in e?e.stroke:!l&&(!g.autoStroke||T)?(b=X1,g.stroke):null),E=e.textShadowBlur>0,R=e.width!=null&&(e.overflow==="truncate"||e.overflow==="break"||e.overflow==="breakAll"),L=a.calculatedLineHeight,M=0;M<f.length;M++){var k=this._getOrCreateChild(mf),D=k.createStyle();k.useStyle(D),D.text=f[M],D.x=_,D.y=w,m&&(D.textAlign=m),D.textBaseline="middle",D.opacity=e.opacity,D.strokeFirst=!0,E&&(D.shadowBlur=e.textShadowBlur||0,D.shadowColor=e.textShadowColor||"transparent",D.shadowOffsetX=e.textShadowOffsetX||0,D.shadowOffsetY=e.textShadowOffsetY||0),D.stroke=I,D.fill=C,I&&(D.lineWidth=e.lineWidth||b,D.lineDash=e.lineDash,D.lineDashOffset=e.lineDashOffset||0),D.font=i,j1(D,e),w+=d,R&&k.setBoundingRect(new Tt(kl(D.x,e.width,D.textAlign),Pa(D.y,L,D.textBaseline),c,L))}},t.prototype._updateRichTexts=function(){var e=this.style,i=tw(e),r=wk(i,e),s=r.width,a=r.outerWidth,o=r.outerHeight,l=e.padding,u=e.x||0,h=e.y||0,c=this._defaultStyle,f=e.align||c.align,d=e.verticalAlign||c.verticalAlign,g=kl(u,a,f),v=Pa(h,o,d),p=g,m=v;l&&(p+=l[3],m+=l[0]);var y=p+s;Zg(e)&&this._renderBackground(e,e,g,v,a,o);for(var _=!!e.backgroundColor,w=0;w<r.lines.length;w++){for(var S=r.lines[w],x=S.tokens,b=x.length,T=S.lineHeight,C=S.width,I=0,E=p,R=y,L=b-1,M=void 0;I<b&&(M=x[I],!M.align||M.align==="left");)this._placeToken(M,e,T,m,E,"left",_),C-=M.width,E+=M.width,I++;for(;L>=0&&(M=x[L],M.align==="right");)this._placeToken(M,e,T,m,R,"right",_),C-=M.width,R-=M.width,L--;for(E+=(s-(E-p)-(y-R)-C)/2;I<=L;)M=x[I],this._placeToken(M,e,T,m,E+M.width/2,"center",_),E+=M.width,I++;m+=T}},t.prototype._placeToken=function(e,i,r,s,a,o,l){var u=i.rich[e.styleName]||{};u.text=e.text;var h=e.verticalAlign,c=s+r/2;h==="top"?c=s+e.height/2:h==="bottom"&&(c=s+r-e.height/2);var f=!e.isLineHolder&&Zg(u);f&&this._renderBackground(u,i,o==="right"?a-e.width:o==="center"?a-e.width/2:a,c-e.height/2,e.width,e.height);var d=!!u.backgroundColor,g=e.textPadding;g&&(a=Q1(a,o,g),c-=e.height/2-g[0]-e.innerHeight/2);var v=this._getOrCreateChild(mf),p=v.createStyle();v.useStyle(p);var m=this._defaultStyle,y=!1,_=0,w=J1("fill"in u?u.fill:"fill"in i?i.fill:(y=!0,m.fill)),S=q1("stroke"in u?u.stroke:"stroke"in i?i.stroke:!d&&!l&&(!m.autoStroke||y)?(_=X1,m.stroke):null),x=u.textShadowBlur>0||i.textShadowBlur>0;p.text=e.text,p.x=a,p.y=c,x&&(p.shadowBlur=u.textShadowBlur||i.textShadowBlur||0,p.shadowColor=u.textShadowColor||i.textShadowColor||"transparent",p.shadowOffsetX=u.textShadowOffsetX||i.textShadowOffsetX||0,p.shadowOffsetY=u.textShadowOffsetY||i.textShadowOffsetY||0),p.textAlign=o,p.textBaseline="middle",p.font=e.font||Fs,p.opacity=Nc(u.opacity,i.opacity,1),j1(p,u),S&&(p.lineWidth=Nc(u.lineWidth,i.lineWidth,_),p.lineDash=st(u.lineDash,i.lineDash),p.lineDashOffset=i.lineDashOffset||0,p.stroke=S),w&&(p.fill=w);var b=e.contentWidth,T=e.contentHeight;v.setBoundingRect(new Tt(kl(p.x,b,p.textAlign),Pa(p.y,T,p.textBaseline),b,T))},t.prototype._renderBackground=function(e,i,r,s,a,o){var l=e.backgroundColor,u=e.borderWidth,h=e.borderColor,c=l&&l.image,f=l&&!c,d=e.borderRadius,g=this,v,p;if(f||e.lineHeight||u&&h){v=this._getOrCreateChild(ne),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=r,m.y=s,m.width=a,m.height=o,m.r=d,v.dirtyShape()}if(f){var y=v.style;y.fill=l||null,y.fillOpacity=st(e.fillOpacity,1)}else if(c){p=this._getOrCreateChild(Xs),p.onload=function(){g.dirtyStyle()};var _=p.style;_.image=l.image,_.x=r,_.y=s,_.width=a,_.height=o}if(u&&h){var y=v.style;y.lineWidth=u,y.stroke=h,y.strokeOpacity=st(e.strokeOpacity,1),y.lineDash=e.borderDash,y.lineDashOffset=e.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||p).style;w.shadowBlur=e.shadowBlur||0,w.shadowColor=e.shadowColor||"transparent",w.shadowOffsetX=e.shadowOffsetX||0,w.shadowOffsetY=e.shadowOffsetY||0,w.opacity=Nc(e.opacity,i.opacity,1)},t.makeFont=function(e){var i="";return Qk(e)&&(i=[e.fontStyle,e.fontWeight,Jk(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),i&&ai(i)||e.textFont||e.font},t}(ah),Zk={left:!0,right:1,center:1},qk={top:1,bottom:1,middle:1},K1=["fontStyle","fontWeight","fontSize","fontFamily"];function Jk(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?uy+"px":n+"px"}function j1(n,t){for(var e=0;e<K1.length;e++){var i=K1[e],r=t[i];r!=null&&(n[i]=r)}}function Qk(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function tP(n){return Z1(n),A(n.rich,Z1),n}function Z1(n){if(n){n.font=De.makeFont(n);var t=n.align;t==="middle"&&(t="center"),n.align=t==null||Zk[t]?t:"left";var e=n.verticalAlign;e==="center"&&(e="middle"),n.verticalAlign=e==null||qk[e]?e:"top";var i=n.padding;i&&(n.padding=WT(n.padding))}}function q1(n,t){return n==null||t<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function J1(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function Q1(n,t,e){return t==="right"?n-e[1]:t==="center"?n+e[3]/2-e[1]/2:n+e[3]}function tw(n){var t=n.text;return t!=null&&(t+=""),t}function Zg(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var St=jt(),eP=function(n,t,e,i){if(i){var r=St(i);r.dataIndex=e,r.dataType=t,r.seriesIndex=n,r.ssrType="chart",i.type==="group"&&i.traverse(function(s){var a=St(s);a.seriesIndex=n,a.dataIndex=e,a.dataType=t,a.ssrType="chart"})}},ew=1,nw={},MC=jt(),Ay=jt(),LC=0,Ry=1,My=2,pi=["emphasis","blur","select"],iw=["normal","emphasis","blur","select"],nP=10,iP=9,Ps="highlight",Yc="downplay",Jl="select",$c="unselect",Ql="toggleSelect";function fa(n){return n!=null&&n!=="none"}function fd(n,t,e){n.onHoverStateChange&&(n.hoverState||0)!==e&&n.onHoverStateChange(t),n.hoverState=e}function DC(n){fd(n,"emphasis",My)}function kC(n){n.hoverState===My&&fd(n,"normal",LC)}function Ly(n){fd(n,"blur",Ry)}function PC(n){n.hoverState===Ry&&fd(n,"normal",LC)}function rP(n){n.selected=!0}function sP(n){n.selected=!1}function rw(n,t,e){t(n,e)}function tr(n,t,e){rw(n,t,e),n.isGroup&&n.traverse(function(i){rw(i,t,e)})}function aP(n,t,e,i){for(var r=n.style,s={},a=0;a<t.length;a++){var o=t[a],l=r[o];s[o]=l??(i&&i[o])}for(var a=0;a<n.animators.length;a++){var u=n.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(e)<0&&u.targetName==="style"&&u.saveTo(s,t)}return s}function oP(n,t,e,i){var r=e&&bt(e,"select")>=0,s=!1;if(n instanceof Rt){var a=MC(n),o=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(fa(o)||fa(l)){i=i||{};var u=i.style||{};u.fill==="inherit"?(s=!0,i=G({},i),u=G({},u),u.fill=o):!fa(u.fill)&&fa(o)?(s=!0,i=G({},i),u=G({},u),u.fill=b1(o)):!fa(u.stroke)&&fa(l)&&(s||(i=G({},i),u=G({},u)),u.stroke=b1(l)),i.style=u}}if(i&&i.z2==null){s||(i=G({},i));var h=n.z2EmphasisLift;i.z2=n.z2+(h??nP)}return i}function lP(n,t,e){if(e&&e.z2==null){e=G({},e);var i=n.z2SelectLift;e.z2=n.z2+(i??iP)}return e}function uP(n,t,e){var i=bt(n.currentStates,t)>=0,r=n.style.opacity,s=i?null:aP(n,["opacity"],t,{opacity:1});e=e||{};var a=e.style||{};return a.opacity==null&&(e=G({},e),a=G({opacity:i?r:s.opacity*.1},a),e.style=a),e}function qg(n,t){var e=this.states[n];if(this.style){if(n==="emphasis")return oP(this,n,t,e);if(n==="blur")return uP(this,n,e);if(n==="select")return lP(this,n,e)}return e}function hP(n){n.stateProxy=qg;var t=n.getTextContent(),e=n.getTextGuideLine();t&&(t.stateProxy=qg),e&&(e.stateProxy=qg)}function sw(n,t){!BC(n,t)&&!n.__highByOuter&&tr(n,DC)}function aw(n,t){!BC(n,t)&&!n.__highByOuter&&tr(n,kC)}function yf(n,t){n.__highByOuter|=1<<(t||0),tr(n,DC)}function _f(n,t){!(n.__highByOuter&=~(1<<(t||0)))&&tr(n,kC)}function OC(n){tr(n,Ly)}function Dy(n){tr(n,PC)}function NC(n){tr(n,rP)}function FC(n){tr(n,sP)}function BC(n,t){return n.__highDownSilentOnTouch&&t.zrByTouch}function GC(n){var t=n.getModel(),e=[],i=[];t.eachComponent(function(r,s){var a=Ay(s),o=r==="series",l=o?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!o&&i.push(l),a.isBlured&&(l.group.traverse(function(u){PC(u)}),o&&e.push(s)),a.isBlured=!1}),A(i,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(e,!1,t)})}function Bv(n,t,e,i){var r=i.getModel();e=e||"coordinateSystem";function s(u,h){for(var c=0;c<h.length;c++){var f=u.getItemGraphicEl(h[c]);f&&Dy(f)}}if(n!=null&&!(!t||t==="none")){var a=r.getSeriesByIndex(n),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];r.eachSeries(function(u){var h=a===u,c=u.coordinateSystem;c&&c.master&&(c=c.master);var f=c&&o?c===o:h;if(!(e==="series"&&!h||e==="coordinateSystem"&&!f||t==="series"&&h)){var d=i.getViewOfSeriesModel(u);if(d.group.traverse(function(p){p.__highByOuter&&h&&t==="self"||Ly(p)}),Xe(t))s(u.getData(),t);else if(Z(t))for(var g=zt(t),v=0;v<g.length;v++)s(u.getData(g[v]),t[g[v]]);l.push(u),Ay(u).isBlured=!0}}),r.eachComponent(function(u,h){if(u!=="series"){var c=i.getViewOfComponentModel(h);c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!0,r)}})}}function Gv(n,t,e){if(!(n==null||t==null)){var i=e.getModel().getComponent(n,t);if(i){Ay(i).isBlured=!0;var r=e.getViewOfComponentModel(i);!r||!r.focusBlurEnabled||r.group.traverse(function(s){Ly(s)})}}}function cP(n,t,e){var i=n.seriesIndex,r=n.getData(t.dataType);if(r){var s=rh(r,t);s=(V(s)?s[0]:s)||0;var a=r.getItemGraphicEl(s);if(!a)for(var o=r.count(),l=0;!a&&l<o;)a=r.getItemGraphicEl(l++);if(a){var u=St(a);Bv(i,u.focus,u.blurScope,e)}else{var h=n.get(["emphasis","focus"]),c=n.get(["emphasis","blurScope"]);h!=null&&Bv(i,h,c,e)}}}function ky(n,t,e,i){var r={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||t==null||e==null)return r;var s=i.getModel().getComponent(n,t);if(!s)return r;var a=i.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return r;for(var o=a.findHighDownDispatchers(e),l,u=0;u<o.length;u++)if(St(o[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function fP(n,t,e){var i=St(n),r=ky(i.componentMainType,i.componentIndex,i.componentHighDownName,e),s=r.dispatchers,a=r.focusSelf;s?(a&&Gv(i.componentMainType,i.componentIndex,e),A(s,function(o){return sw(o,t)})):(Bv(i.seriesIndex,i.focus,i.blurScope,e),i.focus==="self"&&Gv(i.componentMainType,i.componentIndex,e),sw(n,t))}function dP(n,t,e){GC(e);var i=St(n),r=ky(i.componentMainType,i.componentIndex,i.componentHighDownName,e).dispatchers;r?A(r,function(s){return aw(s,t)}):aw(n,t)}function gP(n,t,e){if(Wv(t)){var i=t.dataType,r=n.getData(i),s=rh(r,t);V(s)||(s=[s]),n[t.type===Ql?"toggleSelect":t.type===Jl?"select":"unselect"](s,i)}}function ow(n){var t=n.getAllData();A(t,function(e){var i=e.data,r=e.type;i.eachItemGraphicEl(function(s,a){n.isSelected(a,r)?NC(s):FC(s)})})}function pP(n){var t=[];return n.eachSeries(function(e){var i=e.getAllData();A(i,function(r){r.data;var s=r.type,a=e.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:e.seriesIndex};s!=null&&(o.dataType=s),t.push(o)}})}),t}function zv(n,t,e){VC(n,!0),tr(n,hP),mP(n,t,e)}function vP(n){VC(n,!1)}function zC(n,t,e,i){i?vP(n):zv(n,t,e)}function mP(n,t,e){var i=St(n);t!=null?(i.focus=t,i.blurScope=e):i.focus&&(i.focus=null)}var lw=["emphasis","blur","select"],yP={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function _P(n,t,e,i){e=e||"itemStyle";for(var r=0;r<lw.length;r++){var s=lw[r],a=t.getModel([s,e]),o=n.ensureState(s);o.style=a[yP[e]]()}}function VC(n,t){var e=t===!1,i=n;n.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!e||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!e)}function Vv(n){return!!(n&&n.__highDownDispatcher)}function wP(n){var t=nw[n];return t==null&&ew<=32&&(t=nw[n]=ew++),t}function Wv(n){var t=n.type;return t===Jl||t===$c||t===Ql}function uw(n){var t=n.type;return t===Ps||t===Yc}function xP(n){var t=MC(n);t.normalFill=n.style.fill,t.normalStroke=n.style.stroke;var e=n.states.select||{};t.selectFill=e.style&&e.style.fill||null,t.selectStroke=e.style&&e.style.stroke||null}var da=yo.CMD,SP=[[],[],[]],hw=Math.sqrt,bP=Math.atan2;function TP(n,t){if(t){var e=n.data,i=n.len(),r,s,a,o,l,u,h=da.M,c=da.C,f=da.L,d=da.R,g=da.A,v=da.Q;for(a=0,o=0;a<i;){switch(r=e[a++],o=a,s=0,r){case h:s=1;break;case f:s=1;break;case c:s=3;break;case v:s=2;break;case g:var p=t[4],m=t[5],y=hw(t[0]*t[0]+t[1]*t[1]),_=hw(t[2]*t[2]+t[3]*t[3]),w=bP(-t[1]/_,t[0]/y);e[a]*=y,e[a++]+=p,e[a]*=_,e[a++]+=m,e[a++]*=y,e[a++]*=_,e[a++]+=w,e[a++]+=w,a+=2,o=a;break;case d:u[0]=e[a++],u[1]=e[a++],An(u,u,t),e[o++]=u[0],e[o++]=u[1],u[0]+=e[a++],u[1]+=e[a++],An(u,u,t),e[o++]=u[0],e[o++]=u[1]}for(l=0;l<s;l++){var S=SP[l];S[0]=e[a++],S[1]=e[a++],An(S,S,t),e[o++]=S[0],e[o++]=S[1]}}n.increaseVersion()}}var Jg=Math.sqrt,zh=Math.sin,Vh=Math.cos,hl=Math.PI;function cw(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Yv(n,t){return(n[0]*t[0]+n[1]*t[1])/(cw(n)*cw(t))}function fw(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(Yv(n,t))}function dw(n,t,e,i,r,s,a,o,l,u,h){var c=l*(hl/180),f=Vh(c)*(n-e)/2+zh(c)*(t-i)/2,d=-1*zh(c)*(n-e)/2+Vh(c)*(t-i)/2,g=f*f/(a*a)+d*d/(o*o);g>1&&(a*=Jg(g),o*=Jg(g));var v=(r===s?-1:1)*Jg((a*a*(o*o)-a*a*(d*d)-o*o*(f*f))/(a*a*(d*d)+o*o*(f*f)))||0,p=v*a*d/o,m=v*-o*f/a,y=(n+e)/2+Vh(c)*p-zh(c)*m,_=(t+i)/2+zh(c)*p+Vh(c)*m,w=fw([1,0],[(f-p)/a,(d-m)/o]),S=[(f-p)/a,(d-m)/o],x=[(-1*f-p)/a,(-1*d-m)/o],b=fw(S,x);if(Yv(S,x)<=-1&&(b=hl),Yv(S,x)>=1&&(b=0),b<0){var T=Math.round(b/hl*1e6)/1e6;b=hl*2+T%2*hl}h.addData(u,y,_,a,o,w,b,c,s)}var CP=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,EP=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function IP(n){var t=new yo;if(!n)return t;var e=0,i=0,r=e,s=i,a,o=yo.CMD,l=n.match(CP);if(!l)return t;for(var u=0;u<l.length;u++){for(var h=l[u],c=h.charAt(0),f=void 0,d=h.match(EP)||[],g=d.length,v=0;v<g;v++)d[v]=parseFloat(d[v]);for(var p=0;p<g;){var m=void 0,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0,b=void 0,T=e,C=i,I=void 0,E=void 0;switch(c){case"l":e+=d[p++],i+=d[p++],f=o.L,t.addData(f,e,i);break;case"L":e=d[p++],i=d[p++],f=o.L,t.addData(f,e,i);break;case"m":e+=d[p++],i+=d[p++],f=o.M,t.addData(f,e,i),r=e,s=i,c="l";break;case"M":e=d[p++],i=d[p++],f=o.M,t.addData(f,e,i),r=e,s=i,c="L";break;case"h":e+=d[p++],f=o.L,t.addData(f,e,i);break;case"H":e=d[p++],f=o.L,t.addData(f,e,i);break;case"v":i+=d[p++],f=o.L,t.addData(f,e,i);break;case"V":i=d[p++],f=o.L,t.addData(f,e,i);break;case"C":f=o.C,t.addData(f,d[p++],d[p++],d[p++],d[p++],d[p++],d[p++]),e=d[p-2],i=d[p-1];break;case"c":f=o.C,t.addData(f,d[p++]+e,d[p++]+i,d[p++]+e,d[p++]+i,d[p++]+e,d[p++]+i),e+=d[p-2],i+=d[p-1];break;case"S":m=e,y=i,I=t.len(),E=t.data,a===o.C&&(m+=e-E[I-4],y+=i-E[I-3]),f=o.C,T=d[p++],C=d[p++],e=d[p++],i=d[p++],t.addData(f,m,y,T,C,e,i);break;case"s":m=e,y=i,I=t.len(),E=t.data,a===o.C&&(m+=e-E[I-4],y+=i-E[I-3]),f=o.C,T=e+d[p++],C=i+d[p++],e+=d[p++],i+=d[p++],t.addData(f,m,y,T,C,e,i);break;case"Q":T=d[p++],C=d[p++],e=d[p++],i=d[p++],f=o.Q,t.addData(f,T,C,e,i);break;case"q":T=d[p++]+e,C=d[p++]+i,e+=d[p++],i+=d[p++],f=o.Q,t.addData(f,T,C,e,i);break;case"T":m=e,y=i,I=t.len(),E=t.data,a===o.Q&&(m+=e-E[I-4],y+=i-E[I-3]),e=d[p++],i=d[p++],f=o.Q,t.addData(f,m,y,e,i);break;case"t":m=e,y=i,I=t.len(),E=t.data,a===o.Q&&(m+=e-E[I-4],y+=i-E[I-3]),e+=d[p++],i+=d[p++],f=o.Q,t.addData(f,m,y,e,i);break;case"A":_=d[p++],w=d[p++],S=d[p++],x=d[p++],b=d[p++],T=e,C=i,e=d[p++],i=d[p++],f=o.A,dw(T,C,e,i,x,b,_,w,S,f,t);break;case"a":_=d[p++],w=d[p++],S=d[p++],x=d[p++],b=d[p++],T=e,C=i,e+=d[p++],i+=d[p++],f=o.A,dw(T,C,e,i,x,b,_,w,S,f,t);break}}(c==="z"||c==="Z")&&(f=o.Z,t.addData(f),e=r,i=s),a=f}return t.toStatic(),t}var WC=function(n){At(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.applyTransform=function(e){},t}(Rt);function YC(n){return n.setData!=null}function $C(n,t){var e=IP(n),i=G({},t);return i.buildPath=function(r){if(YC(r)){r.setData(e.data);var s=r.getContext();s&&r.rebuildPath(s,1)}else{var s=r;e.rebuildPath(s,1)}},i.applyTransform=function(r){TP(e,r),this.dirtyShape()},i}function AP(n,t){return new WC($C(n,t))}function RP(n,t){var e=$C(n,t),i=function(r){At(s,r);function s(a){var o=r.call(this,a)||this;return o.applyTransform=e.applyTransform,o.buildPath=e.buildPath,o}return s}(WC);return i}function MP(n,t){for(var e=[],i=n.length,r=0;r<i;r++){var s=n[r];e.push(s.getUpdatedPathProxy(!0))}var a=new Rt(t);return a.createPathProxy(),a.buildPath=function(o){if(YC(o)){o.appendPath(e);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var LP=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),dd=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new LP},t.prototype.buildPath=function(e,i){e.moveTo(i.cx+i.r,i.cy),e.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t}(Rt);dd.prototype.type="circle";var DP=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Py=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new DP},t.prototype.buildPath=function(e,i){var r=.5522848,s=i.cx,a=i.cy,o=i.rx,l=i.ry,u=o*r,h=l*r;e.moveTo(s-o,a),e.bezierCurveTo(s-o,a-h,s-u,a-l,s,a-l),e.bezierCurveTo(s+u,a-l,s+o,a-h,s+o,a),e.bezierCurveTo(s+o,a+h,s+u,a+l,s,a+l),e.bezierCurveTo(s-u,a+l,s-o,a+h,s-o,a),e.closePath()},t}(Rt);Py.prototype.type="ellipse";var HC=Math.PI,Qg=HC*2,os=Math.sin,ga=Math.cos,kP=Math.acos,pe=Math.atan2,gw=Math.abs,tu=Math.sqrt,Pl=Math.max,ni=Math.min,Fn=1e-4;function PP(n,t,e,i,r,s,a,o){var l=e-n,u=i-t,h=a-r,c=o-s,f=c*l-h*u;if(!(f*f<Fn))return f=(h*(t-s)-c*(n-r))/f,[n+f*l,t+f*u]}function Wh(n,t,e,i,r,s,a){var o=n-e,l=t-i,u=(a?s:-s)/tu(o*o+l*l),h=u*l,c=-u*o,f=n+h,d=t+c,g=e+h,v=i+c,p=(f+g)/2,m=(d+v)/2,y=g-f,_=v-d,w=y*y+_*_,S=r-s,x=f*v-g*d,b=(_<0?-1:1)*tu(Pl(0,S*S*w-x*x)),T=(x*_-y*b)/w,C=(-x*y-_*b)/w,I=(x*_+y*b)/w,E=(-x*y+_*b)/w,R=T-p,L=C-m,M=I-p,k=E-m;return R*R+L*L>M*M+k*k&&(T=I,C=E),{cx:T,cy:C,x0:-h,y0:-c,x1:T*(r/S-1),y1:C*(r/S-1)}}function OP(n){var t;if(V(n)){var e=n.length;if(!e)return n;e===1?t=[n[0],n[0],0,0]:e===2?t=[n[0],n[0],n[1],n[1]]:e===3?t=n.concat(n[2]):t=n}else t=[n,n,n,n];return t}function NP(n,t){var e,i=Pl(t.r,0),r=Pl(t.r0||0,0),s=i>0,a=r>0;if(!(!s&&!a)){if(s||(i=r,r=0),r>i){var o=i;i=r,r=o}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var h=t.cx,c=t.cy,f=!!t.clockwise,d=gw(u-l),g=d>Qg&&d%Qg;if(g>Fn&&(d=g),!(i>Fn))n.moveTo(h,c);else if(d>Qg-Fn)n.moveTo(h+i*ga(l),c+i*os(l)),n.arc(h,c,i,l,u,!f),r>Fn&&(n.moveTo(h+r*ga(u),c+r*os(u)),n.arc(h,c,r,u,l,f));else{var v=void 0,p=void 0,m=void 0,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0,b=void 0,T=void 0,C=void 0,I=void 0,E=void 0,R=void 0,L=void 0,M=void 0,k=i*ga(l),D=i*os(l),z=r*ga(u),O=r*os(u),B=d>Fn;if(B){var F=t.cornerRadius;F&&(e=OP(F),v=e[0],p=e[1],m=e[2],y=e[3]);var W=gw(i-r)/2;if(_=ni(W,m),w=ni(W,y),S=ni(W,v),x=ni(W,p),C=b=Pl(_,w),I=T=Pl(S,x),(b>Fn||T>Fn)&&(E=i*ga(u),R=i*os(u),L=r*ga(l),M=r*os(l),d<HC)){var H=PP(k,D,L,M,E,R,z,O);if(H){var ct=k-H[0],N=D-H[1],Vt=E-H[0],Bt=R-H[1],Ot=1/os(kP((ct*Vt+N*Bt)/(tu(ct*ct+N*N)*tu(Vt*Vt+Bt*Bt)))/2),ue=tu(H[0]*H[0]+H[1]*H[1]);C=ni(b,(i-ue)/(Ot+1)),I=ni(T,(r-ue)/(Ot-1))}}}if(!B)n.moveTo(h+k,c+D);else if(C>Fn){var Wt=ni(m,C),_t=ni(y,C),K=Wh(L,M,k,D,i,Wt,f),rt=Wh(E,R,z,O,i,_t,f);n.moveTo(h+K.cx+K.x0,c+K.cy+K.y0),C<b&&Wt===_t?n.arc(h+K.cx,c+K.cy,C,pe(K.y0,K.x0),pe(rt.y0,rt.x0),!f):(Wt>0&&n.arc(h+K.cx,c+K.cy,Wt,pe(K.y0,K.x0),pe(K.y1,K.x1),!f),n.arc(h,c,i,pe(K.cy+K.y1,K.cx+K.x1),pe(rt.cy+rt.y1,rt.cx+rt.x1),!f),_t>0&&n.arc(h+rt.cx,c+rt.cy,_t,pe(rt.y1,rt.x1),pe(rt.y0,rt.x0),!f))}else n.moveTo(h+k,c+D),n.arc(h,c,i,l,u,!f);if(!(r>Fn)||!B)n.lineTo(h+z,c+O);else if(I>Fn){var Wt=ni(v,I),_t=ni(p,I),K=Wh(z,O,E,R,r,-_t,f),rt=Wh(k,D,L,M,r,-Wt,f);n.lineTo(h+K.cx+K.x0,c+K.cy+K.y0),I<T&&Wt===_t?n.arc(h+K.cx,c+K.cy,I,pe(K.y0,K.x0),pe(rt.y0,rt.x0),!f):(_t>0&&n.arc(h+K.cx,c+K.cy,_t,pe(K.y0,K.x0),pe(K.y1,K.x1),!f),n.arc(h,c,r,pe(K.cy+K.y1,K.cx+K.x1),pe(rt.cy+rt.y1,rt.cx+rt.x1),f),Wt>0&&n.arc(h+rt.cx,c+rt.cy,Wt,pe(rt.y1,rt.x1),pe(rt.y0,rt.x0),!f))}else n.lineTo(h+z,c+O),n.arc(h,c,r,u,l,f)}n.closePath()}}}var FP=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Go=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new FP},t.prototype.buildPath=function(e,i){NP(e,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Rt);Go.prototype.type="sector";var BP=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),Oy=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new BP},t.prototype.buildPath=function(e,i){var r=i.cx,s=i.cy,a=Math.PI*2;e.moveTo(r+i.r,s),e.arc(r,s,i.r,0,a,!1),e.moveTo(r+i.r0,s),e.arc(r,s,i.r0,0,a,!0)},t}(Rt);Oy.prototype.type="ring";function GP(n,t,e,i){var r=[],s=[],a=[],o=[],l,u,h,c;if(i){h=[1/0,1/0],c=[-1/0,-1/0];for(var f=0,d=n.length;f<d;f++)za(h,h,n[f]),Va(c,c,n[f]);za(h,h,i[0]),Va(c,c,i[1])}for(var f=0,d=n.length;f<d;f++){var g=n[f];if(e)l=n[f?f-1:d-1],u=n[(f+1)%d];else if(f===0||f===d-1){r.push(C2(n[f]));continue}else l=n[f-1],u=n[f+1];UT(s,u,l),mg(s,s,t);var v=wv(g,l),p=wv(g,u),m=v+p;m!==0&&(v/=m,p/=m),mg(a,s,-v),mg(o,s,p);var y=s1([],g,a),_=s1([],g,o);i&&(Va(y,y,h),za(y,y,c),Va(_,_,h),za(_,_,c)),r.push(y),r.push(_)}return e&&r.push(r.shift()),r}function UC(n,t,e){var i=t.smooth,r=t.points;if(r&&r.length>=2){if(i){var s=GP(r,i,e,t.smoothConstraint);n.moveTo(r[0][0],r[0][1]);for(var a=r.length,o=0;o<(e?a:a-1);o++){var l=s[o*2],u=s[o*2+1],h=r[(o+1)%a];n.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{n.moveTo(r[0][0],r[0][1]);for(var o=1,c=r.length;o<c;o++)n.lineTo(r[o][0],r[o][1])}e&&n.closePath()}}var zP=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),Ny=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new zP},t.prototype.buildPath=function(e,i){UC(e,i,!0)},t}(Rt);Ny.prototype.type="polygon";var VP=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),Fy=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new VP},t.prototype.buildPath=function(e,i){UC(e,i,!1)},t}(Rt);Fy.prototype.type="polyline";var WP={},YP=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),Ki=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new YP},t.prototype.buildPath=function(e,i){var r,s,a,o;if(this.subPixelOptimize){var l=AC(WP,i,this.style);r=l.x1,s=l.y1,a=l.x2,o=l.y2}else r=i.x1,s=i.y1,a=i.x2,o=i.y2;var u=i.percent;u!==0&&(e.moveTo(r,s),u<1&&(a=r*(1-u)+a*u,o=s*(1-u)+o*u),e.lineTo(a,o))},t.prototype.pointAt=function(e){var i=this.shape;return[i.x1*(1-e)+i.x2*e,i.y1*(1-e)+i.y2*e]},t}(Rt);Ki.prototype.type="line";var ke=[],$P=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function pw(n,t,e){var i=n.cpx2,r=n.cpy2;return i!=null||r!=null?[(e?v1:Ee)(n.x1,n.cpx1,n.cpx2,n.x2,t),(e?v1:Ee)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(e?m1:Fe)(n.x1,n.cpx1,n.x2,t),(e?m1:Fe)(n.y1,n.cpy1,n.y2,t)]}var gd=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new $P},t.prototype.buildPath=function(e,i){var r=i.x1,s=i.y1,a=i.x2,o=i.y2,l=i.cpx1,u=i.cpy1,h=i.cpx2,c=i.cpy2,f=i.percent;f!==0&&(e.moveTo(r,s),h==null||c==null?(f<1&&(cf(r,l,a,f,ke),l=ke[1],a=ke[2],cf(s,u,o,f,ke),u=ke[1],o=ke[2]),e.quadraticCurveTo(l,u,a,o)):(f<1&&(hf(r,l,h,a,f,ke),l=ke[1],h=ke[2],a=ke[3],hf(s,u,c,o,f,ke),u=ke[1],c=ke[2],o=ke[3]),e.bezierCurveTo(l,u,h,c,a,o)))},t.prototype.pointAt=function(e){return pw(this.shape,e,!1)},t.prototype.tangentAt=function(e){var i=pw(this.shape,e,!0);return gy(i,i)},t}(Rt);gd.prototype.type="bezier-curve";var HP=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),pd=function(n){At(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new HP},t.prototype.buildPath=function(e,i){var r=i.cx,s=i.cy,a=Math.max(i.r,0),o=i.startAngle,l=i.endAngle,u=i.clockwise,h=Math.cos(o),c=Math.sin(o);e.moveTo(h*a+r,c*a+s),e.arc(r,s,a,o,l,!u)},t}(Rt);pd.prototype.type="arc";var UP=function(n){At(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="compound",e}return t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,i=this.shapeChanged(),r=0;r<e.length;r++)i=i||e[r].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],i=this.getGlobalScale(),r=0;r<e.length;r++)e[r].path||e[r].createPathProxy(),e[r].path.setScale(i[0],i[1],e[r].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,i){for(var r=i.paths||[],s=0;s<r.length;s++)r[s].buildPath(e,r[s].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],i=0;i<e.length;i++)e[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Rt.prototype.getBoundingRect.call(this)},t}(Rt),XC=function(){function n(t){this.colorStops=t||[]}return n.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},n}(),XP=function(n){At(t,n);function t(e,i,r,s,a,o){var l=n.call(this,a)||this;return l.x=e??0,l.y=i??0,l.x2=r??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return t}(XC),KP=function(n){At(t,n);function t(e,i,r,s,a){var o=n.call(this,s)||this;return o.x=e??.5,o.y=i??.5,o.r=r??.5,o.type="radial",o.global=a||!1,o}return t}(XC),ls=[0,0],us=[0,0],Yh=new Lt,$h=new Lt,wf=function(){function n(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new Lt;for(var i=0;i<2;i++)this._axes[i]=new Lt;t&&this.fromBoundingRect(t,e)}return n.prototype.fromBoundingRect=function(t,e){var i=this._corners,r=this._axes,s=t.x,a=t.y,o=s+t.width,l=a+t.height;if(i[0].set(s,a),i[1].set(o,a),i[2].set(o,l),i[3].set(s,l),e)for(var u=0;u<4;u++)i[u].transform(e);Lt.sub(r[0],i[1],i[0]),Lt.sub(r[1],i[3],i[0]),r[0].normalize(),r[1].normalize();for(var u=0;u<2;u++)this._origin[u]=r[u].dot(i[0])},n.prototype.intersect=function(t,e){var i=!0,r=!e;return Yh.set(1/0,1/0),$h.set(0,0),!this._intersectCheckOneSide(this,t,Yh,$h,r,1)&&(i=!1,r)||!this._intersectCheckOneSide(t,this,Yh,$h,r,-1)&&(i=!1,r)||r||Lt.copy(e,i?Yh:$h),i},n.prototype._intersectCheckOneSide=function(t,e,i,r,s,a){for(var o=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,ls),this._getProjMinMaxOnAxis(l,e._corners,us),ls[1]<us[0]||ls[0]>us[1]){if(o=!1,s)return o;var h=Math.abs(us[0]-ls[1]),c=Math.abs(ls[0]-us[1]);Math.min(h,c)>r.len()&&(h<c?Lt.scale(r,u,-h*a):Lt.scale(r,u,c*a))}else if(i){var h=Math.abs(us[0]-ls[1]),c=Math.abs(ls[0]-us[1]);Math.min(h,c)<i.len()&&(h<c?Lt.scale(i,u,h*a):Lt.scale(i,u,-c*a))}}return o},n.prototype._getProjMinMaxOnAxis=function(t,e,i){for(var r=this._axes[t],s=this._origin,a=e[0].dot(r)+s[t],o=a,l=a,u=1;u<e.length;u++){var h=e[u].dot(r)+s[t];o=Math.min(h,o),l=Math.max(h,l)}i[0]=o,i[1]=l},n}(),jP=[],ZP=function(n){At(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return t.prototype.traverse=function(e,i){e.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,i){i?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,i){i=i||!1;for(var r=0;r<e.length;r++)this.addDisplayable(e[r],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var i=this._cursor;i<this._displayables.length;i++)e&&e(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)e&&e(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var i=this._displayables[e];i.parent=this,i.update(),i.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var i=this._temporaryDisplayables[e];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Tt(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var r=this._displayables[i],s=r.getBoundingRect().clone();r.needLocalTransform()&&s.applyTransform(r.getLocalTransform(jP)),e.union(s)}this._rect=e}return this._rect},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),s=this.getBoundingRect();if(s.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(e,i))return!0}return!1},t}(ah),qP=jt();function JP(n,t,e,i,r){var s;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();s=a&&a.animation}var o=t&&t.isAnimationEnabled(),l=n==="update";if(o){var u=void 0,h=void 0,c=void 0;i?(u=st(i.duration,200),h=st(i.easing,"cubicOut"),c=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),c=t.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(u=s.duration),s.easing!=null&&(h=s.easing),s.delay!=null&&(c=s.delay)),lt(c)&&(c=c(e,r)),lt(u)&&(u=u(e));var f={duration:u||0,delay:c,easing:h};return f}else return null}function By(n,t,e,i,r,s,a){var o=!1,l;lt(r)?(a=s,s=r,r=null):Z(r)&&(s=r.cb,a=r.during,o=r.isFrom,l=r.removeOpt,r=r.dataIndex);var u=n==="leave";u||t.stopAnimation("leave");var h=JP(n,i,r,u?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,r):null);if(h&&h.duration>0){var c=h.duration,f=h.delay,d=h.easing,g={duration:c,delay:f||0,easing:d,done:s,force:!!s||!!a,setToFinal:!u,scope:n,during:a};o?t.animateFrom(e,g):t.animateTo(e,g)}else t.stopAnimation(),!o&&t.attr(e),a&&a(1),s&&s()}function vi(n,t,e,i,r,s){By("update",n,t,e,i,r,s)}function _o(n,t,e,i,r,s){By("enter",n,t,e,i,r,s)}function eu(n){if(!n.__zr)return!0;for(var t=0;t<n.animators.length;t++){var e=n.animators[t];if(e.scope==="leave")return!0}return!1}function KC(n,t,e,i,r,s){eu(n)||By("leave",n,t,e,i,r,s)}function vw(n,t,e,i){n.removeTextContent(),n.removeTextGuideLine(),KC(n,{style:{opacity:0}},t,e,i)}function $v(n,t,e){function i(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(r){r.isGroup||vw(r,t,e,i)}):vw(n,t,e,i)}function QP(n){qP(n).oldStyle=n.style}var xf=Math.max,Sf=Math.min,Hv={};function tO(n){return Rt.extend(n)}var eO=RP;function nO(n,t){return eO(n,t)}function Kn(n,t){Hv[n]=t}function iO(n){if(Hv.hasOwnProperty(n))return Hv[n]}function Gy(n,t,e,i){var r=AP(n,t);return e&&(i==="center"&&(e=ZC(e,r.getBoundingRect())),qC(r,e)),r}function jC(n,t,e){var i=new Xs({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(r){if(e==="center"){var s={width:r.width,height:r.height};i.setStyle(ZC(t,s))}}});return i}function ZC(n,t){var e=t.width/t.height,i=n.height*e,r;i<=n.width?r=n.height:(i=n.width,r=i/e);var s=n.x+n.width/2,a=n.y+n.height/2;return{x:s-i/2,y:a-r/2,width:i,height:r}}var rO=MP;function qC(n,t){if(n.applyTransform){var e=n.getBoundingRect(),i=e.calculateTransform(t);n.applyTransform(i)}}function xu(n,t){return AC(n,n,{lineWidth:t}),n}function sO(n){return RC(n.shape,n.shape,n.style),n}var aO=bs;function oO(n,t){for(var e=vy([]);n&&n!==t;)ro(e,n.getLocalTransform(),e),n=n.parent;return e}function zy(n,t,e){return t&&!Xe(t)&&(t=xy.getLocalTransform(t)),e&&(t=yy([],t)),An([],n,t)}function lO(n,t,e){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),r=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),s=[n==="left"?-i:n==="right"?i:0,n==="top"?-r:n==="bottom"?r:0];return s=zy(s,t,e),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function mw(n){return!n.isGroup}function uO(n){return n.shape!=null}function JC(n,t,e){if(!n||!t)return;function i(a){var o={};return a.traverse(function(l){mw(l)&&l.anid&&(o[l.anid]=l)}),o}function r(a){var o={x:a.x,y:a.y,rotation:a.rotation};return uO(a)&&(o.shape=G({},a.shape)),o}var s=i(n);t.traverse(function(a){if(mw(a)&&a.anid){var o=s[a.anid];if(o){var l=r(a);a.attr(r(o)),vi(a,l,e,St(a).dataIndex)}}})}function hO(n,t){return j(n,function(e){var i=e[0];i=xf(i,t.x),i=Sf(i,t.x+t.width);var r=e[1];return r=xf(r,t.y),r=Sf(r,t.y+t.height),[i,r]})}function cO(n,t){var e=xf(n.x,t.x),i=Sf(n.x+n.width,t.x+t.width),r=xf(n.y,t.y),s=Sf(n.y+n.height,t.y+t.height);if(i>=e&&s>=r)return{x:e,y:r,width:i-e,height:s-r}}function Vy(n,t,e){var i=G({rectHover:!0},t),r=i.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(r.image=n.slice(8),Pt(r,e),new Xs(i)):Gy(n.replace("path://",""),i,e,"center")}function fO(n,t,e,i,r){for(var s=0,a=r[r.length-1];s<r.length;s++){var o=r[s];if(QC(n,t,e,i,o[0],o[1],a[0],a[1]))return!0;a=o}}function QC(n,t,e,i,r,s,a,o){var l=e-n,u=i-t,h=a-r,c=o-s,f=tp(h,c,l,u);if(dO(f))return!1;var d=n-r,g=t-s,v=tp(d,g,l,u)/f;if(v<0||v>1)return!1;var p=tp(d,g,h,c)/f;return!(p<0||p>1)}function tp(n,t,e,i){return n*i-e*t}function dO(n){return n<=1e-6&&n>=-1e-6}function Wy(n){var t=n.itemTooltipOption,e=n.componentModel,i=n.itemName,r=U(t)?{formatter:t}:t,s=e.mainType,a=e.componentIndex,o={componentType:s,name:i,$vars:["name"]};o[s+"Index"]=a;var l=n.formatterParamsExtra;l&&A(zt(l),function(h){vo(o,h)||(o[h]=l[h],o.$vars.push(h))});var u=St(n.el);u.componentMainType=s,u.componentIndex=a,u.tooltipConfig={name:i,option:Pt({content:i,encodeHTMLContent:!0,formatterParams:o},r)}}function yw(n,t){var e;n.isGroup&&(e=t(n)),e||n.traverse(t)}function vd(n,t){if(n)if(V(n))for(var e=0;e<n.length;e++)yw(n[e],t);else yw(n,t)}Kn("circle",dd);Kn("ellipse",Py);Kn("sector",Go);Kn("ring",Oy);Kn("polygon",Ny);Kn("polyline",Fy);Kn("rect",ne);Kn("line",Ki);Kn("bezierCurve",gd);Kn("arc",pd);const gO=Object.freeze(Object.defineProperty({__proto__:null,Arc:pd,BezierCurve:gd,BoundingRect:Tt,Circle:dd,CompoundPath:UP,Ellipse:Py,Group:Le,Image:Xs,IncrementalDisplayable:ZP,Line:Ki,LinearGradient:XP,OrientedBoundingRect:wf,Path:Rt,Point:Lt,Polygon:Ny,Polyline:Fy,RadialGradient:KP,Rect:ne,Ring:Oy,Sector:Go,Text:De,applyTransform:zy,clipPointsByRect:hO,clipRectByRect:cO,createIcon:Vy,extendPath:nO,extendShape:tO,getShapeClass:iO,getTransform:oO,groupTransition:JC,initProps:_o,isElementRemoved:eu,lineLineIntersect:QC,linePolygonIntersect:fO,makeImage:jC,makePath:Gy,mergePath:rO,registerShape:Kn,removeElement:KC,removeElementWithFadeOut:$v,resizePath:qC,setTooltipConfig:Wy,subPixelOptimize:aO,subPixelOptimizeLine:xu,subPixelOptimizeRect:sO,transformDirection:lO,traverseElements:vd,updateProps:vi},Symbol.toStringTag,{value:"Module"}));var md={};function pO(n,t){for(var e=0;e<pi.length;e++){var i=pi[e],r=t[i],s=n.ensureState(i);s.style=s.style||{},s.style.text=r}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:t.normal}),n.useStates(a,!0)}function _w(n,t,e){var i=n.labelFetcher,r=n.labelDataIndex,s=n.labelDimIndex,a=t.normal,o;i&&(o=i.getFormattedLabel(r,"normal",null,s,a&&a.get("formatter"),e!=null?{interpolatedValue:e}:null)),o==null&&(o=lt(n.defaultText)?n.defaultText(r,n,e):n.defaultText);for(var l={normal:o},u=0;u<pi.length;u++){var h=pi[u],c=t[h];l[h]=st(i?i.getFormattedLabel(r,h,null,s,c&&c.get("formatter")):null,o)}return l}function Yy(n,t,e,i){e=e||md;for(var r=n instanceof De,s=!1,a=0;a<iw.length;a++){var o=t[iw[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=r?n:n.getTextContent();if(s){r||(l||(l=new De,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var u=_w(e,t),h=t.normal,c=!!h.getShallow("show"),f=Fr(h,i,e,!1,!r);f.text=u.normal,r||n.setTextConfig(ww(h,e,!1));for(var a=0;a<pi.length;a++){var d=pi[a],o=t[d];if(o){var g=l.ensureState(d),v=!!st(o.getShallow("show"),c);if(v!==c&&(g.ignore=!v),g.style=Fr(o,i,e,!0,!r),g.style.text=u[d],!r){var p=n.ensureState(d);p.textConfig=ww(o,e,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!c,l.useStyle(f),l.dirty(),e.enableTextSetter&&(Hy(l).setLabelText=function(m){var y=_w(e,t,m);pO(l,y)})}else l&&(l.ignore=!0);n.dirty()}function $y(n,t){t=t||"label";for(var e={normal:n.getModel(t)},i=0;i<pi.length;i++){var r=pi[i];e[r]=n.getModel([r,t])}return e}function Fr(n,t,e,i,r){var s={};return vO(s,n,e,i,r),t&&G(s,t),s}function ww(n,t,e){t=t||{};var i={},r,s=n.getShallow("rotate"),a=st(n.getShallow("distance"),e?null:5),o=n.getShallow("offset");return r=n.getShallow("position")||(e?null:"inside"),r==="outside"&&(r=t.defaultOutsidePosition||"top"),r!=null&&(i.position=r),o!=null&&(i.offset=o),s!=null&&(s*=Math.PI/180,i.rotation=s),a!=null&&(i.distance=a),i.outsideFill=n.get("color")==="inherit"?t.inheritColor||null:"auto",i}function vO(n,t,e,i,r){e=e||md;var s=t.ecModel,a=s&&s.option.textStyle,o=mO(t),l;if(o){l={};for(var u in o)if(o.hasOwnProperty(u)){var h=t.getModel(["rich",u]);Tw(l[u]={},h,a,e,i,r,!1,!0)}}l&&(n.rich=l);var c=t.get("overflow");c&&(n.overflow=c);var f=t.get("minMargin");f!=null&&(n.margin=f),Tw(n,t,a,e,i,r,!0,!1)}function mO(n){for(var t;n&&n!==n.ecModel;){var e=(n.option||md).rich;if(e){t=t||{};for(var i=zt(e),r=0;r<i.length;r++){var s=i[r];t[s]=1}}n=n.parentModel}return t}var xw=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Sw=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],bw=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Tw(n,t,e,i,r,s,a,o){e=!r&&e||md;var l=i&&i.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),c=st(t.getShallow("opacity"),e.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),s||(u=u||e.color,h=h||e.textBorderColor),u!=null&&(n.fill=u),h!=null&&(n.stroke=h);var f=st(t.getShallow("textBorderWidth"),e.textBorderWidth);f!=null&&(n.lineWidth=f);var d=st(t.getShallow("textBorderType"),e.textBorderType);d!=null&&(n.lineDash=d);var g=st(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);g!=null&&(n.lineDashOffset=g),!r&&c==null&&!o&&(c=i&&i.defaultOpacity),c!=null&&(n.opacity=c),!r&&!s&&n.fill==null&&i.inheritColor&&(n.fill=i.inheritColor);for(var v=0;v<xw.length;v++){var p=xw[v],m=st(t.getShallow(p),e[p]);m!=null&&(n[p]=m)}for(var v=0;v<Sw.length;v++){var p=Sw[v],m=t.getShallow(p);m!=null&&(n[p]=m)}if(n.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(n.verticalAlign=y)}if(!a||!i.disableBox){for(var v=0;v<bw.length;v++){var p=bw[v],m=t.getShallow(p);m!=null&&(n[p]=m)}var _=t.getShallow("borderType");_!=null&&(n.borderDash=_),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function yO(n,t){var e=t&&t.getModel("textStyle");return ai([n.fontStyle||e&&e.getShallow("fontStyle")||"",n.fontWeight||e&&e.getShallow("fontWeight")||"",(n.fontSize||e&&e.getShallow("fontSize")||12)+"px",n.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Hy=jt();function _O(n,t,e,i){if(n){var r=Hy(n);r.prevValue=r.value,r.value=e;var s=t.normal;r.valueAnimation=s.get("valueAnimation"),r.valueAnimation&&(r.precision=s.get("precision"),r.defaultInterpolatedText=i,r.statesModels=t)}}var wO=["textStyle","color"],ep=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],np=new De,xO=function(){function n(){}return n.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(wO):null)},n.prototype.getFont=function(){return yO({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<ep.length;i++)e[ep[i]]=this.getShallow(ep[i]);return np.useStyle(e),np.update(),np.getBoundingRect()},n}(),tE=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],SO=wu(tE),bO=function(){function n(){}return n.prototype.getLineStyle=function(t){return SO(this,t)},n}(),eE=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],TO=wu(eE),CO=function(){function n(){}return n.prototype.getItemStyle=function(t,e){return TO(this,t,e)},n}(),Xt=function(){function n(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}return n.prototype.init=function(t,e,i){},n.prototype.mergeOption=function(t,e){mt(this.option,t,!0)},n.prototype.get=function(t,e){return t==null?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},n.prototype.getShallow=function(t,e){var i=this.option,r=i==null?i:i[t];if(r==null&&!e){var s=this.parentModel;s&&(r=s.getShallow(t))}return r},n.prototype.getModel=function(t,e){var i=t!=null,r=i?this.parsePath(t):null,s=i?this._doGet(r):this.option;return e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new n(s,e,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var t=this.constructor;return new t(ut(this.option))},n.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},n.prototype.resolveParentPath=function(t){return t},n.prototype.isAnimationEnabled=function(){if(!tt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(t,e){var i=this.option;if(!t)return i;for(var r=0;r<t.length&&!(t[r]&&(i=i&&typeof i=="object"?i[t[r]]:null,i==null));r++);return i==null&&e&&(i=e._doGet(this.resolveParentPath(t),e.parentModel)),i},n}();Iy(Xt);lk(Xt);Xn(Xt,bO);Xn(Xt,CO);Xn(Xt,dk);Xn(Xt,xO);var EO=Math.round(Math.random()*10);function yd(n){return[n||"",EO++].join("_")}function IO(n){var t={};n.registerSubTypeDefaulter=function(e,i){var r=oi(e);t[r.main]=i},n.determineSubType=function(e,i){var r=i.type;if(!r){var s=oi(e).main;n.hasSubTypes(e)&&t[s]&&(r=t[s](i))}return r}}function AO(n,t){n.topologicalTravel=function(s,a,o,l){if(!s.length)return;var u=e(a),h=u.graph,c=u.noEntryList,f={};for(A(s,function(y){f[y]=!0});c.length;){var d=c.pop(),g=h[d],v=!!f[d];v&&(o.call(l,d,g.originalDeps.slice()),delete f[d]),A(g.successor,v?m:p)}A(f,function(){var y="";throw new Error(y)});function p(y){h[y].entryCount--,h[y].entryCount===0&&c.push(y)}function m(y){f[y]=!0,p(y)}};function e(s){var a={},o=[];return A(s,function(l){var u=i(a,l),h=u.originalDeps=t(l),c=r(h,s);u.entryCount=c.length,u.entryCount===0&&o.push(l),A(c,function(f){bt(u.predecessor,f)<0&&u.predecessor.push(f);var d=i(a,f);bt(d.successor,f)<0&&d.successor.push(l)})}),{graph:a,noEntryList:o}}function i(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function r(s,a){var o=[];return A(s,function(l){bt(a,l)>=0&&o.push(l)}),o}}function nE(n,t){return mt(mt({},n,!0),t,!0)}const RO={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},MO={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var bf="ZH",Uy="EN",ao=Uy,Hc={},Xy={},iE=tt.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||ao).toUpperCase();return n.indexOf(bf)>-1?bf:ao}():ao;function rE(n,t){n=n.toUpperCase(),Xy[n]=new Xt(t),Hc[n]=t}function LO(n){if(U(n)){var t=Hc[n.toUpperCase()]||{};return n===bf||n===Uy?ut(t):mt(ut(t),ut(Hc[ao]),!1)}else return mt(ut(n),ut(Hc[ao]),!1)}function DO(n){return Xy[n]}function kO(){return Xy[ao]}rE(Uy,RO);rE(bf,MO);var Ky=1e3,jy=Ky*60,nu=jy*60,bn=nu*24,Cw=bn*365,Ol={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Hh="{yyyy}-{MM}-{dd}",Ew={year:"{yyyy}",month:"{yyyy}-{MM}",day:Hh,hour:Hh+" "+Ol.hour,minute:Hh+" "+Ol.minute,second:Hh+" "+Ol.second,millisecond:Ol.none},ip=["year","month","day","hour","minute","second","millisecond"],sE=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function or(n,t){return n+="","0000".substr(0,t-n.length)+n}function oo(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function PO(n){return n===oo(n)}function OO(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function _d(n,t,e,i){var r=Xi(n),s=r[Zy(e)](),a=r[lo(e)]()+1,o=Math.floor((a-1)/3)+1,l=r[wd(e)](),u=r["get"+(e?"UTC":"")+"Day"](),h=r[Su(e)](),c=(h-1)%12+1,f=r[xd(e)](),d=r[Sd(e)](),g=r[bd(e)](),v=h>=12?"pm":"am",p=v.toUpperCase(),m=i instanceof Xt?i:DO(i||iE)||kO(),y=m.getModel("time"),_=y.get("month"),w=y.get("monthAbbr"),S=y.get("dayOfWeek"),x=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,v+"").replace(/{A}/g,p+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,or(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,_[a-1]).replace(/{MMM}/g,w[a-1]).replace(/{MM}/g,or(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,or(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[u]).replace(/{ee}/g,x[u]).replace(/{e}/g,u+"").replace(/{HH}/g,or(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,or(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,or(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,or(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,or(g,3)).replace(/{S}/g,g+"")}function NO(n,t,e,i,r){var s=null;if(U(e))s=e;else if(lt(e))s=e(n.value,t,{level:n.level});else{var a=G({},Ol);if(n.level>0)for(var o=0;o<ip.length;++o)a[ip[o]]="{primary|"+a[ip[o]]+"}";var l=e?e.inherit===!1?e:Pt(e,a):a,u=aE(n.value,r);if(l[u])s=l[u];else if(l.inherit){for(var h=sE.indexOf(u),o=h-1;o>=0;--o)if(l[u]){s=l[u];break}s=s||a.none}if(V(s)){var c=n.level==null?0:n.level>=0?n.level:s.length+n.level;c=Math.min(c,s.length-1),s=s[c]}}return _d(new Date(n.value),s,r,i)}function aE(n,t){var e=Xi(n),i=e[lo(t)]()+1,r=e[wd(t)](),s=e[Su(t)](),a=e[xd(t)](),o=e[Sd(t)](),l=e[bd(t)](),u=l===0,h=u&&o===0,c=h&&a===0,f=c&&s===0,d=f&&r===1,g=d&&i===1;return g?"year":d?"month":f?"day":c?"hour":h?"minute":u?"second":"millisecond"}function Iw(n,t,e){var i=$t(n)?Xi(n):n;switch(t=t||aE(n,e),t){case"year":return i[Zy(e)]();case"half-year":return i[lo(e)]()>=6?1:0;case"quarter":return Math.floor((i[lo(e)]()+1)/4);case"month":return i[lo(e)]();case"day":return i[wd(e)]();case"half-day":return i[Su(e)]()/24;case"hour":return i[Su(e)]();case"minute":return i[xd(e)]();case"second":return i[Sd(e)]();case"millisecond":return i[bd(e)]()}}function Zy(n){return n?"getUTCFullYear":"getFullYear"}function lo(n){return n?"getUTCMonth":"getMonth"}function wd(n){return n?"getUTCDate":"getDate"}function Su(n){return n?"getUTCHours":"getHours"}function xd(n){return n?"getUTCMinutes":"getMinutes"}function Sd(n){return n?"getUTCSeconds":"getSeconds"}function bd(n){return n?"getUTCMilliseconds":"getMilliseconds"}function FO(n){return n?"setUTCFullYear":"setFullYear"}function oE(n){return n?"setUTCMonth":"setMonth"}function lE(n){return n?"setUTCDate":"setDate"}function uE(n){return n?"setUTCHours":"setHours"}function hE(n){return n?"setUTCMinutes":"setMinutes"}function cE(n){return n?"setUTCSeconds":"setSeconds"}function fE(n){return n?"setUTCMilliseconds":"setMilliseconds"}function dE(n){if(!WD(n))return U(n)?n:"-";var t=(n+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function gE(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(e,i){return i.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var Td=WT;function Uv(n,t,e){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(h){return h&&ai(h)?h:"-"}function s(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var a=t==="time",o=n instanceof Date;if(a||o){var l=a?Xi(n):n;if(isNaN(+l)){if(o)return"-"}else return _d(l,i,e)}if(t==="ordinal")return mv(n)?r(n):$t(n)&&s(n)?n+"":"-";var u=vf(n);return s(u)?dE(u):mv(n)?r(n):typeof n=="boolean"?n+"":"-"}var Aw=["a","b","c","d","e","f","g"],rp=function(n,t){return"{"+n+(t??"")+"}"};function pE(n,t,e){V(t)||(t=[t]);var i=t.length;if(!i)return"";for(var r=t[0].$vars||[],s=0;s<r.length;s++){var a=Aw[s];n=n.replace(rp(a),rp(a,0))}for(var o=0;o<i;o++)for(var l=0;l<r.length;l++){var u=t[o][r[l]];n=n.replace(rp(Aw[l],o),e?en(u):u)}return n}function BO(n,t){var e=U(n)?{color:n,extraCssText:t}:n||{},i=e.color,r=e.type;t=e.extraCssText;var s=e.renderMode||"html";if(!i)return"";if(s==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+en(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+en(i)+";"+(t||"")+'"></span>';var a=e.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function bu(n,t){return t=t||"transparent",U(n)?n:Z(n)&&n.colorStops&&(n.colorStops[0]||{}).color||t}function Rw(n,t){if(t==="_blank"||t==="blank"){var e=window.open();e.opener=null,e.location.href=n}else window.open(n,t)}var Uc=A,GO=["left","right","top","bottom","width","height"],Uh=[["width","left","right"],["height","top","bottom"]];function qy(n,t,e,i,r){var s=0,a=0;i==null&&(i=1/0),r==null&&(r=1/0);var o=0;t.eachChild(function(l,u){var h=l.getBoundingRect(),c=t.childAt(u+1),f=c&&c.getBoundingRect(),d,g;if(n==="horizontal"){var v=h.width+(f?-f.x+h.x:0);d=s+v,d>i||l.newline?(s=0,d=v,a+=o+e,o=h.height):o=Math.max(o,h.height)}else{var p=h.height+(f?-f.y+h.y:0);g=a+p,g>r||l.newline?(s+=o+e,a=0,g=p,o=h.width):o=Math.max(o,h.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),n==="horizontal"?s=d+e:a=g+e)})}var iu=qy;Gt(qy,"vertical");Gt(qy,"horizontal");function Tu(n,t,e){e=Td(e||0);var i=t.width,r=t.height,s=ce(n.left,i),a=ce(n.top,r),o=ce(n.right,i),l=ce(n.bottom,r),u=ce(n.width,i),h=ce(n.height,r),c=e[2]+e[0],f=e[1]+e[3],d=n.aspect;switch(isNaN(u)&&(u=i-o-f-s),isNaN(h)&&(h=r-l-c-a),d!=null&&(isNaN(u)&&isNaN(h)&&(d>i/r?u=i*.8:h=r*.8),isNaN(u)&&(u=d*h),isNaN(h)&&(h=u/d)),isNaN(s)&&(s=i-o-u-f),isNaN(a)&&(a=r-l-h-c),n.left||n.right){case"center":s=i/2-u/2-e[3];break;case"right":s=i-u-f;break}switch(n.top||n.bottom){case"middle":case"center":a=r/2-h/2-e[0];break;case"bottom":a=r-h-c;break}s=s||0,a=a||0,isNaN(u)&&(u=i-f-s-(o||0)),isNaN(h)&&(h=r-c-a-(l||0));var g=new Tt(s+e[3],a+e[0],u,h);return g.margin=e,g}function Cu(n){var t=n.layoutMode||n.constructor.layoutMode;return Z(t)?t:t?{type:t}:null}function wo(n,t,e){var i=e&&e.ignoreSize;!V(i)&&(i=[i,i]);var r=a(Uh[0],0),s=a(Uh[1],1);u(Uh[0],n,r),u(Uh[1],n,s);function a(h,c){var f={},d=0,g={},v=0,p=2;if(Uc(h,function(_){g[_]=n[_]}),Uc(h,function(_){o(t,_)&&(f[_]=g[_]=t[_]),l(f,_)&&d++,l(g,_)&&v++}),i[c])return l(t,h[1])?g[h[2]]=null:l(t,h[2])&&(g[h[1]]=null),g;if(v===p||!d)return g;if(d>=p)return f;for(var m=0;m<h.length;m++){var y=h[m];if(!o(f,y)&&o(n,y)){f[y]=n[y];break}}return f}function o(h,c){return h.hasOwnProperty(c)}function l(h,c){return h[c]!=null&&h[c]!=="auto"}function u(h,c,f){Uc(h,function(d){c[d]=f[d]})}}function Cd(n){return zO({},n)}function zO(n,t){return t&&n&&Uc(GO,function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}var VO=jt(),xt=function(n){et(t,n);function t(e,i,r){var s=n.call(this,e,i,r)||this;return s.uid=yd("ec_cpt_model"),s}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r)},t.prototype.mergeDefaultAndTheme=function(e,i){var r=Cu(this),s=r?Cd(e):{},a=i.getTheme();mt(e,a.get(this.mainType)),mt(e,this.getDefaultOption()),r&&wo(e,s,r)},t.prototype.mergeOption=function(e,i){mt(this.option,e,!0);var r=Cu(this);r&&wo(this.option,e,r)},t.prototype.optionUpdated=function(e,i){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!sk(e))return e.defaultOption;var i=VO(this);if(!i.defaultOption){for(var r=[],s=e;s;){var a=s.prototype.defaultOption;a&&r.push(a),s=s.superClass}for(var o={},l=r.length-1;l>=0;l--)o=mt(o,r[l],!0);i.defaultOption=o}return i.defaultOption},t.prototype.getReferringComponents=function(e,i){var r=e+"Index",s=e+"Id";return sh(this.ecModel,e,{index:this.get(r,!0),id:this.get(s,!0)},i)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(Xt);xC(xt,Xt);ud(xt);IO(xt);AO(xt,WO);function WO(n){var t=[];return A(xt.getClassesByMainType(n),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=j(t,function(e){return oi(e).main}),n!=="dataset"&&bt(t,"dataset")<=0&&t.unshift("dataset"),t}var vE="";typeof navigator<"u"&&(vE=navigator.platform||"");var pa="rgba(0, 0, 0, 0.2)";const YO={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:pa,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:pa,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:pa,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:pa,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:pa,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:pa,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:vE.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var mE=ot(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Dn="original",je="arrayRows",_i="objectRows",er="keyedColumns",Rr="typedArray",yE="unknown",Bi="column",zo="row",Qe={Must:1,Might:2,Not:3},_E=jt();function $O(n){_E(n).datasetMap=ot()}function HO(n,t,e){var i={},r=wE(t);if(!r||!n)return i;var s=[],a=[],o=t.ecModel,l=_E(o).datasetMap,u=r.uid+"_"+e.seriesLayoutBy,h,c;n=n.slice(),A(n,function(v,p){var m=Z(v)?v:n[p]={name:v};m.type==="ordinal"&&h==null&&(h=p,c=g(m)),i[m.name]=[]});var f=l.get(u)||l.set(u,{categoryWayDim:c,valueWayDim:0});A(n,function(v,p){var m=v.name,y=g(v);if(h==null){var _=f.valueWayDim;d(i[m],_,y),d(a,_,y),f.valueWayDim+=y}else if(h===p)d(i[m],0,y),d(s,0,y);else{var _=f.categoryWayDim;d(i[m],_,y),d(a,_,y),f.categoryWayDim+=y}});function d(v,p,m){for(var y=0;y<m;y++)v.push(p+y)}function g(v){var p=v.dimsDef;return p?p.length:1}return s.length&&(i.itemName=s),a.length&&(i.seriesName=a),i}function wE(n){var t=n.get("data",!0);if(!t)return sh(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Vn).models[0]}function UO(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:sh(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Vn).models}function xE(n,t){return XO(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function XO(n,t,e,i,r,s){var a,o=5;if(Ke(n))return Qe.Not;var l,u;if(i){var h=i[s];Z(h)?(l=h.name,u=h.type):U(h)&&(l=h)}if(u!=null)return u==="ordinal"?Qe.Must:Qe.Not;if(t===je){var c=n;if(e===zo){for(var f=c[s],d=0;d<(f||[]).length&&d<o;d++)if((a=w(f[r+d]))!=null)return a}else for(var d=0;d<c.length&&d<o;d++){var g=c[r+d];if(g&&(a=w(g[s]))!=null)return a}}else if(t===_i){var v=n;if(!l)return Qe.Not;for(var d=0;d<v.length&&d<o;d++){var p=v[d];if(p&&(a=w(p[l]))!=null)return a}}else if(t===er){var m=n;if(!l)return Qe.Not;var f=m[l];if(!f||Ke(f))return Qe.Not;for(var d=0;d<f.length&&d<o;d++)if((a=w(f[d]))!=null)return a}else if(t===Dn)for(var y=n,d=0;d<y.length&&d<o;d++){var p=y[d],_=ih(p);if(!V(_))return Qe.Not;if((a=w(_[s]))!=null)return a}function w(S){var x=U(S);if(S!=null&&Number.isFinite(Number(S))&&S!=="")return x?Qe.Might:Qe.Not;if(x&&S!=="-")return Qe.Must}return Qe.Not}var KO=ot();function jO(n,t,e){var i=KO.get(t);if(!i)return e;var r=i(n);return r?e.concat(r):e}var Mw=jt();jt();var Jy=function(){function n(){}return n.prototype.getColorFromPalette=function(t,e,i){var r=Ae(this.get("color",!0)),s=this.get("colorLayer",!0);return qO(this,Mw,r,s,t,e,i)},n.prototype.clearColorPalette=function(){JO(this,Mw)},n}();function ZO(n,t){for(var e=n.length,i=0;i<e;i++)if(n[i].length>t)return n[i];return n[e-1]}function qO(n,t,e,i,r,s,a){s=s||n;var o=t(s),l=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(r))return u[r];var h=a==null||!i?e:ZO(i,a);if(h=h||e,!(!h||!h.length)){var c=h[l];return r&&(u[r]=c),o.paletteIdx=(l+1)%h.length,c}}function JO(n,t){t(n).paletteIdx=0,t(n).paletteNameMap={}}var Xh,cl,Lw,Dw="\0_ec_inner",QO=1,Qy=function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(e,i,r,s,a,o){s=s||{},this.option=null,this._theme=new Xt(s),this._locale=new Xt(a),this._optionManager=o},t.prototype.setOption=function(e,i,r){var s=Ow(i);this._optionManager.setOption(e,r,s),this._resetOption(null,s)},t.prototype.resetOption=function(e,i){return this._resetOption(e,Ow(i))},t.prototype._resetOption=function(e,i){var r=!1,s=this._optionManager;if(!e||e==="recreate"){var a=s.mountOption(e==="recreate");!this.option||e==="recreate"?Lw(this,a):(this.restoreData(),this._mergeOption(a,i)),r=!0}if((e==="timeline"||e==="media")&&this.restoreData(),!e||e==="recreate"||e==="timeline"){var o=s.getTimelineOption(this);o&&(r=!0,this._mergeOption(o,i))}if(!e||e==="recreate"||e==="media"){var l=s.getMediaOption(this);l.length&&A(l,function(u){r=!0,this._mergeOption(u,i)},this)}return r},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,i){var r=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=ot(),u=i&&i.replaceMergeMainTypeMap;$O(this),A(e,function(c,f){c!=null&&(xt.hasClass(f)?f&&(o.push(f),l.set(f,!0)):r[f]=r[f]==null?ut(c):mt(r[f],c,!0))}),u&&u.each(function(c,f){xt.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),xt.topologicalTravel(o,xt.getAllClassMainTypes(),h,this);function h(c){var f=jO(this,c,Ae(e[c])),d=s.get(c),g=d?u&&u.get(c)?"replaceMerge":"normalMerge":"replaceAll",v=HD(d,f,g);JD(v,c,xt),r[c]=null,s.set(c,null),a.set(c,0);var p=[],m=[],y=0,_;A(v,function(w,S){var x=w.existing,b=w.newOption;if(!b)x&&(x.mergeOption({},this),x.optionUpdated({},!1));else{var T=c==="series",C=xt.getClass(c,w.keyInfo.subType,!T);if(!C)return;if(c==="tooltip"){if(_)return;_=!0}if(x&&x.constructor===C)x.name=w.keyInfo.name,x.mergeOption(b,this),x.optionUpdated(b,!1);else{var I=G({componentIndex:S},w.keyInfo);x=new C(b,this,this,I),G(x,I),w.brandNew&&(x.__requireNewView=!0),x.init(b,this,this),x.optionUpdated(null,!0)}}x?(p.push(x.option),m.push(x),y++):(p.push(void 0),m.push(void 0))},this),r[c]=p,s.set(c,m),a.set(c,y),c==="series"&&Xh(this)}this._seriesIndices||Xh(this)},t.prototype.getOption=function(){var e=ut(this.option);return A(e,function(i,r){if(xt.hasClass(r)){for(var s=Ae(i),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!_u(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,e[r]=s}}),delete e[Dw],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,i){var r=this._componentsMap.get(e);if(r){var s=r[i||0];if(s)return s;if(i==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},t.prototype.queryComponents=function(e){var i=e.mainType;if(!i)return[];var r=e.index,s=e.id,a=e.name,o=this._componentsMap.get(i);if(!o||!o.length)return[];var l;return r!=null?(l=[],A(Ae(r),function(u){o[u]&&l.push(o[u])})):s!=null?l=kw("id",s,o):a!=null?l=kw("name",a,o):l=xe(o,function(u){return!!u}),Pw(l,e)},t.prototype.findComponents=function(e){var i=e.query,r=e.mainType,s=o(i),a=s?this.queryComponents(s):xe(this._componentsMap.get(r),function(u){return!!u});return l(Pw(a,e));function o(u){var h=r+"Index",c=r+"Id",f=r+"Name";return u&&(u[h]!=null||u[c]!=null||u[f]!=null)?{mainType:r,index:u[h],id:u[c],name:u[f]}:null}function l(u){return e.filter?xe(u,e.filter):u}},t.prototype.eachComponent=function(e,i,r){var s=this._componentsMap;if(lt(e)){var a=i,o=e;s.each(function(c,f){for(var d=0;c&&d<c.length;d++){var g=c[d];g&&o.call(a,f,g,g.componentIndex)}})}else for(var l=U(e)?s.get(e):Z(e)?this.findComponents(e):null,u=0;l&&u<l.length;u++){var h=l[u];h&&i.call(r,h,h.componentIndex)}},t.prototype.getSeriesByName=function(e){var i=fi(e,null);return xe(this._componentsMap.get("series"),function(r){return!!r&&i!=null&&r.name===i})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return xe(this._componentsMap.get("series"),function(i){return!!i&&i.subType===e})},t.prototype.getSeries=function(){return xe(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,i){cl(this),A(this._seriesIndices,function(r){var s=this._componentsMap.get("series")[r];e.call(i,s,r)},this)},t.prototype.eachRawSeries=function(e,i){A(this._componentsMap.get("series"),function(r){r&&e.call(i,r,r.componentIndex)})},t.prototype.eachSeriesByType=function(e,i,r){cl(this),A(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===e&&i.call(r,a,s)},this)},t.prototype.eachRawSeriesByType=function(e,i,r){return A(this.getSeriesByType(e),i,r)},t.prototype.isSeriesFiltered=function(e){return cl(this),this._seriesIndicesMap.get(e.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,i){cl(this);var r=[];A(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];e.call(i,a,s)&&r.push(s)},this),this._seriesIndices=r,this._seriesIndicesMap=ot(r)},t.prototype.restoreData=function(e){Xh(this);var i=this._componentsMap,r=[];i.each(function(s,a){xt.hasClass(a)&&r.push(a)}),xt.topologicalTravel(r,xt.getAllClassMainTypes(),function(s){A(i.get(s),function(a){a&&(s!=="series"||!tN(a,e))&&a.restoreData()})})},t.internalField=function(){Xh=function(e){var i=e._seriesIndices=[];A(e._componentsMap.get("series"),function(r){r&&i.push(r.componentIndex)}),e._seriesIndicesMap=ot(i)},cl=function(e){},Lw=function(e,i){e.option={},e.option[Dw]=QO,e._componentsMap=ot({series:[]}),e._componentsCount=ot();var r=i.aria;Z(r)&&r.enabled==null&&(r.enabled=!0),eN(i,e._theme.option),mt(i,YO,!1),e._mergeOption(i,null)}}(),t}(Xt);function tN(n,t){if(t){var e=t.seriesIndex,i=t.seriesId,r=t.seriesName;return e!=null&&n.componentIndex!==e||i!=null&&n.id!==i||r!=null&&n.name!==r}}function eN(n,t){var e=n.color&&!n.colorLayer;A(t,function(i,r){r==="colorLayer"&&e||xt.hasClass(r)||(typeof i=="object"?n[r]=n[r]?mt(n[r],i,!1):ut(i):n[r]==null&&(n[r]=i))})}function kw(n,t,e){if(V(t)){var i=ot();return A(t,function(s){if(s!=null){var a=fi(s,null);a!=null&&i.set(s,!0)}}),xe(e,function(s){return s&&i.get(s[n])})}else{var r=fi(t,null);return xe(e,function(s){return s&&r!=null&&s[n]===r})}}function Pw(n,t){return t.hasOwnProperty("subType")?xe(n,function(e){return e&&e.subType===t.subType}):n}function Ow(n){var t=ot();return n&&A(Ae(n.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}Xn(Qy,Jy);var nN=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],SE=function(){function n(t){A(nN,function(e){this[e]=Yt(t[e],t)},this)}return n}(),sp={},t_=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(t,e){var i=[];A(sp,function(r,s){var a=r.create(t,e);i=i.concat(a||[])}),this._coordinateSystems=i},n.prototype.update=function(t,e){A(this._coordinateSystems,function(i){i.update&&i.update(t,e)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(t,e){sp[t]=e},n.get=function(t){return sp[t]},n}(),iN=/^(min|max)?(.+)$/,rN=function(){function n(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return n.prototype.setOption=function(t,e,i){t&&(A(Ae(t.series),function(a){a&&a.data&&Ke(a.data)&&yv(a.data)}),A(Ae(t.dataset),function(a){a&&a.source&&Ke(a.source)&&yv(a.source)})),t=ut(t);var r=this._optionBackup,s=sN(t,e,!r);this._newBaseOption=s.baseOption,r?(s.timelineOptions.length&&(r.timelineOptions=s.timelineOptions),s.mediaList.length&&(r.mediaList=s.mediaList),s.mediaDefault&&(r.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],ut(t?e.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(t){var e,i=this._timelineOptions;if(i.length){var r=t.getComponent("timeline");r&&(e=ut(i[r.getCurrentIndex()]))}return e},n.prototype.getMediaOption=function(t){var e=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!r.length&&!s)return o;for(var l=0,u=r.length;l<u;l++)aN(r[l].query,e,i)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!lN(a,this._currentMediaIndices)&&(o=j(a,function(h){return ut(h===-1?s.option:r[h].option)})),this._currentMediaIndices=a,o},n}();function sN(n,t,e){var i=[],r,s,a=n.baseOption,o=n.timeline,l=n.options,u=n.media,h=!!n.media,c=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((c||h)&&(n.options=n.media=null),s=n),h&&V(u)&&A(u,function(d){d&&d.option&&(d.query?i.push(d):r||(r=d))}),f(s),A(l,function(d){return f(d)}),A(i,function(d){return f(d.option)});function f(d){A(t,function(g){g(d,e)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:r,mediaList:i}}function aN(n,t,e){var i={width:t,height:e,aspectratio:t/e},r=!0;return A(n,function(s,a){var o=a.match(iN);if(!(!o||!o[1]||!o[2])){var l=o[1],u=o[2].toLowerCase();oN(i[u],s,l)||(r=!1)}}),r}function oN(n,t,e){return e==="min"?n>=t:e==="max"?n<=t:n===t}function lN(n,t){return n.join(",")===t.join(",")}var kn=A,Eu=Z,Nw=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function ap(n){var t=n&&n.itemStyle;if(t)for(var e=0,i=Nw.length;e<i;e++){var r=Nw[e],s=t.normal,a=t.emphasis;s&&s[r]&&(n[r]=n[r]||{},n[r].normal?mt(n[r].normal,s[r]):n[r].normal=s[r],s[r]=null),a&&a[r]&&(n[r]=n[r]||{},n[r].emphasis?mt(n[r].emphasis,a[r]):n[r].emphasis=a[r],a[r]=null)}}function _e(n,t,e){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var i=n[t].normal,r=n[t].emphasis;i&&(e?(n[t].normal=n[t].emphasis=null,Pt(n[t],i)):n[t]=i),r&&(n.emphasis=n.emphasis||{},n.emphasis[t]=r,r.focus&&(n.emphasis.focus=r.focus),r.blurScope&&(n.emphasis.blurScope=r.blurScope))}}function Nl(n){_e(n,"itemStyle"),_e(n,"lineStyle"),_e(n,"areaStyle"),_e(n,"label"),_e(n,"labelLine"),_e(n,"upperLabel"),_e(n,"edgeLabel")}function Zt(n,t){var e=Eu(n)&&n[t],i=Eu(e)&&e.textStyle;if(i)for(var r=0,s=B1.length;r<s;r++){var a=B1[r];i.hasOwnProperty(a)&&(e[a]=i[a])}}function mn(n){n&&(Nl(n),Zt(n,"label"),n.emphasis&&Zt(n.emphasis,"label"))}function uN(n){if(Eu(n)){ap(n),Nl(n),Zt(n,"label"),Zt(n,"upperLabel"),Zt(n,"edgeLabel"),n.emphasis&&(Zt(n.emphasis,"label"),Zt(n.emphasis,"upperLabel"),Zt(n.emphasis,"edgeLabel"));var t=n.markPoint;t&&(ap(t),mn(t));var e=n.markLine;e&&(ap(e),mn(e));var i=n.markArea;i&&mn(i);var r=n.data;if(n.type==="graph"){r=r||n.nodes;var s=n.links||n.edges;if(s&&!Ke(s))for(var a=0;a<s.length;a++)mn(s[a]);A(n.categories,function(u){Nl(u)})}if(r&&!Ke(r))for(var a=0;a<r.length;a++)mn(r[a]);if(t=n.markPoint,t&&t.data)for(var o=t.data,a=0;a<o.length;a++)mn(o[a]);if(e=n.markLine,e&&e.data)for(var l=e.data,a=0;a<l.length;a++)V(l[a])?(mn(l[a][0]),mn(l[a][1])):mn(l[a]);n.type==="gauge"?(Zt(n,"axisLabel"),Zt(n,"title"),Zt(n,"detail")):n.type==="treemap"?(_e(n.breadcrumb,"itemStyle"),A(n.levels,function(u){Nl(u)})):n.type==="tree"&&Nl(n.leaves)}}function Ei(n){return V(n)?n:n?[n]:[]}function Fw(n){return(V(n)?n[0]:n)||{}}function hN(n,t){kn(Ei(n.series),function(i){Eu(i)&&uN(i)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),kn(e,function(i){kn(Ei(n[i]),function(r){r&&(Zt(r,"axisLabel"),Zt(r.axisPointer,"label"))})}),kn(Ei(n.parallel),function(i){var r=i&&i.parallelAxisDefault;Zt(r,"axisLabel"),Zt(r&&r.axisPointer,"label")}),kn(Ei(n.calendar),function(i){_e(i,"itemStyle"),Zt(i,"dayLabel"),Zt(i,"monthLabel"),Zt(i,"yearLabel")}),kn(Ei(n.radar),function(i){Zt(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),kn(Ei(n.geo),function(i){Eu(i)&&(mn(i),kn(Ei(i.regions),function(r){mn(r)}))}),kn(Ei(n.timeline),function(i){mn(i),_e(i,"label"),_e(i,"itemStyle"),_e(i,"controlStyle",!0);var r=i.data;V(r)&&A(r,function(s){Z(s)&&(_e(s,"label"),_e(s,"itemStyle"))})}),kn(Ei(n.toolbox),function(i){_e(i,"iconStyle"),kn(i.feature,function(r){_e(r,"iconStyle")})}),Zt(Fw(n.axisPointer),"label"),Zt(Fw(n.tooltip).axisPointer,"label")}function cN(n,t){for(var e=t.split(","),i=n,r=0;r<e.length&&(i=i&&i[e[r]],i!=null);r++);return i}function fN(n,t,e,i){for(var r=t.split(","),s=n,a,o=0;o<r.length-1;o++)a=r[o],s[a]==null&&(s[a]={}),s=s[a];s[r[o]]==null&&(s[r[o]]=e)}function Bw(n){n&&A(dN,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}var dN=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],gN=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],op=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function fl(n){var t=n&&n.itemStyle;if(t)for(var e=0;e<op.length;e++){var i=op[e][1],r=op[e][0];t[i]!=null&&(t[r]=t[i])}}function Gw(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function zw(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function pN(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function bE(n,t){if(n)for(var e=0;e<n.length;e++)t(n[e]),n[e]&&bE(n[e].children,t)}function TE(n,t){hN(n,t),n.series=Ae(n.series),A(n.series,function(e){if(Z(e)){var i=e.type;if(i==="line")e.clipOverflow!=null&&(e.clip=e.clipOverflow);else if(i==="pie"||i==="gauge"){e.clockWise!=null&&(e.clockwise=e.clockWise),Gw(e.label);var r=e.data;if(r&&!Ke(r))for(var s=0;s<r.length;s++)Gw(r[s]);e.hoverOffset!=null&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if(i==="gauge"){var a=cN(e,"pointer.color");a!=null&&fN(e,"itemStyle.color",a)}else if(i==="bar"){fl(e),fl(e.backgroundStyle),fl(e.emphasis);var r=e.data;if(r&&!Ke(r))for(var s=0;s<r.length;s++)typeof r[s]=="object"&&(fl(r[s]),fl(r[s]&&r[s].emphasis))}else if(i==="sunburst"){var o=e.highlightPolicy;o&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=o)),zw(e),bE(e.data,zw)}else i==="graph"||i==="sankey"?pN(e):i==="map"&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Pt(e,e.mapLocation));e.hoverAnimation!=null&&(e.emphasis=e.emphasis||{},e.emphasis&&e.emphasis.scale==null&&(e.emphasis.scale=e.hoverAnimation)),Bw(e)}}),n.dataRange&&(n.visualMap=n.dataRange),A(gN,function(e){var i=n[e];i&&(V(i)||(i=[i]),A(i,function(r){Bw(r)}))})}function vN(n){var t=ot();n.eachSeries(function(e){var i=e.get("stack");if(i){var r=t.get(i)||t.set(i,[]),s=e.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:e};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&s.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),t.each(mN)}function mN(n){A(n,function(t,e){var i=[],r=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],a=t.data,o=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(u,h,c){var f=a.get(t.stackedDimension,c);if(isNaN(f))return r;var d,g;o?g=a.getRawIndex(c):d=a.get(t.stackedByDimension,c);for(var v=NaN,p=e-1;p>=0;p--){var m=n[p];if(o||(g=m.data.rawIndexOf(m.stackedByDimension,d)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&f>=0&&y>0||l==="samesign"&&f<=0&&y<0){f=GD(f,y),v=y;break}}}return i[0]=f,i[1]=v,i})})}var Ed=function(){function n(t){this.data=t.data||(t.sourceFormat===er?{}:[]),this.sourceFormat=t.sourceFormat||yE,this.seriesLayoutBy=t.seriesLayoutBy||Bi,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var i=0;i<e.length;i++){var r=e[i];r.type==null&&xE(this,i)===Qe.Must&&(r.type="ordinal")}}return n}();function e_(n){return n instanceof Ed}function Xv(n,t,e){e=e||EE(n);var i=t.seriesLayoutBy,r=_N(n,e,i,t.sourceHeader,t.dimensions),s=new Ed({data:n,sourceFormat:e,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:ut(t)});return s}function CE(n){return new Ed({data:n,sourceFormat:Ke(n)?Rr:Dn})}function yN(n){return new Ed({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:ut(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function EE(n){var t=yE;if(Ke(n))t=Rr;else if(V(n)){n.length===0&&(t=je);for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r!=null){if(V(r)||Ke(r)){t=je;break}else if(Z(r)){t=_i;break}}}}else if(Z(n)){for(var s in n)if(vo(n,s)&&Xe(n[s])){t=er;break}}return t}function _N(n,t,e,i,r){var s,a;if(!n)return{dimensionsDefine:Vw(r),startIndex:a,dimensionsDetectedCount:s};if(t===je){var o=n;i==="auto"||i==null?Ww(function(u){u!=null&&u!=="-"&&(U(u)?a==null&&(a=1):a=0)},e,o,10):a=$t(i)?i:i?1:0,!r&&a===1&&(r=[],Ww(function(u,h){r[h]=u!=null?u+"":""},e,o,1/0)),s=r?r.length:e===zo?o.length:o[0]?o[0].length:null}else if(t===_i)r||(r=wN(n));else if(t===er)r||(r=[],A(n,function(u,h){r.push(h)}));else if(t===Dn){var l=ih(n[0]);s=V(l)&&l.length||1}return{startIndex:a,dimensionsDefine:Vw(r),dimensionsDetectedCount:s}}function wN(n){for(var t=0,e;t<n.length&&!(e=n[t++]););if(e)return zt(e)}function Vw(n){if(n){var t=ot();return j(n,function(e,i){e=Z(e)?e:{name:e};var r={name:e.name,displayName:e.displayName,type:e.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var s=t.get(r.name);return s?r.name+="-"+s.count++:t.set(r.name,{count:1}),r})}}function Ww(n,t,e,i){if(t===zo)for(var r=0;r<e.length&&r<i;r++)n(e[r]?e[r][0]:null,r);else for(var s=e[0]||[],r=0;r<s.length&&r<i;r++)n(s[r],r)}function IE(n){var t=n.sourceFormat;return t===_i||t===er}var hs,cs,fs,Yw,$w,AE=function(){function n(t,e){var i=e_(t)?t:CE(t);this._source=i;var r=this._data=i.data;i.sourceFormat===Rr&&(this._offset=0,this._dimSize=e,this._data=r),$w(this,r,i)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(t,e){},n.prototype.appendData=function(t){},n.prototype.clean=function(){},n.protoInitialize=function(){var t=n.prototype;t.pure=!1,t.persistent=!0}(),n.internalField=function(){var t;$w=function(a,o,l){var u=l.sourceFormat,h=l.seriesLayoutBy,c=l.startIndex,f=l.dimensionsDefine,d=Yw[n_(u,h)];if(G(a,d),u===Rr)a.getItem=e,a.count=r,a.fillStorage=i;else{var g=RE(u,h);a.getItem=Yt(g,null,o,c,f);var v=ME(u,h);a.count=Yt(v,null,o,c,f)}};var e=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,u=this._dimSize,h=u*a,c=0;c<u;c++)o[c]=l[h+c];return o},i=function(a,o,l,u){for(var h=this._data,c=this._dimSize,f=0;f<c;f++){for(var d=u[f],g=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],p=o-a,m=l[f],y=0;y<p;y++){var _=h[y*c+f];m[a+y]=_,_<g&&(g=_),_>v&&(v=_)}d[0]=g,d[1]=v}},r=function(){return this._data?this._data.length/this._dimSize:0};Yw=(t={},t[je+"_"+Bi]={pure:!0,appendData:s},t[je+"_"+zo]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[_i]={pure:!0,appendData:s},t[er]={pure:!0,appendData:function(a){var o=this._data;A(a,function(l,u){for(var h=o[u]||(o[u]=[]),c=0;c<(l||[]).length;c++)h.push(l[c])})}},t[Dn]={appendData:s},t[Rr]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),n}(),Hw=function(n,t,e,i){return n[i]},xN=(hs={},hs[je+"_"+Bi]=function(n,t,e,i){return n[i+t]},hs[je+"_"+zo]=function(n,t,e,i,r){i+=t;for(var s=r||[],a=n,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[i]:null}return s},hs[_i]=Hw,hs[er]=function(n,t,e,i,r){for(var s=r||[],a=0;a<e.length;a++){var o=e[a].name,l=n[o];s[a]=l?l[i]:null}return s},hs[Dn]=Hw,hs);function RE(n,t){var e=xN[n_(n,t)];return e}var Uw=function(n,t,e){return n.length},SN=(cs={},cs[je+"_"+Bi]=function(n,t,e){return Math.max(0,n.length-t)},cs[je+"_"+zo]=function(n,t,e){var i=n[0];return i?Math.max(0,i.length-t):0},cs[_i]=Uw,cs[er]=function(n,t,e){var i=e[0].name,r=n[i];return r?r.length:0},cs[Dn]=Uw,cs);function ME(n,t){var e=SN[n_(n,t)];return e}var lp=function(n,t,e){return n[t]},bN=(fs={},fs[je]=lp,fs[_i]=function(n,t,e){return n[e]},fs[er]=lp,fs[Dn]=function(n,t,e){var i=ih(n);return i instanceof Array?i[t]:i},fs[Rr]=lp,fs);function LE(n){var t=bN[n];return t}function n_(n,t){return n===je?n+"_"+t:n}function xo(n,t,e){if(n){var i=n.getRawDataItem(t);if(i!=null){var r=n.getStore(),s=r.getSource().sourceFormat;if(e!=null){var a=n.getDimensionIndex(e),o=r.getDimensionProperty(a);return LE(s)(i,a,o)}else{var l=i;return s===Dn&&(l=ih(i)),l}}}}var TN=/\{@(.+?)\}/g,i_=function(){function n(){}return n.prototype.getDataParams=function(t,e){var i=this.getData(e),r=this.getRawValue(t,e),s=i.getRawIndex(t),a=i.getName(t),o=i.getRawDataItem(t),l=i.getItemVisual(t,"style"),u=l&&l[i.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,c=this.mainType,f=c==="series",d=i.userOutput&&i.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:s,data:o,dataType:e,value:r,color:u,borderColor:h,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(t,e,i,r,s,a){e=e||"normal";var o=this.getData(i),l=this.getDataParams(t,i);if(a&&(l.value=a.interpolatedValue),r!=null&&V(l.value)&&(l.value=l.value[r]),!s){var u=o.getItemModel(t);s=u.get(e==="normal"?["label","formatter"]:[e,"label","formatter"])}if(lt(s))return l.status=e,l.dimensionIndex=r,s(l);if(U(s)){var h=pE(s,l);return h.replace(TN,function(c,f){var d=f.length,g=f;g.charAt(0)==="["&&g.charAt(d-1)==="]"&&(g=+g.slice(1,d-1));var v=xo(o,t,g);if(a&&V(a.interpolatedValue)){var p=o.getDimensionIndex(g);p>=0&&(v=a.interpolatedValue[p])}return v!=null?v+"":""})}},n.prototype.getRawValue=function(t,e){return xo(this.getData(e),t)},n.prototype.formatTooltip=function(t,e,i){},n}();function Xw(n){var t,e;return Z(n)?n.type&&(e=n):t=n,{text:t,frag:e}}function ru(n){return new CN(n)}var CN=function(){function n(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return n.prototype.perform=function(t){var e=this._upstream,i=t&&t.skip;if(this._dirty&&e){var r=this.context;r.data=r.outputData=e.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var a=h(this._modBy),o=this._modDataCount||0,l=h(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||o!==u)&&(s="reset");function h(y){return!(y>=1)&&(y=1),y}var c;(this._dirty||s==="reset")&&(this._dirty=!1,c=this._doReset(i)),this._modBy=l,this._modDataCount=u;var f=t&&t.step;if(e?this._dueEnd=e._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,g=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!i&&(c||d<g)){var v=this._progress;if(V(v))for(var p=0;p<v.length;p++)this._doProgress(v[p],d,g,l,u);else this._doProgress(v,d,g,l,u)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(t,e,i,r,s){Kw.reset(e,i,r,s),this._callingProgress=t,this._callingProgress({start:e,end:i,count:i-e,next:Kw.next},this.context)},n.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var e,i;!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(i=e.forceFirstProgress,e=e.progress),V(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),i},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},n}(),Kw=function(){var n,t,e,i,r,s={reset:function(l,u,h,c){t=l,n=u,e=h,i=c,r=Math.ceil(i/e),s.next=e>1&&i>0?o:a}};return s;function a(){return t<n?t++:null}function o(){var l=t%r*e+Math.ceil(t/r),u=t>=n?null:l<i?l:t;return t++,u}}();function uo(n,t){var e=t&&t.type;return e==="ordinal"?n:(e==="time"&&!$t(n)&&n!=null&&n!=="-"&&(n=+Xi(n)),n==null||n===""?NaN:Number(n))}ot({number:function(n){return parseFloat(n)},time:function(n){return+Xi(n)},trim:function(n){return U(n)?ai(n):n}});var EN=function(){function n(t,e){var i=t==="desc";this._resultLT=i?1:-1,e==null&&(e=i?"min":"max"),this._incomparable=e==="min"?-1/0:1/0}return n.prototype.evaluate=function(t,e){var i=$t(t)?t:vf(t),r=$t(e)?e:vf(e),s=isNaN(i),a=isNaN(r);if(s&&(i=this._incomparable),a&&(r=this._incomparable),s&&a){var o=U(t),l=U(e);o&&(i=l?t:0),l&&(r=o?e:0)}return i<r?this._resultLT:i>r?-this._resultLT:0},n}(),IN=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(t){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(t){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(t,e){},n.prototype.retrieveValueFromItem=function(t,e){},n.prototype.convertValue=function(t,e){return uo(t,e)},n}();function AN(n,t){var e=new IN,i=n.data,r=e.sourceFormat=n.sourceFormat,s=n.startIndex,a="";n.seriesLayoutBy!==Bi&&Be(a);var o=[],l={},u=n.dimensionsDefine;if(u)A(u,function(v,p){var m=v.name,y={index:p,name:m,displayName:v.displayName};if(o.push(y),m!=null){var _="";vo(l,m)&&Be(_),l[m]=y}});else for(var h=0;h<n.dimensionsDetectedCount;h++)o.push({index:h});var c=RE(r,Bi);t.__isBuiltIn&&(e.getRawDataItem=function(v){return c(i,s,o,v)},e.getRawData=Yt(RN,null,n)),e.cloneRawData=Yt(MN,null,n);var f=ME(r,Bi);e.count=Yt(f,null,i,s,o);var d=LE(r);e.retrieveValue=function(v,p){var m=c(i,s,o,v);return g(m,p)};var g=e.retrieveValueFromItem=function(v,p){if(v!=null){var m=o[p];if(m)return d(v,p,m.name)}};return e.getDimensionInfo=Yt(LN,null,o,l),e.cloneAllDimensionInfo=Yt(DN,null,o),e}function RN(n){var t=n.sourceFormat;if(!r_(t)){var e="";Be(e)}return n.data}function MN(n){var t=n.sourceFormat,e=n.data;if(!r_(t)){var i="";Be(i)}if(t===je){for(var r=[],s=0,a=e.length;s<a;s++)r.push(e[s].slice());return r}else if(t===_i){for(var r=[],s=0,a=e.length;s<a;s++)r.push(G({},e[s]));return r}}function LN(n,t,e){if(e!=null){if($t(e)||!isNaN(e)&&!vo(t,e))return n[e];if(vo(t,e))return t[e]}}function DN(n){return ut(n)}var DE=ot();function kN(n){n=ut(n);var t=n.type,e="";t||Be(e);var i=t.split(":");i.length!==2&&Be(e);var r=!1;i[0]==="echarts"&&(t=i[1],r=!0),n.__isBuiltIn=r,DE.set(t,n)}function PN(n,t,e){var i=Ae(n),r=i.length,s="";r||Be(s);for(var a=0,o=r;a<o;a++){var l=i[a];t=ON(l,t),a!==o-1&&(t.length=Math.max(t.length,1))}return t}function ON(n,t,e,i){var r="";t.length||Be(r),Z(n)||Be(r);var s=n.type,a=DE.get(s);a||Be(r);var o=j(t,function(u){return AN(u,a)}),l=Ae(a.transform({upstream:o[0],upstreamList:o,config:ut(n.config)}));return j(l,function(u,h){var c="";Z(u)||Be(c),u.data||Be(c);var f=EE(u.data);r_(f)||Be(c);var d,g=t[0];if(g&&h===0&&!u.dimensions){var v=g.startIndex;v&&(u.data=g.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Bi,sourceHeader:v,dimensions:g.metaRawOption.dimensions}}else d={seriesLayoutBy:Bi,sourceHeader:0,dimensions:u.dimensions};return Xv(u.data,d,null)})}function r_(n){return n===je||n===_i}var Id="undefined",NN=typeof Uint32Array===Id?Array:Uint32Array,FN=typeof Uint16Array===Id?Array:Uint16Array,kE=typeof Int32Array===Id?Array:Int32Array,jw=typeof Float64Array===Id?Array:Float64Array,PE={float:jw,int:kE,ordinal:Array,number:Array,time:jw},up;function dl(n){return n>65535?NN:FN}function va(){return[1/0,-1/0]}function BN(n){var t=n.constructor;return t===Array?n.slice():new t(n)}function Zw(n,t,e,i,r){var s=PE[e||"float"];if(r){var a=n[t],o=a&&a.length;if(o!==i){for(var l=new s(i),u=0;u<o;u++)l[u]=a[u];n[t]=l}}else n[t]=new s(i)}var Kv=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=ot()}return n.prototype.initData=function(t,e,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=t.getSource(),s=this.defaultDimValueGetter=up[r.sourceFormat];this._dimValueGetter=i||s,this._rawExtent=[],IE(r),this._dimensions=j(e,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(t,e){var i=this._calcDimNameToIdx,r=this._dimensions,s=i.get(t);if(s!=null){if(r[s].type===e)return s}else s=r.length;return r[s]={type:e},i.set(t,s),this._chunks[s]=new PE[e||"float"](this._rawCount),this._rawExtent[s]=va(),s},n.prototype.collectOrdinalMeta=function(t,e){var i=this._chunks[t],r=this._dimensions[t],s=this._rawExtent,a=r.ordinalOffset||0,o=i.length;a===0&&(s[t]=va());for(var l=s[t],u=a;u<o;u++){var h=i[u]=e.parseAndCollect(i[u]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}r.ordinalMeta=e,r.ordinalOffset=o,r.type="ordinal"},n.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],i=e.ordinalMeta;return i},n.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},n.prototype.appendData=function(t){var e=this._provider,i=this.count();e.appendData(t);var r=e.count();return e.persistent||(r+=i),i<r&&this._initDataFromProvider(i,r,!0),[i,r]},n.prototype.appendValues=function(t,e){for(var i=this._chunks,r=this._dimensions,s=r.length,a=this._rawExtent,o=this.count(),l=o+Math.max(t.length,e||0),u=0;u<s;u++){var h=r[u];Zw(i,u,h.type,l,!0)}for(var c=[],f=o;f<l;f++)for(var d=f-o,g=0;g<s;g++){var h=r[g],v=up.arrayRows.call(this,t[d]||c,h.property,d,g);i[g][f]=v;var p=a[g];v<p[0]&&(p[0]=v),v>p[1]&&(p[1]=v)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(t,e,i){for(var r=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,u=j(a,function(y){return y.property}),h=0;h<o;h++){var c=a[h];l[h]||(l[h]=va()),Zw(s,h,c.type,e,i)}if(r.fillStorage)r.fillStorage(t,e,s,l);else for(var f=[],d=t;d<e;d++){f=r.getItem(d,f);for(var g=0;g<o;g++){var v=s[g],p=this._dimValueGetter(f,u[g],d,g);v[d]=p;var m=l[g];p<m[0]&&(m[0]=p),p>m[1]&&(m[1]=p)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(e)]:NaN},n.prototype.getValues=function(t,e){var i=[],r=[];if(e==null){e=t,t=[];for(var s=0;s<this._dimensions.length;s++)r.push(s)}else r=t;for(var s=0,a=r.length;s<a;s++)i.push(this.get(r[s],e));return i},n.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var i=this._chunks[t];return i?i[e]:NaN},n.prototype.getSum=function(t){var e=this._chunks[t],i=0;if(e)for(var r=0,s=this.count();r<s;r++){var a=this.get(t,r);isNaN(a)||(i+=a)}return i},n.prototype.getMedian=function(t){var e=[];this.each([t],function(s){isNaN(s)||e.push(s)});var i=e.sort(function(s,a){return s-a}),r=this.count();return r===0?0:r%2===1?i[(r-1)/2]:(i[r/2]+i[r/2-1])/2},n.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,i=e[t];if(i!=null&&i<this._count&&i===t)return t;for(var r=0,s=this._count-1;r<=s;){var a=(r+s)/2|0;if(e[a]<t)r=a+1;else if(e[a]>t)s=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(t,e,i){var r=this._chunks,s=r[t],a=[];if(!s)return a;i==null&&(i=1/0);for(var o=1/0,l=-1,u=0,h=0,c=this.count();h<c;h++){var f=this.getRawIndex(h),d=e-s[f],g=Math.abs(d);g<=i&&((g<o||g===o&&d>=0&&l<0)&&(o=g,l=d,u=0),d===l&&(a[u++]=h))}return a.length=u,a},n.prototype.getIndices=function(){var t,e=this._indices;if(e){var i=e.constructor,r=this._count;if(i===Array){t=new i(r);for(var s=0;s<r;s++)t[s]=e[s]}else t=new i(e.buffer,0,r)}else{var i=dl(this._rawCount);t=new i(this.count());for(var s=0;s<t.length;s++)t[s]=s}return t},n.prototype.filter=function(t,e){if(!this._count)return this;for(var i=this.clone(),r=i.count(),s=dl(i._rawCount),a=new s(r),o=[],l=t.length,u=0,h=t[0],c=i._chunks,f=0;f<r;f++){var d=void 0,g=i.getRawIndex(f);if(l===0)d=e(f);else if(l===1){var v=c[h][g];d=e(v,f)}else{for(var p=0;p<l;p++)o[p]=c[t[p]][g];o[p]=f,d=e.apply(null,o)}d&&(a[u++]=g)}return u<r&&(i._indices=a),i._count=u,i._extent=[],i._updateGetRawIdx(),i},n.prototype.selectRange=function(t){var e=this.clone(),i=e._count;if(!i)return this;var r=zt(t),s=r.length;if(!s)return this;var a=e.count(),o=dl(e._rawCount),l=new o(a),u=0,h=r[0],c=t[h][0],f=t[h][1],d=e._chunks,g=!1;if(!e._indices){var v=0;if(s===1){for(var p=d[r[0]],m=0;m<i;m++){var y=p[m];(y>=c&&y<=f||isNaN(y))&&(l[u++]=v),v++}g=!0}else if(s===2){for(var p=d[r[0]],_=d[r[1]],w=t[r[1]][0],S=t[r[1]][1],m=0;m<i;m++){var y=p[m],x=_[m];(y>=c&&y<=f||isNaN(y))&&(x>=w&&x<=S||isNaN(x))&&(l[u++]=v),v++}g=!0}}if(!g)if(s===1)for(var m=0;m<a;m++){var b=e.getRawIndex(m),y=d[r[0]][b];(y>=c&&y<=f||isNaN(y))&&(l[u++]=b)}else for(var m=0;m<a;m++){for(var T=!0,b=e.getRawIndex(m),C=0;C<s;C++){var I=r[C],y=d[I][b];(y<t[I][0]||y>t[I][1])&&(T=!1)}T&&(l[u++]=e.getRawIndex(m))}return u<a&&(e._indices=l),e._count=u,e._extent=[],e._updateGetRawIdx(),e},n.prototype.map=function(t,e){var i=this.clone(t);return this._updateDims(i,t,e),i},n.prototype.modify=function(t,e){this._updateDims(this,t,e)},n.prototype._updateDims=function(t,e,i){for(var r=t._chunks,s=[],a=e.length,o=t.count(),l=[],u=t._rawExtent,h=0;h<e.length;h++)u[e[h]]=va();for(var c=0;c<o;c++){for(var f=t.getRawIndex(c),d=0;d<a;d++)l[d]=r[e[d]][f];l[a]=c;var g=i&&i.apply(null,l);if(g!=null){typeof g!="object"&&(s[0]=g,g=s);for(var h=0;h<g.length;h++){var v=e[h],p=g[h],m=u[v],y=r[v];y&&(y[f]=p),p<m[0]&&(m[0]=p),p>m[1]&&(m[1]=p)}}}},n.prototype.lttbDownSample=function(t,e){var i=this.clone([t],!0),r=i._chunks,s=r[t],a=this.count(),o=0,l=Math.floor(1/e),u=this.getRawIndex(0),h,c,f,d=new(dl(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[o++]=u;for(var g=1;g<a-1;g+=l){for(var v=Math.min(g+l,a-1),p=Math.min(g+l*2,a),m=(p+v)/2,y=0,_=v;_<p;_++){var w=this.getRawIndex(_),S=s[w];isNaN(S)||(y+=S)}y/=p-v;var x=g,b=Math.min(g+l,a),T=g-1,C=s[u];h=-1,f=x;for(var I=-1,E=0,_=x;_<b;_++){var w=this.getRawIndex(_),S=s[w];if(isNaN(S)){E++,I<0&&(I=w);continue}c=Math.abs((T-m)*(S-C)-(T-_)*(y-C)),c>h&&(h=c,f=w)}E>0&&E<b-x&&(d[o++]=Math.min(I,f),f=Math.max(I,f)),d[o++]=f,u=f}return d[o++]=this.getRawIndex(a-1),i._count=o,i._indices=d,i.getRawIndex=this._getRawIdx,i},n.prototype.downSample=function(t,e,i,r){for(var s=this.clone([t],!0),a=s._chunks,o=[],l=Math.floor(1/e),u=a[t],h=this.count(),c=s._rawExtent[t]=va(),f=new(dl(this._rawCount))(Math.ceil(h/l)),d=0,g=0;g<h;g+=l){l>h-g&&(l=h-g,o.length=l);for(var v=0;v<l;v++){var p=this.getRawIndex(g+v);o[v]=u[p]}var m=i(o),y=this.getRawIndex(Math.min(g+r(o,m)||0,h-1));u[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),f[d++]=y}return s._count=d,s._indices=f,s._updateGetRawIdx(),s},n.prototype.each=function(t,e){if(this._count)for(var i=t.length,r=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(i){case 0:e(s);break;case 1:e(r[t[0]][o],s);break;case 2:e(r[t[0]][o],r[t[1]][o],s);break;default:for(var l=0,u=[];l<i;l++)u[l]=r[t[l]][o];u[l]=s,e.apply(null,u)}}},n.prototype.getDataExtent=function(t){var e=this._chunks[t],i=va();if(!e)return i;var r=this.count(),s=!this._indices,a;if(s)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=i;for(var o=a[0],l=a[1],u=0;u<r;u++){var h=this.getRawIndex(u),c=e[h];c<o&&(o=c),c>l&&(l=c)}return a=[o,l],this._extent[t]=a,a},n.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var i=[],r=this._chunks,s=0;s<r.length;s++)i.push(r[s][e]);return i},n.prototype.clone=function(t,e){var i=new n,r=this._chunks,s=t&&Fo(t,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<r.length;a++)i._chunks[a]=s[a]?BN(r[a]):r[a];else i._chunks=r;return this._copyCommonProps(i),e||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=ut(this._extent),t._rawExtent=ut(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var i=this._indices.length;e=new t(i);for(var r=0;r<i;r++)e[r]=this._indices[r]}else e=new t(this._indices);return e}return null},n.prototype._getRawIdxIdentity=function(t){return t},n.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function t(e,i,r,s){return uo(e[s],this._dimensions[s])}up={arrayRows:t,objectRows:function(e,i,r,s){return uo(e[i],this._dimensions[s])},keyedColumns:t,original:function(e,i,r,s){var a=e&&(e.value==null?e:e.value);return uo(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(e,i,r,s){return e[s]}}}(),n}(),GN=function(){function n(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,e=this._getUpstreamSourceManagers(),i=!!e.length,r,s;if(Kh(t)){var a=t,o=void 0,l=void 0,u=void 0;if(i){var h=e[0];h.prepareSource(),u=h.getSource(),o=u.data,l=u.sourceFormat,s=[h._getVersionSign()]}else o=a.get("data",!0),l=Ke(o)?Rr:Dn,s=[];var c=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},d=st(c.seriesLayoutBy,f.seriesLayoutBy)||null,g=st(c.sourceHeader,f.sourceHeader),v=st(c.dimensions,f.dimensions),p=d!==f.seriesLayoutBy||!!g!=!!f.sourceHeader||v;r=p?[Xv(o,{seriesLayoutBy:d,sourceHeader:g,dimensions:v},l)]:[]}else{var m=t;if(i){var y=this._applyTransform(e);r=y.sourceList,s=y.upstreamSignList}else{var _=m.get("source",!0);r=[Xv(_,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(r,s)},n.prototype._applyTransform=function(t){var e=this._sourceHost,i=e.get("transform",!0),r=e.get("fromTransformResult",!0);if(r!=null){var s="";t.length!==1&&qw(s)}var a,o=[],l=[];return A(t,function(u){u.prepareSource();var h=u.getSource(r||0),c="";r!=null&&!h&&qw(c),o.push(h),l.push(u._getVersionSign())}),i?a=PN(i,o,{datasetIndex:e.componentIndex}):r!=null&&(a=[yN(o[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var i=t[e];if(i._isDirty()||this._upstreamSignList[e]!==i._getVersionSign())return!0}},n.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return e},n.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},n.prototype._innerGetDataStore=function(t,e,i){var r=0,s=this._storeList,a=s[r];a||(a=s[r]={});var o=a[i];if(!o){var l=this._getUpstreamSourceManagers()[0];Kh(this._sourceHost)&&l?o=l._innerGetDataStore(t,e,i):(o=new Kv,o.initData(new AE(e,t.length),t)),a[i]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Kh(t)){var e=wE(t);return e?[e.getSourceManager()]:[]}else return j(UO(t),function(i){return i.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,e,i,r;if(Kh(t))e=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),r=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=t;e=s.get("seriesLayoutBy",!0),i=s.get("sourceHeader",!0),r=s.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:i,dimensions:r}},n}();function Kh(n){return n.mainType==="series"}function qw(n){throw new Error(n)}var OE="line-height:1";function NE(n,t){var e=n.color||"#6e7079",i=n.fontSize||12,r=n.fontWeight||"400",s=n.color||"#464646",a=n.fontSize||14,o=n.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+en(i+"")+"px;color:"+en(e)+";font-weight:"+en(r+""),valueStyle:"font-size:"+en(a+"")+"px;color:"+en(s)+";font-weight:"+en(o+"")}:{nameStyle:{fontSize:i,fill:e,fontWeight:r},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var zN=[0,10,20,30],VN=["",`
`,`

`,`


`];function Bs(n,t){return t.type=n,t}function jv(n){return n.type==="section"}function FE(n){return jv(n)?WN:YN}function BE(n){if(jv(n)){var t=0,e=n.blocks.length,i=e>1||e>0&&!n.noHeader;return A(n.blocks,function(r){var s=BE(r);s>=t&&(t=s+ +(i&&(!s||jv(r)&&!r.noHeader)))}),t}return 0}function WN(n,t,e,i){var r=t.noHeader,s=$N(BE(t)),a=[],o=t.blocks||[];Ui(!o||V(o)),o=o||[];var l=n.orderMode;if(t.sortBlocks&&l){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(vo(u,l)){var h=new EN(u[l],null);o.sort(function(g,v){return h.evaluate(g.sortParam,v.sortParam)})}else l==="seriesDesc"&&o.reverse()}A(o,function(g,v){var p=t.valueFormatter,m=FE(g)(p?G(G({},n),{valueFormatter:p}):n,g,v>0?s.html:0,i);m!=null&&a.push(m)});var c=n.renderMode==="richText"?a.join(s.richText):Zv(a.join(""),r?e:s.html);if(r)return c;var f=Uv(t.header,"ordinal",n.useUTC),d=NE(i,n.renderMode).nameStyle;return n.renderMode==="richText"?GE(n,f,d)+s.richText+c:Zv('<div style="'+d+";"+OE+';">'+en(f)+"</div>"+c,e)}function YN(n,t,e,i){var r=n.renderMode,s=t.noName,a=t.noValue,o=!t.markerType,l=t.name,u=n.useUTC,h=t.valueFormatter||n.valueFormatter||function(w){return w=V(w)?w:[w],j(w,function(S,x){return Uv(S,V(d)?d[x]:d,u)})};if(!(s&&a)){var c=o?"":n.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",r),f=s?"":Uv(l,"ordinal",u),d=t.valueType,g=a?[]:h(t.value,t.dataIndex),v=!o||!s,p=!o&&s,m=NE(i,r),y=m.nameStyle,_=m.valueStyle;return r==="richText"?(o?"":c)+(s?"":GE(n,f,y))+(a?"":XN(n,g,v,p,_)):Zv((o?"":c)+(s?"":HN(f,!o,y))+(a?"":UN(g,v,p,_)),e)}}function Jw(n,t,e,i,r,s){if(n){var a=FE(n),o={useUTC:r,renderMode:e,orderMode:i,markupStyleCreator:t,valueFormatter:n.valueFormatter};return a(o,n,0,s)}}function $N(n){return{html:zN[n],richText:VN[n]}}function Zv(n,t){var e='<div style="clear:both"></div>',i="margin: "+t+"px 0 0";return'<div style="'+i+";"+OE+';">'+n+e+"</div>"}function HN(n,t,e){var i=t?"margin-left:2px":"";return'<span style="'+e+";"+i+'">'+en(n)+"</span>"}function UN(n,t,e,i){var r=e?"10px":"20px",s=t?"float:right;margin-left:"+r:"";return n=V(n)?n:[n],'<span style="'+s+";"+i+'">'+j(n,function(a){return en(a)}).join("&nbsp;&nbsp;")+"</span>"}function GE(n,t,e){return n.markupStyleCreator.wrapRichTextStyle(t,e)}function XN(n,t,e,i,r){var s=[r],a=i?10:20;return e&&s.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(V(t)?t.join("  "):t,s)}function KN(n,t){var e=n.getData().getItemVisual(t,"style"),i=e[n.visualDrawType];return bu(i)}function zE(n,t){var e=n.get("padding");return e??(t==="richText"?[8,10]:10)}var hp=function(){function n(){this.richTextStyles={},this._nextStyleNameId=pC()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(t,e,i){var r=i==="richText"?this._generateStyleName():null,s=BO({color:e,type:t,renderMode:i,markerId:r});return U(s)?s:(this.richTextStyles[r]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(t,e){var i={};V(e)?A(e,function(s){return G(i,s)}):G(i,e);var r=this._generateStyleName();return this.richTextStyles[r]=i,"{"+r+"|"+t+"}"},n}();function jN(n){var t=n.series,e=n.dataIndex,i=n.multipleSeries,r=t.getData(),s=r.mapDimensionsAll("defaultedTooltip"),a=s.length,o=t.getRawValue(e),l=V(o),u=KN(t,e),h,c,f,d;if(a>1||l&&!a){var g=ZN(o,t,e,s,u);h=g.inlineValues,c=g.inlineValueTypes,f=g.blocks,d=g.inlineValues[0]}else if(a){var v=r.getDimensionInfo(s[0]);d=h=xo(r,e,s[0]),c=v.type}else d=h=l?o[0]:o;var p=Cy(t),m=p&&t.name||"",y=r.getName(e),_=i?m:y;return Bs("section",{header:m,noHeader:i||!p,sortParam:d,blocks:[Bs("nameValue",{markerType:"item",markerColor:u,name:_,noName:!ai(_),value:h,valueType:c,dataIndex:e})].concat(f||[])})}function ZN(n,t,e,i,r){var s=t.getData(),a=Fo(n,function(c,f,d){var g=s.getDimensionInfo(d);return c=c||g&&g.tooltip!==!1&&g.displayName!=null},!1),o=[],l=[],u=[];i.length?A(i,function(c){h(xo(s,e,c),c)}):A(n,h);function h(c,f){var d=s.getDimensionInfo(f);!d||d.otherDims.tooltip===!1||(a?u.push(Bs("nameValue",{markerType:"subItem",markerColor:r,name:d.displayName,value:c,valueType:d.type})):(o.push(c),l.push(d.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:u}}var lr=jt();function jh(n,t){return n.getName(t)||n.getId(t)}var qN="__universalTransitionEnabled",ji=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return t.prototype.init=function(e,i,r){this.seriesIndex=this.componentIndex,this.dataTask=ru({count:QN,reset:tF}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,r);var s=lr(this).sourceManager=new GN(this);s.prepareSource();var a=this.getInitialData(e,r);tx(a,this),this.dataTask.context.data=a,lr(this).dataBeforeProcessed=a,Qw(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(e,i){var r=Cu(this),s=r?Cd(e):{},a=this.subType;xt.hasClass(a)&&(a+="Series"),mt(e,i.getTheme().get(this.subType)),mt(e,this.getDefaultOption()),Pv(e,"label",["show"]),this.fillDataTextStyle(e.data),r&&wo(e,s,r)},t.prototype.mergeOption=function(e,i){e=mt(this.option,e,!0),this.fillDataTextStyle(e.data);var r=Cu(this);r&&wo(this.option,e,r);var s=lr(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(e,i);tx(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,lr(this).dataBeforeProcessed=a,Qw(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(e){if(e&&!Ke(e))for(var i=["show"],r=0;r<e.length;r++)e[r]&&e[r].label&&Pv(e[r],"label",i)},t.prototype.getInitialData=function(e,i){},t.prototype.appendData=function(e){var i=this.getRawData();i.appendData(e.data)},t.prototype.getData=function(e){var i=qv(this);if(i){var r=i.context.data;return e==null||!r.getLinkedData?r:r.getLinkedData(e)}else return lr(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var i=qv(this);if(i){var r=i.context;r.outputData=e,i!==this.dataTask&&(r.data=e)}lr(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return ot(e)},t.prototype.getSourceManager=function(){return lr(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return lr(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var e=this.get("colorBy");return e||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,i,r){return jN({series:this,dataIndex:e,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(tt.node&&!(e&&e.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,i,r){var s=this.ecModel,a=Jy.prototype.getColorFromPalette.call(this,e,i,r);return a||(a=s.getColorFromPalette(e,i,r)),a},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,i){this._innerSelect(this.getData(i),e)},t.prototype.unselect=function(e,i){var r=this.option.selectedMap;if(r){var s=this.option.selectedMode,a=this.getData(i);if(s==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<e.length;o++){var l=e[o],u=jh(a,l);r[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(e,i){for(var r=[],s=0;s<e.length;s++)r[0]=e[s],this.isSelected(e[s],i)?this.unselect(r,i):this.select(r,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,i=zt(e),r=[],s=0;s<i.length;s++){var a=e[i[s]];a>=0&&r.push(a)}return r},t.prototype.isSelected=function(e,i){var r=this.option.selectedMap;if(!r)return!1;var s=this.getData(i);return(r==="all"||r[jh(s,e)])&&!s.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[qN])return!0;var e=this.option.universalTransition;return e?e===!0?!0:e&&e.enabled:!1},t.prototype._innerSelect=function(e,i){var r,s,a=this.option,o=a.selectedMode,l=i.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){Z(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,h=0;h<l;h++){var c=i[h],f=jh(e,c);u[f]=!0,this._selectedDataIndicesMap[f]=e.getRawIndex(c)}}else if(o==="single"||o===!0){var d=i[l-1],f=jh(e,d);a.selectedMap=(r={},r[f]=!0,r),this._selectedDataIndicesMap=(s={},s[f]=e.getRawIndex(d),s)}}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var i=[];e.hasItemOption&&e.each(function(r){var s=e.getRawDataItem(r);s&&s.selected&&i.push(r)}),i.length>0&&this._innerSelect(e,i)}},t.registerClass=function(e){return xt.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(xt);Xn(ji,i_);Xn(ji,Jy);xC(ji,xt);function Qw(n){var t=n.name;Cy(n)||(n.name=JN(n)||t)}function JN(n){var t=n.getRawData(),e=t.mapDimensionsAll("seriesName"),i=[];return A(e,function(r){var s=t.getDimensionInfo(r);s.displayName&&i.push(s.displayName)}),i.join(" ")}function QN(n){return n.model.getRawData().count()}function tF(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),eF}function eF(n,t){t.outputData&&n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function tx(n,t){A(b2(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(e){n.wrapMethod(e,Gt(nF,t))})}function nF(n,t){var e=qv(n);return e&&e.setOutputEnd((t||this).count()),t}function qv(n){var t=(n.ecModel||{}).scheduler,e=t&&t.getPipeline(n.uid);if(e){var i=e.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(n.uid))}return i}}var Mn=function(){function n(){this.group=new Le,this.uid=yd("viewComponent")}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,i,r){},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,i,r){},n.prototype.updateLayout=function(t,e,i,r){},n.prototype.updateVisual=function(t,e,i,r){},n.prototype.toggleBlurSeries=function(t,e,i){},n.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},n}();Iy(Mn);ud(Mn);function VE(){var n=jt();return function(t){var e=n(t),i=t.pipelineContext,r=!!e.large,s=!!e.progressiveRender,a=e.large=!!(i&&i.large),o=e.progressiveRender=!!(i&&i.progressiveRender);return(r!==a||s!==o)&&"reset"}}var WE=jt(),iF=VE(),Mr=function(){function n(){this.group=new Le,this.uid=yd("viewChart"),this.renderTask=ru({plan:rF,reset:sF}),this.renderTask.context={view:this}}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,i,r){},n.prototype.highlight=function(t,e,i,r){var s=t.getData(r&&r.dataType);s&&nx(s,r,"emphasis")},n.prototype.downplay=function(t,e,i,r){var s=t.getData(r&&r.dataType);s&&nx(s,r,"normal")},n.prototype.remove=function(t,e){this.group.removeAll()},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.updateLayout=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.updateVisual=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.eachRendered=function(t){vd(this.group,t)},n.markUpdateMethod=function(t,e){WE(t).updateMethod=e},n.protoInitialize=function(){var t=n.prototype;t.type="chart"}(),n}();function ex(n,t,e){n&&Vv(n)&&(t==="emphasis"?yf:_f)(n,e)}function nx(n,t,e){var i=rh(n,t),r=t&&t.highlightKey!=null?wP(t.highlightKey):null;i!=null?A(Ae(i),function(s){ex(n.getItemGraphicEl(s),e,r)}):n.eachItemGraphicEl(function(s){ex(s,e,r)})}Iy(Mr);ud(Mr);function rF(n){return iF(n.model)}function sF(n){var t=n.model,e=n.ecModel,i=n.api,r=n.payload,s=t.pipelineContext.progressiveRender,a=n.view,o=r&&WE(r).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](t,e,i,r),aF[l]}var aF={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Tf="\0__throttleOriginMethod",ix="\0__throttleRate",rx="\0__throttleType";function s_(n,t,e){var i,r=0,s=0,a=null,o,l,u,h;t=t||0;function c(){s=new Date().getTime(),a=null,n.apply(l,u||[])}var f=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];i=new Date().getTime(),l=this,u=d;var v=h||t,p=h||e;h=null,o=i-(p?r:s)-v,clearTimeout(a),p?a=setTimeout(c,v):o>=0?c():a=setTimeout(c,-o),r=i};return f.clear=function(){a&&(clearTimeout(a),a=null)},f.debounceNextCall=function(d){h=d},f}function YE(n,t,e,i){var r=n[t];if(r){var s=r[Tf]||r,a=r[rx],o=r[ix];if(o!==e||a!==i){if(e==null||!i)return n[t]=s;r=n[t]=s_(s,e,i==="debounce"),r[Tf]=s,r[rx]=i,r[ix]=e}return r}}function Jv(n,t){var e=n[t];e&&e[Tf]&&(e.clear&&e.clear(),n[t]=e[Tf])}var sx=jt(),ax={itemStyle:wu(eE,!0),lineStyle:wu(tE,!0)},oF={lineStyle:"stroke",itemStyle:"fill"};function $E(n,t){var e=n.visualStyleMapper||ax[t];return e||(console.warn("Unknown style type '"+t+"'."),ax.itemStyle)}function HE(n,t){var e=n.visualDrawType||oF[t];return e||(console.warn("Unknown style type '"+t+"'."),"fill")}var lF={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=n.getModel(i),s=$E(n,i),a=s(r),o=r.getShallow("decal");o&&(e.setVisual("decal",o),o.dirty=!0);var l=HE(n,i),u=a[l],h=lt(u)?u:null,c=a.fill==="auto"||a.stroke==="auto";if(!a[l]||h||c){var f=n.getColorFromPalette(n.name,null,t.getSeriesCount());a[l]||(a[l]=f,e.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||lt(a.fill)?f:a.fill,a.stroke=a.stroke==="auto"||lt(a.stroke)?f:a.stroke}if(e.setVisual("style",a),e.setVisual("drawType",l),!t.isSeriesFiltered(n)&&h)return e.setVisual("colorFromPalette",!1),{dataEach:function(d,g){var v=n.getDataParams(g),p=G({},a);p[l]=h(v),d.setItemVisual(g,"style",p)}}}},gl=new Xt,uF={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!(n.ignoreStyleOnData||t.isSeriesFiltered(n))){var e=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=$E(n,i),s=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[i]){gl.option=l[i];var u=r(gl),h=a.ensureUniqueItemVisual(o,"style");G(h,u),gl.option.decal&&(a.setItemVisual(o,"decal",gl.option.decal),gl.option.decal.dirty=!0),s in u&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},hF={performRawSeries:!0,overallReset:function(n){var t=ot();n.eachSeries(function(e){var i=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+i,s=t.get(r);s||(s={},t.set(r,s)),sx(e).scope=s}}),n.eachSeries(function(e){if(!(e.isColorBySeries()||n.isSeriesFiltered(e))){var i=e.getRawData(),r={},s=e.getData(),a=sx(e).scope,o=e.visualStyleAccessPath||"itemStyle",l=HE(e,o);s.each(function(u){var h=s.getRawIndex(u);r[h]=u}),i.each(function(u){var h=r[u],c=s.getItemVisual(h,"colorFromPalette");if(c){var f=s.ensureUniqueItemVisual(h,"style"),d=i.getName(u)||u+"",g=i.count();f[l]=e.getColorFromPalette(d,a,g)}})}})}},Zh=Math.PI;function cF(n,t){t=t||{},Pt(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new Le,i=new ne({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(i);var r=new De({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new ne({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});e.add(s);var a;return t.showSpinner&&(a=new pd({shape:{startAngle:-Zh/2,endAngle:-Zh/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Zh*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Zh*3/2}).delay(300).start("circularInOut"),e.add(a)),e.resize=function(){var o=r.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(n.getWidth()-l*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:l),h=n.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:h}),s.setShape({x:u-l,y:h-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},e.resize(),e}var UE=function(){function n(t,e,i,r){this._stageTaskMap=ot(),this.ecInstance=t,this.api=e,i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=i.concat(r)}return n.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(i){var r=i.overallTask;r&&r.dirty()})},n.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),r=i.context,s=!e&&i.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>i.blockIndex,a=s?i.step:null,o=r&&r.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},n.prototype.updateStreamModes=function(t,e){var i=this._pipelineMap.get(t.uid),r=t.getData(),s=r.count(),a=i.progressiveEnabled&&e.incrementalPrepareRender&&s>=i.threshold,o=t.get("large")&&s>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?s:null;t.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:o}},n.prototype.restorePipelines=function(t){var e=this,i=e._pipelineMap=ot();t.eachSeries(function(r){var s=r.getProgressive(),a=r.uid;i.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:s&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),e._pipe(r,r.dataTask)})},n.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),i=this.api;A(this._allHandlers,function(r){var s=t.get(r.uid)||t.set(r.uid,{}),a="";Ui(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,s,e,i),r.overallReset&&this._createOverallStageTask(r,s,e,i)},this)},n.prototype.prepareView=function(t,e,i,r){var s=t.renderTask,a=s.context;a.model=e,a.ecModel=i,a.api=r,s.__block=!t.incrementalPrepareRender,this._pipe(e,s)},n.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},n.prototype.performVisualTasks=function(t,e,i){this._performStageTasks(this._visualHandlers,t,e,i)},n.prototype._performStageTasks=function(t,e,i,r){r=r||{};var s=!1,a=this;A(t,function(l,u){if(!(r.visualType&&r.visualType!==l.visualType)){var h=a._stageTaskMap.get(l.uid),c=h.seriesTaskMap,f=h.overallTask;if(f){var d,g=f.agentStubMap;g.each(function(p){o(r,p)&&(p.dirty(),d=!0)}),d&&f.dirty(),a.updatePayload(f,i);var v=a.getPerformArgs(f,r.block);g.each(function(p){p.perform(v)}),f.perform(v)&&(s=!0)}else c&&c.each(function(p,m){o(r,p)&&p.dirty();var y=a.getPerformArgs(p,r.block);y.skip=!l.performRawSeries&&e.isSeriesFiltered(p.context.model),a.updatePayload(p,i),p.perform(y)&&(s=!0)})}});function o(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(i){e=i.dataTask.perform()||e}),this.unfinished=e||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},n.prototype.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)},n.prototype._createSeriesStageTask=function(t,e,i,r){var s=this,a=e.seriesTaskMap,o=e.seriesTaskMap=ot(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(h):l?i.eachRawSeriesByType(l,h):u&&u(i,r).each(h);function h(c){var f=c.uid,d=o.set(f,a&&a.get(f)||ru({plan:vF,reset:mF,count:_F}));d.context={model:c,ecModel:i,api:r,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:s},s._pipe(c,d)}},n.prototype._createOverallStageTask=function(t,e,i,r){var s=this,a=e.overallTask=e.overallTask||ru({reset:fF});a.context={ecModel:i,api:r,overallReset:t.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=ot(),u=t.seriesType,h=t.getTargetSeries,c=!0,f=!1,d="";Ui(!t.createOnAllSeries,d),u?i.eachRawSeriesByType(u,g):h?h(i,r).each(g):(c=!1,A(i.getSeries(),g));function g(v){var p=v.uid,m=l.set(p,o&&o.get(p)||(f=!0,ru({reset:dF,onDirty:pF})));m.context={model:v,overallProgress:c},m.agent=a,m.__block=c,s._pipe(v,m)}f&&a.dirty()},n.prototype._pipe=function(t,e){var i=t.uid,r=this._pipelineMap.get(i);!r.head&&(r.head=e),r.tail&&r.tail.pipe(e),r.tail=e,e.__idxInPipeline=r.count++,e.__pipeline=r},n.wrapStageHandler=function(t,e){return lt(t)&&(t={overallReset:t,seriesType:wF(t)}),t.uid=yd("stageHandler"),e&&(t.visualType=e),t},n}();function fF(n){n.overallReset(n.ecModel,n.api,n.payload)}function dF(n){return n.overallProgress&&gF}function gF(){this.agent.dirty(),this.getDownstream().dirty()}function pF(){this.agent&&this.agent.dirty()}function vF(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function mF(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=Ae(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?j(t,function(e,i){return XE(i)}):yF}var yF=XE(0);function XE(n){return function(t,e){var i=e.data,r=e.resetDefines[n];if(r&&r.dataEach)for(var s=t.start;s<t.end;s++)r.dataEach(i,s);else r&&r.progress&&r.progress(t,i)}}function _F(n){return n.data.count()}function wF(n){Cf=null;try{n(Iu,KE)}catch{}return Cf}var Iu={},KE={},Cf;jE(Iu,Qy);jE(KE,SE);Iu.eachSeriesByType=Iu.eachRawSeriesByType=function(n){Cf=n};Iu.eachComponent=function(n){n.mainType==="series"&&n.subType&&(Cf=n.subType)};function jE(n,t){for(var e in t.prototype)n[e]=Ue}var ox=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const xF={color:ox,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ox]};var be="#B9B8CE",lx="#100C2A",qh=function(){return{axisLine:{lineStyle:{color:be}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},ux=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],ZE={darkMode:!0,color:ux,backgroundColor:lx,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:be}},textStyle:{color:be},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:be}},dataZoom:{borderColor:"#71708A",textStyle:{color:be},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:be}},timeline:{lineStyle:{color:be},label:{color:be},controlStyle:{color:be,borderColor:be}},calendar:{itemStyle:{color:lx},dayLabel:{color:be},monthLabel:{color:be},yearLabel:{color:be}},timeAxis:qh(),logAxis:qh(),valueAxis:qh(),categoryAxis:qh(),line:{symbol:"circle"},graph:{color:ux},gauge:{title:{color:be},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:be},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};ZE.categoryAxis.splitLine.show=!1;var SF=function(){function n(){}return n.prototype.normalizeQuery=function(t){var e={},i={},r={};if(U(t)){var s=oi(t);e.mainType=s.main||null,e.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};A(t,function(l,u){for(var h=!1,c=0;c<a.length;c++){var f=a[c],d=u.lastIndexOf(f);if(d>0&&d===u.length-f.length){var g=u.slice(0,d);g!=="data"&&(e.mainType=g,e[f.toLowerCase()]=l,h=!0)}}o.hasOwnProperty(u)&&(i[u]=l,h=!0),h||(r[u]=l)})}return{cptQuery:e,dataQuery:i,otherQuery:r}},n.prototype.filter=function(t,e){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,s=i.packedEvent,a=i.model,o=i.view;if(!a||!o)return!0;var l=e.cptQuery,u=e.dataQuery;return h(l,a,"mainType")&&h(l,a,"subType")&&h(l,a,"index","componentIndex")&&h(l,a,"name")&&h(l,a,"id")&&h(u,s,"name")&&h(u,s,"dataIndex")&&h(u,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,e.otherQuery,r,s));function h(c,f,d,g){return c[d]==null||f[g||d]===c[d]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),Qv=["symbol","symbolSize","symbolRotate","symbolOffset"],hx=Qv.concat(["symbolKeepAspect"]),bF={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData();if(n.legendIcon&&e.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var i={},r={},s=!1,a=0;a<Qv.length;a++){var o=Qv[a],l=n.get(o);lt(l)?(s=!0,r[o]=l):i[o]=l}if(i.symbol=i.symbol||n.defaultSymbol,e.setVisual(G({legendIcon:n.legendIcon||i.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},i)),t.isSeriesFiltered(n))return;var u=zt(r);function h(c,f){for(var d=n.getRawValue(f),g=n.getDataParams(f),v=0;v<u.length;v++){var p=u[v];c.setItemVisual(f,p,r[p](d,g))}}return{dataEach:s?h:null}}},TF={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!n.hasSymbolVisual||t.isSeriesFiltered(n))return;var e=n.getData();function i(r,s){for(var a=r.getItemModel(s),o=0;o<hx.length;o++){var l=hx[o],u=a.getShallow(l,!0);u!=null&&r.setItemVisual(s,l,u)}}return{dataEach:e.hasItemOption?i:null}}};function CF(n,t,e){switch(e){case"color":var i=n.getItemVisual(t,"style");return i[n.getVisual("drawType")];case"opacity":return n.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(t,e)}}function qE(n,t){switch(t){case"color":var e=n.getVisual("style");return e[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(t)}}function ma(n,t,e,i,r){var s=n+t;e.isSilent(s)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,u=r.selected,h=0;h<u.length;h++)if(u[h].seriesIndex===o){var c=a.getData(),f=rh(c,r.fromActionPayload);e.trigger(s,{type:s,seriesId:a.id,name:V(f)?c.getName(f[0]):c.getName(f),selected:U(l)?l:G({},l)})}})}function EF(n,t,e){n.on("selectchanged",function(i){var r=e.getModel();i.isFromClick?(ma("map","selectchanged",t,r,i),ma("pie","selectchanged",t,r,i)):i.fromAction==="select"?(ma("map","selected",t,r,i),ma("pie","selected",t,r,i)):i.fromAction==="unselect"&&(ma("map","unselected",t,r,i),ma("pie","unselected",t,r,i))})}function Fl(n,t,e){for(var i;n&&!(t(n)&&(i=n,e));)n=n.__hostTarget||n.parent;return i}var IF=Math.round(Math.random()*9),AF=typeof Object.defineProperty=="function",RF=function(){function n(){this._id="__ec_inner_"+IF++}return n.prototype.get=function(t){return this._guard(t)[this._id]},n.prototype.set=function(t,e){var i=this._guard(t);return AF?Object.defineProperty(i,this._id,{value:e,enumerable:!1,configurable:!0}):i[this._id]=e,this},n.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},n.prototype.has=function(t){return!!this._guard(t)[this._id]},n.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},n}(),MF=Rt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,i=t.cy,r=t.width/2,s=t.height/2;n.moveTo(e,i-s),n.lineTo(e+r,i+s),n.lineTo(e-r,i+s),n.closePath()}}),LF=Rt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,i=t.cy,r=t.width/2,s=t.height/2;n.moveTo(e,i-s),n.lineTo(e+r,i),n.lineTo(e,i+s),n.lineTo(e-r,i),n.closePath()}}),DF=Rt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.x,i=t.y,r=t.width/5*3,s=Math.max(r,t.height),a=r/2,o=a*a/(s-a),l=i-s+a+o,u=Math.asin(o/a),h=Math.cos(u)*a,c=Math.sin(u),f=Math.cos(u),d=a*.6,g=a*.7;n.moveTo(e-h,l+o),n.arc(e,l,a,Math.PI-u,Math.PI*2+u),n.bezierCurveTo(e+h-c*d,l+o+f*d,e,i-g,e,i),n.bezierCurveTo(e,i-g,e-h+c*d,l+o+f*d,e-h,l+o),n.closePath()}}),kF=Rt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.height,i=t.width,r=t.x,s=t.y,a=i/3*2;n.moveTo(r,s),n.lineTo(r+a,s+e),n.lineTo(r,s+e/4*3),n.lineTo(r-a,s+e),n.lineTo(r,s),n.closePath()}}),PF={line:Ki,rect:ne,roundRect:ne,square:ne,circle:dd,diamond:LF,pin:DF,arrow:kF,triangle:MF},OF={line:function(n,t,e,i,r){r.x1=n,r.y1=t+i/2,r.x2=n+e,r.y2=t+i/2},rect:function(n,t,e,i,r){r.x=n,r.y=t,r.width=e,r.height=i},roundRect:function(n,t,e,i,r){r.x=n,r.y=t,r.width=e,r.height=i,r.r=Math.min(e,i)/4},square:function(n,t,e,i,r){var s=Math.min(e,i);r.x=n,r.y=t,r.width=s,r.height=s},circle:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.r=Math.min(e,i)/2},diamond:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.width=e,r.height=i},pin:function(n,t,e,i,r){r.x=n+e/2,r.y=t+i/2,r.width=e,r.height=i},arrow:function(n,t,e,i,r){r.x=n+e/2,r.y=t+i/2,r.width=e,r.height=i},triangle:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.width=e,r.height=i}},tm={};A(PF,function(n,t){tm[t]=new n});var NF=Rt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,t,e){var i=gf(n,t,e),r=this.shape;return r&&r.symbolType==="pin"&&t.position==="inside"&&(i.y=e.y+e.height*.4),i},buildPath:function(n,t,e){var i=t.symbolType;if(i!=="none"){var r=tm[i];r||(i="rect",r=tm[i]),OF[i](t.x,t.y,t.width,t.height,r.shape),r.buildPath(n,r.shape,e)}}});function FF(n,t){if(this.type!=="image"){var e=this.style;this.__isEmptyBrush?(e.stroke=n,e.fill=t||"#fff",e.lineWidth=2):this.shape.symbolType==="line"?e.stroke=n:e.fill=n,this.markRedraw()}}function Ad(n,t,e,i,r,s,a){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=jC(n.slice(8),new Tt(t,e,i,r),a?"center":"cover"):n.indexOf("path://")===0?l=Gy(n.slice(7),{},new Tt(t,e,i,r),a?"center":"cover"):l=new NF({shape:{symbolType:n,x:t,y:e,width:i,height:r}}),l.__isEmptyBrush=o,l.setColor=FF,s&&l.setColor(s),l}function JE(n){return V(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function a_(n,t){if(n!=null)return V(n)||(n=[n,n]),[ce(n[0],t[0])||0,ce(st(n[1],n[0]),t[1])||0]}function Ts(n){return isFinite(n)}function BF(n,t,e){var i=t.x==null?0:t.x,r=t.x2==null?1:t.x2,s=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(i=i*e.width+e.x,r=r*e.width+e.x,s=s*e.height+e.y,a=a*e.height+e.y),i=Ts(i)?i:0,r=Ts(r)?r:1,s=Ts(s)?s:0,a=Ts(a)?a:0;var o=n.createLinearGradient(i,s,r,a);return o}function GF(n,t,e){var i=e.width,r=e.height,s=Math.min(i,r),a=t.x==null?.5:t.x,o=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*i+e.x,o=o*r+e.y,l=l*s),a=Ts(a)?a:.5,o=Ts(o)?o:.5,l=l>=0&&Ts(l)?l:.5;var u=n.createRadialGradient(a,o,0,a,o,l);return u}function em(n,t,e){for(var i=t.type==="radial"?GF(n,t,e):BF(n,t,e),r=t.colorStops,s=0;s<r.length;s++)i.addColorStop(r[s].offset,r[s].color);return i}function zF(n,t){if(n===t||!n&&!t)return!1;if(!n||!t||n.length!==t.length)return!0;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!0;return!1}function Jh(n){return parseInt(n,10)}function Qh(n,t,e){var i=["width","height"][t],r=["clientWidth","clientHeight"][t],s=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(e[i]!=null&&e[i]!=="auto")return parseFloat(e[i]);var o=document.defaultView.getComputedStyle(n);return(n[r]||Jh(o[i])||Jh(n.style[i]))-(Jh(o[s])||0)-(Jh(o[a])||0)|0}function VF(n,t){return!n||n==="solid"||!(t>0)?null:n==="dashed"?[4*t,2*t]:n==="dotted"?[t]:$t(n)?[n]:V(n)?n:null}function QE(n){var t=n.style,e=t.lineDash&&t.lineWidth>0&&VF(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(e){var r=t.strokeNoScale&&n.getLineScale?n.getLineScale():1;r&&r!==1&&(e=j(e,function(s){return s/r}),i/=r)}return[e,i]}var WF=new yo(!0);function Ef(n){var t=n.stroke;return!(t==null||t==="none"||!(n.lineWidth>0))}function cx(n){return typeof n=="string"&&n!=="none"}function If(n){var t=n.fill;return t!=null&&t!=="none"}function fx(n,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var e=n.globalAlpha;n.globalAlpha=t.fillOpacity*t.opacity,n.fill(),n.globalAlpha=e}else n.fill()}function dx(n,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var e=n.globalAlpha;n.globalAlpha=t.strokeOpacity*t.opacity,n.stroke(),n.globalAlpha=e}else n.stroke()}function nm(n,t,e){var i=SC(t.image,t.__image,e);if(hd(i)){var r=n.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var s=new DOMMatrix;s.translateSelf(t.x||0,t.y||0),s.rotateSelf(0,0,(t.rotation||0)*T2),s.scaleSelf(t.scaleX||1,t.scaleY||1),r.setTransform(s)}return r}}function YF(n,t,e,i){var r,s=Ef(e),a=If(e),o=e.strokePercent,l=o<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var h=t.path||WF,c=t.__dirty;if(!i){var f=e.fill,d=e.stroke,g=a&&!!f.colorStops,v=s&&!!d.colorStops,p=a&&!!f.image,m=s&&!!d.image,y=void 0,_=void 0,w=void 0,S=void 0,x=void 0;(g||v)&&(x=t.getBoundingRect()),g&&(y=c?em(n,f,x):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(_=c?em(n,d,x):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),p&&(w=c||!t.__canvasFillPattern?nm(n,f,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(S=c||!t.__canvasStrokePattern?nm(n,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),g?n.fillStyle=y:p&&(w?n.fillStyle=w:a=!1),v?n.strokeStyle=_:m&&(S?n.strokeStyle=S:s=!1)}var b=t.getGlobalScale();h.setScale(b[0],b[1],t.segmentIgnoreThreshold);var T,C;n.setLineDash&&e.lineDash&&(r=QE(t),T=r[0],C=r[1]);var I=!0;(u||c&ka)&&(h.setDPR(n.dpr),l?h.setContext(null):(h.setContext(n),I=!1),h.reset(),t.buildPath(h,t.shape,i),h.toStatic(),t.pathUpdated()),I&&h.rebuildPath(n,l?o:1),T&&(n.setLineDash(T),n.lineDashOffset=C),i||(e.strokeFirst?(s&&dx(n,e),a&&fx(n,e)):(a&&fx(n,e),s&&dx(n,e))),T&&n.setLineDash([])}function $F(n,t,e){var i=t.__image=SC(e.image,t.__image,t,t.onload);if(!(!i||!hd(i))){var r=e.x||0,s=e.y||0,a=t.getWidth(),o=t.getHeight(),l=i.width/i.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=i.width,o=i.height),e.sWidth&&e.sHeight){var u=e.sx||0,h=e.sy||0;n.drawImage(i,u,h,e.sWidth,e.sHeight,r,s,a,o)}else if(e.sx&&e.sy){var u=e.sx,h=e.sy,c=a-u,f=o-h;n.drawImage(i,u,h,c,f,r,s,a,o)}else n.drawImage(i,r,s,a,o)}}function HF(n,t,e){var i,r=e.text;if(r!=null&&(r+=""),r){n.font=e.font||Fs,n.textAlign=e.textAlign,n.textBaseline=e.textBaseline;var s=void 0,a=void 0;n.setLineDash&&e.lineDash&&(i=QE(t),s=i[0],a=i[1]),s&&(n.setLineDash(s),n.lineDashOffset=a),e.strokeFirst?(Ef(e)&&n.strokeText(r,e.x,e.y),If(e)&&n.fillText(r,e.x,e.y)):(If(e)&&n.fillText(r,e.x,e.y),Ef(e)&&n.strokeText(r,e.x,e.y)),s&&n.setLineDash([])}}var gx=["shadowBlur","shadowOffsetX","shadowOffsetY"],px=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function tI(n,t,e,i,r){var s=!1;if(!i&&(e=e||{},t===e))return!1;if(i||t.opacity!==e.opacity){We(n,r),s=!0;var a=Math.max(Math.min(t.opacity,1),0);n.globalAlpha=isNaN(a)?ks.opacity:a}(i||t.blend!==e.blend)&&(s||(We(n,r),s=!0),n.globalCompositeOperation=t.blend||ks.blend);for(var o=0;o<gx.length;o++){var l=gx[o];(i||t[l]!==e[l])&&(s||(We(n,r),s=!0),n[l]=n.dpr*(t[l]||0))}return(i||t.shadowColor!==e.shadowColor)&&(s||(We(n,r),s=!0),n.shadowColor=t.shadowColor||ks.shadowColor),s}function vx(n,t,e,i,r){var s=Au(t,r.inHover),a=i?null:e&&Au(e,r.inHover)||{};if(s===a)return!1;var o=tI(n,s,a,i,r);if((i||s.fill!==a.fill)&&(o||(We(n,r),o=!0),cx(s.fill)&&(n.fillStyle=s.fill)),(i||s.stroke!==a.stroke)&&(o||(We(n,r),o=!0),cx(s.stroke)&&(n.strokeStyle=s.stroke)),(i||s.opacity!==a.opacity)&&(o||(We(n,r),o=!0),n.globalAlpha=s.opacity==null?1:s.opacity),t.hasStroke()){var l=s.lineWidth,u=l/(s.strokeNoScale&&t.getLineScale?t.getLineScale():1);n.lineWidth!==u&&(o||(We(n,r),o=!0),n.lineWidth=u)}for(var h=0;h<px.length;h++){var c=px[h],f=c[0];(i||s[f]!==a[f])&&(o||(We(n,r),o=!0),n[f]=s[f]||c[1])}return o}function UF(n,t,e,i,r){return tI(n,Au(t,r.inHover),e&&Au(e,r.inHover),i,r)}function eI(n,t){var e=t.transform,i=n.dpr||1;e?n.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):n.setTransform(i,0,0,i,0,0)}function XF(n,t,e){for(var i=!1,r=0;r<n.length;r++){var s=n[r];i=i||s.isZeroArea(),eI(t,s),t.beginPath(),s.buildPath(t,s.shape),t.clip()}e.allClipped=i}function KF(n,t){return n&&t?n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]||n[4]!==t[4]||n[5]!==t[5]:!(!n&&!t)}var mx=1,yx=2,_x=3,xx=4;function jF(n){var t=If(n),e=Ef(n);return!(n.lineDash||!(+t^+e)||t&&typeof n.fill!="string"||e&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function We(n,t){t.batchFill&&n.fill(),t.batchStroke&&n.stroke(),t.batchFill="",t.batchStroke=""}function Au(n,t){return t&&n.__hoverStyle||n.style}function nI(n,t){Cs(n,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Cs(n,t,e,i){var r=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1)){t.__dirty&=~sn,t.__isRendered=!1;return}var s=t.__clipPaths,a=e.prevElClipPaths,o=!1,l=!1;if((!a||zF(s,a))&&(a&&a.length&&(We(n,e),n.restore(),l=o=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),s&&s.length&&(We(n,e),n.save(),XF(s,n,e),o=!0),e.prevElClipPaths=s),e.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=e.prevEl;u||(l=o=!0);var h=t instanceof Rt&&t.autoBatch&&jF(t.style);o||KF(r,u.transform)?(We(n,e),eI(n,t)):h||We(n,e);var c=Au(t,e.inHover);t instanceof Rt?(e.lastDrawType!==mx&&(l=!0,e.lastDrawType=mx),vx(n,t,u,l,e),(!h||!e.batchFill&&!e.batchStroke)&&n.beginPath(),YF(n,t,c,h),h&&(e.batchFill=c.fill||"",e.batchStroke=c.stroke||"")):t instanceof mf?(e.lastDrawType!==_x&&(l=!0,e.lastDrawType=_x),vx(n,t,u,l,e),HF(n,t,c)):t instanceof Xs?(e.lastDrawType!==yx&&(l=!0,e.lastDrawType=yx),UF(n,t,u,l,e),$F(n,t,c)):t.getTemporalDisplayables&&(e.lastDrawType!==xx&&(l=!0,e.lastDrawType=xx),ZF(n,t,e)),h&&i&&We(n,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}function ZF(n,t,e){var i=t.getDisplayables(),r=t.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:e.viewWidth,viewHeight:e.viewHeight,inHover:e.inHover},a,o;for(a=t.getCursor(),o=i.length;a<o;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Cs(n,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var u=0,h=r.length;u<h;u++){var l=r[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Cs(n,l,s,u===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,n.restore()}var cp=new RF,Sx=new nh(100),bx=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function im(n,t){if(n==="none")return null;var e=t.getDevicePixelRatio(),i=t.getZr(),r=i.painter.type==="svg";n.dirty&&cp.delete(n);var s=cp.get(n);if(s)return s;var a=Pt(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=r?1:1/e,cp.set(n,o),n.dirty=!1,o;function l(u){for(var h=[e],c=!0,f=0;f<bx.length;++f){var d=a[bx[f]];if(d!=null&&!V(d)&&!U(d)&&!$t(d)&&typeof d!="boolean"){c=!1;break}h.push(d)}var g;if(c){g=h.join(",")+(r?"-svg":"");var v=Sx.get(g);v&&(r?u.svgElement=v:u.image=v)}var p=rI(a.dashArrayX),m=qF(a.dashArrayY),y=iI(a.symbol),_=JF(p),w=sI(m),S=!r&&No.createCanvas(),x=r&&{tag:"g",attrs:{},key:"dcl",children:[]},b=C(),T;S&&(S.width=b.width*e,S.height=b.height*e,T=S.getContext("2d")),I(),c&&Sx.put(g,S||x),u.image=S,u.svgElement=x,u.svgWidth=b.width,u.svgHeight=b.height;function C(){for(var E=1,R=0,L=_.length;R<L;++R)E=F1(E,_[R]);for(var M=1,R=0,L=y.length;R<L;++R)M=F1(M,y[R].length);E*=M;var k=w*_.length*y.length;return{width:Math.max(1,Math.min(E,a.maxTileWidth)),height:Math.max(1,Math.min(k,a.maxTileHeight))}}function I(){T&&(T.clearRect(0,0,S.width,S.height),a.backgroundColor&&(T.fillStyle=a.backgroundColor,T.fillRect(0,0,S.width,S.height)));for(var E=0,R=0;R<m.length;++R)E+=m[R];if(E<=0)return;for(var L=-w,M=0,k=0,D=0;L<b.height;){if(M%2===0){for(var z=k/2%y.length,O=0,B=0,F=0;O<b.width*2;){for(var W=0,R=0;R<p[D].length;++R)W+=p[D][R];if(W<=0)break;if(B%2===0){var H=(1-a.symbolSize)*.5,ct=O+p[D][B]*H,N=L+m[M]*H,Vt=p[D][B]*a.symbolSize,Bt=m[M]*a.symbolSize,Ot=F/2%y[z].length;ue(ct,N,Vt,Bt,y[z][Ot])}O+=p[D][B],++F,++B,B===p[D].length&&(B=0)}++D,D===p.length&&(D=0)}L+=m[M],++k,++M,M===m.length&&(M=0)}function ue(Wt,_t,K,rt,on){var ie=r?1:e,rr=Ad(on,Wt*ie,_t*ie,K*ie,rt*ie,a.color,a.symbolKeepAspect);if(r){var Zn=i.painter.renderOneToVNode(rr);Zn&&x.children.push(Zn)}else nI(T,rr)}}}}function iI(n){if(!n||n.length===0)return[["rect"]];if(U(n))return[[n]];for(var t=!0,e=0;e<n.length;++e)if(!U(n[e])){t=!1;break}if(t)return iI([n]);for(var i=[],e=0;e<n.length;++e)U(n[e])?i.push([n[e]]):i.push(n[e]);return i}function rI(n){if(!n||n.length===0)return[[0,0]];if($t(n)){var t=Math.ceil(n);return[[t,t]]}for(var e=!0,i=0;i<n.length;++i)if(!$t(n[i])){e=!1;break}if(e)return rI([n]);for(var r=[],i=0;i<n.length;++i)if($t(n[i])){var t=Math.ceil(n[i]);r.push([t,t])}else{var t=j(n[i],function(o){return Math.ceil(o)});t.length%2===1?r.push(t.concat(t)):r.push(t)}return r}function qF(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if($t(n)){var t=Math.ceil(n);return[t,t]}var e=j(n,function(i){return Math.ceil(i)});return n.length%2?e.concat(e):e}function JF(n){return j(n,function(t){return sI(t)})}function sI(n){for(var t=0,e=0;e<n.length;++e)t+=n[e];return n.length%2===1?t*2:t}function QF(n,t){n.eachRawSeries(function(e){if(!n.isSeriesFiltered(e)){var i=e.getData();i.hasItemVisual()&&i.each(function(a){var o=i.getItemVisual(a,"decal");if(o){var l=i.ensureUniqueItemVisual(a,"style");l.decal=im(o,t)}});var r=i.getVisual("decal");if(r){var s=i.getVisual("style");s.decal=im(r,t)}}})}var Gn=new yi,aI={};function tB(n,t){aI[n]=t}function eB(n){return aI[n]}var nB=1,iB=800,rB=900,sB=1e3,aB=2e3,oB=5e3,oI=1e3,lB=1100,o_=2e3,lI=3e3,uB=4e3,Rd=4500,hB=4600,cB=5e3,fB=6e3,uI=7e3,dB={PROCESSOR:{FILTER:sB,SERIES_FILTER:iB,STATISTIC:oB},VISUAL:{LAYOUT:oI,PROGRESSIVE_LAYOUT:lB,GLOBAL:o_,CHART:lI,POST_CHART_LAYOUT:hB,COMPONENT:uB,BRUSH:cB,CHART_ITEM:Rd,ARIA:fB,DECAL:uI}},ve="__flagInMainProcess",Pe="__pendingUpdate",fp="__needsUpdateStatus",Tx=/^[a-zA-Z0-9_]+$/,dp="__connectUpdateStatus",Cx=0,gB=1,pB=2;function hI(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isDisposed()){this.id;return}return fI(this,n,t)}}function cI(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fI(this,n,t)}}function fI(n,t,e){return e[0]=e[0]&&e[0].toLowerCase(),yi.prototype[t].apply(n,e)}var dI=function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(yi),gI=dI.prototype;gI.on=cI("on");gI.off=cI("off");var ya,gp,tc,ur,pp,vp,mp,pl,vl,Ex,Ix,yp,Ax,ec,Rx,pI,fn,Mx,vI=function(n){et(t,n);function t(e,i,r){var s=n.call(this,new SF)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],r=r||{},U(i)&&(i=mI[i]),s._dom=e;var a="canvas",o="auto",l=!1;r.ssr;var u=s._zr=P1(e,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:st(r.useDirtyRect,l),useCoarsePointer:st(r.useCoarsePointer,o),pointerSize:r.pointerSize});s._ssr=r.ssr,s._throttledZrFlush=s_(Yt(u.flush,u),17),i=ut(i),i&&TE(i,!0),s._theme=i,s._locale=LO(r.locale||iE),s._coordSysMgr=new t_;var h=s._api=Rx(s);function c(f,d){return f.__prio-d.__prio}return Fc(Rf,c),Fc(rm,c),s._scheduler=new UE(s,h,rm,Rf),s._messageCenter=new dI,s._initEvents(),s.resize=Yt(s.resize,s),u.animation.on("frame",s._onframe,s),Ex(u,s),Ix(u,s),yv(s),s}return t.prototype._onframe=function(){if(!this._disposed){Mx(this);var e=this._scheduler;if(this[Pe]){var i=this[Pe].silent;this[ve]=!0;try{ya(this),ur.update.call(this,null,this[Pe].updateParams)}catch(l){throw this[ve]=!1,this[Pe]=null,l}this._zr.flush(),this[ve]=!1,this[Pe]=null,pl.call(this,i),vl.call(this,i)}else if(e.unfinished){var r=nB,s=this._model,a=this._api;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(s),e.performDataProcessorTasks(s),vp(this,s),e.performVisualTasks(s),ec(this,this._model,a,"remain",{}),r-=+new Date-o}while(r>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,i,r){if(!this[ve]){if(this._disposed){this.id;return}var s,a,o;if(Z(i)&&(r=i.lazyUpdate,s=i.silent,a=i.replaceMerge,o=i.transition,i=i.notMerge),this[ve]=!0,!this._model||i){var l=new rN(this._api),u=this._theme,h=this._model=new Qy;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,u,this._locale,l)}this._model.setOption(e,{replaceMerge:a},sm);var c={seriesTransition:o,optionChanged:!0};if(r)this[Pe]={silent:s,updateParams:c},this[ve]=!1,this.getZr().wakeUp();else{try{ya(this),ur.update.call(this,null,c)}catch(f){throw this[Pe]=null,this[ve]=!1,f}this._ssr||this._zr.flush(),this[Pe]=null,this[ve]=!1,pl.call(this,s),vl.call(this,s)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||tt.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var i=this._zr.painter;return i.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(tt.svgSupported){var e=this._zr,i=e.storage.getDisplayList();return A(i,function(r){r.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(this._disposed){this.id;return}e=e||{};var i=e.excludeComponents,r=this._model,s=[],a=this;A(i,function(l){r.eachComponent({mainType:l},function(u){var h=a._componentsMap[u.__viewId];h.group.ignore||(s.push(h),h.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return A(s,function(l){l.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(e){if(this._disposed){this.id;return}var i=e.type==="svg",r=this.group,s=Math.min,a=Math.max,o=1/0;if(Lx[r]){var l=o,u=o,h=-o,c=-o,f=[],d=e&&e.pixelRatio||this.getDevicePixelRatio();A(au,function(_,w){if(_.group===r){var S=i?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(ut(e)),x=_.getDom().getBoundingClientRect();l=s(x.left,l),u=s(x.top,u),h=a(x.right,h),c=a(x.bottom,c),f.push({dom:S,left:x.left,top:x.top})}}),l*=d,u*=d,h*=d,c*=d;var g=h-l,v=c-u,p=No.createCanvas(),m=P1(p,{renderer:i?"svg":"canvas"});if(m.resize({width:g,height:v}),i){var y="";return A(f,function(_){var w=_.left-l,S=_.top-u;y+='<g transform="translate('+w+","+S+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return e.connectedBackgroundColor&&m.add(new ne({shape:{x:0,y:0,width:g,height:v},style:{fill:e.connectedBackgroundColor}})),A(f,function(_){var w=new Xs({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(w)}),m.refreshImmediately(),p.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)},t.prototype.convertToPixel=function(e,i){return pp(this,"convertToPixel",e,i)},t.prototype.convertFromPixel=function(e,i){return pp(this,"convertFromPixel",e,i)},t.prototype.containPixel=function(e,i){if(this._disposed){this.id;return}var r=this._model,s,a=Bg(r,e);return A(a,function(o,l){l.indexOf("Models")>=0&&A(o,function(u){var h=u.coordinateSystem;if(h&&h.containPoint)s=s||!!h.containPoint(i);else if(l==="seriesModels"){var c=this._chartsMap[u.__viewId];c&&c.containPoint&&(s=s||c.containPoint(i,u))}},this)},this),!!s},t.prototype.getVisual=function(e,i){var r=this._model,s=Bg(r,e,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?CF(o,l,i):qE(o,i)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;A(vB,function(i){var r=function(s){var a=e.getModel(),o=s.target,l,u=i==="globalout";if(u?l={}:o&&Fl(o,function(g){var v=St(g);if(v&&v.dataIndex!=null){var p=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=p&&p.getDataParams(v.dataIndex,v.dataType,o)||{},!0}else if(v.eventData)return l=G({},v.eventData),!0},!0),l){var h=l.componentType,c=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",c=l.seriesIndex);var f=h&&c!=null&&a.getComponent(h,c),d=f&&e[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=s,l.type=i,e._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:d},e.trigger(i,l)}};r.zrEventfulCallAtLast=!0,e._zr.on(i,r,e)}),A(su,function(i,r){e._messageCenter.on(r,function(s){this.trigger(r,s)},e)}),A(["selectchanged"],function(i){e._messageCenter.on(i,function(r){this.trigger(i,r)},e)}),EF(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var e=this.getDom();e&&_C(this.getDom(),u_,"");var i=this,r=i._api,s=i._model;A(i._componentsViews,function(a){a.dispose(s,r)}),A(i._chartsViews,function(a){a.dispose(s,r)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete au[i.id]},t.prototype.resize=function(e){if(!this[ve]){if(this._disposed){this.id;return}this._zr.resize(e);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var r=i.resetOption("media"),s=e&&e.silent;this[Pe]&&(s==null&&(s=this[Pe].silent),r=!0,this[Pe]=null),this[ve]=!0;try{r&&ya(this),ur.update.call(this,{type:"resize",animation:G({duration:0},e&&e.animation)})}catch(a){throw this[ve]=!1,a}this[ve]=!1,pl.call(this,s),vl.call(this,s)}}},t.prototype.showLoading=function(e,i){if(this._disposed){this.id;return}if(Z(e)&&(i=e,e=""),e=e||"default",this.hideLoading(),!!am[e]){var r=am[e](this._api,i),s=this._zr;this._loadingFX=r,s.add(r)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var i=G({},e);return i.type=su[e.type],i},t.prototype.dispatchAction=function(e,i){if(this._disposed){this.id;return}if(Z(i)||(i={silent:!!i}),!!Af[e.type]&&this._model){if(this[ve]){this._pendingActions.push(e);return}var r=i.silent;mp.call(this,e,r);var s=i.flush;s?this._zr.flush():s!==!1&&tt.browser.weChat&&this._throttledZrFlush(),pl.call(this,r),vl.call(this,r)}},t.prototype.updateLabelLayout=function(){Gn.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){this.id;return}var i=e.seriesIndex,r=this.getModel(),s=r.getSeriesByIndex(i);s.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){ya=function(c){var f=c._scheduler;f.restorePipelines(c._model),f.prepareStageTasks(),gp(c,!0),gp(c,!1),f.plan()},gp=function(c,f){for(var d=c._model,g=c._scheduler,v=f?c._componentsViews:c._chartsViews,p=f?c._componentsMap:c._chartsMap,m=c._zr,y=c._api,_=0;_<v.length;_++)v[_].__alive=!1;f?d.eachComponent(function(x,b){x!=="series"&&w(b)}):d.eachSeries(w);function w(x){var b=x.__requireNewView;x.__requireNewView=!1;var T="_ec_"+x.id+"_"+x.type,C=!b&&p[T];if(!C){var I=oi(x.type),E=f?Mn.getClass(I.main,I.sub):Mr.getClass(I.sub);C=new E,C.init(d,y),p[T]=C,v.push(C),m.add(C.group)}x.__viewId=C.__id=T,C.__alive=!0,C.__model=x,C.group.__ecComponentInfo={mainType:x.mainType,index:x.componentIndex},!f&&g.prepareView(C,x,d,y)}for(var _=0;_<v.length;){var S=v[_];S.__alive?_++:(!f&&S.renderTask.dispose(),m.remove(S.group),S.dispose(d,y),v.splice(_,1),p[S.__id]===S&&delete p[S.__id],S.__id=S.group.__ecComponentInfo=null)}},tc=function(c,f,d,g,v){var p=c._model;if(p.setUpdatePayload(d),!g){A([].concat(c._componentsViews).concat(c._chartsViews),S);return}var m={};m[g+"Id"]=d[g+"Id"],m[g+"Index"]=d[g+"Index"],m[g+"Name"]=d[g+"Name"];var y={mainType:g,query:m};v&&(y.subType=v);var _=d.excludeSeriesId,w;_!=null&&(w=ot(),A(Ae(_),function(x){var b=fi(x,null);b!=null&&w.set(b,!0)})),p&&p.eachComponent(y,function(x){var b=w&&w.get(x.id)!=null;if(!b)if(uw(d))if(x instanceof ji)d.type===Ps&&!d.notBlur&&!x.get(["emphasis","disabled"])&&cP(x,d,c._api);else{var T=ky(x.mainType,x.componentIndex,d.name,c._api),C=T.focusSelf,I=T.dispatchers;d.type===Ps&&C&&!d.notBlur&&Gv(x.mainType,x.componentIndex,c._api),I&&A(I,function(E){d.type===Ps?yf(E):_f(E)})}else Wv(d)&&x instanceof ji&&(gP(x,d,c._api),ow(x),fn(c))},c),p&&p.eachComponent(y,function(x){var b=w&&w.get(x.id)!=null;b||S(c[g==="series"?"_chartsMap":"_componentsMap"][x.__viewId])},c);function S(x){x&&x.__alive&&x[f]&&x[f](x.__model,p,c._api,d)}},ur={prepareAndUpdate:function(c){ya(this),ur.update.call(this,c,{optionChanged:c.newOption!=null})},update:function(c,f){var d=this._model,g=this._api,v=this._zr,p=this._coordSysMgr,m=this._scheduler;if(d){d.setUpdatePayload(c),m.restoreData(d,c),m.performSeriesTasks(d),p.create(d,g),m.performDataProcessorTasks(d,c),vp(this,d),p.update(d,g),e(d),m.performVisualTasks(d,c),yp(this,d,g,c,f);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");v.setBackgroundColor(y),_!=null&&_!=="auto"&&v.setDarkMode(_),Gn.trigger("afterupdate",d,g)}},updateTransform:function(c){var f=this,d=this._model,g=this._api;if(d){d.setUpdatePayload(c);var v=[];d.eachComponent(function(m,y){if(m!=="series"){var _=f.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var w=_.updateTransform(y,d,g,c);w&&w.update&&v.push(_)}else v.push(_)}});var p=ot();d.eachSeries(function(m){var y=f._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,g,c);_&&_.update&&p.set(m.uid,1)}else p.set(m.uid,1)}),e(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0,dirtyMap:p}),ec(this,d,g,c,{},p),Gn.trigger("afterupdate",d,g)}},updateView:function(c){var f=this._model;f&&(f.setUpdatePayload(c),Mr.markUpdateMethod(c,"updateView"),e(f),this._scheduler.performVisualTasks(f,c,{setDirty:!0}),yp(this,f,this._api,c,{}),Gn.trigger("afterupdate",f,this._api))},updateVisual:function(c){var f=this,d=this._model;d&&(d.setUpdatePayload(c),d.eachSeries(function(g){g.getData().clearAllVisual()}),Mr.markUpdateMethod(c,"updateVisual"),e(d),this._scheduler.performVisualTasks(d,c,{visualType:"visual",setDirty:!0}),d.eachComponent(function(g,v){if(g!=="series"){var p=f.getViewOfComponentModel(v);p&&p.__alive&&p.updateVisual(v,d,f._api,c)}}),d.eachSeries(function(g){var v=f._chartsMap[g.__viewId];v.updateVisual(g,d,f._api,c)}),Gn.trigger("afterupdate",d,this._api))},updateLayout:function(c){ur.update.call(this,c)}},pp=function(c,f,d,g){if(c._disposed){c.id;return}for(var v=c._model,p=c._coordSysMgr.getCoordinateSystems(),m,y=Bg(v,d),_=0;_<p.length;_++){var w=p[_];if(w[f]&&(m=w[f](v,y,g))!=null)return m}},vp=function(c,f){var d=c._chartsMap,g=c._scheduler;f.eachSeries(function(v){g.updateStreamModes(v,d[v.__viewId])})},mp=function(c,f){var d=this,g=this.getModel(),v=c.type,p=c.escapeConnect,m=Af[v],y=m.actionInfo,_=(y.update||"update").split(":"),w=_.pop(),S=_[0]!=null&&oi(_[0]);this[ve]=!0;var x=[c],b=!1;c.batch&&(b=!0,x=j(c.batch,function(M){return M=Pt(G({},M),c),M.batch=null,M}));var T=[],C,I=Wv(c),E=uw(c);if(E&&GC(this._api),A(x,function(M){if(C=m.action(M,d._model,d._api),C=C||G({},M),C.type=y.event||C.type,T.push(C),E){var k=Ey(c),D=k.queryOptionMap,z=k.mainTypeSpecified,O=z?D.keys()[0]:"series";tc(d,w,M,O),fn(d)}else I?(tc(d,w,M,"series"),fn(d)):S&&tc(d,w,M,S.main,S.sub)}),w!=="none"&&!E&&!I&&!S)try{this[Pe]?(ya(this),ur.update.call(this,c),this[Pe]=null):ur[w].call(this,c)}catch(M){throw this[ve]=!1,M}if(b?C={type:y.event||v,escapeConnect:p,batch:T}:C=T[0],this[ve]=!1,!f){var R=this._messageCenter;if(R.trigger(C.type,C),I){var L={type:"selectchanged",escapeConnect:p,selected:pP(g),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};R.trigger(L.type,L)}}},pl=function(c){for(var f=this._pendingActions;f.length;){var d=f.shift();mp.call(this,d,c)}},vl=function(c){!c&&this.trigger("updated")},Ex=function(c,f){c.on("rendered",function(d){f.trigger("rendered",d),c.animation.isFinished()&&!f[Pe]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},Ix=function(c,f){c.on("mouseover",function(d){var g=d.target,v=Fl(g,Vv);v&&(fP(v,d,f._api),fn(f))}).on("mouseout",function(d){var g=d.target,v=Fl(g,Vv);v&&(dP(v,d,f._api),fn(f))}).on("click",function(d){var g=d.target,v=Fl(g,function(y){return St(y).dataIndex!=null},!0);if(v){var p=v.selected?"unselect":"select",m=St(v);f._api.dispatchAction({type:p,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function e(c){c.clearColorPalette(),c.eachSeries(function(f){f.clearColorPalette()})}function i(c){var f=[],d=[],g=!1;if(c.eachComponent(function(y,_){var w=_.get("zlevel")||0,S=_.get("z")||0,x=_.getZLevelKey();g=g||!!x,(y==="series"?d:f).push({zlevel:w,z:S,idx:_.componentIndex,type:y,key:x})}),g){var v=f.concat(d),p,m;Fc(v,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),A(v,function(y){var _=c.getComponent(y.type,y.idx),w=y.zlevel,S=y.key;p!=null&&(w=Math.max(p,w)),S?(w===p&&S!==m&&w++,m=S):m&&(w===p&&w++,m=""),p=w,_.setZLevel(w)})}}yp=function(c,f,d,g,v){i(f),Ax(c,f,d,g,v),A(c._chartsViews,function(p){p.__alive=!1}),ec(c,f,d,g,v),A(c._chartsViews,function(p){p.__alive||p.remove(f,d)})},Ax=function(c,f,d,g,v,p){A(p||c._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,f,d,g),o(y,m),h(y,m)})},ec=function(c,f,d,g,v,p){var m=c._scheduler;v=G(v||{},{updatedSeries:f.getSeries()}),Gn.trigger("series:beforeupdate",f,d,v);var y=!1;f.eachSeries(function(_){var w=c._chartsMap[_.__viewId];w.__alive=!0;var S=w.renderTask;m.updatePayload(S,g),u(_,w),p&&p.get(_.uid)&&S.dirty(),S.perform(m.getPerformArgs(S))&&(y=!0),w.group.silent=!!_.get("silent"),a(_,w),ow(_)}),m.unfinished=y||m.unfinished,Gn.trigger("series:layoutlabels",f,d,v),Gn.trigger("series:transition",f,d,v),f.eachSeries(function(_){var w=c._chartsMap[_.__viewId];o(_,w),h(_,w)}),s(c,f),Gn.trigger("series:afterupdate",f,d,v)},fn=function(c){c[fp]=!0,c.getZr().wakeUp()},Mx=function(c){c[fp]&&(c.getZr().storage.traverse(function(f){eu(f)||r(f)}),c[fp]=!1)};function r(c){for(var f=[],d=c.currentStates,g=0;g<d.length;g++){var v=d[g];v==="emphasis"||v==="blur"||v==="select"||f.push(v)}c.selected&&c.states.select&&f.push("select"),c.hoverState===My&&c.states.emphasis?f.push("emphasis"):c.hoverState===Ry&&c.states.blur&&f.push("blur"),c.useStates(f)}function s(c,f){var d=c._zr,g=d.storage,v=0;g.traverse(function(p){p.isGroup||v++}),v>f.get("hoverLayerThreshold")&&!tt.node&&!tt.worker&&f.eachSeries(function(p){if(!p.preventUsingHoverLayer){var m=c._chartsMap[p.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(c,f){var d=c.get("blendMode")||null;f.eachRendered(function(g){g.isGroup||(g.style.blend=d)})}function o(c,f){if(!c.preventAutoZ){var d=c.get("z")||0,g=c.get("zlevel")||0;f.eachRendered(function(v){return l(v,d,g,-1/0),!0})}}function l(c,f,d,g){var v=c.getTextContent(),p=c.getTextGuideLine(),m=c.isGroup;if(m)for(var y=c.childrenRef(),_=0;_<y.length;_++)g=Math.max(l(y[_],f,d,g),g);else c.z=f,c.zlevel=d,g=Math.max(c.z2,g);if(v&&(v.z=f,v.zlevel=d,isFinite(g)&&(v.z2=g+2)),p){var w=c.textGuideLineConfig;p.z=f,p.zlevel=d,isFinite(g)&&(p.z2=g+(w&&w.showAbove?1:-1))}return g}function u(c,f){f.eachRendered(function(d){if(!eu(d)){var g=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function h(c,f){var d=c.getModel("stateAnimation"),g=c.isAnimationEnabled(),v=d.get("duration"),p=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;f.eachRendered(function(m){if(m.states&&m.states.emphasis){if(eu(m))return;if(m instanceof Rt&&xP(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=p;var _=m.getTextContent(),w=m.getTextGuideLine();_&&(_.stateTransition=p),w&&(w.stateTransition=p)}m.__dirty&&r(m)}})}Rx=function(c){return new(function(f){et(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(g){for(;g;){var v=g.__ecComponentInfo;if(v!=null)return c._model.getComponent(v.mainType,v.index);g=g.parent}},d.prototype.enterEmphasis=function(g,v){yf(g,v),fn(c)},d.prototype.leaveEmphasis=function(g,v){_f(g,v),fn(c)},d.prototype.enterBlur=function(g){OC(g),fn(c)},d.prototype.leaveBlur=function(g){Dy(g),fn(c)},d.prototype.enterSelect=function(g){NC(g),fn(c)},d.prototype.leaveSelect=function(g){FC(g),fn(c)},d.prototype.getModel=function(){return c.getModel()},d.prototype.getViewOfComponentModel=function(g){return c.getViewOfComponentModel(g)},d.prototype.getViewOfSeriesModel=function(g){return c.getViewOfSeriesModel(g)},d}(SE))(c)},pI=function(c){function f(d,g){for(var v=0;v<d.length;v++){var p=d[v];p[dp]=g}}A(su,function(d,g){c._messageCenter.on(g,function(v){if(Lx[c.group]&&c[dp]!==Cx){if(v&&v.escapeConnect)return;var p=c.makeActionFromEvent(v),m=[];A(au,function(y){y!==c&&y.group===c.group&&m.push(y)}),f(m,Cx),A(m,function(y){y[dp]!==gB&&y.dispatchAction(p)}),f(m,pB)}})})}}(),t}(yi),l_=vI.prototype;l_.on=hI("on");l_.off=hI("off");l_.one=function(n,t,e){var i=this;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];t&&t.apply&&t.apply(this,s),i.off(n,r)}this.on.call(this,n,r,e)};var vB=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Af={},su={},rm=[],sm=[],Rf=[],mI={},am={},au={},Lx={},mB=+new Date-0,u_="_echarts_instance_";function yB(n,t,e){{var i=_B(n);if(i)return i}var r=new vI(n,t,e);return r.id="ec_"+mB++,au[r.id]=r,_C(n,u_,r.id),pI(r),Gn.trigger("afterinit",r),r}function _B(n){return au[ek(n,u_)]}function yI(n,t){mI[n]=t}function _I(n){bt(sm,n)<0&&sm.push(n)}function wI(n,t){c_(rm,n,t,aB)}function wB(n){h_("afterinit",n)}function xB(n){h_("afterupdate",n)}function h_(n,t){Gn.on(n,t)}function Vo(n,t,e){lt(t)&&(e=t,t="");var i=Z(n)?n.type:[n,n={event:t}][0];n.event=(n.event||i).toLowerCase(),t=n.event,!su[t]&&(Ui(Tx.test(i)&&Tx.test(t)),Af[i]||(Af[i]={action:e,actionInfo:n}),su[t]=i)}function SB(n,t){t_.register(n,t)}function bB(n,t){c_(Rf,n,t,oI,"layout")}function Ks(n,t){c_(Rf,n,t,lI,"visual")}var Dx=[];function c_(n,t,e,i,r){if((lt(t)||Z(t))&&(e=t,t=i),!(bt(Dx,e)>=0)){Dx.push(e);var s=UE.wrapStageHandler(e,r);s.__prio=t,s.__raw=e,n.push(s)}}function xI(n,t){am[n]=t}function TB(n,t,e){var i=eB("registerMap");i&&i(n,t,e)}var CB=kN;Ks(o_,lF);Ks(Rd,uF);Ks(Rd,hF);Ks(o_,bF);Ks(Rd,TF);Ks(uI,QF);_I(TE);wI(rB,vN);xI("default",cF);Vo({type:Ps,event:Ps,update:Ps},Ue);Vo({type:Yc,event:Yc,update:Yc},Ue);Vo({type:Jl,event:Jl,update:Jl},Ue);Vo({type:$c,event:$c,update:$c},Ue);Vo({type:Ql,event:Ql,update:Ql},Ue);yI("light",xF);yI("dark",ZE);function ml(n){return n==null?0:n.length||1}function kx(n){return n}var EB=function(){function n(t,e,i,r,s,a){this._old=t,this._new=e,this._oldKeyGetter=i||kx,this._newKeyGetter=r||kx,this.context=s,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,i={},r=new Array(t.length),s=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,i,s,"_newKeyGetter");for(var a=0;a<t.length;a++){var o=r[a],l=i[o],u=ml(l);if(u>1){var h=l.shift();l.length===1&&(i[o]=l[0]),this._update&&this._update(h,a)}else u===1?(i[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,i)},n.prototype._executeMultiple=function(){var t=this._old,e=this._new,i={},r={},s=[],a=[];this._initIndexMap(t,i,s,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],u=i[l],h=r[l],c=ml(u),f=ml(h);if(c>1&&f===1)this._updateManyToOne&&this._updateManyToOne(h,u),r[l]=null;else if(c===1&&f>1)this._updateOneToMany&&this._updateOneToMany(h,u),r[l]=null;else if(c===1&&f===1)this._update&&this._update(h,u),r[l]=null;else if(c>1&&f>1)this._updateManyToMany&&this._updateManyToMany(h,u),r[l]=null;else if(c>1)for(var d=0;d<c;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,r)},n.prototype._performRestAdd=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],s=e[r],a=ml(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);e[r]=null}},n.prototype._initIndexMap=function(t,e,i,r){for(var s=this._diffModeMultiple,a=0;a<t.length;a++){var o="_ec_"+this[r](t[a],a);if(s||(i[a]=o),!!e){var l=e[o],u=ml(l);u===0?(e[o]=a,s&&i.push(o)):u===1?e[o]=[l,a]:l.push(a)}}},n}(),IB=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function AB(n,t){var e={},i=e.encode={},r=ot(),s=[],a=[],o={};A(n.dimensions,function(f){var d=n.getDimensionInfo(f),g=d.coordDim;if(g){var v=d.coordDimIndex;_p(i,g)[v]=f,d.isExtraCoord||(r.set(g,1),MB(d.type)&&(s[0]=f),_p(o,g)[v]=n.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(f)}mE.each(function(p,m){var y=_p(i,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};r.each(function(f,d){var g=i[d];u[d]=g[0],l=l.concat(g)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=j(l,function(f){return n.getDimensionInfo(f).storeDimIndex}),e.encodeFirstDimNotExtra=u;var h=i.label;h&&h.length&&(s=h.slice());var c=i.tooltip;return c&&c.length?a=c.slice():a.length||(a=s.slice()),i.defaultedLabel=s,i.defaultedTooltip=a,e.userOutput=new IB(o,t),e}function _p(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function RB(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function MB(n){return!(n==="ordinal"||n==="time")}var Xc=function(){function n(t){this.otherDims={},t!=null&&G(this,t)}return n}(),LB=jt(),DB={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SI=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=CI(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return st(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=IE(this.source),i=!EI(t),r="",s=[],a=0,o=0;a<t;a++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[o];if(c&&c.storeDimIndex===a)l=e?c.name:null,u=c.type,h=c.ordinalMeta,o++;else{var f=this.getSourceDimension(a);f&&(l=e?f.name:null,u=f.type)}s.push({property:l,type:u,ordinalMeta:h}),e&&l!=null&&(!c||!c.isCalculationCoord)&&(r+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=DB[u]||"f",h&&(r+=h.uid),r+="$"}var d=this.source,g=[d.seriesLayoutBy,d.startIndex,r].join("$$");return{dimensions:s,hash:g}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,i=0;e<this._fullDimCount;e++){var r=void 0,s=this.dimensions[i];if(s&&s.storeDimIndex===e)s.isCalculationCoord||(r=s.name),i++;else{var a=this.getSourceDimension(e);a&&(r=a.name)}t.push(r)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function bI(n){return n instanceof SI}function TI(n){for(var t=ot(),e=0;e<(n||[]).length;e++){var i=n[e],r=Z(i)?i.name:i;r!=null&&t.get(r)==null&&t.set(r,e)}return t}function CI(n){var t=LB(n);return t.dimNameMap||(t.dimNameMap=TI(n.dimensionsDefine))}function EI(n){return n>30}var yl=Z,hr=j,kB=typeof Int32Array>"u"?Array:Int32Array,PB="e\0\0",Px=-1,OB=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],NB=["_approximateExtent"],Ox,nc,_l,wl,wp,ic,xp,Kc=function(){function n(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,r=!1;bI(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(r=!0,i=t),i=i||["x","y"];for(var s={},a=[],o={},l=!1,u={},h=0;h<i.length;h++){var c=i[h],f=U(c)?new Xc({name:c}):c instanceof Xc?c:new Xc(c),d=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=d,f.coordDimIndex=0);var g=f.otherDims=f.otherDims||{};a.push(d),s[d]=f,u[d]!=null&&(l=!0),f.createInvertedIndices&&(o[d]=[]),g.itemName===0&&(this._nameDimIdx=h),g.itemId===0&&(this._idDimIdx=h),r&&(f.storeDimIndex=h)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=o,this._dimOmitted){var v=this._dimIdxToName=ot();A(a,function(p){v.set(s[p].storeDimIndex,p)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var i=this._dimIdxToName.get(e);if(i!=null)return i;var r=this._schema.getSourceDimension(e);if(r)return r.name},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if($t(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(i){return e.hasOwnProperty(i)?e[i]:void 0}:function(i){return e[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var i=this._dimSummary;if(e==null)return i.encodeFirstDimNotExtra[t];var r=i.encode[t];return r?r[e]:null},n.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,i=e.encode[t];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,i){var r=this,s;if(t instanceof Kv&&(s=t),!s){var a=this.dimensions,o=e_(t)||Xe(t)?new AE(t,a.length):t;s=new Kv;var l=hr(a,function(u){return{type:r._dimInfos[u].type,property:u}});s.initData(o,l,i)}this._store=s,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=AB(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var i=this._store.appendValues(t,e.length),r=i.start,s=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var o=r;o<s;o++){var l=o-r;this._nameList[o]=e[l],a&&xp(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,i=0;i<e.length;i++){var r=this._dimInfos[e[i]];r.ordinalMeta&&t.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Rr&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=r.getSource().sourceFormat,l=o===Dn;if(l&&!r.pure)for(var u=[],h=t;h<e;h++){var c=r.getItem(h,u);if(!this.hasItemOption&&$D(c)&&(this.hasItemOption=!0),c){var f=c.name;s[h]==null&&f!=null&&(s[h]=fi(f,null));var d=c.id;a[h]==null&&d!=null&&(a[h]=fi(d,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<e;h++)xp(this,h);Ox(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){yl(t)?G(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),i=this._nameList[e];return i==null&&this._nameDimIdx!=null&&(i=_l(this,this._nameDimIdx,e)),i==null&&(i=""),i},n.prototype._getCategory=function(t,e){var i=this._store.get(t,e),r=this._store.getOrdinalMeta(t);return r?r.categories[i]:i},n.prototype.getId=function(t){return nc(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.get(r.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.getByRawIndex(r.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var i=this,r=this._store;return V(t)?r.getValues(hr(t,function(s){return i._getStoreDimIndex(s)}),e):r.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,i=0,r=e.length;i<r;i++)if(isNaN(this._store.get(e[i],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,i=this._store.count();e<i;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var i=t&&this._invertedIndicesMap[t],r=i[e];return r==null||isNaN(r)?Px:r},n.prototype.indicesOfNearest=function(t,e,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,i)},n.prototype.each=function(t,e,i){lt(t)&&(i=e,e=t,t=[]);var r=i||this,s=hr(wl(t),this._getStoreDimIndex,this);this._store.each(s,r?Yt(e,r):e)},n.prototype.filterSelf=function(t,e,i){lt(t)&&(i=e,e=t,t=[]);var r=i||this,s=hr(wl(t),this._getStoreDimIndex,this);return this._store=this._store.filter(s,r?Yt(e,r):e),this},n.prototype.selectRange=function(t){var e=this,i={},r=zt(t);return A(r,function(s){var a=e._getStoreDimIndex(s);i[a]=t[s]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(t,e,i){lt(t)&&(i=e,e=t,t=[]),i=i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},i),r},n.prototype.map=function(t,e,i,r){var s=i||r||this,a=hr(wl(t),this._getStoreDimIndex,this),o=ic(this);return o._store=this._store.map(a,s?Yt(e,s):e),o},n.prototype.modify=function(t,e,i,r){var s=i||r||this,a=hr(wl(t),this._getStoreDimIndex,this);this._store.modify(a,s?Yt(e,s):e)},n.prototype.downSample=function(t,e,i,r){var s=ic(this);return s._store=this._store.downSample(this._getStoreDimIndex(t),e,i,r),s},n.prototype.lttbDownSample=function(t,e){var i=ic(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),i},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,i=this.getRawDataItem(t);return new Xt(i,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new EB(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return nc(t,i)},function(i){return nc(e,i)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},yl(t)?G(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var i=this._itemVisuals[t],r=i&&i[e];return r??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var i=this._itemVisuals,r=i[t];r||(r=i[t]={});var s=r[e];return s==null&&(s=this.getVisual(e),V(s)?s=s.slice():yl(s)&&(s=G({},s)),r[e]=s),s},n.prototype.setItemVisual=function(t,e,i){var r=this._itemVisuals[t]||{};this._itemVisuals[t]=r,yl(e)?G(r,e):r[e]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){yl(t)?G(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?G(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){var i=this.hostModel&&this.hostModel.seriesIndex;eP(i,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){A(this._graphicEls,function(i,r){i&&t&&t.call(e,i,r)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:hr(this.dimensions,this._getDimInfo,this),this.hostModel)),wp(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var i=this[t];lt(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var r=i.apply(this,arguments);return e.apply(this,[r].concat(dy(arguments)))})},n.internalField=function(){Ox=function(t){var e=t._invertedIndicesMap;A(e,function(i,r){var s=t._dimInfos[r],a=s.ordinalMeta,o=t._store;if(a){i=e[r]=new kB(a.categories.length);for(var l=0;l<i.length;l++)i[l]=Px;for(var l=0;l<o.count();l++)i[o.get(s.storeDimIndex,l)]=l}})},_l=function(t,e,i){return fi(t._getCategory(e,i),null)},nc=function(t,e){var i=t._idList[e];return i==null&&t._idDimIdx!=null&&(i=_l(t,t._idDimIdx,e)),i==null&&(i=PB+e),i},wl=function(t){return V(t)||(t=t!=null?[t]:[]),t},ic=function(t){var e=new n(t._schema?t._schema:hr(t.dimensions,t._getDimInfo,t),t.hostModel);return wp(e,t),e},wp=function(t,e){A(OB.concat(e.__wrappedMethods||[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods,A(NB,function(i){t[i]=ut(e[i])}),t._calculationInfo=G({},e._calculationInfo)},xp=function(t,e){var i=t._nameList,r=t._idList,s=t._nameDimIdx,a=t._idDimIdx,o=i[e],l=r[e];if(o==null&&s!=null&&(i[e]=o=_l(t,s,e)),l==null&&a!=null&&(r[e]=l=_l(t,a,e)),l==null&&o!=null){var u=t._nameRepeatCount,h=u[o]=(u[o]||0)+1;l=o,h>1&&(l+="__ec__"+h),r[e]=l}}}(),n}();function FB(n,t){e_(n)||(n=CE(n)),t=t||{};var e=t.coordDimensions||[],i=t.dimensionsDefine||n.dimensionsDefine||[],r=ot(),s=[],a=GB(n,e,i,t.dimensionsCount),o=t.canOmitUnusedDimensions&&EI(a),l=i===n.dimensionsDefine,u=l?CI(n):TI(i),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(n,a));for(var c=ot(h),f=new kE(a),d=0;d<f.length;d++)f[d]=-1;function g(C){var I=f[C];if(I<0){var E=i[C],R=Z(E)?E:{name:E},L=new Xc,M=R.name;M!=null&&u.get(M)!=null&&(L.name=L.displayName=M),R.type!=null&&(L.type=R.type),R.displayName!=null&&(L.displayName=R.displayName);var k=s.length;return f[C]=k,L.storeDimIndex=C,s.push(L),L}return s[I]}if(!o)for(var d=0;d<a;d++)g(d);c.each(function(C,I){var E=Ae(C).slice();if(E.length===1&&!U(E[0])&&E[0]<0){c.set(I,!1);return}var R=c.set(I,[]);A(E,function(L,M){var k=U(L)?u.get(L):L;k!=null&&k<a&&(R[M]=k,p(g(k),I,M))})});var v=0;A(e,function(C){var I,E,R,L;if(U(C))I=C,L={};else{L=C,I=L.name;var M=L.ordinalMeta;L.ordinalMeta=null,L=G({},L),L.ordinalMeta=M,E=L.dimsDef,R=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var k=c.get(I);if(k!==!1){if(k=Ae(k),!k.length)for(var D=0;D<(E&&E.length||1);D++){for(;v<a&&g(v).coordDim!=null;)v++;v<a&&k.push(v++)}A(k,function(z,O){var B=g(z);if(l&&L.type!=null&&(B.type=L.type),p(Pt(B,L),I,O),B.name==null&&E){var F=E[O];!Z(F)&&(F={name:F}),B.name=B.displayName=F.name,B.defaultTooltip=F.defaultTooltip}R&&Pt(B.otherDims,R)})}});function p(C,I,E){mE.get(I)!=null?C.otherDims[I]=E:(C.coordDim=I,C.coordDimIndex=E,r.set(I,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var w=m||"value";function S(C){C.name==null&&(C.name=C.coordDim)}if(o)A(s,function(C){S(C)}),s.sort(function(C,I){return C.storeDimIndex-I.storeDimIndex});else for(var x=0;x<a;x++){var b=g(x),T=b.coordDim;T==null&&(b.coordDim=zB(w,r,_),b.coordDimIndex=0,(!m||y<=0)&&(b.isExtraCoord=!0),y--),S(b),b.type==null&&(xE(n,x)===Qe.Must||b.isExtraCoord&&(b.otherDims.itemName!=null||b.otherDims.seriesName!=null))&&(b.type="ordinal")}return BB(s),new SI({source:n,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function BB(n){for(var t=ot(),e=0;e<n.length;e++){var i=n[e],r=i.name,s=t.get(r)||0;s>0&&(i.name=r+(s-1)),s++,t.set(r,s)}}function GB(n,t,e,i){var r=Math.max(n.dimensionsDetectedCount||1,t.length,e.length,i||0);return A(t,function(s){var a;Z(s)&&(a=s.dimsDef)&&(r=Math.max(r,a.length))}),r}function zB(n,t,e){if(e||t.hasKey(n)){for(var i=0;t.hasKey(n+i);)i++;n+=i}return t.set(n,!0),n}var VB=function(){function n(t){this.coordSysDims=[],this.axisMap=ot(),this.categoryAxisMap=ot(),this.coordSysName=t}return n}();function WB(n){var t=n.get("coordinateSystem"),e=new VB(t),i=YB[t];if(i)return i(n,e,e.axisMap,e.categoryAxisMap),e}var YB={cartesian2d:function(n,t,e,i){var r=n.getReferringComponents("xAxis",Vn).models[0],s=n.getReferringComponents("yAxis",Vn).models[0];t.coordSysDims=["x","y"],e.set("x",r),e.set("y",s),_a(r)&&(i.set("x",r),t.firstCategoryDimIndex=0),_a(s)&&(i.set("y",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,e,i){var r=n.getReferringComponents("singleAxis",Vn).models[0];t.coordSysDims=["single"],e.set("single",r),_a(r)&&(i.set("single",r),t.firstCategoryDimIndex=0)},polar:function(n,t,e,i){var r=n.getReferringComponents("polar",Vn).models[0],s=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",s),e.set("angle",a),_a(s)&&(i.set("radius",s),t.firstCategoryDimIndex=0),_a(a)&&(i.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(n,t,e,i){t.coordSysDims=["lng","lat"]},parallel:function(n,t,e,i){var r=n.ecModel,s=r.getComponent("parallel",n.get("parallelIndex")),a=t.coordSysDims=s.dimensions.slice();A(s.parallelAxisIndex,function(o,l){var u=r.getComponent("parallelAxis",o),h=a[l];e.set(h,u),_a(u)&&(i.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function _a(n){return n.get("type")==="category"}function $B(n,t,e){e=e||{};var i=e.byIndex,r=e.stackedCoordDimension,s,a,o;HB(t)?s=t:(a=t.schema,s=a.dimensions,o=t.store);var l=!!(n&&n.get("stack")),u,h,c,f;if(A(s,function(y,_){U(y)&&(s[_]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!r||r===y.coordDim)&&(h=y))}),h&&!i&&!u&&(i=!0),h){c="__\0ecstackresult_"+n.id,f="__\0ecstackedover_"+n.id,u&&(u.createInvertedIndices=!0);var d=h.coordDim,g=h.type,v=0;A(s,function(y){y.coordDim===d&&v++});var p={name:c,coordDim:d,coordDimIndex:v,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},m={name:f,coordDim:f,coordDimIndex:v+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};a?(o&&(p.storeDimIndex=o.ensureCalculationDimension(f,g),m.storeDimIndex=o.ensureCalculationDimension(c,g)),a.appendCalculationDimension(p),a.appendCalculationDimension(m)):(s.push(p),s.push(m))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:i,stackedOverDimension:f,stackResultDimension:c}}function HB(n){return!bI(n.schema)}function f_(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function II(n,t){return f_(n,t)?n.getCalculationInfo("stackResultDimension"):t}function UB(n,t){var e=n.get("coordinateSystem"),i=t_.get(e),r;return t&&t.coordSysDims&&(r=j(t.coordSysDims,function(s){var a={name:s},o=t.axisMap.get(s);if(o){var l=o.get("type");a.type=RB(l)}return a})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),r}function XB(n,t,e){var i,r;return e&&A(n,function(s,a){var o=s.coordDim,l=e.categoryAxisMap.get(o);l&&(i==null&&(i=a),s.ordinalMeta=l.getOrdinalMeta(),t&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(r=!0)}),!r&&i!=null&&(n[i].otherDims.itemName=0),i}function AI(n,t,e){e=e||{};var i=t.getSourceManager(),r,s=!1;r=i.getSource(),s=r.sourceFormat===Dn;var a=WB(t),o=UB(t,a),l=e.useEncodeDefaulter,u=lt(l)?l:l?Gt(HO,o,t):null,h={coordDimensions:o,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!s},c=FB(r,h),f=XB(c.dimensions,e.createInvertedIndices,a),d=s?null:i.getSharedDataStore(c),g=$B(t,{schema:c,store:d}),v=new Kc(c,t);v.setCalculationInfo(g);var p=f!=null&&KB(r)?function(m,y,_,w){return w===f?_:this.defaultDimValueGetter(m,y,_,w)}:null;return v.hasItemOption=!1,v.initData(s?r:d,null,p),v}function KB(n){if(n.sourceFormat===Dn){var t=jB(n.data||[]);return!V(ih(t))}}function jB(n){for(var t=0;t<n.length&&n[t]==null;)t++;return n[t]}var wi=function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},n.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n}();ud(wi);var ZB=0,om=function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++ZB}return n.createByAxisModel=function(t){var e=t.option,i=e.data,r=i&&j(i,qB);return new n({categories:r,needCollect:!r,deduplication:e.dedplication!==!1})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var e,i=this._needCollect;if(!U(t)&&!i)return t;if(i&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var r=this._getOrCreateMap();return e=r.get(t),e==null&&(i?(e=this.categories.length,this.categories[e]=t,r.set(t,e)):e=NaN),e},n.prototype._getOrCreateMap=function(){return this._map||(this._map=ot(this.categories))},n}();function qB(n){return Z(n)&&n.value!=null?n.value:n+""}function lm(n){return n.type==="interval"||n.type==="log"}function JB(n,t,e,i){var r={},s=n[1]-n[0],a=r.interval=gC(s/t);e!=null&&a<e&&(a=r.interval=e),i!=null&&a>i&&(a=r.interval=i);var o=r.intervalPrecision=RI(a),l=r.niceTickExtent=[ae(Math.ceil(n[0]/a)*a,o),ae(Math.floor(n[1]/a)*a,o)];return QB(l,n),r}function Sp(n){var t=Math.pow(10,Ty(n)),e=n/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,ae(e*t)}function RI(n){return mo(n)+2}function Nx(n,t,e){n[t]=Math.max(Math.min(n[t],e[1]),e[0])}function QB(n,t){!isFinite(n[0])&&(n[0]=t[0]),!isFinite(n[1])&&(n[1]=t[1]),Nx(n,0,t),Nx(n,1,t),n[0]>n[1]&&(n[0]=n[1])}function Md(n,t){return n>=t[0]&&n<=t[1]}function Ld(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function Dd(n,t){return n*(t[1]-t[0])+t[0]}var d_=function(n){et(t,n);function t(e){var i=n.call(this,e)||this;i.type="ordinal";var r=i.getSetting("ordinalMeta");return r||(r=new om({})),V(r)&&(r=new om({categories:j(r,function(s){return Z(s)?s.value:s})})),i._ordinalMeta=r,i._extent=i.getSetting("extent")||[0,r.categories.length-1],i}return t.prototype.parse=function(e){return e==null?NaN:U(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),Md(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),Ld(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(Dd(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],i=this._extent,r=i[0];r<=i[1];)e.push({value:r}),r++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=e.ordinalNumbers,r=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],a=0,o=this._ordinalMeta.categories.length,l=Math.min(o,i.length);a<l;++a){var u=i[a];r[a]=u,s[u]=a}for(var h=0;a<o;++a){for(;s[h]!=null;)h++;r.push(h),s[h]=a}},t.prototype._getTickNumber=function(e){var i=this._ticksByOrdinalNumber;return i&&e>=0&&e<i.length?i[e]:e},t.prototype.getRawOrdinalNumber=function(e){var i=this._ordinalNumbersByTick;return i&&e>=0&&e<i.length?i[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var i=this.getRawOrdinalNumber(e.value),r=this._ordinalMeta.categories[i];return r==null?"":r+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,i){this.unionExtent(e.getApproximateExtent(i))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(wi);wi.registerClass(d_);var ds=ae,Wo=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return Md(e,this._extent)},t.prototype.normalize=function(e){return Ld(e,this._extent)},t.prototype.scale=function(e){return Dd(e,this._extent)},t.prototype.setExtent=function(e,i){var r=this._extent;isNaN(e)||(r[0]=parseFloat(e)),isNaN(i)||(r[1]=parseFloat(i))},t.prototype.unionExtent=function(e){var i=this._extent;e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=RI(e)},t.prototype.getTicks=function(e){var i=this._interval,r=this._extent,s=this._niceExtent,a=this._intervalPrecision,o=[];if(!i)return o;var l=1e4;r[0]<s[0]&&(e?o.push({value:ds(s[0]-i,a)}):o.push({value:r[0]}));for(var u=s[0];u<=s[1]&&(o.push({value:u}),u=ds(u+i,a),u!==o[o.length-1].value);)if(o.length>l)return[];var h=o.length?o[o.length-1].value:s[1];return r[1]>h&&(e?o.push({value:ds(h+i,a)}):o.push({value:r[1]})),o},t.prototype.getMinorTicks=function(e){for(var i=this.getTicks(!0),r=[],s=this.getExtent(),a=1;a<i.length;a++){for(var o=i[a],l=i[a-1],u=0,h=[],c=o.value-l.value,f=c/e;u<e-1;){var d=ds(l.value+(u+1)*f);d>s[0]&&d<s[1]&&h.push(d),u++}r.push(h)}return r},t.prototype.getLabel=function(e,i){if(e==null)return"";var r=i&&i.precision;r==null?r=mo(e.value)||0:r==="auto"&&(r=this._intervalPrecision);var s=ds(e.value,r,!0);return dE(s)},t.prototype.calcNiceTicks=function(e,i,r){e=e||5;var s=this._extent,a=s[1]-s[0];if(isFinite(a)){a<0&&(a=-a,s.reverse());var o=JB(s,e,i,r);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var r=Math.abs(i[0]);e.fixMax||(i[1]+=r/2),i[0]-=r/2}else i[1]=1;var s=i[1]-i[0];isFinite(s)||(i[0]=0,i[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(i[0]=ds(Math.floor(i[0]/a)*a)),e.fixMax||(i[1]=ds(Math.ceil(i[1]/a)*a))},t.prototype.setNiceExtent=function(e,i){this._niceExtent=[e,i]},t.type="interval",t}(wi);wi.registerClass(Wo);var MI=typeof Float32Array<"u",t5=MI?Float32Array:Array;function bp(n){return V(n)?MI?new Float32Array(n):n:new t5(n)}var e5="__ec_stack_";function g_(n){return n.get("stack")||e5+n.seriesIndex}function p_(n){return n.dim+n.index}function LI(n,t){var e=[];return t.eachSeriesByType(n,function(i){kI(i)&&e.push(i)}),e}function n5(n){var t={};A(n,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),f=h.dim+"_"+h.index,d=c.getDimensionIndex(c.mapDimension(h.dim)),g=c.getStore(),v=0,p=g.count();v<p;++v){var m=g.get(d,v);t[f]?t[f].push(m):t[f]=[m]}});var e={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(r){r.sort(function(l,u){return l-u});for(var s=null,a=1;a<r.length;++a){var o=r[a]-r[a-1];o>0&&(s=s===null?o:Math.min(s,o))}e[i]=s}}return e}function DI(n){var t=n5(n),e=[];return A(n,function(i){var r=i.coordinateSystem,s=r.getBaseAxis(),a=s.getExtent(),o;if(s.type==="category")o=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var l=s.dim+"_"+s.index,u=t[l],h=Math.abs(a[1]-a[0]),c=s.scale.getExtent(),f=Math.abs(c[1]-c[0]);o=u?h/f*u:h}else{var d=i.getData();o=Math.abs(a[1]-a[0])/d.count()}var g=ce(i.get("barWidth"),o),v=ce(i.get("barMaxWidth"),o),p=ce(i.get("barMinWidth")||(PI(i)?.5:1),o),m=i.get("barGap"),y=i.get("barCategoryGap");e.push({bandWidth:o,barWidth:g,barMaxWidth:v,barMinWidth:p,barGap:m,barCategoryGap:y,axisKey:p_(s),stackId:g_(i)})}),i5(e)}function i5(n){var t={};A(n,function(i,r){var s=i.axisKey,a=i.bandWidth,o=t[s]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;t[s]=o;var u=i.stackId;l[u]||o.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=i.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(o.remainedWidth,h),o.remainedWidth-=h);var c=i.barMaxWidth;c&&(l[u].maxWidth=c);var f=i.barMinWidth;f&&(l[u].minWidth=f);var d=i.barGap;d!=null&&(o.gap=d);var g=i.barCategoryGap;g!=null&&(o.categoryGap=g)});var e={};return A(t,function(i,r){e[r]={};var s=i.stacks,a=i.bandWidth,o=i.categoryGap;if(o==null){var l=zt(s).length;o=Math.max(35-l*4,15)+"%"}var u=ce(o,a),h=ce(i.gap,1),c=i.remainedWidth,f=i.autoWidthCount,d=(c-u)/(f+(f-1)*h);d=Math.max(d,0),A(s,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var w=m.width;y&&(w=Math.min(w,y)),_&&(w=Math.max(w,_)),m.width=w,c-=w+h*w,f--}else{var w=d;y&&y<w&&(w=Math.min(y,c)),_&&_>w&&(w=_),w!==d&&(m.width=w,c-=w+h*w,f--)}}),d=(c-u)/(f+(f-1)*h),d=Math.max(d,0);var g=0,v;A(s,function(m,y){m.width||(m.width=d),v=m,g+=m.width*(1+h)}),v&&(g-=v.width*h);var p=-g/2;A(s,function(m,y){e[r][y]=e[r][y]||{bandWidth:a,offset:p,width:m.width},p+=m.width*(1+h)})}),e}function r5(n,t,e){if(n&&t){var i=n[p_(t)];return i!=null&&e!=null?i[g_(e)]:i}}function s5(n,t){var e=LI(n,t),i=DI(e);A(e,function(r){var s=r.getData(),a=r.coordinateSystem,o=a.getBaseAxis(),l=g_(r),u=i[p_(o)][l],h=u.offset,c=u.width;s.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function a5(n){return{seriesType:n,plan:VE(),reset:function(t){if(kI(t)){var e=t.getData(),i=t.coordinateSystem,r=i.getBaseAxis(),s=i.getOtherAxis(r),a=e.getDimensionIndex(e.mapDimension(s.dim)),o=e.getDimensionIndex(e.mapDimension(r.dim)),l=t.get("showBackground",!0),u=e.mapDimension(s.dim),h=e.getCalculationInfo("stackResultDimension"),c=f_(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),f=s.isHorizontal(),d=o5(r,s),g=PI(t),v=t.get("barMinHeight")||0,p=h&&e.getDimensionIndex(h),m=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(_,w){for(var S=_.count,x=g&&bp(S*3),b=g&&l&&bp(S*3),T=g&&bp(S),C=i.master.getRect(),I=f?C.width:C.height,E,R=w.getStore(),L=0;(E=_.next())!=null;){var M=R.get(c?p:a,E),k=R.get(o,E),D=d,z=void 0;c&&(z=+M-R.get(a,E));var O=void 0,B=void 0,F=void 0,W=void 0;if(f){var H=i.dataToPoint([M,k]);if(c){var ct=i.dataToPoint([z,k]);D=ct[0]}O=D,B=H[1]+y,F=H[0]-D,W=m,Math.abs(F)<v&&(F=(F<0?-1:1)*v)}else{var H=i.dataToPoint([k,M]);if(c){var ct=i.dataToPoint([k,z]);D=ct[1]}O=H[0]+y,B=D,F=m,W=H[1]-D,Math.abs(W)<v&&(W=(W<=0?-1:1)*v)}g?(x[L]=O,x[L+1]=B,x[L+2]=f?F:W,b&&(b[L]=f?C.x:O,b[L+1]=f?B:C.y,b[L+2]=I),T[E]=E):w.setItemLayout(E,{x:O,y:B,width:F,height:W}),L+=3}g&&w.setLayout({largePoints:x,largeDataIndices:T,largeBackgroundPoints:b,valueAxisHorizontal:f})}}}}}}function kI(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function PI(n){return n.pipelineContext&&n.pipelineContext.large}function o5(n,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var l5=function(n,t,e,i){for(;e<i;){var r=e+i>>>1;n[r][1]<t?e=r+1:i=r}return e},OI=function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="time",i}return t.prototype.getLabel=function(e){var i=this.getSetting("useUTC");return _d(e.value,Ew[OO(oo(this._minLevelUnit))]||Ew.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,i,r){var s=this.getSetting("useUTC"),a=this.getSetting("locale");return NO(e,i,r,a,s)},t.prototype.getTicks=function(){var e=this._interval,i=this._extent,r=[];if(!e)return r;r.push({value:i[0],level:0});var s=this.getSetting("useUTC"),a=p5(this._minLevelUnit,this._approxInterval,s,i);return r=r.concat(a),r.push({value:i[1],level:0}),r},t.prototype.calcNiceExtent=function(e){var i=this._extent;if(i[0]===i[1]&&(i[0]-=bn,i[1]+=bn),i[1]===-1/0&&i[0]===1/0){var r=new Date;i[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),i[0]=i[1]-bn}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,i,r){e=e||10;var s=this._extent,a=s[1]-s[0];this._approxInterval=a/e,i!=null&&this._approxInterval<i&&(this._approxInterval=i),r!=null&&this._approxInterval>r&&(this._approxInterval=r);var o=rc.length,l=Math.min(l5(rc,this._approxInterval,0,o),o-1);this._interval=rc[l][1],this._minLevelUnit=rc[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return $t(e)?e:+Xi(e)},t.prototype.contain=function(e){return Md(this.parse(e),this._extent)},t.prototype.normalize=function(e){return Ld(this.parse(e),this._extent)},t.prototype.scale=function(e){return Dd(e,this._extent)},t.type="time",t}(Wo),rc=[["second",Ky],["minute",jy],["hour",nu],["quarter-day",nu*6],["half-day",nu*12],["day",bn*1.2],["half-week",bn*3.5],["week",bn*7],["month",bn*31],["quarter",bn*95],["half-year",Cw/2],["year",Cw]];function u5(n,t,e,i){var r=Xi(t),s=Xi(e),a=function(g){return Iw(r,g,i)===Iw(s,g,i)},o=function(){return a("year")},l=function(){return o()&&a("month")},u=function(){return l()&&a("day")},h=function(){return u()&&a("hour")},c=function(){return h()&&a("minute")},f=function(){return c()&&a("second")},d=function(){return f()&&a("millisecond")};switch(n){case"year":return o();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return f();case"millisecond":return d()}}function h5(n,t){return n/=bn,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function c5(n){var t=30*bn;return n/=t,n>6?6:n>3?3:n>2?2:1}function f5(n){return n/=nu,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function Fx(n,t){return n/=t?jy:Ky,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function d5(n){return gC(n)}function g5(n,t,e){var i=new Date(n);switch(oo(t)){case"year":case"month":i[oE(e)](0);case"day":i[lE(e)](1);case"hour":i[uE(e)](0);case"minute":i[hE(e)](0);case"second":i[cE(e)](0),i[fE(e)](0)}return i.getTime()}function p5(n,t,e,i){var r=1e4,s=sE,a=0;function o(I,E,R,L,M,k,D){for(var z=new Date(E),O=E,B=z[L]();O<R&&O<=i[1];)D.push({value:O}),B+=I,z[M](B),O=z.getTime();D.push({value:O,notAdd:!0})}function l(I,E,R){var L=[],M=!E.length;if(!u5(oo(I),i[0],i[1],e)){M&&(E=[{value:g5(new Date(i[0]),I,e)},{value:i[1]}]);for(var k=0;k<E.length-1;k++){var D=E[k].value,z=E[k+1].value;if(D!==z){var O=void 0,B=void 0,F=void 0,W=!1;switch(I){case"year":O=Math.max(1,Math.round(t/bn/365)),B=Zy(e),F=FO(e);break;case"half-year":case"quarter":case"month":O=c5(t),B=lo(e),F=oE(e);break;case"week":case"half-week":case"day":O=h5(t),B=wd(e),F=lE(e),W=!0;break;case"half-day":case"quarter-day":case"hour":O=f5(t),B=Su(e),F=uE(e);break;case"minute":O=Fx(t,!0),B=xd(e),F=hE(e);break;case"second":O=Fx(t,!1),B=Sd(e),F=cE(e);break;case"millisecond":O=d5(t),B=bd(e),F=fE(e);break}o(O,D,z,B,F,W,L),I==="year"&&R.length>1&&k===0&&R.unshift({value:R[0].value-O})}}for(var k=0;k<L.length;k++)R.push(L[k]);return L}}for(var u=[],h=[],c=0,f=0,d=0;d<s.length&&a++<r;++d){var g=oo(s[d]);if(PO(s[d])){l(s[d],u[u.length-1]||[],h);var v=s[d+1]?oo(s[d+1]):null;if(g!==v){if(h.length){f=c,h.sort(function(I,E){return I.value-E.value});for(var p=[],m=0;m<h.length;++m){var y=h[m].value;(m===0||h[m-1].value!==y)&&(p.push(h[m]),y>=i[0]&&y<=i[1]&&c++)}var _=(i[1]-i[0])/t;if(c>_*1.5&&f>_/1.5||(u.push(p),c>_||n===s[d]))break}h=[]}}}for(var w=xe(j(u,function(I){return xe(I,function(E){return E.value>=i[0]&&E.value<=i[1]&&!E.notAdd})}),function(I){return I.length>0}),S=[],x=w.length-1,d=0;d<w.length;++d)for(var b=w[d],T=0;T<b.length;++T)S.push({value:b[T].value,level:x-d});S.sort(function(I,E){return I.value-E.value});for(var C=[],d=0;d<S.length;++d)(d===0||S[d].value!==S[d-1].value)&&C.push(S[d]);return C}wi.registerClass(OI);var Bx=wi.prototype,ou=Wo.prototype,v5=ae,m5=Math.floor,y5=Math.ceil,sc=Math.pow,Pn=Math.log,v_=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new Wo,e._interval=0,e}return t.prototype.getTicks=function(e){var i=this._originalScale,r=this._extent,s=i.getExtent(),a=ou.getTicks.call(this,e);return j(a,function(o){var l=o.value,u=ae(sc(this.base,l));return u=l===r[0]&&this._fixMin?ac(u,s[0]):u,u=l===r[1]&&this._fixMax?ac(u,s[1]):u,{value:u}},this)},t.prototype.setExtent=function(e,i){var r=Pn(this.base);e=Pn(Math.max(0,e))/r,i=Pn(Math.max(0,i))/r,ou.setExtent.call(this,e,i)},t.prototype.getExtent=function(){var e=this.base,i=Bx.getExtent.call(this);i[0]=sc(e,i[0]),i[1]=sc(e,i[1]);var r=this._originalScale,s=r.getExtent();return this._fixMin&&(i[0]=ac(i[0],s[0])),this._fixMax&&(i[1]=ac(i[1],s[1])),i},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var i=this.base;e[0]=Pn(e[0])/Pn(i),e[1]=Pn(e[1])/Pn(i),Bx.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,i){this.unionExtent(e.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(e){e=e||10;var i=this._extent,r=i[1]-i[0];if(!(r===1/0||r<=0)){var s=VD(r),a=e/r*s;for(a<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var o=[ae(y5(i[0]/s)*s),ae(m5(i[1]/s)*s)];this._interval=s,this._niceExtent=o}},t.prototype.calcNiceExtent=function(e){ou.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=Pn(e)/Pn(this.base),Md(e,this._extent)},t.prototype.normalize=function(e){return e=Pn(e)/Pn(this.base),Ld(e,this._extent)},t.prototype.scale=function(e){return e=Dd(e,this._extent),sc(this.base,e)},t.type="log",t}(wi),NI=v_.prototype;NI.getMinorTicks=ou.getMinorTicks;NI.getLabel=ou.getLabel;function ac(n,t){return v5(n,mo(t))}wi.registerClass(v_);var _5=function(){function n(t,e,i){this._prepareParams(t,e,i)}return n.prototype._prepareParams=function(t,e,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var r=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var s=e.get("min",!0);s==null&&(s=e.get("startValue",!0));var a=this._modelMinRaw=s;lt(a)?this._modelMinNum=oc(t,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=oc(t,a));var o=this._modelMaxRaw=e.get("max",!0);if(lt(o)?this._modelMaxNum=oc(t,o({min:i[0],max:i[1]})):o!=="dataMax"&&(this._modelMaxNum=oc(t,o)),r)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),u=V(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Nr(u[0],1),Nr(u[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,i=this._dataMax,r=this._axisDataLen,s=this._boundaryGapInner,a=t?null:i-e||Math.abs(e),o=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,u=o!=null,h=l!=null;o==null&&(o=t?r?0:NaN:e-s[0]*a),l==null&&(l=t?r?r-1:NaN:i+s[1]*a),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=of(o)||of(l)||t&&!r;this._needCrossZero&&(o>0&&l>0&&!u&&(o=0),o<0&&l<0&&!h&&(l=0));var f=this._determinedMin,d=this._determinedMax;return f!=null&&(o=f,u=!0),d!=null&&(l=d,h=!0),{min:o,max:l,minFixed:u,maxFixed:h,isBlank:c}},n.prototype.modifyDataMinMax=function(t,e){this[x5[t]]=e},n.prototype.setDeterminedMinMax=function(t,e){var i=w5[t];this[i]=e},n.prototype.freeze=function(){this.frozen=!0},n}(),w5={min:"_determinedMin",max:"_determinedMax"},x5={min:"_dataMin",max:"_dataMax"};function S5(n,t,e){var i=n.rawExtentInfo;return i||(i=new _5(n,t,e),n.rawExtentInfo=i,i)}function oc(n,t){return t==null?null:of(t)?NaN:n.parse(t)}function FI(n,t){var e=n.type,i=S5(n,t,n.getExtent()).calculate();n.setBlank(i.isBlank);var r=i.min,s=i.max,a=t.ecModel;if(a&&e==="time"){var o=LI("bar",a),l=!1;if(A(o,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=DI(o),h=b5(r,s,t,u);r=h.min,s=h.max}}return{extent:[r,s],fixMin:i.minFixed,fixMax:i.maxFixed}}function b5(n,t,e,i){var r=e.axis.getExtent(),s=r[1]-r[0],a=r5(i,e.axis);if(a===void 0)return{min:n,max:t};var o=1/0;A(a,function(d){o=Math.min(d.offset,o)});var l=-1/0;A(a,function(d){l=Math.max(d.offset+d.width,l)}),o=Math.abs(o),l=Math.abs(l);var u=o+l,h=t-n,c=1-(o+l)/s,f=h/c-h;return t+=f*(l/u),n-=f*(o/u),{min:n,max:t}}function Gx(n,t){var e=t,i=FI(n,e),r=i.extent,s=e.get("splitNumber");n instanceof v_&&(n.base=e.get("logBase"));var a=n.type,o=e.get("interval"),l=a==="interval"||a==="time";n.setExtent(r[0],r[1]),n.calcNiceExtent({splitNumber:s,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),o!=null&&n.setInterval&&n.setInterval(o)}function T5(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new d_({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new OI({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(wi.getClass(t)||Wo)}}function C5(n){var t=n.scale.getExtent(),e=t[0],i=t[1];return!(e>0&&i>0||e<0&&i<0)}function Yo(n){var t=n.getLabelModel().get("formatter"),e=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(i){return function(r,s){return n.scale.getFormattedLabel(r,s,i)}}(t):U(t)?function(i){return function(r){var s=n.scale.getLabel(r),a=i.replace("{value}",s??"");return a}}(t):lt(t)?function(i){return function(r,s){return e!=null&&(s=r.value-e),i(m_(n,r),s,r.level!=null?{level:r.level}:null)}}(t):function(i){return n.scale.getLabel(i)}}function m_(n,t){return n.type==="category"?n.scale.getLabel(t):t.value}function E5(n){var t=n.model,e=n.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var i,r,s=e.getExtent();e instanceof d_?r=e.count():(i=e.getTicks(),r=i.length);var a=n.getLabelModel(),o=Yo(n),l,u=1;r>40&&(u=Math.ceil(r/40));for(var h=0;h<r;h+=u){var c=i?i[h]:{value:s[0]+h},f=o(c,h),d=a.getTextRect(f),g=I5(d,a.get("rotate")||0);l?l.union(g):l=g}return l}}function I5(n,t){var e=t*Math.PI/180,i=n.width,r=n.height,s=i*Math.abs(Math.cos(e))+Math.abs(r*Math.sin(e)),a=i*Math.abs(Math.sin(e))+Math.abs(r*Math.cos(e)),o=new Tt(n.x,n.y,s,a);return o}function y_(n){var t=n.get("interval");return t??"auto"}function BI(n){return n.type==="category"&&y_(n.getLabelModel())===0}function A5(n,t){var e={};return A(n.mapDimensionsAll(t),function(i){e[II(n,i)]=!0}),zt(e)}var R5=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},n.prototype.getCoordSysModel=function(){},n}(),zx=[],M5={registerPreprocessor:_I,registerProcessor:wI,registerPostInit:wB,registerPostUpdate:xB,registerUpdateLifecycle:h_,registerAction:Vo,registerCoordinateSystem:SB,registerLayout:bB,registerVisual:Ks,registerTransform:CB,registerLoading:xI,registerMap:TB,registerImpl:tB,PRIORITY:dB,ComponentModel:xt,ComponentView:Mn,SeriesModel:ji,ChartView:Mr,registerComponentModel:function(n){xt.registerClass(n)},registerComponentView:function(n){Mn.registerClass(n)},registerSeriesModel:function(n){ji.registerClass(n)},registerChartView:function(n){Mr.registerClass(n)},registerSubTypeDefaulter:function(n,t){xt.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){OD(n,t)}};function Br(n){if(V(n)){A(n,function(t){Br(t)});return}bt(zx,n)>=0||(zx.push(n),lt(n)&&(n={install:n}),n.install(M5))}var Ru=jt();function GI(n,t){var e=j(t,function(i){return n.scale.parse(i)});return n.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function L5(n){var t=n.getLabelModel().get("customValues");if(t){var e=Yo(n);return{labels:GI(n,t).map(function(i){var r={value:i};return{formattedLabel:e(r),rawLabel:n.scale.getLabel(r),tickValue:i}})}}return n.type==="category"?k5(n):O5(n)}function D5(n,t){var e=n.getTickModel().get("customValues");return e?{ticks:GI(n,e)}:n.type==="category"?P5(n,t):{ticks:j(n.scale.getTicks(),function(i){return i.value})}}function k5(n){var t=n.getLabelModel(),e=zI(n,t);return!t.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function zI(n,t){var e=VI(n,"labels"),i=y_(t),r=WI(e,i);if(r)return r;var s,a;return lt(i)?s=HI(n,i):(a=i==="auto"?N5(n):i,s=$I(n,a)),YI(e,i,{labels:s,labelCategoryInterval:a})}function P5(n,t){var e=VI(n,"ticks"),i=y_(t),r=WI(e,i);if(r)return r;var s,a;if((!t.get("show")||n.scale.isBlank())&&(s=[]),lt(i))s=HI(n,i,!0);else if(i==="auto"){var o=zI(n,n.getLabelModel());a=o.labelCategoryInterval,s=j(o.labels,function(l){return l.tickValue})}else a=i,s=$I(n,a,!0);return YI(e,i,{ticks:s,tickCategoryInterval:a})}function O5(n){var t=n.scale.getTicks(),e=Yo(n);return{labels:j(t,function(i,r){return{level:i.level,formattedLabel:e(i,r),rawLabel:n.scale.getLabel(i),tickValue:i.value}})}}function VI(n,t){return Ru(n)[t]||(Ru(n)[t]=[])}function WI(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value}function YI(n,t,e){return n.push({key:t,value:e}),e}function N5(n){var t=Ru(n).autoInterval;return t??(Ru(n).autoInterval=n.calculateCategoryInterval())}function F5(n){var t=B5(n),e=Yo(n),i=(t.axisRotate-t.labelRotate)/180*Math.PI,r=n.scale,s=r.getExtent(),a=r.count();if(s[1]-s[0]<1)return 0;var o=1;a>40&&(o=Math.max(1,Math.floor(a/40)));for(var l=s[0],u=n.dataToCoord(l+1)-n.dataToCoord(l),h=Math.abs(u*Math.cos(i)),c=Math.abs(u*Math.sin(i)),f=0,d=0;l<=s[1];l+=o){var g=0,v=0,p=Sy(e({value:l}),t.font,"center","top");g=p.width*1.3,v=p.height*1.3,f=Math.max(f,g,7),d=Math.max(d,v,7)}var m=f/h,y=d/c;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),w=Ru(n.model),S=n.getExtent(),x=w.lastAutoInterval,b=w.lastTickCount;return x!=null&&b!=null&&Math.abs(x-_)<=1&&Math.abs(b-a)<=1&&x>_&&w.axisExtent0===S[0]&&w.axisExtent1===S[1]?_=x:(w.lastTickCount=a,w.lastAutoInterval=_,w.axisExtent0=S[0],w.axisExtent1=S[1]),_}function B5(n){var t=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function $I(n,t,e){var i=Yo(n),r=n.scale,s=r.getExtent(),a=n.getLabelModel(),o=[],l=Math.max((t||0)+1,1),u=s[0],h=r.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=BI(n),f=a.get("showMinLabel")||c,d=a.get("showMaxLabel")||c;f&&u!==s[0]&&v(s[0]);for(var g=u;g<=s[1];g+=l)v(g);d&&g-l!==s[1]&&v(s[1]);function v(p){var m={value:p};o.push(e?p:{formattedLabel:i(m),rawLabel:r.getLabel(m),tickValue:p})}return o}function HI(n,t,e){var i=n.scale,r=Yo(n),s=[];return A(i.getTicks(),function(a){var o=i.getLabel(a),l=a.value;t(a.value,o)&&s.push(e?l:{formattedLabel:r(a),rawLabel:o,tickValue:l})}),s}var Vx=[0,1],G5=function(){function n(t,e,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=i||[0,0]}return n.prototype.contain=function(t){var e=this._extent,i=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=i&&t<=r},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return BD(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,e){var i=this._extent;i[0]=t,i[1]=e},n.prototype.dataToCoord=function(t,e){var i=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&r.type==="ordinal"&&(i=i.slice(),Wx(i,r.count())),N1(t,Vx,i,e)},n.prototype.coordToData=function(t,e){var i=this._extent,r=this.scale;this.onBand&&r.type==="ordinal"&&(i=i.slice(),Wx(i,r.count()));var s=N1(t,i,Vx,e);return this.scale.scale(s)},n.prototype.pointToData=function(t,e){},n.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),i=D5(this,e),r=i.ticks,s=j(r,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),a=e.get("alignWithLabel");return z5(this,s,a,t.clamp),s},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var i=this.scale.getMinorTicks(e),r=j(i,function(s){return j(s,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return r},n.prototype.getViewLabels=function(){return L5(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand?1:0);i===0&&(i=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/i},n.prototype.calculateCategoryInterval=function(){return F5(this)},n}();function Wx(n,t){var e=n[1]-n[0],i=t,r=e/i/2;n[0]+=r,n[1]-=r}function z5(n,t,e,i){var r=t.length;if(!n.onBand||e||!r)return;var s=n.getExtent(),a,o;if(r===1)t[0].coord=s[0],a=t[1]={coord:s[1]};else{var l=t[r-1].tickValue-t[0].tickValue,u=(t[r-1].coord-t[0].coord)/l;A(t,function(d){d.coord-=u/2});var h=n.scale.getExtent();o=1+h[1]-t[r-1].tickValue,a={coord:t[r-1].coord+u*o},t.push(a)}var c=s[0]>s[1];f(t[0].coord,s[0])&&(i?t[0].coord=s[0]:t.shift()),i&&f(s[0],t[0].coord)&&t.unshift({coord:s[0]}),f(s[1],a.coord)&&(i?a.coord=s[1]:t.pop()),i&&f(a.coord,s[1])&&t.push({coord:s[1]});function f(d,g){return d=ae(d),g=ae(g),c?d>g:d<g}}function V5(n){for(var t=[],e=0;e<n.length;e++){var i=n[e];if(!i.defaultAttr.ignore){var r=i.label,s=r.getComputedTransform(),a=r.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=r.style.margin||0,u=a.clone();u.applyTransform(s),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=o?new wf(a,s):null;t.push({label:r,labelLine:i.labelLine,rect:u,localRect:a,obb:h,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:s})}}return t}function W5(n){var t=[];n.sort(function(v,p){return p.priority-v.priority});var e=new Tt(0,0,0,0);function i(v){if(!v.ignore){var p=v.ensureState("emphasis");p.ignore==null&&(p.ignore=!1)}v.ignore=!0}for(var r=0;r<n.length;r++){var s=n[r],a=s.axisAligned,o=s.localRect,l=s.transform,u=s.label,h=s.labelLine;e.copy(s.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var c=s.obb,f=!1,d=0;d<t.length;d++){var g=t[d];if(e.intersect(g.rect)){if(a&&g.axisAligned){f=!0;break}if(g.obb||(g.obb=new wf(g.localRect,g.transform)),c||(c=new wf(o,l)),c.intersect(g.obb)){f=!0;break}}}f?(i(u),h&&i(h)):(u.attr("ignore",s.defaultAttr.ignore),h&&h.attr("ignore",s.defaultAttr.labelGuideIgnore),t.push(s))}}var Y5=function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(xt),um=function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Vn).models[0]},t.type="cartesian2dAxis",t}(xt);Xn(um,R5);var UI={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},$5=mt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},UI),__=mt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},UI),H5=mt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},__),U5=Pt({logBase:10},__);const X5={category:$5,value:__,time:H5,log:U5};var K5={value:1,category:1,time:1,log:1};function Yx(n,t,e,i){A(K5,function(r,s){var a=mt(mt({},X5[s],!0),i,!0),o=function(l){et(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+s,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var f=Cu(this),d=f?Cd(h):{},g=c.getTheme();mt(h,g.get(s+"Axis")),mt(h,this.getDefaultOption()),h.type=$x(h),f&&wo(h,d,f)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=om.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+s,u.defaultOption=a,u}(e);n.registerComponentModel(o)}),n.registerSubTypeDefaulter(t+"Axis",$x)}function $x(n){return n.type||(n.data?"category":"value")}var j5=function(){function n(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return n.prototype.getAxis=function(t){return this._axes[t]},n.prototype.getAxes=function(){return j(this._dimList,function(t){return this._axes[t]},this)},n.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),xe(this.getAxes(),function(e){return e.scale.type===t})},n.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},n}(),hm=["x","y"];function Hx(n){return n.type==="interval"||n.type==="time"}var Z5=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=hm,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!Hx(e)||!Hx(i))){var r=e.getExtent(),s=i.getExtent(),a=this.dataToPoint([r[0],s[0]]),o=this.dataToPoint([r[1],s[1]]),l=r[1]-r[0],u=s[1]-s[0];if(!(!l||!u)){var h=(o[0]-a[0])/l,c=(o[1]-a[1])/u,f=a[0]-r[0]*h,d=a[1]-s[0]*c,g=this._transform=[h,0,0,c,f,d];this._invTransform=yy([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var i=this.getAxis("x"),r=this.getAxis("y");return i.contain(i.toLocalCoord(e[0]))&&r.contain(r.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,i){var r=this.dataToPoint(e),s=this.dataToPoint(i),a=this.getArea(),o=new Tt(r[0],r[1],s[0]-r[0],s[1]-r[1]);return a.intersect(o)},t.prototype.dataToPoint=function(e,i,r){r=r||[];var s=e[0],a=e[1];if(this._transform&&s!=null&&isFinite(s)&&a!=null&&isFinite(a))return An(r,e,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return r[0]=o.toGlobalCoord(o.dataToCoord(s,i)),r[1]=l.toGlobalCoord(l.dataToCoord(a,i)),r},t.prototype.clampData=function(e,i){var r=this.getAxis("x").scale,s=this.getAxis("y").scale,a=r.getExtent(),o=s.getExtent(),l=r.parse(e[0]),u=s.parse(e[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),i[1]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),i},t.prototype.pointToData=function(e,i){var r=[];if(this._invTransform)return An(r,e,this._invTransform);var s=this.getAxis("x"),a=this.getAxis("y");return r[0]=s.coordToData(s.toLocalCoord(e[0]),i),r[1]=a.coordToData(a.toLocalCoord(e[1]),i),r},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var i=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),s=Math.min(i[0],i[1])-e,a=Math.min(r[0],r[1])-e,o=Math.max(i[0],i[1])-s+e,l=Math.max(r[0],r[1])-a+e;return new Tt(s,a,o,l)},t}(j5),q5=function(n){et(t,n);function t(e,i,r,s,a){var o=n.call(this,e,i,r)||this;return o.index=0,o.type=s||"value",o.position=a||"bottom",o}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),e&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(e,i){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(G5);function cm(n,t,e){e=e||{};var i=n.coordinateSystem,r=t.axis,s={},a=r.getAxesOnZeroOf()[0],o=r.position,l=a?"onZero":o,u=r.dim,h=i.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],f={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,g=u==="x"?[c[2]-d,c[3]+d]:[c[0]-d,c[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));g[f.onZero]=Math.max(Math.min(v,g[1]),g[0])}s.position=[u==="y"?g[f[l]]:c[0],u==="x"?g[f[l]]:c[3]],s.rotation=Math.PI/2*(u==="x"?0:1);var p={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=p[o],s.labelOffset=a?g[f[o]]-g[f.onZero]:0,t.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),po(e.labelInside,t.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var m=t.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-m:m,s.z2=1,s}function Ux(n){return n.get("coordinateSystem")==="cartesian2d"}function Xx(n){var t={xAxisModel:null,yAxisModel:null};return A(t,function(e,i){var r=i.replace(/Model$/,""),s=n.getReferringComponents(r,Vn).models[0];t[i]=s}),t}var Tp=Math.log;function J5(n,t,e){var i=Wo.prototype,r=i.getTicks.call(e),s=i.getTicks.call(e,!0),a=r.length-1,o=i.getInterval.call(e),l=FI(n,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(n.type==="log"){var f=Tp(n.base);u=[Tp(u[0])/f,Tp(u[1])/f]}n.setExtent(u[0],u[1]),n.calcNiceExtent({splitNumber:a,fixMin:h,fixMax:c});var d=i.getExtent.call(n);h&&(u[0]=d[0]),c&&(u[1]=d[1]);var g=i.getInterval.call(n),v=u[0],p=u[1];if(h&&c)g=(p-v)/a;else if(h)for(p=u[0]+g*a;p<u[1]&&isFinite(p)&&isFinite(u[1]);)g=Sp(g),p=u[0]+g*a;else if(c)for(v=u[1]-g*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)g=Sp(g),v=u[1]-g*a;else{var m=n.getTicks().length-1;m>a&&(g=Sp(g));var y=g*a;p=Math.ceil(u[1]/g)*g,v=ae(p-y),v<0&&u[0]>=0?(v=0,p=ae(y)):p>0&&u[1]<=0&&(p=0,v=-ae(y))}var _=(r[0].value-s[0].value)/o,w=(r[a].value-s[a].value)/o;i.setExtent.call(n,v+g*_,p+g*w),i.setInterval.call(n,g),(_||w)&&i.setNiceExtent.call(n,v+g,p-g)}var Q5=function(){function n(t,e,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=hm,this._initCartesian(t,e,i),this.model=t}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(t,e){var i=this._axesMap;this._updateScale(t,this.model);function r(a){var o,l=zt(a),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var f=+l[c],d=a[f],g=d.model,v=d.scale;lm(v)&&g.get("alignTicks")&&g.get("interval")==null?h.push(d):(Gx(v,g),lm(v)&&(o=d))}h.length&&(o||(o=h.pop(),Gx(o.scale,o.model)),A(h,function(p){J5(p.scale,p.model,o.scale)}))}}r(i.x),r(i.y);var s={};A(i.x,function(a){Kx(i,"y",a,s)}),A(i.y,function(a){Kx(i,"x",a,s)}),this.resize(this.model,e)},n.prototype.resize=function(t,e,i){var r=t.getBoxLayoutParams(),s=!i&&t.get("containLabel"),a=Tu(r,{width:e.getWidth(),height:e.getHeight()});this._rect=a;var o=this._axesList;l(),s&&(A(o,function(u){if(!u.model.get(["axisLabel","inside"])){var h=E5(u);if(h){var c=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);a[c]-=h[c]+f,u.position==="top"?a.y+=h.height+f:u.position==="left"&&(a.x+=h.width+f)}}}),l()),A(this._coordsList,function(u){u.calcAffineTransform()});function l(){A(o,function(u){var h=u.isHorizontal(),c=h?[0,a.width]:[0,a.height],f=u.inverse?1:0;u.setExtent(c[f],c[1-f]),tG(u,h?a.x:a.y)})}},n.prototype.getAxis=function(t,e){var i=this._axesMap[t];if(i!=null)return i[e||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var i="x"+t+"y"+e;return this._coordsMap[i]}Z(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,s=this._coordsList;r<s.length;r++)if(s[r].getAxis("x").index===t||s[r].getAxis("y").index===e)return s[r]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(i):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(i)):null},n.prototype.convertFromPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(i):r.axis?r.axis.coordToData(r.axis.toLocalCoord(i)):null},n.prototype._findConvertTarget=function(t){var e=t.seriesModel,i=t.xAxisModel||e&&e.getReferringComponents("xAxis",Vn).models[0],r=t.yAxisModel||e&&e.getReferringComponents("yAxis",Vn).models[0],s=t.gridModel,a=this._coordsList,o,l;if(e)o=e.coordinateSystem,bt(a,o)<0&&(o=null);else if(i&&r)o=this.getCartesian(i.componentIndex,r.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(r)l=this.getAxis("y",r.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},n.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},n.prototype._initCartesian=function(t,e,i){var r=this,s=this,a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,A(o.x,function(h,c){A(o.y,function(f,d){var g="x"+c+"y"+d,v=new Z5(g);v.master=r,v.model=t,r._coordsMap[g]=v,r._coordsList.push(v),v.addAxis(h),v.addAxis(f)})});function u(h){return function(c,f){if(Cp(c,t)){var d=c.get("position");h==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var g=new q5(h,T5(c),[0,0],c.get("type"),d),v=g.type==="category";g.onBand=v&&c.get("boundaryGap"),g.inverse=c.get("inverse"),c.axis=g,g.model=c,g.grid=s,g.index=f,s._axesList.push(g),o[h][f]=g,l[h]++}}}},n.prototype._updateScale=function(t,e){A(this._axesList,function(r){if(r.scale.setExtent(1/0,-1/0),r.type==="category"){var s=r.model.get("categorySortInfo");r.scale.setSortInfo(s)}}),t.eachSeries(function(r){if(Ux(r)){var s=Xx(r),a=s.xAxisModel,o=s.yAxisModel;if(!Cp(a,e)||!Cp(o,e))return;var l=this.getCartesian(a.componentIndex,o.componentIndex),u=r.getData(),h=l.getAxis("x"),c=l.getAxis("y");i(u,h),i(u,c)}},this);function i(r,s){A(A5(r,s.dim),function(a){s.scale.unionExtentFromData(r,a)})}},n.prototype.getTooltipAxes=function(t){var e=[],i=[];return A(this.getCartesians(),function(r){var s=t!=null&&t!=="auto"?r.getAxis(t):r.getBaseAxis(),a=r.getOtherAxis(s);bt(e,s)<0&&e.push(s),bt(i,a)<0&&i.push(a)}),{baseAxes:e,otherAxes:i}},n.create=function(t,e){var i=[];return t.eachComponent("grid",function(r,s){var a=new n(r,t,e);a.name="grid_"+s,a.resize(r,e,!0),r.coordinateSystem=a,i.push(a)}),t.eachSeries(function(r){if(Ux(r)){var s=Xx(r),a=s.xAxisModel,o=s.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;r.coordinateSystem=u.getCartesian(a.componentIndex,o.componentIndex)}}),i},n.dimensions=hm,n}();function Cp(n,t){return n.getCoordSysModel()===t}function Kx(n,t,e,i){e.getAxesOnZeroOf=function(){return s?[s]:[]};var r=n[t],s,a=e.model,o=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)jx(r[l])&&(s=r[l]);else for(var u in r)if(r.hasOwnProperty(u)&&jx(r[u])&&!i[h(r[u])]){s=r[u];break}s&&(i[h(s)]=!0);function h(c){return c.dim+"_"+c.index}}function jx(n){return n&&n.type!=="category"&&n.type!=="time"&&C5(n)}function tG(n,t){var e=n.getExtent(),i=e[0]+e[1];n.toGlobalCoord=n.dim==="x"?function(r){return r+t}:function(r){return i-r+t},n.toLocalCoord=n.dim==="x"?function(r){return r-t}:function(r){return i-r+t}}var br=Math.PI,Lr=function(){function n(t,e){this.group=new Le,this.opt=e,this.axisModel=t,Pt(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Le({x:e.position[0],y:e.position[1],rotation:e.rotation});i.updateTransform(),this._transformGroup=i}return n.prototype.hasBuilder=function(t){return!!Zx[t]},n.prototype.add=function(t){Zx[t](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(t,e,i){var r=dC(e-t),s,a;return pf(r)?(a=i>0?"top":"bottom",s="center"):pf(r-br)?(a=i>0?"bottom":"top",s="center"):(a="middle",r>0&&r<br?s=i>0?"right":"left":s=i>0?"left":"right"),{rotation:r,textAlign:s,textVerticalAlign:a}},n.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},n.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},n}(),Zx={axisLine:function(n,t,e,i){var r=t.get(["axisLine","show"]);if(r==="auto"&&n.handleAutoShown&&(r=n.handleAutoShown("axisLine")),!!r){var s=t.axis.getExtent(),a=i.transform,o=[s[0],0],l=[s[1],0],u=o[0]>l[0];a&&(An(o,o,a),An(l,l,a));var h=G({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new Ki({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});xu(c.shape,c.style.lineWidth),c.anid="line",e.add(c);var f=t.get(["axisLine","symbol"]);if(f!=null){var d=t.get(["axisLine","symbolSize"]);U(f)&&(f=[f,f]),(U(d)||$t(d))&&(d=[d,d]);var g=a_(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],p=d[1];A([{rotate:n.rotation+Math.PI/2,offset:g[0],r:0},{rotate:n.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(m,y){if(f[y]!=="none"&&f[y]!=null){var _=Ad(f[y],-v/2,-p/2,v,p,h.stroke,!0),w=m.r+m.offset,S=u?l:o;_.attr({rotation:m.rotate,x:S[0]+w*Math.cos(n.rotation),y:S[1]-w*Math.sin(n.rotation),silent:!0,z2:11}),e.add(_)}})}}},axisTickLabel:function(n,t,e,i){var r=iG(e,i,t,n),s=sG(e,i,t,n);if(nG(t,s,r),rG(e,i,t,n.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=V5(j(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));W5(a)}},axisName:function(n,t,e,i){var r=po(n.axisName,t.get("name"));if(r){var s=t.get("nameLocation"),a=n.nameDirection,o=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[s==="start"?u[0]-h*l:s==="end"?u[1]+h*l:(u[0]+u[1])/2,Jx(s)?n.labelOffset+a*l:0],f,d=t.get("nameRotate");d!=null&&(d=d*br/180);var g;Jx(s)?f=Lr.innerTextLayout(n.rotation,d??n.rotation,a):(f=eG(n.rotation,s,d||0,u),g=n.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(f.rotation)),!isFinite(g)&&(g=null)));var v=o.getFont(),p=t.get("nameTruncate",!0)||{},m=p.ellipsis,y=po(n.nameTruncateMaxWidth,p.maxWidth,g),_=new De({x:c[0],y:c[1],rotation:f.rotation,silent:Lr.isLabelSilent(t),style:Fr(o,{text:r,font:v,overflow:"truncate",width:y,ellipsis:m,fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(Wy({el:_,componentModel:t,itemName:r}),_.__fullText=r,_.anid="name",t.get("triggerEvent")){var w=Lr.makeAxisEventDataBase(t);w.targetType="axisName",w.name=r,St(_).eventData=w}i.add(_),_.updateTransform(),e.add(_),_.decomposeTransform()}}};function eG(n,t,e,i){var r=dC(e-n),s,a,o=i[0]>i[1],l=t==="start"&&!o||t!=="start"&&o;return pf(r-br/2)?(a=l?"bottom":"top",s="center"):pf(r-br*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",r<br*1.5&&r>br/2?s=l?"left":"right":s=l?"right":"left"),{rotation:r,textAlign:s,textVerticalAlign:a}}function nG(n,t,e){if(!BI(n.axis)){var i=n.get(["axisLabel","showMinLabel"]),r=n.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var s=t[0],a=t[1],o=t[t.length-1],l=t[t.length-2],u=e[0],h=e[1],c=e[e.length-1],f=e[e.length-2];i===!1?(dn(s),dn(u)):qx(s,a)&&(i?(dn(a),dn(h)):(dn(s),dn(u))),r===!1?(dn(o),dn(c)):qx(l,o)&&(r?(dn(l),dn(f)):(dn(o),dn(c)))}}function dn(n){n&&(n.ignore=!0)}function qx(n,t){var e=n&&n.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!e||!i)){var r=vy([]);return my(r,r,-n.rotation),e.applyTransform(ro([],r,n.getLocalTransform())),i.applyTransform(ro([],r,t.getLocalTransform())),e.intersect(i)}}function Jx(n){return n==="middle"||n==="center"}function XI(n,t,e,i,r){for(var s=[],a=[],o=[],l=0;l<n.length;l++){var u=n[l].coord;a[0]=u,a[1]=0,o[0]=u,o[1]=e,t&&(An(a,a,t),An(o,o,t));var h=new Ki({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});xu(h.shape,h.style.lineWidth),h.anid=r+"_"+n[l].tickValue,s.push(h)}return s}function iG(n,t,e,i){var r=e.axis,s=e.getModel("axisTick"),a=s.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=i.tickDirection*s.get("length"),u=r.getTicksCoords(),h=XI(u,t.transform,l,Pt(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)n.add(h[c]);return h}}function rG(n,t,e,i){var r=e.axis,s=e.getModel("minorTick");if(!(!s.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=i*s.get("length"),u=Pt(o.getLineStyle(),Pt(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),h=0;h<a.length;h++)for(var c=XI(a[h],t.transform,l,u,"minorticks_"+h),f=0;f<c.length;f++)n.add(c[f])}}function sG(n,t,e,i){var r=e.axis,s=po(i.axisLabelShow,e.get(["axisLabel","show"]));if(!(!s||r.scale.isBlank())){var a=e.getModel("axisLabel"),o=a.get("margin"),l=r.getViewLabels(),u=(po(i.labelRotate,a.get("rotate"))||0)*br/180,h=Lr.innerTextLayout(i.rotation,u,i.labelDirection),c=e.getCategories&&e.getCategories(!0),f=[],d=Lr.isLabelSilent(e),g=e.get("triggerEvent");return A(l,function(v,p){var m=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,_=v.rawLabel,w=a;if(c&&c[m]){var S=c[m];Z(S)&&S.textStyle&&(w=new Xt(S.textStyle,a,e.ecModel))}var x=w.getTextColor()||e.get(["axisLine","lineStyle","color"]),b=r.dataToCoord(m),T=w.getShallow("align",!0)||h.textAlign,C=st(w.getShallow("alignMinLabel",!0),T),I=st(w.getShallow("alignMaxLabel",!0),T),E=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||h.textVerticalAlign,R=st(w.getShallow("verticalAlignMinLabel",!0),E),L=st(w.getShallow("verticalAlignMaxLabel",!0),E),M=new De({x:b,y:i.labelOffset+i.labelDirection*o,rotation:h.rotation,silent:d,z2:10+(v.level||0),style:Fr(w,{text:y,align:p===0?C:p===l.length-1?I:T,verticalAlign:p===0?R:p===l.length-1?L:E,fill:lt(x)?x(r.type==="category"?_:r.type==="value"?m+"":m,p):x})});if(M.anid="label_"+m,g){var k=Lr.makeAxisEventDataBase(e);k.targetType="axisLabel",k.value=_,k.tickIndex=p,r.type==="category"&&(k.dataIndex=m),St(M).eventData=k}t.add(M),M.updateTransform(),f.push(M),n.add(M),M.decomposeTransform()}),f}}function aG(n,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return oG(e,n,t),e.seriesInvolved&&uG(e,n),e}function oG(n,t,e){var i=t.getComponent("tooltip"),r=t.getComponent("axisPointer"),s=r.get("link",!0)||[],a=[];A(e.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=Mu(o.model),u=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var h=o.model,c=h.getModel("tooltip",i);if(A(o.getAxes(),Gt(v,!1,null)),o.getTooltipAxes&&i&&c.get("show")){var f=c.get("trigger")==="axis",d=c.get(["axisPointer","type"])==="cross",g=o.getTooltipAxes(c.get(["axisPointer","axis"]));(f||d)&&A(g.baseAxes,Gt(v,d?"cross":!0,f)),d&&A(g.otherAxes,Gt(v,"cross",!1))}function v(p,m,y){var _=y.model.getModel("axisPointer",r),w=_.get("show");if(!(!w||w==="auto"&&!p&&!fm(_))){m==null&&(m=_.get("triggerTooltip")),_=p?lG(y,c,r,t,p,m):_;var S=_.get("snap"),x=_.get("triggerEmphasis"),b=Mu(y.model),T=m||S||y.type==="category",C=n.axesInfo[b]={key:b,axis:y,coordSys:o,axisPointerModel:_,triggerTooltip:m,triggerEmphasis:x,involveSeries:T,snap:S,useHandle:fm(_),seriesModels:[],linkGroup:null};u[b]=C,n.seriesInvolved=n.seriesInvolved||T;var I=hG(s,y);if(I!=null){var E=a[I]||(a[I]={axesInfo:{}});E.axesInfo[b]=C,E.mapper=s[I].mapper,C.linkGroup=E}}}})}function lG(n,t,e,i,r,s){var a=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};A(o,function(f){l[f]=ut(a.get(f))}),l.snap=n.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),r==="cross"){var h=a.get(["label","show"]);if(u.show=h??!0,!s){var c=l.lineStyle=a.get("crossStyle");c&&Pt(u,c.textStyle)}}return n.model.getModel("axisPointer",new Xt(l,e,i))}function uG(n,t){t.eachSeries(function(e){var i=e.coordinateSystem,r=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!i||r==="none"||r===!1||r==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||A(n.coordSysAxesInfo[Mu(i.model)],function(a){var o=a.axis;i.getAxis(o.dim)===o&&(a.seriesModels.push(e),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=e.getData().count())})})}function hG(n,t){for(var e=t.model,i=t.dim,r=0;r<n.length;r++){var s=n[r]||{};if(Ep(s[i+"AxisId"],e.id)||Ep(s[i+"AxisIndex"],e.componentIndex)||Ep(s[i+"AxisName"],e.name))return r}}function Ep(n,t){return n==="all"||V(n)&&bt(n,t)>=0||n===t}function cG(n){var t=w_(n);if(t){var e=t.axisPointerModel,i=t.axis.scale,r=e.option,s=e.get("status"),a=e.get("value");a!=null&&(a=i.parse(a));var o=fm(e);s==null&&(r.status=o?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,o&&(r.status=t.axis.scale.isBlank()?"hide":"show")}}function w_(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Mu(n)]}function fG(n){var t=w_(n);return t&&t.axisPointerModel}function fm(n){return!!n.get(["handle","show"])}function Mu(n){return n.type+"||"+n.id}var Qx={},KI=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,s){this.axisPointerClass&&cG(e),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,r,!0)},t.prototype.updateAxisPointer=function(e,i,r,s){this._doUpdateAxisPointerClass(e,r,!1)},t.prototype.remove=function(e,i){var r=this._axisPointer;r&&r.remove(i)},t.prototype.dispose=function(e,i){this._disposeAxisPointer(i),n.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,i,r){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var a=fG(e);a?(this._axisPointer||(this._axisPointer=new s)).render(e,a,i,r):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,i){Qx[e]=i},t.getAxisPointerClass=function(e){return e&&Qx[e]},t.type="axis",t}(Mn),dm=jt();function dG(n,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var s=e.getModel("splitArea"),a=s.getModel("areaStyle"),o=a.get("color"),l=i.coordinateSystem.getRect(),u=r.getTicksCoords({tickModel:s,clamp:!0});if(u.length){var h=o.length,c=dm(n).splitAreaColors,f=ot(),d=0;if(c)for(var g=0;g<u.length;g++){var v=c.get(u[g].tickValue);if(v!=null){d=(v+(h-1)*g)%h;break}}var p=r.toGlobalCoord(u[0].coord),m=a.getAreaStyle();o=V(o)?o:[o];for(var g=1;g<u.length;g++){var y=r.toGlobalCoord(u[g].coord),_=void 0,w=void 0,S=void 0,x=void 0;r.isHorizontal()?(_=p,w=l.y,S=y-_,x=l.height,p=_+S):(_=l.x,w=p,S=l.width,x=y-w,p=w+x);var b=u[g-1].tickValue;b!=null&&f.set(b,d),t.add(new ne({anid:b!=null?"area_"+b:null,shape:{x:_,y:w,width:S,height:x},style:Pt({fill:o[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%h}dm(n).splitAreaColors=f}}}function gG(n){dm(n).splitAreaColors=null}var pG=["axisLine","axisTickLabel","axisName"],vG=["splitArea","splitLine","minorSplitLine"],jI=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,i,r,s){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Le,this.group.add(this._axisGroup),!!e.get("show")){var o=e.getCoordSysModel(),l=cm(o,e),u=new Lr(e,G({handleAutoShown:function(c){for(var f=o.coordinateSystem.getCartesians(),d=0;d<f.length;d++)if(lm(f[d].getOtherAxis(e.axis).scale))return!0;return!1}},l));A(pG,u.add,u),this._axisGroup.add(u.getGroup()),A(vG,function(c){e.get([c,"show"])&&mG[c](this,this._axisGroup,e,o)},this);var h=s&&s.type==="changeAxisOrder"&&s.isInitSort;h||JC(a,this._axisGroup,e),n.prototype.render.call(this,e,i,r,s)}},t.prototype.remove=function(){gG(this)},t.type="cartesianAxis",t}(KI),mG={splitLine:function(n,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var s=e.getModel("splitLine"),a=s.getModel("lineStyle"),o=a.get("color");o=V(o)?o:[o];for(var l=i.coordinateSystem.getRect(),u=r.isHorizontal(),h=0,c=r.getTicksCoords({tickModel:s}),f=[],d=[],g=a.getLineStyle(),v=0;v<c.length;v++){var p=r.toGlobalCoord(c[v].coord);u?(f[0]=p,f[1]=l.y,d[0]=p,d[1]=l.y+l.height):(f[0]=l.x,f[1]=p,d[0]=l.x+l.width,d[1]=p);var m=h++%o.length,y=c[v].tickValue,_=new Ki({anid:y!=null?"line_"+c[v].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:Pt({stroke:o[m]},g),silent:!0});xu(_.shape,g.lineWidth),t.add(_)}}},minorSplitLine:function(n,t,e,i){var r=e.axis,s=e.getModel("minorSplitLine"),a=s.getModel("lineStyle"),o=i.coordinateSystem.getRect(),l=r.isHorizontal(),u=r.getMinorTicksCoords();if(u.length)for(var h=[],c=[],f=a.getLineStyle(),d=0;d<u.length;d++)for(var g=0;g<u[d].length;g++){var v=r.toGlobalCoord(u[d][g].coord);l?(h[0]=v,h[1]=o.y,c[0]=v,c[1]=o.y+o.height):(h[0]=o.x,h[1]=v,c[0]=o.x+o.width,c[1]=v);var p=new Ki({anid:"minor_line_"+u[d][g].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:f,silent:!0});xu(p.shape,f.lineWidth),t.add(p)}},splitArea:function(n,t,e,i){dG(n,t,e,i)}},ZI=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(jI),yG=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=ZI.type,e}return t.type="yAxis",t}(jI),_G=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,i){this.group.removeAll(),e.get("show")&&this.group.add(new ne({shape:e.coordinateSystem.getRect(),style:Pt({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Mn),tS={offset:0};function wG(n){n.registerComponentView(_G),n.registerComponentModel(Y5),n.registerCoordinateSystem("cartesian2d",Q5),Yx(n,"x",um,tS),Yx(n,"y",um,tS),n.registerComponentView(ZI),n.registerComponentView(yG),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var _s=jt(),eS=ut,Ip=Yt,xG=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(t,e,i,r){var s=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,!(!r&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var u={};this.makeElOption(u,s,t,e,i);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(!o)o=this._group=new Le,this.createPointerEl(o,u,t,e),this.createLabelEl(o,u,t,e),i.getZr().add(o);else{var f=Gt(nS,e,c);this.updatePointerEl(o,u,f),this.updateLabelEl(o,u,f,e)}rS(o,e,!0),this._renderHandle(s)}},n.prototype.remove=function(t){this.clear(t)},n.prototype.dispose=function(t){this.clear(t)},n.prototype.determineAnimation=function(t,e){var i=e.get("animation"),r=t.axis,s=r.type==="category",a=e.get("snap");if(!a&&!s)return!1;if(i==="auto"||i==null){var o=this.animationThreshold;if(s&&r.getBandWidth()>o)return!0;if(a){var l=w_(t).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/l>o}return!1}return i===!0},n.prototype.makeElOption=function(t,e,i,r,s){},n.prototype.createPointerEl=function(t,e,i,r){var s=e.pointer;if(s){var a=_s(t).pointerEl=new gO[s.type](eS(e.pointer));t.add(a)}},n.prototype.createLabelEl=function(t,e,i,r){if(e.label){var s=_s(t).labelEl=new De(eS(e.label));t.add(s),iS(s,r)}},n.prototype.updatePointerEl=function(t,e,i){var r=_s(t).pointerEl;r&&e.pointer&&(r.setStyle(e.pointer.style),i(r,{shape:e.pointer.shape}))},n.prototype.updateLabelEl=function(t,e,i,r){var s=_s(t).labelEl;s&&(s.setStyle(e.label.style),i(s,{x:e.label.x,y:e.label.y}),iS(s,r))},n.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,i=this._api.getZr(),r=this._handle,s=e.getModel("handle"),a=e.get("status");if(!s.get("show")||!a||a==="hide"){r&&i.remove(r),this._handle=null;return}var o;this._handle||(o=!0,r=this._handle=Vy(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){KT(u.event)},onmousedown:Ip(this._onHandleDragMove,this,0,0),drift:Ip(this._onHandleDragMove,this),ondragend:Ip(this._onHandleDragEnd,this)}),i.add(r)),rS(r,e,!1),r.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");V(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,YE(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},n.prototype._moveHandleToValue=function(t,e){nS(this._axisPointerModel,!e&&this._moveAnimation,this._handle,Ap(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(t,e){var i=this._handle;if(i){this._dragging=!0;var r=this.updateHandleTransform(Ap(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=r,i.stopAnimation(),i.attr(Ap(r)),_s(i).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,r=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),r&&e.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Jv(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(t,e,i){return i=i||0,{x:t[i],y:t[1-i],width:e[i],height:e[1-i]}},n}();function nS(n,t,e,i){qI(_s(e).lastProp,i)||(_s(e).lastProp=i,t?vi(e,i,n):(e.stopAnimation(),e.attr(i)))}function qI(n,t){if(Z(n)&&Z(t)){var e=!0;return A(t,function(i,r){e=e&&qI(n[r],i)}),!!e}else return n===t}function iS(n,t){n[t.get(["label","show"])?"show":"hide"]()}function Ap(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function rS(n,t,e){var i=t.get("z"),r=t.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(i!=null&&(s.z=i),r!=null&&(s.zlevel=r),s.silent=e)})}function SG(n){var t=n.get("type"),e=n.getModel(t+"Style"),i;return t==="line"?(i=e.getLineStyle(),i.fill=null):t==="shadow"&&(i=e.getAreaStyle(),i.stroke=null),i}function bG(n,t,e,i,r){var s=e.get("value"),a=JI(s,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),o=e.getModel("label"),l=Td(o.get("padding")||0),u=o.getFont(),h=Sy(a,u),c=r.position,f=h.width+l[1]+l[3],d=h.height+l[0]+l[2],g=r.align;g==="right"&&(c[0]-=f),g==="center"&&(c[0]-=f/2);var v=r.verticalAlign;v==="bottom"&&(c[1]-=d),v==="middle"&&(c[1]-=d/2),TG(c,f,d,i);var p=o.get("backgroundColor");(!p||p==="auto")&&(p=t.get(["axisLine","lineStyle","color"])),n.label={x:c[0],y:c[1],style:Fr(o,{text:a,font:u,fill:o.getTextColor(),padding:l,backgroundColor:p}),z2:10}}function TG(n,t,e,i){var r=i.getWidth(),s=i.getHeight();n[0]=Math.min(n[0]+t,r)-t,n[1]=Math.min(n[1]+e,s)-e,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function JI(n,t,e,i,r){n=t.scale.parse(n);var s=t.scale.getLabel({value:n},{precision:r.precision}),a=r.formatter;if(a){var o={value:m_(t,{value:n}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};A(i,function(l){var u=e.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&o.seriesData.push(c)}),U(a)?s=a.replace("{value}",s):lt(a)&&(s=a(o))}return s}function QI(n,t,e){var i=io();return my(i,i,e.rotation),Tv(i,i,e.position),zy([n.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],i)}function CG(n,t,e,i,r,s){var a=Lr.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=r.get(["label","margin"]),bG(t,i,r,s,{position:QI(i.axis,n,e),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function EG(n,t,e){return e=e||0,{x1:n[e],y1:n[1-e],x2:t[e],y2:t[1-e]}}function IG(n,t,e){return e=e||0,{x:n[e],y:n[1-e],width:t[e],height:t[1-e]}}var AG=function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,i,r,s,a){var o=r.axis,l=o.grid,u=s.get("type"),h=sS(l,o).getOtherAxis(o).getGlobalExtent(),c=o.toGlobalCoord(o.dataToCoord(i,!0));if(u&&u!=="none"){var f=SG(s),d=RG[u](o,c,h);d.style=f,e.graphicKey=d.type,e.pointer=d}var g=cm(l.model,r);CG(i,e,g,r,s,a)},t.prototype.getHandleTransform=function(e,i,r){var s=cm(i.axis.grid.model,i,{labelInside:!1});s.labelMargin=r.get(["handle","margin"]);var a=QI(i.axis,e,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,i,r,s){var a=r.axis,o=a.grid,l=a.getGlobalExtent(!0),u=sS(o,a).getOtherAxis(a).getGlobalExtent(),h=a.dim==="x"?0:1,c=[e.x,e.y];c[h]+=i[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var f=(u[1]+u[0])/2,d=[f,f];d[h]=c[h];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:d,tooltipOption:g[h]}},t}(xG);function sS(n,t){var e={};return e[t.dim+"AxisIndex"]=t.index,n.getCartesian(e)}var RG={line:function(n,t,e){var i=EG([t,e[0]],[t,e[1]],aS(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,t,e){var i=Math.max(1,n.getBandWidth()),r=e[1]-e[0];return{type:"Rect",shape:IG([t-i/2,e[0]],[i,r],aS(n))}}};function aS(n){return n.dim==="x"?0:1}var MG=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(xt),Pi=jt(),LG=A;function tA(n,t,e){if(!tt.node){var i=t.getZr();Pi(i).records||(Pi(i).records={}),DG(i,t);var r=Pi(i).records[n]||(Pi(i).records[n]={});r.handler=e}}function DG(n,t){if(Pi(n).initialized)return;Pi(n).initialized=!0,e("click",Gt(oS,"click")),e("mousemove",Gt(oS,"mousemove")),e("globalout",PG);function e(i,r){n.on(i,function(s){var a=OG(t);LG(Pi(n).records,function(o){o&&r(o,s,a.dispatchAction)}),kG(a.pendings,t)})}}function kG(n,t){var e=n.showTip.length,i=n.hideTip.length,r;e?r=n.showTip[e-1]:i&&(r=n.hideTip[i-1]),r&&(r.dispatchAction=null,t.dispatchAction(r))}function PG(n,t,e){n.handler("leave",null,e)}function oS(n,t,e,i){t.handler(n,e,i)}function OG(n){var t={showTip:[],hideTip:[]},e=function(i){var r=t[i.type];r?r.push(i):(i.dispatchAction=e,n.dispatchAction(i))};return{dispatchAction:e,pendings:t}}function gm(n,t){if(!tt.node){var e=t.getZr(),i=(Pi(e).records||{})[n];i&&(Pi(e).records[n]=null)}}var NG=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var s=i.getComponent("tooltip"),a=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";tA("axisPointer",r,function(o,l,u){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,i){gm("axisPointer",i)},t.prototype.dispose=function(e,i){gm("axisPointer",i)},t.type="axisPointer",t}(Mn);function eA(n,t){var e=[],i=n.seriesIndex,r;if(i==null||!(r=t.getSeriesByIndex(i)))return{point:[]};var s=r.getData(),a=rh(s,n);if(a==null||a<0||V(a))return{point:[]};var o=s.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)e=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,f=u.dim,d=c==="x"||c==="radius"?1:0,g=s.mapDimension(f),v=[];v[d]=s.get(g,a),v[1-d]=s.get(s.getCalculationInfo("stackResultDimension"),a),e=l.dataToPoint(v)||[]}else e=l.dataToPoint(s.getValues(j(l.dimensions,function(m){return s.mapDimension(m)}),a))||[];else if(o){var p=o.getBoundingRect().clone();p.applyTransform(o.transform),e=[p.x+p.width/2,p.y+p.height/2]}return{point:e,el:o}}var lS=jt();function FG(n,t,e){var i=n.currTrigger,r=[n.x,n.y],s=n,a=n.dispatchAction||Yt(e.dispatchAction,e),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){jc(r)&&(r=eA({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var l=jc(r),u=s.axesInfo,h=o.axesInfo,c=i==="leave"||jc(r),f={},d={},g={list:[],map:{}},v={showPointer:Gt(GG,d),showTooltip:Gt(zG,g)};A(o.coordSysMap,function(m,y){var _=l||m.containPoint(r);A(o.coordSysAxesInfo[y],function(w,S){var x=w.axis,b=$G(u,w);if(!c&&_&&(!u||b)){var T=b&&b.value;T==null&&!l&&(T=x.pointToData(r)),T!=null&&uS(w,T,v,!1,f)}})});var p={};return A(h,function(m,y){var _=m.linkGroup;_&&!d[y]&&A(_.axesInfo,function(w,S){var x=d[S];if(w!==m&&x){var b=x.value;_.mapper&&(b=m.axis.scale.parse(_.mapper(b,hS(w),hS(m)))),p[m.key]=b}})}),A(p,function(m,y){uS(h[y],m,v,!0,f)}),VG(d,h,f),WG(g,r,n,a),YG(h,a,e),f}}function uS(n,t,e,i,r){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(t))){if(!n.involveSeries){e.showPointer(n,t);return}var a=BG(t,n),o=a.payloadBatch,l=a.snapToValue;o[0]&&r.seriesIndex==null&&G(r,o[0]),!i&&n.snap&&s.containData(l)&&l!=null&&(t=l),e.showPointer(n,t,o),e.showTooltip(n,a,l)}}function BG(n,t){var e=t.axis,i=e.dim,r=n,s=[],a=Number.MAX_VALUE,o=-1;return A(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(i),c,f;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(h,n,e);f=d.dataIndices,c=d.nestestValue}else{if(f=l.getData().indicesOfNearest(h[0],n,e.type==="category"?.5:null),!f.length)return;c=l.getData().get(h[0],f[0])}if(!(c==null||!isFinite(c))){var g=n-c,v=Math.abs(g);v<=a&&((v<a||g>=0&&o<0)&&(a=v,o=g,r=c,s.length=0),A(f,function(p){s.push({seriesIndex:l.seriesIndex,dataIndexInside:p,dataIndex:l.getData().getRawIndex(p)})}))}}),{payloadBatch:s,snapToValue:r}}function GG(n,t,e,i){n[t.key]={value:e,payloadBatch:i}}function zG(n,t,e,i){var r=e.payloadBatch,s=t.axis,a=s.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!r.length)){var l=t.coordSys.model,u=Mu(l),h=n.map[u];h||(h=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(h)),h.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function VG(n,t,e){var i=e.axesInfo=[];A(t,function(r,s){var a=r.axisPointerModel.option,o=n[s];o?(!r.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function WG(n,t,e,i){if(jc(t)||!n.list.length){i({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function YG(n,t,e){var i=e.getZr(),r="axisPointerLastHighlights",s=lS(i)[r]||{},a=lS(i)[r]={};A(n,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&A(c.seriesDataIndices,function(f){var d=f.seriesIndex+" | "+f.dataIndex;a[d]=f})});var o=[],l=[];A(s,function(u,h){!a[h]&&l.push(u)}),A(a,function(u,h){!s[h]&&o.push(u)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function $G(n,t){for(var e=0;e<(n||[]).length;e++){var i=n[e];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function hS(n){var t=n.axis.model,e={},i=e.axisDim=n.axis.dim;return e.axisIndex=e[i+"AxisIndex"]=t.componentIndex,e.axisName=e[i+"AxisName"]=t.name,e.axisId=e[i+"AxisId"]=t.id,e}function jc(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function nA(n){KI.registerAxisPointerClass("CartesianAxisPointer",AG),n.registerComponentModel(MG),n.registerComponentView(NG),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!V(e)&&(t.axisPointer.link=[e])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=aG(t,e)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},FG)}function HG(n){Br(wG),Br(nA)}function UG(n,t){var e=Td(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),n=new ne({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),n}var XG=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(xt);function iA(n){var t=n.get("confine");return t!=null?!!t:n.get("renderMode")==="richText"}function rA(n){if(tt.domSupported){for(var t=document.documentElement.style,e=0,i=n.length;e<i;e++)if(n[e]in t)return n[e]}}var sA=rA(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),KG=rA(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function aA(n,t){if(!n)return t;t=gE(t,!0);var e=n.indexOf(t);return n=e===-1?t:"-"+n.slice(0,e)+"-"+t,n.toLowerCase()}function jG(n,t){var e=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return e?e[t]:null}var ZG=aA(KG,"transition"),x_=aA(sA,"transform"),qG="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(tt.transform3dSupported?"will-change:transform;":"");function JG(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function QG(n,t,e){if(!U(e)||e==="inside")return"";var i=n.get("backgroundColor"),r=n.get("borderWidth");t=bu(t);var s=JG(e),a=Math.max(Math.round(r)*1.5,6),o="",l=x_+":",u;bt(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(u=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(u=s==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=a+r,f=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),d=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-c)/2)*100)/100;o+=";"+s+":-"+d+"px";var g=t+" solid "+r+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+i+";"];return'<div style="'+v.join("")+'"></div>'}function tz(n,t){var e="cubic-bezier(0.23,1,0.32,1)",i=" "+n/2+"s "+e,r="opacity"+i+",visibility"+i;return t||(i=" "+n+"s "+e,r+=tt.transformSupported?","+x_+i:",left"+i+",top"+i),ZG+":"+r}function cS(n,t,e){var i=n.toFixed(0)+"px",r=t.toFixed(0)+"px";if(!tt.transformSupported)return e?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var s=tt.transform3dSupported,a="translate"+(s?"3d":"")+"("+i+","+r+(s?",0":"")+")";return e?"top:0;left:0;"+x_+":"+a+";":[["top",0],["left",0],[sA,a]]}function ez(n){var t=[],e=n.get("fontSize"),i=n.getTextColor();i&&t.push("color:"+i),t.push("font:"+n.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var r=n.get("textShadowColor"),s=n.get("textShadowBlur")||0,a=n.get("textShadowOffsetX")||0,o=n.get("textShadowOffsetY")||0;return r&&s&&t.push("text-shadow:"+a+"px "+o+"px "+s+"px "+r),A(["decoration","align"],function(l){var u=n.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function nz(n,t,e){var i=[],r=n.get("transitionDuration"),s=n.get("backgroundColor"),a=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),u=n.get("shadowOffsetY"),h=n.getModel("textStyle"),c=zE(n,"html"),f=l+"px "+u+"px "+a+"px "+o;return i.push("box-shadow:"+f),t&&r&&i.push(tz(r,e)),s&&i.push("background-color:"+s),A(["width","color","radius"],function(d){var g="border-"+d,v=gE(g),p=n.get(v);p!=null&&i.push(g+":"+p+(d==="color"?"":"px"))}),i.push(ez(h)),c!=null&&i.push("padding:"+Td(c).join("px ")+"px"),i.join(";")+";"}function fS(n,t,e,i,r){var s=t&&t.painter;if(e){var a=s&&s.getViewportRoot();a&&D2(n,a,e,i,r)}else{n[0]=i,n[1]=r;var o=s&&s.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var iz=function(){function n(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,tt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=t.getZr(),s=e.appendTo,a=s&&(U(s)?document.querySelector(s):mu(s)?s:lt(s)&&s(t.getDom()));fS(this._styleCoord,r,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(i),this._api=t,this._container=a;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!o._enterable){var u=r.handler,h=r.painter.getViewportRoot();vn(h,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),i=jG(e,"position"),r=e.style;r.position!=="absolute"&&i!=="absolute"&&(r.position="relative")}var s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},n.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,r=i.style,s=this._styleCoord;i.innerHTML?r.cssText=qG+nz(t,!this._firstShow,this._longHide)+cS(s[0],s[1],!0)+("border-color:"+bu(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,e,i,r,s){var a=this.el;if(t==null){a.innerHTML="";return}var o="";if(U(s)&&i.get("trigger")==="item"&&!iA(i)&&(o=QG(i,r,s)),U(t))a.innerHTML=t+o;else if(t){a.innerHTML="",V(t)||(t=[t]);for(var l=0;l<t.length;l++)mu(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(o&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=o,a.appendChild(u)}}},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},n.prototype.moveTo=function(t,e){var i=this._styleCoord;if(fS(i,this._zr,this._container,t,e),i[0]!=null&&i[1]!=null){var r=this.el.style,s=cS(i[0],i[1]);A(s,function(a){r[a[0]]=a[1]})}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",tt.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Yt(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},n}(),rz=function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),gS(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,e,i,r,s){var a=this;Z(t)&&Be(""),this.el&&this._zr.remove(this.el);var o=i.getModel("textStyle");this.el=new De({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:o.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:zE(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),A(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=i.get(u)}),A(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),i=dS(t.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},n.prototype.moveTo=function(t,e){var i=this.el;if(i){var r=this._styleCoord;gS(r,this._zr,t,e),t=r[0],e=r[1];var s=i.style,a=mr(s.borderWidth||0),o=dS(s);i.x=t+a+o.left,i.y=e+a+o.top,i.markRedraw()}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Yt(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function mr(n){return Math.max(0,n)}function dS(n){var t=mr(n.shadowBlur||0),e=mr(n.shadowOffsetX||0),i=mr(n.shadowOffsetY||0);return{left:mr(t-e),right:mr(t+e),top:mr(t-i),bottom:mr(t+i)}}function gS(n,t,e,i){n[0]=e,n[1]=i,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var sz=new ne({shape:{x:-1,y:-1,width:2,height:2}}),az=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){if(!(tt.node||!i.getDom())){var r=e.getComponent("tooltip"),s=this._renderMode=nk(r.get("renderMode"));this._tooltipContent=s==="richText"?new rz(i):new iz(i,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(e,i,r){if(!(tt.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=i,this._api=r;var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?YE(this,"_updatePosition",50,"fixRate"):Jv(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,i=e.get("triggerOn");tA("itemTooltip",this._api,Yt(function(r,s,a){i!=="none"&&(i.indexOf(r)>=0?this._tryShow(s,a):r==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,i=this._ecModel,r=this._api,s=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(e,i,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,i,r,s){if(!(s.from===this.uid||tt.node||!r.getDom())){var a=pS(s,r);this._ticket="";var o=s.dataByCoordSys,l=hz(s,i,r);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var h=sz;h.x=s.x,h.y=s.y,h.update(),St(h).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:h},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,i,r,s))return;var c=eA(s,i),f=c.point[0],d=c.point[1];f!=null&&d!=null&&this._tryShow({offsetX:f,offsetY:d,target:c.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:r.getZr().findHover(s.x,s.y).target},a))}},t.prototype.manuallyHideTip=function(e,i,r,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(pS(s,r))},t.prototype._manuallyAxisShowTip=function(e,i,r,s){var a=s.seriesIndex,o=s.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var u=i.getSeriesByIndex(a);if(u){var h=u.getData(),c=xl([h.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},t.prototype._tryShow=function(e,i){var r=e.target,s=this._tooltipModel;if(s){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(r){var o=St(r);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Fl(r,function(h){if(St(h).dataIndex!=null)return l=h,!0;if(St(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(e,l,i):u?this._showComponentItemTooltip(e,u,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(e,i){var r=e.get("showDelay");i=Yt(i,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(i,r):i()},t.prototype._showAxisTooltip=function(e,i){var r=this._ecModel,s=this._tooltipModel,a=[i.offsetX,i.offsetY],o=xl([i.tooltipOption],s),l=this._renderMode,u=[],h=Bs("section",{blocks:[],noHeader:!0}),c=[],f=new hp;A(e,function(y){A(y.dataByAxis,function(_){var w=r.getComponent(_.axisDim+"Axis",_.axisIndex),S=_.value;if(!(!w||S==null)){var x=JI(S,w.axis,r,_.seriesDataIndices,_.valueLabelOpt),b=Bs("section",{header:x,noHeader:!ai(x),sortBlocks:!0,blocks:[]});h.blocks.push(b),A(_.seriesDataIndices,function(T){var C=r.getSeriesByIndex(T.seriesIndex),I=T.dataIndexInside,E=C.getDataParams(I);if(!(E.dataIndex<0)){E.axisDim=_.axisDim,E.axisIndex=_.axisIndex,E.axisType=_.axisType,E.axisId=_.axisId,E.axisValue=m_(w.axis,{value:S}),E.axisValueLabel=x,E.marker=f.makeTooltipMarker("item",bu(E.color),l);var R=Xw(C.formatTooltip(I,!0,null)),L=R.frag;if(L){var M=xl([C],s).get("valueFormatter");b.blocks.push(M?G({valueFormatter:M},L):L)}R.text&&c.push(R.text),u.push(E)}})}})}),h.blocks.reverse(),c.reverse();var d=i.position,g=o.get("order"),v=Jw(h,f,l,g,r.get("useUTC"),o.get("textStyle"));v&&c.unshift(v);var p=l==="richText"?`

`:"<br/>",m=c.join(p);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(o,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(o,m,u,Math.random()+"",a[0],a[1],d,null,f)})},t.prototype._showSeriesItemTooltip=function(e,i,r){var s=this._ecModel,a=St(i),o=a.seriesIndex,l=s.getSeriesByIndex(o),u=a.dataModel||l,h=a.dataIndex,c=a.dataType,f=u.getData(c),d=this._renderMode,g=e.positionDefault,v=xl([f.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),p=v.get("trigger");if(!(p!=null&&p!=="item")){var m=u.getDataParams(h,c),y=new hp;m.marker=y.makeTooltipMarker("item",bu(m.color),d);var _=Xw(u.formatTooltip(h,!1,c)),w=v.get("order"),S=v.get("valueFormatter"),x=_.frag,b=x?Jw(S?G({valueFormatter:S},x):x,y,d,w,s.get("useUTC"),v.get("textStyle")):_.text,T="item_"+u.name+"_"+h;this._showOrMove(v,function(){this._showTooltipContent(v,b,m,T,e.offsetX,e.offsetY,e.position,e.target,y)}),r({type:"showTip",dataIndexInside:h,dataIndex:f.getRawIndex(h),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,i,r){var s=this._renderMode==="html",a=St(i),o=a.tooltipConfig,l=o.option||{},u=l.encodeHTMLContent;if(U(l)){var h=l;l={content:h,formatter:h},u=!0}u&&s&&l.content&&(l=ut(l),l.content=en(l.content));var c=[l],f=this._ecModel.getComponent(a.componentMainType,a.componentIndex);f&&c.push(f),c.push({formatter:l.content});var d=e.positionDefault,g=xl(c,this._tooltipModel,d?{position:d}:null),v=g.get("content"),p=Math.random()+"",m=new hp;this._showOrMove(g,function(){var y=ut(g.get("formatterParams")||{});this._showTooltipContent(g,v,y,p,e.offsetX,e.offsetY,e.position,i,m)}),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,i,r,s,a,o,l,u,h){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var c=this._tooltipContent;c.setEnterable(e.get("enterable"));var f=e.get("formatter");l=l||e.get("position");var d=i,g=this._getNearestPoint([a,o],r,e.get("trigger"),e.get("borderColor")),v=g.color;if(f)if(U(f)){var p=e.ecModel.get("useUTC"),m=V(r)?r[0]:r,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=f,y&&(d=_d(m.axisValue,d,p)),d=pE(d,r,!0)}else if(lt(f)){var _=Yt(function(w,S){w===this._ticket&&(c.setContent(S,h,e,v,l),this._updatePosition(e,l,a,o,c,r,u))},this);this._ticket=s,d=f(r,s,_)}else d=f;c.setContent(d,h,e,v,l),c.show(e,v),this._updatePosition(e,l,a,o,c,r,u)}},t.prototype._getNearestPoint=function(e,i,r,s){if(r==="axis"||V(i))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!V(i))return{color:s||i.color||i.borderColor}},t.prototype._updatePosition=function(e,i,r,s,a,o,l){var u=this._api.getWidth(),h=this._api.getHeight();i=i||e.get("position");var c=a.getSize(),f=e.get("align"),d=e.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),lt(i)&&(i=i([r,s],o,a.el,g,{viewSize:[u,h],contentSize:c.slice()})),V(i))r=ce(i[0],u),s=ce(i[1],h);else if(Z(i)){var v=i;v.width=c[0],v.height=c[1];var p=Tu(v,{width:u,height:h});r=p.x,s=p.y,f=null,d=null}else if(U(i)&&l){var m=uz(i,g,c,e.get("borderWidth"));r=m[0],s=m[1]}else{var m=oz(r,s,a,u,h,f?null:20,d?null:20);r=m[0],s=m[1]}if(f&&(r-=vS(f)?c[0]/2:f==="right"?c[0]:0),d&&(s-=vS(d)?c[1]/2:d==="bottom"?c[1]:0),iA(e)){var m=lz(r,s,a,u,h);r=m[0],s=m[1]}a.moveTo(r,s)},t.prototype._updateContentNotChangedOnAxis=function(e,i){var r=this._lastDataByCoordSys,s=this._cbParamsList,a=!!r&&r.length===e.length;return a&&A(r,function(o,l){var u=o.dataByAxis||[],h=e[l]||{},c=h.dataByAxis||[];a=a&&u.length===c.length,a&&A(u,function(f,d){var g=c[d]||{},v=f.seriesDataIndices||[],p=g.seriesDataIndices||[];a=a&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&v.length===p.length,a&&A(v,function(m,y){var _=p[y];a=a&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),s&&A(f.seriesDataIndices,function(m){var y=m.seriesIndex,_=i[y],w=s[y];_&&w&&w.data!==_.data&&(a=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=i,!!a},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,i){tt.node||!i.getDom()||(Jv(this,"_updatePosition"),this._tooltipContent.dispose(),gm("itemTooltip",i))},t.type="tooltip",t}(Mn);function xl(n,t,e){var i=t.ecModel,r;e?(r=new Xt(e,i,i),r=new Xt(t.option,r,i)):r=t;for(var s=n.length-1;s>=0;s--){var a=n[s];a&&(a instanceof Xt&&(a=a.get("tooltip",!0)),U(a)&&(a={formatter:a}),a&&(r=new Xt(a,r,i)))}return r}function pS(n,t){return n.dispatchAction||Yt(t.dispatchAction,t)}function oz(n,t,e,i,r,s,a){var o=e.getSize(),l=o[0],u=o[1];return s!=null&&(n+l+s+2>i?n-=l+s:n+=s),a!=null&&(t+u+a>r?t-=u+a:t+=a),[n,t]}function lz(n,t,e,i,r){var s=e.getSize(),a=s[0],o=s[1];return n=Math.min(n+a,i)-a,t=Math.min(t+o,r)-o,n=Math.max(n,0),t=Math.max(t,0),[n,t]}function uz(n,t,e,i){var r=e[0],s=e[1],a=Math.ceil(Math.SQRT2*i)+8,o=0,l=0,u=t.width,h=t.height;switch(n){case"inside":o=t.x+u/2-r/2,l=t.y+h/2-s/2;break;case"top":o=t.x+u/2-r/2,l=t.y-s-a;break;case"bottom":o=t.x+u/2-r/2,l=t.y+h+a;break;case"left":o=t.x-r-a,l=t.y+h/2-s/2;break;case"right":o=t.x+u+a,l=t.y+h/2-s/2}return[o,l]}function vS(n){return n==="center"||n==="middle"}function hz(n,t,e){var i=Ey(n).queryOptionMap,r=i.keys()[0];if(!(!r||r==="series")){var s=sh(t,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=e.getViewOfComponentModel(a),l;if(o.group.traverse(function(u){var h=St(u).tooltipConfig;if(h&&h.name===n.name)return l=u,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}function cz(n){Br(nA),n.registerComponentModel(XG),n.registerComponentView(az),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Ue),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Ue)}var fz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(xt),dz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){if(this.group.removeAll(),!!e.get("show")){var s=this.group,a=e.getModel("textStyle"),o=e.getModel("subtextStyle"),l=e.get("textAlign"),u=st(e.get("textBaseline"),e.get("textVerticalAlign")),h=new De({style:Fr(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),f=e.get("subtext"),d=new De({style:Fr(o,{text:f,fill:o.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),v=e.get("sublink"),p=e.get("triggerEvent",!0);h.silent=!g&&!p,d.silent=!v&&!p,g&&h.on("click",function(){Rw(g,"_"+e.get("target"))}),v&&d.on("click",function(){Rw(v,"_"+e.get("subtarget"))}),St(h).eventData=St(d).eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(h),f&&s.add(d);var m=s.getBoundingRect(),y=e.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=Tu(y,{width:r.getWidth(),height:r.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=e.get("top")||e.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),s.x=_.x,s.y=_.y,s.markRedraw();var w={align:l,verticalAlign:u};h.setStyle(w),d.setStyle(w),m=s.getBoundingRect();var S=_.margin,x=e.getItemStyle(["color","opacity"]);x.fill=e.get("backgroundColor");var b=new ne({shape:{x:m.x-S[3],y:m.y-S[0],width:m.width+S[1]+S[3],height:m.height+S[0]+S[2],r:e.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});s.add(b)}},t.type="title",t}(Mn);function gz(n){n.registerComponentModel(fz),n.registerComponentView(dz)}function pz(n,t){if(!n)return!1;for(var e=V(n)?n:[n],i=0;i<e.length;i++)if(e[i]&&e[i][t])return!0;return!1}function lc(n){Pv(n,"label",["show"])}var uc=jt(),Lu=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r),this._mergeOption(e,r,!1,!0)},t.prototype.isAnimationEnabled=function(){if(tt.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,i){this._mergeOption(e,i,!1,!1)},t.prototype._mergeOption=function(e,i,r,s){var a=this.mainType;r||i.eachSeries(function(o){var l=o.get(this.mainType,!0),u=uc(o)[a];if(!l||!l.data){uc(o)[a]=null;return}u?u._mergeOption(l,i,!0):(s&&lc(l),A(l.data,function(h){h instanceof Array?(lc(h[0]),lc(h[1])):lc(h)}),u=this.createMarkerModelFromSeries(l,this,i),G(u,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),u.__hostSeries=o),uc(o)[a]=u},this)},t.prototype.formatTooltip=function(e,i,r){var s=this.getData(),a=this.getRawValue(e),o=s.getName(e);return Bs("section",{header:this.name,blocks:[Bs("nameValue",{name:o,value:a,noName:!o,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,i){var r=i_.prototype.getDataParams.call(this,e,i),s=this.__hostSeries;return s&&(r.seriesId=s.id,r.seriesName=s.name,r.seriesType=s.subType),r},t.getMarkerModelFromSeries=function(e,i){return uc(e)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(xt);Xn(Lu,i_.prototype);function vz(n,t){var e=n.mapDimensionsAll("defaultedLabel"),i=e.length;if(i===1){var r=xo(n,t,e[0]);return r!=null?r+"":null}else if(i){for(var s=[],a=0;a<e.length;a++)s.push(xo(n,t,e[a]));return s.join(" ")}}function mz(n,t){var e=n.mapDimensionsAll("defaultedLabel");if(!V(t))return t+"";for(var i=[],r=0;r<e.length;r++){var s=n.getDimensionIndex(e[r]);s>=0&&i.push(t[s])}return i.join(" ")}function yz(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function _z(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function hc(n,t,e,i,r,s){var a=[],o=f_(t,i),l=o?t.getCalculationInfo("stackResultDimension"):i,u=S_(t,l,n),h=t.indicesOfNearest(l,u)[0];a[r]=t.get(e,h),a[s]=t.get(l,h);var c=t.get(i,h),f=mo(t.get(i,h));return f=Math.min(f,20),f>=0&&(a[s]=+a[s].toFixed(f)),[a,c]}var Rp={min:Gt(hc,"min"),max:Gt(hc,"max"),average:Gt(hc,"average"),median:Gt(hc,"median")};function mS(n,t){if(t){var e=n.getData(),i=n.coordinateSystem,r=i&&i.dimensions;if(!_z(t)&&!V(t.coord)&&V(r)){var s=oA(t,e,i,n);if(t=ut(t),t.type&&Rp[t.type]&&s.baseAxis&&s.valueAxis){var a=bt(r,s.baseAxis.dim),o=bt(r,s.valueAxis.dim),l=Rp[t.type](e,s.baseDataDim,s.valueDataDim,a,o);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!V(r))t.coord=[];else for(var u=t.coord,h=0;h<2;h++)Rp[u[h]]&&(u[h]=S_(e,e.mapDimension(r[h]),u[h]));return t}}function oA(n,t,e,i){var r={};return n.valueIndex!=null||n.valueDim!=null?(r.valueDataDim=n.valueIndex!=null?t.getDimension(n.valueIndex):n.valueDim,r.valueAxis=e.getAxis(wz(i,r.valueDataDim)),r.baseAxis=e.getOtherAxis(r.valueAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=e.getOtherAxis(r.baseAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim),r.valueDataDim=t.mapDimension(r.valueAxis.dim)),r}function wz(n,t){var e=n.getData().getDimensionInfo(t);return e&&e.coordDim}function yS(n,t){return n&&n.containData&&t.coord&&!yz(t)?n.containData(t.coord):!0}function xz(n,t){return n?function(e,i,r,s){var a=s<2?e.coord&&e.coord[s]:e.value;return uo(a,t[s])}:function(e,i,r,s){return uo(e.value,t[s])}}function S_(n,t,e){if(e==="average"){var i=0,r=0;return n.each(t,function(s,a){isNaN(s)||(i+=s,r++)}),i/r}else return e==="median"?n.getMedian(t):n.getDataExtent(t)[e==="max"?1:0]}var Mp=jt(),Sz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=ot()},t.prototype.render=function(e,i,r){var s=this,a=this.markerGroupMap;a.each(function(o){Mp(o).keep=!1}),i.eachSeries(function(o){var l=Lu.getMarkerModelFromSeries(o,s.type);l&&s.renderSeries(o,l,i,r)}),a.each(function(o){!Mp(o).keep&&s.group.remove(o.group)})},t.prototype.markKeep=function(e){Mp(e).keep=!0},t.prototype.toggleBlurSeries=function(e,i){var r=this;A(e,function(s){var a=Lu.getMarkerModelFromSeries(s,r.type);if(a){var o=a.getData();o.eachItemGraphicEl(function(l){l&&(i?OC(l):Dy(l))})}})},t.type="marker",t}(Mn),bz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,i,r){return new t(e,i,r)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Lu),_S=Ki.prototype,Lp=gd.prototype,lA=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(lA);function Dp(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var Tz=function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lA},t.prototype.buildPath=function(e,i){Dp(i)?_S.buildPath.call(this,e,i):Lp.buildPath.call(this,e,i)},t.prototype.pointAt=function(e){return Dp(this.shape)?_S.pointAt.call(this,e):Lp.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var i=this.shape,r=Dp(i)?[i.x2-i.x1,i.y2-i.y1]:Lp.tangentAt.call(this,e);return gy(r,r)},t}(Rt),kp=["fromSymbol","toSymbol"];function wS(n){return"_"+n+"Type"}function xS(n,t,e){var i=t.getItemVisual(e,n);if(!i||i==="none")return i;var r=t.getItemVisual(e,n+"Size"),s=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),o=t.getItemVisual(e,n+"KeepAspect"),l=JE(r),u=a_(a||0,l);return i+l+u+(s||"")+(o||"")}function SS(n,t,e){var i=t.getItemVisual(e,n);if(!(!i||i==="none")){var r=t.getItemVisual(e,n+"Size"),s=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),o=t.getItemVisual(e,n+"KeepAspect"),l=JE(r),u=a_(a||0,l),h=Ad(i,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,o);return h.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,h.name=n,h}}function Cz(n){var t=new Tz({name:"line",subPixelOptimize:!0});return pm(t.shape,n),t}function pm(n,t){n.x1=t[0][0],n.y1=t[0][1],n.x2=t[1][0],n.y2=t[1][1],n.percent=1;var e=t[2];e?(n.cpx1=e[0],n.cpy1=e[1]):(n.cpx1=NaN,n.cpy1=NaN)}var Ez=function(n){et(t,n);function t(e,i,r){var s=n.call(this)||this;return s._createLine(e,i,r),s}return t.prototype._createLine=function(e,i,r){var s=e.hostModel,a=e.getItemLayout(i),o=Cz(a);o.shape.percent=0,_o(o,{shape:{percent:1}},s,i),this.add(o),A(kp,function(l){var u=SS(l,e,i);this.add(u),this[wS(l)]=xS(l,e,i)},this),this._updateCommonStl(e,i,r)},t.prototype.updateData=function(e,i,r){var s=e.hostModel,a=this.childOfName("line"),o=e.getItemLayout(i),l={shape:{}};pm(l.shape,o),vi(a,l,s,i),A(kp,function(u){var h=xS(u,e,i),c=wS(u);if(this[c]!==h){this.remove(this.childOfName(u));var f=SS(u,e,i);this.add(f)}this[c]=h},this),this._updateCommonStl(e,i,r)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,i,r){var s=e.hostModel,a=this.childOfName("line"),o=r&&r.emphasisLineStyle,l=r&&r.blurLineStyle,u=r&&r.selectLineStyle,h=r&&r.labelStatesModels,c=r&&r.emphasisDisabled,f=r&&r.focus,d=r&&r.blurScope;if(!r||e.hasItemOption){var g=e.getItemModel(i),v=g.getModel("emphasis");o=v.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),c=v.get("disabled"),f=v.get("focus"),d=v.get("blurScope"),h=$y(g)}var p=e.getItemVisual(i,"style"),m=p.stroke;a.useStyle(p),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=o,a.ensureState("blur").style=l,a.ensureState("select").style=u,A(kp,function(x){var b=this.childOfName(x);if(b){b.setColor(m),b.style.opacity=p.opacity;for(var T=0;T<pi.length;T++){var C=pi[T],I=a.getState(C);if(I){var E=I.style||{},R=b.ensureState(C),L=R.style||(R.style={});E.stroke!=null&&(L[b.__isEmptyBrush?"stroke":"fill"]=E.stroke),E.opacity!=null&&(L.opacity=E.opacity)}}b.markRedraw()}},this);var y=s.getRawValue(i);Yy(this,h,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(x,b){return s.getFormattedLabel(x,b,e.dataType)}},inheritColor:m||"#000",defaultOpacity:p.opacity,defaultText:(y==null?e.getName(i):isFinite(y)?ae(y):y)+""});var _=this.getTextContent();if(_){var w=h.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=w.get("position")||"middle";var S=w.get("distance");V(S)||(S=[S,S]),_.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),zC(this,f,d,c)},t.prototype.highlight=function(){yf(this)},t.prototype.downplay=function(){_f(this)},t.prototype.updateLayout=function(e,i){this.setLinePoints(e.getItemLayout(i))},t.prototype.setLinePoints=function(e){var i=this.childOfName("line");pm(i.shape,e),i.dirty()},t.prototype.beforeUpdate=function(){var e=this,i=e.childOfName("fromSymbol"),r=e.childOfName("toSymbol"),s=e.getTextContent();if(!i&&!r&&(!s||s.ignore))return;for(var a=1,o=this.parent;o;)o.scaleX&&(a/=o.scaleX),o=o.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),f=UT([],c,h);gy(f,f);function d(I,E){var R=I.__specifiedRotation;if(R==null){var L=l.tangentAt(E);I.attr("rotation",(E===1?-1:1)*Math.PI/2-Math.atan2(L[1],L[0]))}else I.attr("rotation",R)}if(i&&(i.setPosition(h),d(i,0),i.scaleX=i.scaleY=a*u,i.markRedraw()),r&&(r.setPosition(c),d(r,1),r.scaleX=r.scaleY=a*u,r.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var g=void 0,v=void 0,p=s.__labelDistance,m=p[0]*a,y=p[1]*a,_=u/2,w=l.tangentAt(_),S=[w[1],-w[0]],x=l.pointAt(_);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var b=w[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var T=-Math.atan2(w[1],w[0]);c[0]<h[0]&&(T=Math.PI+T),s.rotation=T}var C=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=y,v="top";break;default:C=0,v="middle"}switch(s.__position){case"end":s.x=f[0]*m+c[0],s.y=f[1]*y+c[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",v=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":s.x=-f[0]*m+h[0],s.y=-f[1]*y+h[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",v=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=m*b+h[0],s.y=h[1]+C,g=w[0]<0?"right":"left",s.originX=-m*b,s.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=x[0],s.y=x[1]+C,g="center",s.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-m*b+c[0],s.y=c[1]+C,g=w[0]>=0?"right":"left",s.originX=m*b,s.originY=-C;break}s.scaleX=s.scaleY=a,s.setStyle({verticalAlign:s.__verticalAlign||v,align:s.__align||g})}},t}(Le),Iz=function(){function n(t){this.group=new Le,this._LineCtor=t||Ez}return n.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var i=this,r=i.group,s=i._lineData;i._lineData=t,s||r.removeAll();var a=bS(t);t.diff(s).add(function(o){e._doAdd(t,o,a)}).update(function(o,l){e._doUpdate(s,t,l,o,a)}).remove(function(o){r.remove(s.getItemGraphicEl(o))}).execute()},n.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,i){e.updateLayout(t,i)},this)},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=bS(t),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function i(o){!o.isGroup&&!Az(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var s=e.getItemLayout(r);if(Pp(s)){var a=new this._LineCtor(e,r,this._seriesScope);a.traverse(i),this.group.add(a),e.setItemGraphicEl(r,a),this._progressiveEls.push(a)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(t){vd(this._progressiveEls||this.group,t)},n.prototype._doAdd=function(t,e,i){var r=t.getItemLayout(e);if(Pp(r)){var s=new this._LineCtor(t,e,i);t.setItemGraphicEl(e,s),this.group.add(s)}},n.prototype._doUpdate=function(t,e,i,r,s){var a=t.getItemGraphicEl(i);if(!Pp(e.getItemLayout(r))){this.group.remove(a);return}a?a.updateData(e,r,s):a=new this._LineCtor(e,r,s),e.setItemGraphicEl(r,a),this.group.add(a)},n}();function Az(n){return n.animators&&n.animators.length>0}function bS(n){var t=n.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:$y(t)}}function TS(n){return isNaN(n[0])||isNaN(n[1])}function Pp(n){return n&&!TS(n[0])&&!TS(n[1])}function b_(n,t){return n.type===t}var cc=jt(),Rz=function(n,t,e,i){var r=n.getData(),s;if(V(i))s=i;else{var a=i.type;if(a==="min"||a==="max"||a==="average"||a==="median"||i.xAxis!=null||i.yAxis!=null){var o=void 0,l=void 0;if(i.yAxis!=null||i.xAxis!=null)o=t.getAxis(i.yAxis!=null?"y":"x"),l=po(i.yAxis,i.xAxis);else{var u=oA(i,r,t,n);o=u.valueAxis;var h=II(r,u.valueDataDim);l=S_(r,h,a)}var c=o.dim==="x"?0:1,f=1-c,d=ut(i),g={coord:[]};d.type=null,d.coord=[],d.coord[f]=-1/0,g.coord[f]=1/0;var v=e.get("precision");v>=0&&$t(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[c]=g.coord[c]=l,s=[d,g,{type:a,valueIndex:i.valueIndex,value:l}]}else s=[]}var p=[mS(n,s[0]),mS(n,s[1]),G({},s[2])];return p[2].type=p[2].type||null,mt(p[2],p[0]),mt(p[2],p[1]),p};function Mf(n){return!isNaN(n)&&!isFinite(n)}function CS(n,t,e,i){var r=1-n,s=i.dimensions[n];return Mf(t[r])&&Mf(e[r])&&t[n]===e[n]&&i.getAxis(s).containData(t[n])}function Mz(n,t){if(n.type==="cartesian2d"){var e=t[0].coord,i=t[1].coord;if(e&&i&&(CS(1,e,i,n)||CS(0,e,i,n)))return!0}return yS(n,t[0])&&yS(n,t[1])}function Op(n,t,e,i,r){var s=i.coordinateSystem,a=n.getItemModel(t),o,l=ce(a.get("x"),r.getWidth()),u=ce(a.get("y"),r.getHeight());if(!isNaN(l)&&!isNaN(u))o=[l,u];else{if(i.getMarkerPosition)o=i.getMarkerPosition(n.getValues(n.dimensions,t));else{var h=s.dimensions,c=n.get(h[0],t),f=n.get(h[1],t);o=s.dataToPoint([c,f])}if(b_(s,"cartesian2d")){var d=s.getAxis("x"),g=s.getAxis("y"),h=s.dimensions;Mf(n.get(h[0],t))?o[0]=d.toGlobalCoord(d.getExtent()[e?0:1]):Mf(n.get(h[1],t))&&(o[1]=g.toGlobalCoord(g.getExtent()[e?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}n.setItemLayout(t,o)}var Lz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,i,r){i.eachSeries(function(s){var a=Lu.getMarkerModelFromSeries(s,"markLine");if(a){var o=a.getData(),l=cc(a).from,u=cc(a).to;l.each(function(h){Op(l,h,!0,s,r),Op(u,h,!1,s,r)}),o.each(function(h){o.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,i,r,s){var a=e.coordinateSystem,o=e.id,l=e.getData(),u=this.markerGroupMap,h=u.get(o)||u.set(o,new Iz);this.group.add(h.group);var c=Dz(a,e,i),f=c.from,d=c.to,g=c.line;cc(i).from=f,cc(i).to=d,i.setData(g);var v=i.get("symbol"),p=i.get("symbolSize"),m=i.get("symbolRotate"),y=i.get("symbolOffset");V(v)||(v=[v,v]),V(p)||(p=[p,p]),V(m)||(m=[m,m]),V(y)||(y=[y,y]),c.from.each(function(w){_(f,w,!0),_(d,w,!1)}),g.each(function(w){var S=g.getItemModel(w).getModel("lineStyle").getLineStyle();g.setItemLayout(w,[f.getItemLayout(w),d.getItemLayout(w)]),S.stroke==null&&(S.stroke=f.getItemVisual(w,"style").fill),g.setItemVisual(w,{fromSymbolKeepAspect:f.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(w,"symbolOffset"),fromSymbolRotate:f.getItemVisual(w,"symbolRotate"),fromSymbolSize:f.getItemVisual(w,"symbolSize"),fromSymbol:f.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:S})}),h.updateData(g),c.line.eachItemGraphicEl(function(w){St(w).dataModel=i,w.traverse(function(S){St(S).dataModel=i})});function _(w,S,x){var b=w.getItemModel(S);Op(w,S,x,e,s);var T=b.getModel("itemStyle").getItemStyle();T.fill==null&&(T.fill=qE(l,"color")),w.setItemVisual(S,{symbolKeepAspect:b.get("symbolKeepAspect"),symbolOffset:st(b.get("symbolOffset",!0),y[x?0:1]),symbolRotate:st(b.get("symbolRotate",!0),m[x?0:1]),symbolSize:st(b.get("symbolSize"),p[x?0:1]),symbol:st(b.get("symbol",!0),v[x?0:1]),style:T})}this.markKeep(h),h.group.silent=i.get("silent")||e.get("silent")},t.type="markLine",t}(Sz);function Dz(n,t,e){var i;n?i=j(n&&n.dimensions,function(u){var h=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return G(G({},h),{name:u,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var r=new Kc(i,e),s=new Kc(i,e),a=new Kc([],e),o=j(e.get("data"),Gt(Rz,t,n,e));n&&(o=xe(o,Gt(Mz,n)));var l=xz(!!n,i);return r.initData(j(o,function(u){return u[0]}),null,l),s.initData(j(o,function(u){return u[1]}),null,l),a.initData(j(o,function(u){return u[2]})),a.hasItemOption=!0,{from:r,to:s,line:a}}function kz(n){n.registerComponentModel(bz),n.registerComponentView(Lz),n.registerPreprocessor(function(t){pz(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Pz=function(n,t){if(t==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},vm=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,i){n.prototype.mergeOption.call(this,e,i),this._updateSelector(e)},t.prototype._updateSelector=function(e){var i=e.selector,r=this.ecModel;i===!0&&(i=e.selector=["all","inverse"]),V(i)&&A(i,function(s,a){U(s)&&(s={type:s}),i[a]=mt(s,Pz(r,s.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var i=!1,r=0;r<e.length;r++){var s=e[r].get("name");if(this.isSelected(s)){this.select(s),i=!0;break}}!i&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var i=[],r=[];e.eachRawSeries(function(l){var u=l.name;r.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,f=c.getAllNames();e.isSeriesFiltered(l)||(r=r.concat(f)),f.length?i=i.concat(f):h=!0}else h=!0;h&&Cy(l)&&i.push(l.name)}),this._availableNames=r;var s=this.get("data")||i,a=ot(),o=j(s,function(l){return(U(l)||$t(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Xt(l,this,this.ecModel))},this);this._data=xe(o,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var i=this.option.selected,r=this.get("selectedMode");if(r==="single"){var s=this._data;A(s,function(a){i[a.get("name")]=!1})}i[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var i=this.option.selected;i.hasOwnProperty(e)||(i[e]=!0),this[i[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,i=this.option.selected;A(e,function(r){i[r.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,i=this.option.selected;A(e,function(r){var s=r.get("name",!0);i.hasOwnProperty(s)||(i[s]=!0),i[s]=!i[s]})},t.prototype.isSelected=function(e){var i=this.option.selected;return!(i.hasOwnProperty(e)&&!i[e])&&bt(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(xt),wa=Gt,mm=A,fc=Le,uA=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new fc),this.group.add(this._selectorGroup=new fc),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,i,r){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var a=e.get("align"),o=e.get("orient");(!a||a==="auto")&&(a=e.get("left")==="right"&&o==="vertical"?"right":"left");var l=e.get("selector",!0),u=e.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(a,e,i,r,l,o,u);var h=e.getBoxLayoutParams(),c={width:r.getWidth(),height:r.getHeight()},f=e.get("padding"),d=Tu(h,c,f),g=this.layoutInner(e,a,d,s,l,u),v=Tu(Pt({width:g.width,height:g.height},h),c,f);this.group.x=v.x-g.x,this.group.y=v.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=UG(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,i,r,s,a,o,l){var u=this.getContentGroup(),h=ot(),c=i.get("selectedMode"),f=[];r.eachRawSeries(function(d){!d.get("legendHoverLink")&&f.push(d.id)}),mm(i.getData(),function(d,g){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var p=new fc;p.newline=!0,u.add(p);return}var m=r.getSeriesByName(v)[0];if(!h.get(v))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),S=y.getVisual("style"),x=this._createItem(m,v,g,d,i,e,_,S,w,c,s);x.on("click",wa(ES,v,null,s,f)).on("mouseover",wa(ym,m.name,null,s,f)).on("mouseout",wa(_m,m.name,null,s,f)),r.ssr&&x.eachChild(function(b){var T=St(b);T.seriesIndex=m.seriesIndex,T.dataIndex=g,T.ssrType="legend"}),h.set(v,!0)}else r.eachRawSeries(function(b){if(!h.get(v)&&b.legendVisualProvider){var T=b.legendVisualProvider;if(!T.containName(v))return;var C=T.indexOfName(v),I=T.getItemVisual(C,"style"),E=T.getItemVisual(C,"legendIcon"),R=Ds(I.fill);R&&R[3]===0&&(R[3]=.2,I=G(G({},I),{fill:_y(R,"rgba")}));var L=this._createItem(b,v,g,d,i,e,{},I,E,c,s);L.on("click",wa(ES,null,v,s,f)).on("mouseover",wa(ym,null,v,s,f)).on("mouseout",wa(_m,null,v,s,f)),r.ssr&&L.eachChild(function(M){var k=St(M);k.seriesIndex=b.seriesIndex,k.dataIndex=g,k.ssrType="legend"}),h.set(v,!0)}},this)},this),a&&this._createSelector(a,i,s,o,l)},t.prototype._createSelector=function(e,i,r,s,a){var o=this.getSelectorGroup();mm(e,function(u){var h=u.type,c=new De({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});o.add(c);var f=i.getModel("selectorLabel"),d=i.getModel(["emphasis","selectorLabel"]);Yy(c,{normal:f,emphasis:d},{defaultText:u.title}),zv(c)})},t.prototype._createItem=function(e,i,r,s,a,o,l,u,h,c,f){var d=e.visualDrawType,g=a.get("itemWidth"),v=a.get("itemHeight"),p=a.isSelected(i),m=s.get("symbolRotate"),y=s.get("symbolKeepAspect"),_=s.get("icon");h=_||h||"roundRect";var w=Oz(h,s,l,u,d,p,f),S=new fc,x=s.getModel("textStyle");if(lt(e.getLegendIcon)&&(!_||_==="inherit"))S.add(e.getLegendIcon({itemWidth:g,itemHeight:v,icon:h,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var b=_==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;S.add(Nz({itemWidth:g,itemHeight:v,icon:h,iconRotate:b,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var T=o==="left"?g+5:-5,C=o,I=a.get("formatter"),E=i;U(I)&&I?E=I.replace("{name}",i??""):lt(I)&&(E=I(i));var R=p?x.getTextColor():s.get("inactiveColor");S.add(new De({style:Fr(x,{text:E,x:T,y:v/2,fill:R,align:C,verticalAlign:"middle"},{inheritColor:R})}));var L=new ne({shape:S.getBoundingRect(),style:{fill:"transparent"}}),M=s.getModel("tooltip");return M.get("show")&&Wy({el:L,componentModel:a,itemName:i,itemTooltipOption:M.option}),S.add(L),S.eachChild(function(k){k.silent=!0}),L.silent=!c,this.getContentGroup().add(S),zv(S),S.__legendDataIndex=r,S},t.prototype.layoutInner=function(e,i,r,s,a,o){var l=this.getContentGroup(),u=this.getSelectorGroup();iu(e.get("orient"),l,e.get("itemGap"),r.width,r.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),a){iu("horizontal",u,e.get("selectorItemGap",!0));var f=u.getBoundingRect(),d=[-f.x,-f.y],g=e.get("selectorButtonGap",!0),v=e.getOrient().index,p=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";o==="end"?d[v]+=h[p]+g:c[v]+=f[p]+g,d[1-v]+=h[m]/2-f[m]/2,u.x=d[0],u.y=d[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[p]=h[p]+g+f[p],_[m]=Math.max(h[m],f[m]),_[y]=Math.min(0,f[y]+d[1-v]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Mn);function Oz(n,t,e,i,r,s,a){function o(p,m){p.lineWidth==="auto"&&(p.lineWidth=m.lineWidth>0?2:0),mm(p,function(y,_){p[_]==="inherit"&&(p[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=n.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?i.decal:im(c,a),u.fill==="inherit"&&(u.fill=i[r]),u.stroke==="inherit"&&(u.stroke=i[h]),u.opacity==="inherit"&&(u.opacity=(r==="fill"?i:e).opacity),o(u,i);var f=t.getModel("lineStyle"),d=f.getLineStyle();if(o(d,e),u.fill==="auto"&&(u.fill=i.fill),u.stroke==="auto"&&(u.stroke=i.fill),d.stroke==="auto"&&(d.stroke=i.fill),!s){var g=t.get("inactiveBorderWidth"),v=u[h];u.lineWidth=g==="auto"?i.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=f.get("inactiveColor"),d.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Nz(n){var t=n.icon||"roundRect",e=Ad(t,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return e.setStyle(n.itemStyle),e.rotation=(n.iconRotate||0)*Math.PI/180,e.setOrigin([n.itemWidth/2,n.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function ES(n,t,e,i){_m(n,t,e,i),e.dispatchAction({type:"legendToggleSelect",name:n??t}),ym(n,t,e,i)}function hA(n){for(var t=n.getZr().storage.getDisplayList(),e,i=0,r=t.length;i<r&&!(e=t[i].states.emphasis);)i++;return e&&e.hoverLayer}function ym(n,t,e,i){hA(e)||e.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:i})}function _m(n,t,e,i){hA(e)||e.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:i})}function Fz(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(e){for(var i=0;i<t.length;i++)if(!t[i].isSelected(e.name))return!1;return!0})}function Sl(n,t,e){var i={},r=n==="toggleSelected",s;return e.eachComponent("legend",function(a){r&&s!=null?a[s?"select":"unSelect"](t.name):n==="allSelect"||n==="inverseSelect"?a[n]():(a[n](t.name),s=a.isSelected(t.name));var o=a.getData();A(o,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=a.isSelected(u);i.hasOwnProperty(u)?i[u]=i[u]&&h:i[u]=h}})}),n==="allSelect"||n==="inverseSelect"?{selected:i}:{name:t.name,selected:i}}function Bz(n){n.registerAction("legendToggleSelect","legendselectchanged",Gt(Sl,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Gt(Sl,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Gt(Sl,"inverseSelect")),n.registerAction("legendSelect","legendselected",Gt(Sl,"select")),n.registerAction("legendUnSelect","legendunselected",Gt(Sl,"unSelect"))}function cA(n){n.registerComponentModel(vm),n.registerComponentView(uA),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Fz),n.registerSubTypeDefaulter("legend",function(){return"plain"}),Bz(n)}var Gz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,i,r){var s=Cd(e);n.prototype.init.call(this,e,i,r),IS(this,e,s)},t.prototype.mergeOption=function(e,i){n.prototype.mergeOption.call(this,e,i),IS(this,this.option,e)},t.type="legend.scroll",t.defaultOption=nE(vm.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(vm);function IS(n,t,e){var i=n.getOrient(),r=[1,1];r[i.index]=0,wo(t,e,{type:"box",ignoreSize:!!r})}var AS=Le,Np=["width","height"],Fp=["x","y"],zz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new AS),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new AS)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,i,r,s,a,o,l){var u=this;n.prototype.renderInner.call(this,e,i,r,s,a,o,l);var h=this._controllerGroup,c=i.get("pageIconSize",!0),f=V(c)?c:[c,c];g("pagePrev",0);var d=i.getModel("pageTextStyle");h.add(new De({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(v,p){var m=v+"DataIndex",y=Vy(i.get("pageIcons",!0)[i.getOrient().name][p],{onclick:Yt(u._pageGo,u,m,i,s)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=v,h.add(y)}},t.prototype.layoutInner=function(e,i,r,s,a,o){var l=this.getSelectorGroup(),u=e.getOrient().index,h=Np[u],c=Fp[u],f=Np[1-u],d=Fp[1-u];a&&iu("horizontal",l,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),v=l.getBoundingRect(),p=[-v.x,-v.y],m=ut(r);a&&(m[h]=r[h]-v[h]-g);var y=this._layoutContentAndController(e,s,m,u,h,f,d,c);if(a){if(o==="end")p[u]+=y[h]+g;else{var _=v[h]+g;p[u]-=_,y[c]-=_}y[h]+=v[h]+g,p[1-u]+=y[d]+y[f]/2-v[f]/2,y[f]=Math.max(y[f],v[f]),y[d]=Math.min(y[d],v[d]+p[1-u]),l.x=p[0],l.y=p[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(e,i,r,s,a,o,l,u){var h=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;iu(e.get("orient"),h,e.get("itemGap"),s?r.width:null,s?null:r.height),iu("horizontal",f,e.get("pageButtonItemGap",!0));var d=h.getBoundingRect(),g=f.getBoundingRect(),v=this._showController=d[a]>r[a],p=[-d.x,-d.y];i||(p[s]=h[u]);var m=[0,0],y=[-g.x,-g.y],_=st(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(v){var w=e.get("pageButtonPosition",!0);w==="end"?y[s]+=r[a]-g[a]:m[s]+=g[a]+_}y[1-s]+=d[o]/2-g[o]/2,h.setPosition(p),c.setPosition(m),f.setPosition(y);var S={x:0,y:0};if(S[a]=v?r[a]:d[a],S[o]=Math.max(d[o],g[o]),S[l]=Math.min(0,g[l]+y[1-s]),c.__rectSize=r[a],v){var x={x:0,y:0};x[a]=Math.max(r[a]-g[a]-_,0),x[o]=S[o],c.setClipPath(new ne({shape:x})),c.__rectSize=x[a]}else f.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(e);return b.pageIndex!=null&&vi(h,{x:b.contentPosition[0],y:b.contentPosition[1]},v?e:null),this._updatePageInfoView(e,b),S},t.prototype._pageGo=function(e,i,r){var s=this._getPageInfo(i)[e];s!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:i.id})},t.prototype._updatePageInfoView=function(e,i){var r=this._controllerGroup;A(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",f=i[c]!=null,d=r.childOfName(h);d&&(d.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),d.cursor=f?"pointer":"default")});var s=r.childOfName("pageText"),a=e.get("pageFormatter"),o=i.pageIndex,l=o!=null?o+1:0,u=i.pageCount;s&&a&&s.setStyle("text",U(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(e){var i=e.get("scrollDataIndex",!0),r=this.getContentGroup(),s=this._containerGroup.__rectSize,a=e.getOrient().index,o=Np[a],l=Fp[a],u=this._findTargetItemIndex(i),h=r.children(),c=h[u],f=h.length,d=f?1:0,g={contentPosition:[r.x,r.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return g;var v=w(c);g.contentPosition[a]=-v.s;for(var p=u+1,m=v,y=v,_=null;p<=f;++p)_=w(h[p]),(!_&&y.e>m.s+s||_&&!S(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=_;for(var p=u-1,m=v,y=v,_=null;p>=-1;--p)_=w(h[p]),(!_||!S(y,_.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=_;return g;function w(x){if(x){var b=x.getBoundingRect(),T=b[l]+x[l];return{s:T,e:T+b[o],i:x.__legendDataIndex}}}function S(x,b){return x.e>=b&&x.s<=b+s}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var i,r=this.getContentGroup(),s;return r.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===e&&(i=o)}),i??s},t.type="legend.scroll",t}(uA);function Vz(n){n.registerAction("legendScroll","legendscroll",function(t,e){var i=t.scrollDataIndex;i!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(r){r.setScrollDataIndex(i)})})}function Wz(n){Br(cA),n.registerComponentModel(Gz),n.registerComponentView(zz),Vz(n)}function Yz(n){Br(cA),Br(Wz)}function $z(n,t,e,i,r){var s=n.getArea(),a=s.x,o=s.y,l=s.width,u=s.height,h=e.get(["lineStyle","width"])||2;a-=h/2,o-=h/2,l+=h,u+=h,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var c=new ne({shape:{x:a,y:o,width:l,height:u}});return c}function Hz(n,t,e){var i=n.getArea(),r=ae(i.r0,1),s=ae(i.r,1),a=new Go({shape:{cx:ae(n.cx,1),cy:ae(n.cy,1),r0:r,r:s,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return a}function Uz(n,t,e,i,r){if(n){if(n.type==="polar")return Hz(n);if(n.type==="cartesian2d")return $z(n,t,e)}else return null;return null}var Xz={average:function(n){for(var t=0,e=0,i=0;i<n.length;i++)isNaN(n[i])||(t+=n[i],e++);return e===0?NaN:t/e},sum:function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e]||0;return t},max:function(n){for(var t=-1/0,e=0;e<n.length;e++)n[e]>t&&(t=n[e]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,e=0;e<n.length;e++)n[e]<t&&(t=n[e]);return isFinite(t)?t:NaN},minmax:function(n){for(var t=-1/0,e=-1/0,i=0;i<n.length;i++){var r=n[i],s=Math.abs(r);s>t&&(t=s,e=r)}return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},Kz=function(n){return Math.round(n.length/2)};function jz(n){return{seriesType:n,reset:function(t,e,i){var r=t.getData(),s=t.get("sampling"),a=t.coordinateSystem,o=r.count();if(o>10&&a.type==="cartesian2d"&&s){var l=a.getBaseAxis(),u=a.getOtherAxis(l),h=l.getExtent(),c=i.getDevicePixelRatio(),f=Math.abs(h[1]-h[0])*(c||1),d=Math.round(o/f);if(isFinite(d)&&d>1){s==="lttb"&&t.setData(r.lttbDownSample(r.mapDimension(u.dim),1/d));var g=void 0;U(s)?g=Xz[s]:lt(s)&&(g=s),g&&t.setData(r.downSample(r.mapDimension(u.dim),1/d,g,Kz))}}}}}var wm=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,i){return AI(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,i,r){var s=this.coordinateSystem;if(s&&s.clampData){var a=s.clampData(e),o=s.dataToPoint(a);if(r)A(s.getAxes(),function(f,d){if(f.type==="category"&&i!=null){var g=f.getTicksCoords(),v=f.getTickModel().get("alignWithLabel"),p=a[d],m=i[d]==="x1"||i[d]==="y1";if(m&&!v&&(p+=1),g.length<2)return;if(g.length===2){o[d]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var y=void 0,_=void 0,w=1,S=0;S<g.length;S++){var x=g[S].coord,b=S===g.length-1?g[S-1].tickValue+w:g[S].tickValue;if(b===p){_=x;break}else if(b<p)y=x;else if(y!=null&&b>p){_=(x+y)/2;break}S===1&&(w=b-g[0].tickValue)}_==null&&(y?y&&(_=g[g.length-1].coord):_=g[0].coord),o[d]=f.toGlobalCoord(_)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=s.getBaseAxis().isHorizontal()?0:1;o[c]+=u+h/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ji);ji.registerClass(wm);var Zz=function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return AI(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>e&&(e=i),e},t.prototype.brushSelector=function(e,i,r){return r.rect(i.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=nE(wm.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(wm),qz=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),RS=function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="sausage",i}return t.prototype.getDefaultShape=function(){return new qz},t.prototype.buildPath=function(e,i){var r=i.cx,s=i.cy,a=Math.max(i.r0||0,0),o=Math.max(i.r,0),l=(o-a)*.5,u=a+l,h=i.startAngle,c=i.endAngle,f=i.clockwise,d=Math.PI*2,g=f?c-h<d:h-c<d;g||(h=c-(f?d:-d));var v=Math.cos(h),p=Math.sin(h),m=Math.cos(c),y=Math.sin(c);g?(e.moveTo(v*a+r,p*a+s),e.arc(v*u+r,p*u+s,l,-Math.PI+h,h,!f)):e.moveTo(v*o+r,p*o+s),e.arc(r,s,o,h,c,!f),e.arc(m*u+r,y*u+s,l,c-Math.PI*2,c-Math.PI,!f),a!==0&&e.arc(r,s,a,c,h,f)},t}(Rt);function Jz(n,t){t=t||{};var e=t.isRoundCap;return function(i,r,s){var a=r.position;if(!a||a instanceof Array)return gf(i,r,s);var o=n(a),l=r.distance!=null?r.distance:5,u=this.shape,h=u.cx,c=u.cy,f=u.r,d=u.r0,g=(f+d)/2,v=u.startAngle,p=u.endAngle,m=(v+p)/2,y=e?Math.abs(f-d)/2:0,_=Math.cos,w=Math.sin,S=h+f*_(v),x=c+f*w(v),b="left",T="top";switch(o){case"startArc":S=h+(d-l)*_(m),x=c+(d-l)*w(m),b="center",T="top";break;case"insideStartArc":S=h+(d+l)*_(m),x=c+(d+l)*w(m),b="center",T="bottom";break;case"startAngle":S=h+g*_(v)+dc(v,l+y,!1),x=c+g*w(v)+gc(v,l+y,!1),b="right",T="middle";break;case"insideStartAngle":S=h+g*_(v)+dc(v,-l+y,!1),x=c+g*w(v)+gc(v,-l+y,!1),b="left",T="middle";break;case"middle":S=h+g*_(m),x=c+g*w(m),b="center",T="middle";break;case"endArc":S=h+(f+l)*_(m),x=c+(f+l)*w(m),b="center",T="bottom";break;case"insideEndArc":S=h+(f-l)*_(m),x=c+(f-l)*w(m),b="center",T="top";break;case"endAngle":S=h+g*_(p)+dc(p,l+y,!0),x=c+g*w(p)+gc(p,l+y,!0),b="left",T="middle";break;case"insideEndAngle":S=h+g*_(p)+dc(p,-l+y,!0),x=c+g*w(p)+gc(p,-l+y,!0),b="right",T="middle";break;default:return gf(i,r,s)}return i=i||{},i.x=S,i.y=x,i.align=b,i.verticalAlign=T,i}}function Qz(n,t,e,i){if($t(i)){n.setTextConfig({rotation:i});return}else if(V(t)){n.setTextConfig({rotation:0});return}var r=n.shape,s=r.clockwise?r.startAngle:r.endAngle,a=r.clockwise?r.endAngle:r.startAngle,o=(s+a)/2,l,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=s;break;case"endAngle":case"insideEndAngle":l=a;break;default:n.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),n.setTextConfig({rotation:h})}function dc(n,t,e){return t*Math.sin(n)*(e?-1:1)}function gc(n,t,e){return t*Math.cos(n)*(e?1:-1)}function t3(n,t,e){var i=n.get("borderRadius");if(i==null)return{cornerRadius:0};V(i)||(i=[i,i,i,i]);var r=Math.abs(t.r||0-t.r0||0);return{cornerRadius:j(i,function(s){return Nr(s,r)})}}var Bp=Math.max,Gp=Math.min;function e3(n,t){var e=n.getArea&&n.getArea();if(b_(n,"cartesian2d")){var i=n.getBaseAxis();if(i.type!=="category"||!i.onBand){var r=t.getLayout("bandWidth");i.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var n3=function(n){et(t,n);function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,i,r,s){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var a=e.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,i,r):this._renderNormal(e,i,r,s))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,i){this._progressiveEls=[],this._incrementalRenderLarge(e,i)},t.prototype.eachRendered=function(e){vd(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var i=e.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(e,i,r,s){var a=this.group,o=e.getData(),l=this._data,u=e.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var f=e.isAnimationEnabled()?e:null,d=i3(e,u);d&&this._enableRealtimeSort(d,o,r);var g=e.get("clip",!0)||d,v=e3(u,o);a.removeClipPath();var p=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),_=y.get("borderRadius")||0,w=[],S=this._backgroundEls,x=s&&s.isInitSort,b=s&&s.type==="changeAxisOrder";function T(E){var R=pc[u.type](o,E),L=h3(u,c,R);return L.useStyle(y.getItemStyle()),u.type==="cartesian2d"?L.setShape("r",_):L.setShape("cornerRadius",_),w[E]=L,L}o.diff(l).add(function(E){var R=o.getItemModel(E),L=pc[u.type](o,E,R);if(m&&T(E),!(!o.hasValue(E)||!PS[u.type](L))){var M=!1;g&&(M=MS[u.type](v,L));var k=LS[u.type](e,o,E,L,c,f,h.model,!1,p);d&&(k.forceLabelAnimation=!0),OS(k,o,E,R,L,e,c,u.type==="polar"),x?k.attr({shape:L}):d?DS(d,f,k,L,E,c,!1,!1):_o(k,{shape:L},e,E),o.setItemGraphicEl(E,k),a.add(k),k.ignore=M}}).update(function(E,R){var L=o.getItemModel(E),M=pc[u.type](o,E,L);if(m){var k=void 0;S.length===0?k=T(R):(k=S[R],k.useStyle(y.getItemStyle()),u.type==="cartesian2d"?k.setShape("r",_):k.setShape("cornerRadius",_),w[E]=k);var D=pc[u.type](o,E),z=dA(c,D,u);vi(k,{shape:z},f,E)}var O=l.getItemGraphicEl(R);if(!o.hasValue(E)||!PS[u.type](M)){a.remove(O);return}var B=!1;if(g&&(B=MS[u.type](v,M),B&&a.remove(O)),O?QP(O):O=LS[u.type](e,o,E,M,c,f,h.model,!!O,p),d&&(O.forceLabelAnimation=!0),b){var F=O.getTextContent();if(F){var W=Hy(F);W.prevValue!=null&&(W.prevValue=W.value)}}else OS(O,o,E,L,M,e,c,u.type==="polar");x?O.attr({shape:M}):d?DS(d,f,O,M,E,c,!0,b):vi(O,{shape:M},e,E,null),o.setItemGraphicEl(E,O),O.ignore=B,a.add(O)}).remove(function(E){var R=l.getItemGraphicEl(E);R&&$v(R,e,E)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new Le);C.removeAll();for(var I=0;I<w.length;++I)C.add(w[I]);a.add(C),this._backgroundEls=w,this._data=o},t.prototype._renderLarge=function(e,i,r){this._clear(),FS(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,i){this._removeBackground(),FS(i,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var i=e.get("clip",!0)&&Uz(e.coordinateSystem,!1,e),r=this.group;i?r.setClipPath(i):r.removeClipPath()},t.prototype._enableRealtimeSort=function(e,i,r){var s=this;if(i.count()){var a=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,e,r),this._isFirstFrame=!1;else{var o=function(l){var u=i.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(a.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){s._updateSortWithinSameData(i,o,a,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,i,r){var s=[];return e.each(e.mapDimension(i.dim),function(a,o){var l=r(o);l=l??NaN,s.push({dataIndex:o,mappedValue:l,ordinalNumber:a})}),s.sort(function(a,o){return o.mappedValue-a.mappedValue}),{ordinalNumbers:j(s,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,i,r){for(var s=r.scale,a=e.mapDimension(r.dim),o=Number.MAX_VALUE,l=0,u=s.getOrdinalMeta().categories.length;l<u;++l){var h=e.rawIndexOf(a,s.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:i(e.indexOfRawIndex(h));if(c>o)return!0;o=c}return!1},t.prototype._isOrderDifferentInView=function(e,i){for(var r=i.scale,s=r.getExtent(),a=Math.max(0,s[0]),o=Math.min(s[1],r.getOrdinalMeta().categories.length-1);a<=o;++a)if(e.ordinalNumbers[a]!==r.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(e,i,r,s){if(this._isOrderChangedWithinSameData(e,i,r)){var a=this._dataSort(e,r,i);this._isOrderDifferentInView(a,r)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(e,i,r){var s=i.baseAxis,a=this._dataSort(e,s,function(o){return e.get(e.mapDimension(i.otherAxis.dim),o)});r.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:a})},t.prototype.remove=function(e,i){this._clear(this._model),this._removeOnRenderedListener(i)},t.prototype.dispose=function(e,i){this._removeOnRenderedListener(i)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var i=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(s){$v(s,e,St(s).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Mr),MS={cartesian2d:function(n,t){var e=t.width<0?-1:1,i=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var r=n.x+n.width,s=n.y+n.height,a=Bp(t.x,n.x),o=Gp(t.x+t.width,r),l=Bp(t.y,n.y),u=Gp(t.y+t.height,s),h=o<a,c=u<l;return t.x=h&&a>r?o:a,t.y=c&&l>s?u:l,t.width=h?0:o-a,t.height=c?0:u-l,e<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var i=t.r;t.r=t.r0,t.r0=i}var r=Gp(t.r,n.r),s=Bp(t.r0,n.r0);t.r=r,t.r0=s;var a=r-s<0;if(e<0){var i=t.r;t.r=t.r0,t.r0=i}return a}},LS={cartesian2d:function(n,t,e,i,r,s,a,o,l){var u=new ne({shape:G({},i),z2:1});if(u.__dataIndex=e,u.name="item",s){var h=u.shape,c=r?"height":"width";h[c]=0}return u},polar:function(n,t,e,i,r,s,a,o,l){var u=!r&&l?RS:Go,h=new u({shape:i,z2:1});h.name="item";var c=fA(r);if(h.calculateTextPosition=Jz(c,{isRoundCap:u===RS}),s){var f=h.shape,d=r?"r":"endAngle",g={};f[d]=r?i.r0:i.startAngle,g[d]=i[d],(o?vi:_o)(h,{shape:g},s)}return h}};function i3(n,t){var e=n.get("realtimeSort",!0),i=t.getBaseAxis();if(e&&i.type==="category"&&t.type==="cartesian2d")return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}function DS(n,t,e,i,r,s,a,o){var l,u;s?(u={x:i.x,width:i.width},l={y:i.y,height:i.height}):(u={y:i.y,height:i.height},l={x:i.x,width:i.width}),o||(a?vi:_o)(e,{shape:l},t,r,null);var h=t?n.baseAxis.model:null;(a?vi:_o)(e,{shape:u},h,r)}function kS(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var r3=["x","y","width","height"],s3=["cx","cy","r","startAngle","endAngle"],PS={cartesian2d:function(n){return!kS(n,r3)},polar:function(n){return!kS(n,s3)}},pc={cartesian2d:function(n,t,e){var i=n.getItemLayout(t),r=e?o3(e,i):0,s=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+s*r/2,y:i.y+a*r/2,width:i.width-s*r,height:i.height-a*r}},polar:function(n,t,e){var i=n.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function a3(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function fA(n){return function(t){var e=t?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+e;default:return i}}}(n)}function OS(n,t,e,i,r,s,a,o){var l=t.getItemVisual(e,"style");if(o){if(!s.get("roundCap")){var h=n.shape,c=t3(i.getModel("itemStyle"),h);G(h,c),n.setShape(h)}}else{var u=i.get(["itemStyle","borderRadius"])||0;n.setShape("r",u)}n.useStyle(l);var f=i.getShallow("cursor");f&&n.attr("cursor",f);var d=o?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",g=$y(i);Yy(n,g,{labelFetcher:s,labelDataIndex:e,defaultText:vz(s.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var v=n.getTextContent();if(o&&v){var p=i.get(["label","position"]);n.textConfig.inside=p==="middle"?!0:null,Qz(n,p==="outside"?d:p,fA(a),i.get(["label","rotate"]))}_O(v,g,s.getRawValue(e),function(y){return mz(t,y)});var m=i.getModel(["emphasis"]);zC(n,m.get("focus"),m.get("blurScope"),m.get("disabled")),_P(n,i),a3(r)&&(n.style.fill="none",n.style.stroke="none",A(n.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function o3(n,t){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var i=n.get(["itemStyle","borderWidth"])||0,r=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,r,s)}var l3=function(){function n(){}return n}(),NS=function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="largeBar",i}return t.prototype.getDefaultShape=function(){return new l3},t.prototype.buildPath=function(e,i){for(var r=i.points,s=this.baseDimIdx,a=1-this.baseDimIdx,o=[],l=[],u=this.barWidth,h=0;h<r.length;h+=3)l[s]=u,l[a]=r[h+2],o[s]=r[h+s],o[a]=r[h+a],e.rect(o[0],o[1],l[0],l[1])},t}(Rt);function FS(n,t,e,i){var r=n.getData(),s=r.getLayout("valueAxisHorizontal")?1:0,a=r.getLayout("largeDataIndices"),o=r.getLayout("size"),l=n.getModel("backgroundStyle"),u=r.getLayout("largeBackgroundPoints");if(u){var h=new NS({shape:{points:u},incremental:!!i,silent:!0,z2:0});h.baseDimIdx=s,h.largeDataIndices=a,h.barWidth=o,h.useStyle(l.getItemStyle()),t.add(h),e&&e.push(h)}var c=new NS({shape:{points:r.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=s,c.largeDataIndices=a,c.barWidth=o,t.add(c),c.useStyle(r.getVisual("style")),St(c).seriesIndex=n.seriesIndex,n.get("silent")||(c.on("mousedown",BS),c.on("mousemove",BS)),e&&e.push(c)}var BS=s_(function(n){var t=this,e=u3(t,n.offsetX,n.offsetY);St(t).dataIndex=e>=0?e:null},30,!1);function u3(n,t,e){for(var i=n.baseDimIdx,r=1-i,s=n.shape.points,a=n.largeDataIndices,o=[],l=[],u=n.barWidth,h=0,c=s.length/3;h<c;h++){var f=h*3;if(l[i]=u,l[r]=s[f+2],o[i]=s[f+i],o[r]=s[f+r],l[r]<0&&(o[r]+=l[r],l[r]=-l[r]),t>=o[0]&&t<=o[0]+l[0]&&e>=o[1]&&e<=o[1]+l[1])return a[h]}return-1}function dA(n,t,e){if(b_(e,"cartesian2d")){var i=t,r=e.getArea();return{x:n?i.x:r.x,y:n?r.y:i.y,width:n?i.width:r.width,height:n?r.height:i.height}}else{var r=e.getArea(),s=t;return{cx:r.cx,cy:r.cy,r0:n?r.r0:s.r0,r:n?r.r:s.r,startAngle:n?s.startAngle:0,endAngle:n?s.endAngle:Math.PI*2}}}function h3(n,t,e){var i=n.type==="polar"?Go:ne;return new i({shape:dA(t,e,n),silent:!0,z2:0})}function c3(n){n.registerChartView(n3),n.registerSeriesModel(Zz),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Gt(s5,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,a5("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,jz("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},function(r){t.sortInfo&&r.axis.setCategorySortInfo(t.sortInfo)})})}function GS(n,t,e){var i=No.createCanvas(),r=t.getWidth(),s=t.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=s+"px",i.setAttribute("data-zr-dom-id",n)),i.width=r*e,i.height=s*e,i}var zp=function(n){At(t,n);function t(e,i,r){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;r=r||df,typeof e=="string"?a=GS(e,i,r):Z(e)&&(a=e,e=a.id),s.id=e,s.dom=a;var o=a.style;return o&&(HT(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=i,s.dpr=r,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=GS("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,i,r,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,u=new Tt(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var _=new Tt(0,0,0,0);_.copy(y),a.push(_)}else{for(var w=!1,S=1/0,x=0,b=0;b<a.length;++b){var T=a[b];if(T.intersect(y)){var C=new Tt(0,0,0,0);C.copy(T),C.union(y),a[b]=C,w=!0;break}else if(l){u.copy(y),u.union(T);var I=y.width*y.height,E=T.width*T.height,R=u.width*u.height,L=R-I-E;L<S&&(S=L,x=b)}}if(l&&(a[x].union(y),w=!0),!w){var _=new Tt(0,0,0,0);_.copy(y),a.push(_)}l||(l=a.length>=o)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var f=e[c];if(f){var d=f.shouldBePainted(r,s,!0,!0),g=f.__isRendered&&(f.__dirty&sn||!d)?f.getPrevPaintRect():null;g&&h(g);var v=d&&(f.__dirty&sn||!f.__isRendered)?f.getPaintRect():null;v&&h(v)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var f=i[c],d=f&&f.shouldBePainted(r,s,!0,!0);if(f&&(!d||!f.__zr)&&f.__isRendered){var g=f.getPrevPaintRect();g&&h(g)}}var p;do{p=!1;for(var c=0;c<a.length;){if(a[c].isZero()){a.splice(c,1);continue}for(var m=c+1;m<a.length;)a[c].intersect(a[m])?(p=!0,a[c].union(a[m]),a.splice(m,1)):m++;c++}}while(p);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,i){var r=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=e+"px",a.height=i+"px"),s.width=e*r,s.height=i*r,o&&(o.width=e*r,o.height=i*r,r!==1&&this.ctxBack.scale(r,r))},t.prototype.clear=function(e,i,r){var s=this.dom,a=this.ctx,o=s.width,l=s.height;i=i||this.clearColor;var u=this.motionBlur&&!e,h=this.lastFrameAlpha,c=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/c,l/c));var d=this.domBack;function g(v,p,m,y){if(a.clearRect(v,p,m,y),i&&i!=="transparent"){var _=void 0;if(ad(i)){var w=i.global||i.__width===m&&i.__height===y;_=w&&i.__canvasGradient||em(a,i,{x:0,y:0,width:m,height:y}),i.__canvasGradient=_,i.__width=m,i.__height=y}else _2(i)&&(i.scaleX=i.scaleX||c,i.scaleY=i.scaleY||c,_=nm(a,i,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));a.save(),a.fillStyle=_||i,a.fillRect(v,p,m,y),a.restore()}u&&(a.save(),a.globalAlpha=h,a.drawImage(d,v,p,m,y),a.restore())}!r||u?g(0,0,o,l):r.length&&A(r,function(v){g(v.x*c,v.y*c,v.width*c,v.height*c)})},t}(yi),zS=1e5,gs=314159,vc=.01,f3=.001;function d3(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function g3(n,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+n+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var p3=function(){function n(t,e,i,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=G({},i||{}),this.dpr=i.devicePixelRatio||df,this._singleCanvas=s,this.root=t;var a=t.style;a&&(HT(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var h=t,c=h.width,f=h.height;i.width!=null&&(c=i.width),i.height!=null&&(f=i.height),this.dpr=i.devicePixelRatio||1,h.width=c*this.dpr,h.height=f*this.dpr,this._width=c,this._height=f;var d=new zp(h,this,this.dpr);d.__builtin__=!0,d.initContext(),l[gs]=d,d.zlevel=gs,o.push(gs),this._domRoot=t}else{this._width=Qh(t,0,i),this._height=Qh(t,1,i);var u=this._domRoot=g3(this._width,this._height);t.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,t,this._redrawId);for(var s=0;s<r.length;s++){var a=r[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(t){var e=t.length,i=this._hoverlayer;if(i&&i.clear(),!!e){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<e;a++){var o=t[a];o.__inHover&&(i||(i=this._hoverlayer=this.getLayer(zS)),s||(s=i.ctx,s.save()),Cs(s,o,r,a===e-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(zS)},n.prototype.paintOne=function(t,e){nI(t,e)},n.prototype._paintList=function(t,e,i,r){if(this._redrawId===r){i=i||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,e,i),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;lf(function(){l._paintList(t,e,i,r)})}}},n.prototype._compositeManually=function(){var t=this.getLayer(gs).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(r){r.virtual&&t.drawImage(r.dom,0,0,e,i)})},n.prototype._doPaintList=function(t,e,i){for(var r=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||i)&&s.push(u)}for(var h=!0,c=!1,f=function(v){var p=s[v],m=p.ctx,y=a&&p.createRepaintRects(t,e,d._width,d._height),_=i?p.__startIndex:p.__drawIndex,w=!i&&p.incremental&&Date.now,S=w&&Date.now(),x=p.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(p.__startIndex===p.__endIndex)p.clear(!1,x,y);else if(_===p.__startIndex){var b=t[_];(!b.incremental||!b.notClear||i)&&p.clear(!1,x,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=p.__startIndex);var T,C=function(L){var M={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(T=_;T<p.__endIndex;T++){var k=t[T];if(k.__inHover&&(c=!0),r._doPaintEl(k,p,a,L,M,T===p.__endIndex-1),w){var D=Date.now()-S;if(D>15)break}}M.prevElClipPaths&&m.restore()};if(y)if(y.length===0)T=p.__endIndex;else for(var I=d.dpr,E=0;E<y.length;++E){var R=y[E];m.save(),m.beginPath(),m.rect(R.x*I,R.y*I,R.width*I,R.height*I),m.clip(),C(R),m.restore()}else m.save(),C(),m.restore();p.__drawIndex=T,p.__drawIndex<p.__endIndex&&(h=!1)},d=this,g=0;g<s.length;g++)f(g);return tt.wxa&&A(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:h,needsRefreshHover:c}},n.prototype._doPaintEl=function(t,e,i,r,s,a){var o=e.ctx;if(i){var l=t.getPaintRect();(!r||l&&l.intersect(r))&&(Cs(o,t,s,a),t.setPrevPaintRect(l))}else Cs(o,t,s,a)},n.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=gs);var i=this._layers[t];return i||(i=new zp("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?mt(i,this._layerConfig[t],!0):this._layerConfig[t-vc]&&mt(i,this._layerConfig[t-vc],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},n.prototype.insertLayer=function(t,e){var i=this._layers,r=this._zlevelList,s=r.length,a=this._domRoot,o=null,l=-1;if(!i[t]&&d3(e)){if(s>0&&t>r[0]){for(l=0;l<s-1&&!(r[l]<t&&r[l+1]>t);l++);o=i[r[l]]}if(r.splice(l+1,0,t),i[t]=e,!e.virtual)if(o){var u=o.dom;u.nextSibling?a.insertBefore(e.dom,u.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.painter||(e.painter=this)}},n.prototype.eachLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r];t.call(e,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__&&t.call(e,a,s)}},n.prototype.eachOtherLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__||t.call(e,a,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,f){c.__dirty=c.__used=!1});function e(c){s&&(s.__endIndex!==c&&(s.__dirty=!0),s.__endIndex=c)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var r=t[i];if(r.zlevel!==t[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<t.length;l++){var r=t[l],u=r.zlevel,h=void 0;o!==u&&(o=u,a=0),r.incremental?(h=this.getLayer(u+f3,this._needsManuallyCompositing),h.incremental=!0,a=1):h=this.getLayer(u+(a>0?vc:0),this._needsManuallyCompositing),h.__builtin__||fy("ZLevel "+u+" has been used by unkown layer "+h.id),h!==s&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,e(l),s=h),r.__dirty&sn&&!r.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(c,f){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(t){t.clear()},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t,A(this._layers,function(e){e.setUnpainted()})},n.prototype.configLayer=function(t,e){if(e){var i=this._layerConfig;i[t]?mt(i[t],e,!0):i[t]=e;for(var r=0;r<this._zlevelList.length;r++){var s=this._zlevelList[r];if(s===t||s===t+vc){var a=this._layers[s];mt(a,i[t],!0)}}}},n.prototype.delLayer=function(t){var e=this._layers,i=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],i.splice(bt(i,t),1))},n.prototype.resize=function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var r=this._opts,s=this.root;if(t!=null&&(r.width=t),e!=null&&(r.height=e),t=Qh(s,0,r),e=Qh(s,1,r),i.style.display="",this._width!==t||e!==this._height){i.style.width=t+"px",i.style.height=e+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(gs).resize(t,e)}return this},n.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[gs].dom;var e=new zp("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var i=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,s=e.dom.height;this.eachLayer(function(c){c.__builtin__?i.drawImage(c.dom,0,0,r,s):c.renderToCanvas&&(i.save(),c.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,u=o.length;l<u;l++){var h=o[l];Cs(i,h,a,l===u-1)}return e.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function v3(n){n.registerPainter("canvas",p3)}const VS={title:{text:"ChartTitle"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:0,right:0},grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:[],yAxis:[{type:"value"}],series:[]};var m3=Qi('<div class="chart svelte-z30o4v">chart</div>');function y3(n,t){Qu(t,!1),Br([gz,cz,HG,Yz,kz,c3,v3]);let e=ki(t,"config",8),i=Object.assign({},VS),r=xs("");const s=o=>{if(e()){i=Object.assign({},VS),i.title={text:e().title},i.xAxis=[],e().xAxisData.forEach(u=>{var h;(h=i.xAxis)===null||h===void 0||h.push(u)}),i.series=[],e().series.forEach(u=>{var h;(h=i.series)===null||h===void 0||h.push(Object.assign(Object.assign({},u),{type:"bar",emphasis:{focus:"series"}}))});const l=yB(o);l&&i&&l.setOption(i)}};iy(()=>vu(e()),()=>{e()&&se(r,`chart-${e().title.split(" ")[0]}`)}),ry(),rd();var a=m3();sy(()=>ly(a,"id",$(r))),BT(a,o=>s(o)),Oe(n,a),th()}var _3=Qi('<div class="header svelte-ywrv2"><h1 class="svelte-ywrv2"> </h1> <h2 class="svelte-ywrv2"> </h2></div>');function w3(n,t){let e=ki(t,"title",8),i=ki(t,"subTitle",8);var r=_3(),s=yn(r),a=yn(s),o=Ml(s,2),l=yn(o);sy(()=>{j0(a,e()),j0(l,i())}),Oe(n,r)}const xa=[];function x3(n,t=qa){let e=null;const i=new Set;function r(o){if(fT(n,o)&&(n=o,e)){const l=!xa.length;for(const u of i)u[1](),xa.push(u,n);if(l){for(let u=0;u<xa.length;u+=2)xa[u][0](xa[u+1]);xa.length=0}}}function s(o){r(o(n))}function a(o,l=qa){const u=[o,l];return i.add(u),i.size===1&&(e=t(r,s)||qa),o(n),()=>{i.delete(u),i.size===0&&e&&(e(),e=null)}}return{set:r,update:s,subscribe:a}}const xm=x3(0);class nr{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const So={PROPERTYCHANGE:"propertychange"};class kd{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function S3(n,t,e){let i,r;e=e||Gi;let s=0,a=n.length,o=!1;for(;s<a;)i=s+(a-s>>1),r=+e(n[i],t),r<0?s=i+1:(a=i,o=!r);return o?s:~s}function Gi(n,t){return n>t?1:n<t?-1:0}function T_(n,t,e){if(n[0]<=t)return 0;const i=n.length;if(t<=n[i-1])return i-1;if(typeof e=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===t)return r;if(s<t)return e(t,n[r-1],s)>0?r-1:r}return i-1}if(e>0){for(let r=1;r<i;++r)if(n[r]<t)return r-1;return i-1}if(e<0){for(let r=1;r<i;++r)if(n[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==t)return r;if(n[r]<t)return n[r-1]-t<t-n[r]?r-1:r}return i-1}function b3(n,t,e){for(;t<e;){const i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function di(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let r=0;r<i;r++)n[n.length]=e[r]}function $r(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function T3(n,t,e){const i=t||Gi;return n.every(function(r,s){if(s===0)return!0;const a=i(n[s-1],r);return!(a>0||a===0)})}function Du(){return!0}function Pd(){return!1}function bo(){}function gA(n){let t,e,i;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==i||!$r(r,e))&&(i=this,e=r,t=n.apply(this,arguments)),t}}function C3(n){function t(){let e;try{e=n()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function oh(n){for(const t in n)delete n[t]}function Gs(n){let t;for(t in n)return!1;return!t}class Od extends kd{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=e?new nr(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,o[i]=0),++a[i];let l;for(let u=0,h=r.length;u<h;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[i]===0){let u=o[i];for(delete o[i];u--;)this.removeEventListener(i,bo);delete a[i]}return l}disposeInternal(){this.listeners_&&oh(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const r=i.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=bo,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}const Q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ft(n,t,e,i,r){if(r){const a=e;e=function(){n.removeEventListener(t,e),a.apply(i??this,arguments)}}else i&&i!==n&&(e=e.bind(i));const s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function Lf(n,t,e,i){return ft(n,t,e,i,!0)}function Dt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),oh(n))}class lh extends Od{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Q.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ft(this,t[s],e);return r}return ft(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Lf(this,t[s],e)}else i=Lf(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)E3(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}lh.prototype.on;lh.prototype.once;lh.prototype.un;function E3(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)Dt(n[t]);else Dt(n)}function J(){throw new Error("Unimplemented abstract method.")}let I3=0;function pt(n){return n.ol_uid||(n.ol_uid=String(++I3))}class WS extends nr{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class xi extends lh{constructor(t){super(),this.on,this.once,this.un,pt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new WS(i,t,e)),i=So.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new WS(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const r=this.values_||(this.values_={});if(i)r[t]=e;else{const s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Gs(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Ge={ADD:"add",REMOVE:"remove"},YS={LENGTH:"length"};class mc extends nr{constructor(t,e,i){super(t),this.element=e,this.index=i}}let li=class extends xi{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,r=e.length;i<r;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(YS.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new mc(Ge.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new mc(Ge.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new mc(Ge.REMOVE,r,t)),this.dispatchEvent(new mc(Ge.ADD,e,t))}updateLength_(){this.set(YS.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}};const Ct={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function gt(n,t){if(!n)throw new Error(t)}function Kt(n,t,e){return Math.min(Math.max(n,t),e)}function A3(n,t,e,i,r,s){const a=r-e,o=s-i;if(a!==0||o!==0){const l=((n-e)*a+(t-i)*o)/(a*a+o*o);l>1?(e=r,i=s):l>0&&(e+=a*l,i+=o*l)}return Os(n,t,e,i)}function Os(n,t,e,i){const r=e-n,s=i-t;return r*r+s*s}function R3(n){const t=n.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(n[i][i]);for(let o=i+1;o<t;o++){const l=Math.abs(n[o][i]);l>s&&(s=l,r=o)}if(s===0)return null;const a=n[r];n[r]=n[i],n[i]=a;for(let o=i+1;o<t;o++){const l=-n[o][i]/n[i][i];for(let u=i;u<t+1;u++)i==u?n[o][u]=0:n[o][u]+=l*n[i][u]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let r=i-1;r>=0;r--)n[r][t]-=n[r][i]*e[i]}return e}function Zc(n){return n*Math.PI/180}function Ns(n,t){const e=n%t;return e*t<0?e+t:e}function nn(n,t,e){return n+e*(t-n)}function Nd(n,t){const e=Math.pow(10,t);return Math.round(n*e)/e}function $S(n,t){return Math.round(Nd(n,t))}function yc(n,t){return Math.floor(Nd(n,t))}function _c(n,t){return Math.ceil(Nd(n,t))}class pA extends xi{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Ct.OPACITY]=t.opacity!==void 0?t.opacity:1,gt(typeof e[Ct.OPACITY]=="number","Layer opacity must be a number"),e[Ct.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Ct.Z_INDEX]=t.zIndex,e[Ct.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Ct.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Ct.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Ct.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=Kt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return J()}getLayerStatesArray(t){return J()}getExtent(){return this.get(Ct.EXTENT)}getMaxResolution(){return this.get(Ct.MAX_RESOLUTION)}getMinResolution(){return this.get(Ct.MIN_RESOLUTION)}getMinZoom(){return this.get(Ct.MIN_ZOOM)}getMaxZoom(){return this.get(Ct.MAX_ZOOM)}getOpacity(){return this.get(Ct.OPACITY)}getSourceState(){return J()}getVisible(){return this.get(Ct.VISIBLE)}getZIndex(){return this.get(Ct.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Ct.EXTENT,t)}setMaxResolution(t){this.set(Ct.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Ct.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Ct.MAX_ZOOM,t)}setMinZoom(t){this.set(Ct.MIN_ZOOM,t)}setOpacity(t){gt(typeof t=="number","Layer opacity must be a number"),this.set(Ct.OPACITY,t)}setVisible(t){this.set(Ct.VISIBLE,t)}setZIndex(t){this.set(Ct.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Cn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},we={ANIMATING:0,INTERACTING:1},On={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},M3=42,C_=256,E_={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class vA{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||E_[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const uh=6378137,$a=Math.PI*uh,L3=[-$a,-$a,$a,$a],D3=[-180,-85,180,85],wc=uh*Math.log(Math.tan(Math.PI/2));class Sa extends vA{constructor(t){super({code:t,units:"m",extent:L3,global:!0,worldExtent:D3,getPointResolution:function(e,i){return e/Math.cosh(i[1]/uh)}})}}const HS=[new Sa("EPSG:3857"),new Sa("EPSG:102100"),new Sa("EPSG:102113"),new Sa("EPSG:900913"),new Sa("http://www.opengis.net/def/crs/EPSG/0/3857"),new Sa("http://www.opengis.net/gml/srs/epsg.xml#3857")];function k3(n,t,e,i){const r=n.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=n.slice():t=new Array(r));for(let s=0;s<r;s+=i){t[s]=$a*n[s]/180;let a=uh*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>wc?a=wc:a<-wc&&(a=-wc),t[s+1]=a}return t}function P3(n,t,e,i){const r=n.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=n.slice():t=new Array(r));for(let s=0;s<r;s+=i)t[s]=180*n[s]/$a,t[s+1]=360*Math.atan(Math.exp(n[s+1]/uh))/Math.PI-90;return t}const O3=6378137,US=[-180,-90,180,90],N3=Math.PI*O3/180;class ps extends vA{constructor(t,e){super({code:t,units:"degrees",extent:US,axisOrientation:e,global:!0,metersPerUnit:N3,worldExtent:US})}}const XS=[new ps("CRS:84"),new ps("EPSG:4326","neu"),new ps("urn:ogc:def:crs:OGC:1.3:CRS84"),new ps("urn:ogc:def:crs:OGC:2:84"),new ps("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ps("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ps("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Sm={};function F3(n){return Sm[n]||Sm[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function B3(n,t){Sm[n]=t}let ho={};function Df(n,t,e){const i=n.getCode(),r=t.getCode();i in ho||(ho[i]={}),ho[i][r]=e}function G3(n,t){let e;return n in ho&&t in ho[n]&&(e=ho[n][t]),e}const le={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function KS(n){const t=Ze();for(let e=0,i=n.length;e<i;++e)lu(t,n[e]);return t}function zs(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function mA(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function js(n,t,e){let i,r;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?r=n[1]-e:n[3]<e?r=e-n[3]:r=0,i*i+r*r}function To(n,t){return I_(n,t[0],t[1])}function Ha(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function I_(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function bm(n,t){const e=n[0],i=n[1],r=n[2],s=n[3],a=t[0],o=t[1];let l=le.UNKNOWN;return a<e?l=l|le.LEFT:a>r&&(l=l|le.RIGHT),o<i?l=l|le.BELOW:o>s&&(l=l|le.ABOVE),l===le.UNKNOWN&&(l=le.INTERSECTING),l}function Ze(){return[1/0,1/0,-1/0,-1/0]}function Gr(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function hh(n){return Gr(1/0,1/0,-1/0,-1/0,n)}function A_(n,t){const e=n[0],i=n[1];return Gr(e,i,e,i,t)}function R_(n,t,e,i,r){const s=hh(r);return _A(s,n,t,e,i)}function ku(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function yA(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function lu(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function _A(n,t,e,i,r){for(;e<i;e+=r)z3(n,t[e],t[e+1]);return n}function z3(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function wA(n,t){let e;return e=t(Fd(n)),e||(e=t(Bd(n)),e)||(e=t(Gd(n)),e)||(e=t(Zs(n)),e)?e:!1}function Pu(n){let t=0;return zd(n)||(t=vt(n)*fe(n)),t}function Fd(n){return[n[0],n[1]]}function Bd(n){return[n[2],n[1]]}function Zi(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function V3(n,t){let e;if(t==="bottom-left")e=Fd(n);else if(t==="bottom-right")e=Bd(n);else if(t==="top-left")e=Zs(n);else if(t==="top-right")e=Gd(n);else throw new Error("Invalid corner");return e}function Tm(n,t,e,i,r){const[s,a,o,l,u,h,c,f]=W3(n,t,e,i);return Gr(Math.min(s,o,u,c),Math.min(a,l,h,f),Math.max(s,o,u,c),Math.max(a,l,h,f),r)}function W3(n,t,e,i){const r=t*i[0]/2,s=t*i[1]/2,a=Math.cos(e),o=Math.sin(e),l=r*a,u=r*o,h=s*a,c=s*o,f=n[0],d=n[1];return[f-l+c,d-u-h,f-l-c,d-u+h,f+l-c,d+u+h,f+l+c,d+u-h,f-l+c,d-u-h]}function fe(n){return n[3]-n[1]}function Wn(n,t,e){const i=e||Ze();return Ye(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):hh(i),i}function Zs(n){return[n[0],n[3]]}function Gd(n){return[n[2],n[3]]}function vt(n){return n[2]-n[0]}function Ye(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function zd(n){return n[2]<n[0]||n[3]<n[1]}function Y3(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function $3(n,t,e){let i=!1;const r=bm(n,t),s=bm(n,e);if(r===le.INTERSECTING||s===le.INTERSECTING)i=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],h=t[0],c=t[1],f=e[0],d=e[1],g=(d-c)/(f-h);let v,p;s&le.ABOVE&&!(r&le.ABOVE)&&(v=f-(d-u)/g,i=v>=a&&v<=l),!i&&s&le.RIGHT&&!(r&le.RIGHT)&&(p=d-(f-l)*g,i=p>=o&&p<=u),!i&&s&le.BELOW&&!(r&le.BELOW)&&(v=f-(d-o)/g,i=v>=a&&v<=l),!i&&s&le.LEFT&&!(r&le.LEFT)&&(p=d-(f-a)*g,i=p>=o&&p<=u)}return i}function xA(n,t){const e=t.getExtent(),i=Zi(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const r=vt(e),a=Math.floor((i[0]-e[0])/r)*r;n[0]-=a,n[2]-=a}return n}function M_(n,t,e){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];xA(n,t);const r=vt(i);if(vt(n)>r&&!e)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function SA(n,t){const e=(""+n).split("."),i=(""+t).split(".");for(let r=0;r<Math.max(e.length,i.length);r++){const s=parseInt(e[r]||"0",10),a=parseInt(i[r]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function bA(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function kf(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function L_(n,t){const e=Math.cos(t),i=Math.sin(t),r=n[0]*e-n[1]*i,s=n[1]*e+n[0]*i;return n[0]=r,n[1]=s,n}function TA(n,t){return n[0]*=t,n[1]*=t,n}function CA(n,t){if(t.canWrapX()){const e=vt(t.getExtent()),i=H3(n,t,e);i&&(n[0]-=i*e)}return n}function H3(n,t,e){const i=t.getExtent();let r=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||vt(i),r=Math.floor((n[0]-i[0])/e)),r}const U3=63710088e-1;function jS(n,t,e){e=e||U3;const i=Zc(n[1]),r=Zc(t[1]),s=(r-i)/2,a=Zc(t[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function EA(...n){console.warn(...n)}let Cm=!0;function X3(n){Cm=!1}function D_(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function IA(n,t){if(t!==void 0&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function K3(n){B3(n.getCode(),n),Df(n,n,D_)}function j3(n){n.forEach(K3)}function Jt(n){return typeof n=="string"?F3(n):n||null}function ZS(n,t,e,i){n=Jt(n);let r;const s=n.getPointResolutionFunc();if(s)r=s(t,e);else{const a=n.getUnits();if(a=="degrees"&&!i||i=="degrees")r=t;else{const o=P_(n,Jt("EPSG:4326"));if(o===IA&&a!=="degrees")r=t*n.getMetersPerUnit();else{let u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=o(u,u,2);const h=jS(u.slice(0,2),u.slice(2,4)),c=jS(u.slice(4,6),u.slice(6,8));r=(h+c)/2}const l=n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function qS(n){j3(n),n.forEach(function(t){n.forEach(function(e){t!==e&&Df(t,e,D_)})})}function Z3(n,t,e,i){n.forEach(function(r){t.forEach(function(s){Df(r,s,e),Df(s,r,i)})})}function k_(n,t){return n?typeof n=="string"?Jt(n):n:Jt(t)}function qc(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||P_(n,t)===D_)&&e}function P_(n,t){const e=n.getCode(),i=t.getCode();let r=G3(e,i);return r||(r=IA),r}function Ou(n,t){const e=Jt(n),i=Jt(t);return P_(e,i)}function AA(n,t,e){return Ou(t,e)(n,void 0,n.length)}function Em(n,t){return n}function Ri(n,t){return Cm&&!kf(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Cm=!1,EA("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function RA(n,t){return n}function Tr(n,t){return n}function q3(){qS(HS),qS(XS),Z3(XS,HS,k3,P3)}q3();function JS(n,t,e){return function(i,r,s,a,o){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,u=t?0:s[1]*r,h=o?o[0]:0,c=o?o[1]:0;let f=n[0]+l/2+h,d=n[2]-l/2+h,g=n[1]+u/2+c,v=n[3]-u/2+c;f>d&&(f=(d+f)/2,d=f),g>v&&(g=(v+g)/2,v=g);let p=Kt(i[0],f,d),m=Kt(i[1],g,v);if(a&&e&&r){const y=30*r;p+=-y*Math.log(1+Math.max(0,f-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),m+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-v)/y)}return[p,m]}}function J3(n){return n}function O_(n,t,e,i){const r=vt(t)/e[0],s=fe(t)/e[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function N_(n,t,e){let i=Math.min(n,t);const r=50;return i*=Math.log(1+r*Math.max(0,n/t-1))/r+1,e&&(i=Math.max(i,e),i/=Math.log(1+r*Math.max(0,e/n-1))/r+1),Kt(i,e/2,t*2)}function Q3(n,t,e,i){return t=t!==void 0?t:!0,function(r,s,a,o){if(r!==void 0){const l=n[0],u=n[n.length-1],h=e?O_(l,e,a,i):l;if(o)return t?N_(r,h,u):Kt(r,u,h);const c=Math.min(h,r),f=Math.floor(T_(n,c,s));return n[f]>h&&f<n.length-1?n[f+1]:n[f]}}}function tV(n,t,e,i,r,s){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(a,o,l,u){if(a!==void 0){const h=r?O_(t,r,l,s):t;if(u)return i?N_(a,h,e):Kt(a,e,h);const c=1e-9,f=Math.ceil(Math.log(t/h)/Math.log(n)-c),d=-o*(.5-c)+.5,g=Math.min(h,a),v=Math.floor(Math.log(t/g)/Math.log(n)+d),p=Math.max(f,v),m=t/Math.pow(n,p);return Kt(m,e,h)}}}function QS(n,t,e,i,r){return e=e!==void 0?e:!0,function(s,a,o,l){if(s!==void 0){const u=i?O_(n,i,o,r):n;return!e||!l?Kt(s,t,u):N_(s,u,t)}}}function F_(n){if(n!==void 0)return 0}function tb(n){if(n!==void 0)return n}function eV(n){const t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function nV(n){const t=Zc(5);return function(e,i){return i||e===void 0?e:Math.abs(e)<=t?0:e}}function MA(n){return Math.pow(n,3)}function $o(n){return 1-MA(1-n)}function Im(n){return 3*n*n-2*n*n*n}function iV(n){return n}function rV(n){return n<.5?Im(2*n):1-Im(2*(n-.5))}new Array(6);function Yn(){return[1,0,0,1,0,0]}function sV(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function he(n,t){const e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function qi(n,t,e,i,r,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=i*u,n[1]=r*l,n[2]=-i*l,n[3]=r*u,n[4]=a*i*u-o*i*l+t,n[5]=a*r*l+o*r*u+e,n}function LA(n,t){const e=aV(t);gt(e!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5];return n[0]=a/e,n[1]=-r/e,n[2]=-s/e,n[3]=i/e,n[4]=(s*l-a*o)/e,n[5]=-(i*l-r*o)/e,n}function aV(n){return n[0]*n[3]-n[1]*n[2]}const eb=[1e6,1e6,1e6,1e6,2,2];function oV(n){return"matrix("+n.map((e,i)=>Math.round(e*eb[i])/eb[i]).join(", ")+")"}function Dr(n,t,e,i,r,s,a){s=s||[],a=a||2;let o=0;for(let l=t;l<e;l+=i){const u=n[l],h=n[l+1];s[o++]=r[0]*u+r[2]*h+r[4],s[o++]=r[1]*u+r[3]*h+r[5];for(let c=2;c<a;c++)s[o++]=n[l+c]}return s&&s.length!=o&&(s.length=o),s}function DA(n,t,e,i,r,s,a){a=a||[];const o=Math.cos(r),l=Math.sin(r),u=s[0],h=s[1];let c=0;for(let f=t;f<e;f+=i){const d=n[f]-u,g=n[f+1]-h;a[c++]=u+d*o-g*l,a[c++]=h+d*l+g*o;for(let v=f+2;v<f+i;++v)a[c++]=n[v]}return a&&a.length!=c&&(a.length=c),a}function lV(n,t,e,i,r,s,a,o){o=o||[];const l=a[0],u=a[1];let h=0;for(let c=t;c<e;c+=i){const f=n[c]-l,d=n[c+1]-u;o[h++]=l+r*f,o[h++]=u+s*d;for(let g=c+2;g<c+i;++g)o[h++]=n[g]}return o&&o.length!=h&&(o.length=h),o}function uV(n,t,e,i,r,s,a){a=a||[];let o=0;for(let l=t;l<e;l+=i){a[o++]=n[l]+r,a[o++]=n[l+1]+s;for(let u=l+2;u<l+i;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const nb=Yn();class kA extends xi{constructor(){super(),this.extent_=Ze(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=gA((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return J()}closestPointXY(t,e,i,r){return J()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return J()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&hh(e),this.extentRevision_=this.getRevision()}return Y3(this.extent_,t)}rotate(t,e){J()}scale(t,e,i){J()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return J()}getType(){return J()}applyTransform(t){J()}intersectsExtent(t){return J()}translate(t,e){J()}transform(t,e){const i=Jt(t),r=i.getUnits()=="tile-pixels"?function(s,a,o){const l=i.getExtent(),u=i.getWorldExtent(),h=fe(u)/fe(l);return qi(nb,u[0],u[3],h,-h,0,0,0),Dr(s,0,s.length,o,nb,a),Ou(i,e)(s,a,o)}:Ou(i,e);return this.applyTransform(r),this}}class qs extends kA{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return R_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return J()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=ib(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){J()}setLayout(t,e,i){let r;if(t)r=ib(t);else{for(let s=0;s<i;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=Js(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();DA(i,0,i.length,r,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Zi(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();lV(r,0,r.length,s,t,e,i,r),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();uV(i,0,i.length,r,t,e,i),this.changed()}}}function Js(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function ib(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function hV(n,t,e){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Dr(i,0,i.length,r,t,e)}function rb(n,t,e,i,r,s,a){const o=n[t],l=n[t+1],u=n[e]-o,h=n[e+1]-l;let c;if(u===0&&h===0)c=t;else{const f=((r-o)*u+(s-l)*h)/(u*u+h*h);if(f>1)c=e;else if(f>0){for(let d=0;d<i;++d)a[d]=nn(n[t+d],n[e+d],f);a.length=i;return}else c=t}for(let f=0;f<i;++f)a[f]=n[c+f];a.length=i}function B_(n,t,e,i,r){let s=n[t],a=n[t+1];for(t+=i;t<e;t+=i){const o=n[t],l=n[t+1],u=Os(s,a,o,l);u>r&&(r=u),s=o,a=l}return r}function G_(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];r=B_(n,t,o,i,r),t=o}return r}function cV(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];r=G_(n,t,o,i,r),t=o[o.length-1]}return r}function z_(n,t,e,i,r,s,a,o,l,u,h){if(t==e)return u;let c,f;if(r===0){if(f=Os(a,o,n[t],n[t+1]),f<u){for(c=0;c<i;++c)l[c]=n[t+c];return l.length=i,f}return u}h=h||[NaN,NaN];let d=t+i;for(;d<e;)if(rb(n,d-i,d,i,a,o,h),f=Os(a,o,h[0],h[1]),f<u){for(u=f,c=0;c<i;++c)l[c]=h[c];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(u))/r|0,1);if(s&&(rb(n,e-i,t,i,a,o,h),f=Os(a,o,h[0],h[1]),f<u)){for(u=f,c=0;c<i;++c)l[c]=h[c];l.length=i}return u}function V_(n,t,e,i,r,s,a,o,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=z_(n,t,d,i,r,s,a,o,l,u,h),t=d}return u}function fV(n,t,e,i,r,s,a,o,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=V_(n,t,d,i,r,s,a,o,l,u,h),t=d[d.length-1]}return u}function dV(n,t,e,i){for(let r=0,s=e.length;r<s;++r)n[t++]=e[r];return t}function Vd(n,t,e,i){for(let r=0,s=e.length;r<s;++r){const a=e[r];for(let o=0;o<i;++o)n[t++]=a[o]}return t}function ch(n,t,e,i,r){r=r||[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=Vd(n,t,e[a],i);r[s++]=l,t=l}return r.length=s,r}function PA(n,t,e,i,r){r=r||[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=ch(n,t,e[a],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function Wd(n,t,e,i,r,s,a){const o=(e-t)/i;if(o<3){for(;t<e;t+=i)s[a++]=n[t],s[a++]=n[t+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[t,e-i];let h=0;for(;u.length>0;){const c=u.pop(),f=u.pop();let d=0;const g=n[f],v=n[f+1],p=n[c],m=n[c+1];for(let y=f+i;y<c;y+=i){const _=n[y],w=n[y+1],S=A3(_,w,g,v,p,m);S>d&&(h=y,d=S)}d>r&&(l[(h-t)/i]=1,f+i<h&&u.push(f,h),h+i<c&&u.push(h,c))}for(let c=0;c<o;++c)l[c]&&(s[a++]=n[t+c*i],s[a++]=n[t+c*i+1]);return a}function OA(n,t,e,i,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l];a=Wd(n,t,h,i,r,s,a),o.push(a),t=h}return a}function ms(n,t){return t*Math.round(n/t)}function gV(n,t,e,i,r,s,a){if(t==e)return a;let o=ms(n[t],r),l=ms(n[t+1],r);t+=i,s[a++]=o,s[a++]=l;let u,h;do if(u=ms(n[t],r),h=ms(n[t+1],r),t+=i,t==e)return s[a++]=u,s[a++]=h,a;while(u==o&&h==l);for(;t<e;){const c=ms(n[t],r),f=ms(n[t+1],r);if(t+=i,c==u&&f==h)continue;const d=u-o,g=h-l,v=c-o,p=f-l;if(d*p==g*v&&(d<0&&v<d||d==v||d>0&&v>d)&&(g<0&&p<g||g==p||g>0&&p>g)){u=c,h=f;continue}s[a++]=u,s[a++]=h,o=u,l=h,u=c,h=f}return s[a++]=u,s[a++]=h,a}function W_(n,t,e,i,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l];a=gV(n,t,h,i,r,s,a),o.push(a),t=h}return a}function pV(n,t,e,i,r,s,a,o){for(let l=0,u=e.length;l<u;++l){const h=e[l],c=[];a=W_(n,t,h,i,r,s,a,c),o.push(c),t=h[h.length-1]}return a}function Cr(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let a=t;a<e;a+=i)r[s++]=n.slice(a,a+i);return r.length=s,r}function Nu(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a];r[s++]=Cr(n,t,l,i,r[s]),t=l}return r.length=s,r}function Am(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a];r[s++]=l.length===1&&l[0]===t?[]:Nu(n,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function NA(n,t,e,i){let r=0;const s=n[e-i],a=n[e-i+1];let o=0,l=0;for(;t<e;t+=i){const u=n[t]-s,h=n[t+1]-a;r+=l*u-o*h,o=u,l=h}return r/2}function FA(n,t,e,i){let r=0;for(let s=0,a=e.length;s<a;++s){const o=e[s];r+=NA(n,t,o,i),t=o}return r}function vV(n,t,e,i){let r=0;for(let s=0,a=e.length;s<a;++s){const o=e[s];r+=FA(n,t,o,i),t=o[o.length-1]}return r}class Fu extends qs{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Fu(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,r){return r<js(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(B_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}getArea(){return NA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Cr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Fu(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vd(this.flatCoordinates,0,t,this.stride),this.changed()}}class zr extends qs{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new zr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){const s=this.flatCoordinates,a=Os(t,e,s[0],s[1]);if(a<r){const o=this.stride;for(let l=0;l<o;++l)i[l]=s[l];return i.length=o,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return A_(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return I_(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dV(this.flatCoordinates,0,t,this.stride),this.changed()}}function mV(n,t,e,i,r){return!wA(r,function(a){return!Es(n,t,e,i,a[0],a[1])})}function Es(n,t,e,i,r,s){let a=0,o=n[e-i],l=n[e-i+1];for(;t<e;t+=i){const u=n[t],h=n[t+1];l<=s?h>s&&(u-o)*(s-l)-(r-o)*(h-l)>0&&a++:h<=s&&(u-o)*(s-l)-(r-o)*(h-l)<0&&a--,o=u,l=h}return a!==0}function Y_(n,t,e,i,r,s){if(e.length===0||!Es(n,t,e[0],i,r,s))return!1;for(let a=1,o=e.length;a<o;++a)if(Es(n,e[a-1],e[a],i,r,s))return!1;return!0}function yV(n,t,e,i,r,s){if(e.length===0)return!1;for(let a=0,o=e.length;a<o;++a){const l=e[a];if(Y_(n,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function $_(n,t,e,i,r,s,a){let o,l,u,h,c,f,d;const g=r[s+1],v=[];for(let y=0,_=e.length;y<_;++y){const w=e[y];for(h=n[w-i],f=n[w-i+1],o=t;o<w;o+=i)c=n[o],d=n[o+1],(g<=f&&d<=g||f<=g&&g<=d)&&(u=(g-f)/(d-f)*(c-h)+h,v.push(u)),h=c,f=d}let p=NaN,m=-1/0;for(v.sort(Gi),h=v[0],o=1,l=v.length;o<l;++o){c=v[o];const y=Math.abs(c-h);y>m&&(u=(h+c)/2,Y_(n,t,e,i,u,g)&&(p=u,m=y)),h=c}return isNaN(p)&&(p=r[s]),a?(a.push(p,g,m),a):[p,g,m]}function BA(n,t,e,i,r){let s=[];for(let a=0,o=e.length;a<o;++a){const l=e[a];s=$_(n,t,l,i,r,2*a,s),t=l[l.length-1]}return s}function GA(n,t,e,i,r){let s;for(t+=i;t<e;t+=i)if(s=r(n.slice(t-i,t),n.slice(t,t+i)),s)return s;return!1}function Yd(n,t,e,i,r){const s=_A(Ze(),n,t,e,i);return Ye(r,s)?Ha(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:GA(n,t,e,i,function(a,o){return $3(r,a,o)}):!1}function _V(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s){if(Yd(n,t,e[s],i,r))return!0;t=e[s]}return!1}function zA(n,t,e,i,r){return!!(Yd(n,t,e,i,r)||Es(n,t,e,i,r[0],r[1])||Es(n,t,e,i,r[0],r[3])||Es(n,t,e,i,r[2],r[1])||Es(n,t,e,i,r[2],r[3]))}function VA(n,t,e,i,r){if(!zA(n,t,e[0],i,r))return!1;if(e.length===1)return!0;for(let s=1,a=e.length;s<a;++s)if(mV(n,e[s-1],e[s],i,r)&&!Yd(n,e[s-1],e[s],i,r))return!1;return!0}function wV(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];if(VA(n,t,o,i,r))return!0;t=o[o.length-1]}return!1}function xV(n,t,e,i){for(;t<e-i;){for(let r=0;r<i;++r){const s=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=s}t+=i,e-=i}}function H_(n,t,e,i){let r=0,s=n[e-i],a=n[e-i+1];for(;t<e;t+=i){const o=n[t],l=n[t+1];r+=(o-s)*(l+a),s=o,a=l}return r===0?void 0:r>0}function U_(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,a=e.length;s<a;++s){const o=e[s],l=H_(n,t,o,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=o}return!0}function WA(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s){const o=e[s];if(!U_(n,t,o,i,r))return!1;o.length&&(t=o[o.length-1])}return!0}function Pf(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,a=e.length;s<a;++s){const o=e[s],l=H_(n,t,o,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&xV(n,t,o,i),t=o}return t}function Rm(n,t,e,i,r){for(let s=0,a=e.length;s<a;++s)t=Pf(n,t,e[s],i,r);return t}function SV(n,t){const e=[];let i=0,r=0,s;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=H_(n,i,l,2);if(s===void 0&&(s=u),u===s)e.push(t.slice(r,a+1));else{if(e.length===0)continue;e[e.length-1].push(t[r])}r=a+1,i=l}return e}class Vr extends qs{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?di(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Vr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<js(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(G_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),V_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Y_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return FA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Pf(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Nu(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Zi(this.getExtent());this.flatInteriorPoint_=$_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new zr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Fu(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=new Fu(e.slice(s,l),t);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;U_(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=W_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Vr(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return VA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Mm(n){if(zd(n))throw new Error("Cannot create polygon from empty extent");const t=n[0],e=n[1],i=n[2],r=n[3],s=[t,e,t,r,i,r,i,e,t,e];return new Vr(s,"XY",[s.length])}const Vp=0;class ri extends xi{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=k_(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&X3(),t.center&&(t.center=Ri(t.center,this.projection_)),t.extent&&(t.extent=Tr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in On)delete e[o];this.setProperties(e,!0);const i=TV(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=bV(t),s=i.constraint,a=CV(t);this.constraints_={center:r,resolution:s,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),a=s/2*(r[3]-e[3]+e[1]-r[1]),o=s/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([i[0]+a,i[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Ri(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ri(r.anchor,this.getProjection())),e[i]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===e){i&&xc(i,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<e;++r){const h=arguments[r],c={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Im,callback:i};if(h.center&&(c.sourceCenter=a,c.targetCenter=h.center.slice(),a=c.targetCenter),h.zoom!==void 0?(c.sourceResolution=o,c.targetResolution=this.getResolutionForZoom(h.zoom),o=c.targetResolution):h.resolution&&(c.sourceResolution=o,c.targetResolution=h.resolution,o=c.targetResolution),h.rotation!==void 0){c.sourceRotation=l;const f=Ns(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+f,l=c.targetRotation}EV(c)?c.complete=!0:s+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(we.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[we.ANIMATING]>0}getInteracting(){return this.hints_[we.INTERACTING]>0}cancelAnimations(){this.setHint(we.ANIMATING,-this.hints_[we.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const r=this.animations_[e];if(r[0].callback&&xc(r[0].callback,!1),!t)for(let s=0,a=r.length;s<a;++s){const o=r[s];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l.complete)continue;const u=t-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const c=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],v=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=f+c*(g-f),m=d+c*(v-d);this.targetCenter_=[p,m]}if(l.sourceResolution&&l.targetResolution){const f=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=c===1?Ns(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(we.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&xc(a,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-e[0],r[1]-e[1]],L_(i,t-this.getRotation()),bA(i,e)),i}calculateCenterZoom(t,e){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const a=e[0]-t*(e[0]-r[0])/s,o=e[1]-t*(e[1]-r[1])/s;i=[a,o]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],r=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Em(t,this.getProjection())}getCenterInternal(){return this.get(On.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return RA(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();gt(e,"The view center is not defined");const i=this.getResolution();gt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return gt(r!==void 0,"The view rotation is not defined"),Tm(e,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(On.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Tr(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=vt(t)/e[0],r=fe(t)/e[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(e/i)/Math.log(t);return function(s){return e/Math.pow(t,s*r)}}getRotation(){return this.get(On.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/e;return function(a){return Math.log(i/a)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();r=Wp(r,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],e,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,r;if(this.resolutions_){const s=T_(this.resolutions_,t,1);e=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Kt(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,Kt(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){gt(!zd(t),"Cannot fit empty extent provided as `geometry`");const r=Tr(t,this.getProjection());i=Mm(r)}else if(t.getType()==="Circle"){const r=Tr(t.getExtent(),this.getProjection());i=Mm(r),i.rotate(this.getRotation(),Zi(r))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),r=Math.sin(-e),s=t.getFlatCoordinates(),a=t.getStride();let o=1/0,l=1/0,u=-1/0,h=-1/0;for(let c=0,f=s.length;c<f;c+=a){const d=s[c]*i-s[c+1]*r,g=s[c]*r+s[c+1]*i;o=Math.min(o,d),l=Math.min(l,g),u=Math.max(u,d),h=Math.max(h,g)}return[o,l,u,h]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const r=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let a;e.minResolution!==void 0?a=e.minResolution:e.maxZoom!==void 0?a=this.getResolutionForZoom(e.maxZoom):a=0;const o=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),h=Math.sin(u),c=Math.cos(u),f=Zi(o);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const d=f[0]*c-f[1]*h,g=f[1]*c+f[0]*h,v=this.getConstrainedCenter([d,g],l),p=e.callback?e.callback:bo;e.duration!==void 0?this.animateInternal({resolution:l,center:v,duration:e.duration,easing:e.easing},p):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),xc(p,!0))}centerOn(t,e,i){this.centerOnInternal(Ri(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Wp(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,r){let s;const a=this.padding_;if(a&&t){const o=this.getViewportSizeMinusPadding_(-i),l=Wp(t,r,[o[0]/2+a[3],o[1]/2+a[0]],e,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Em(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Ri(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Ri(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ri(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,a,s,i,this.calculateCenterShift(this.targetCenter_,a,r,s));this.get(On.ROTATION)!==r&&this.set(On.ROTATION,r),this.get(On.RESOLUTION)!==a&&(this.set(On.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(On.CENTER)||!kf(this.get(On.CENTER),o))&&this.set(On.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const r=e||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!kf(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:t,easing:$o,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(we.INTERACTING,1)}endInteraction(t,e,i){i=i&&Ri(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(we.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function xc(n,t){setTimeout(function(){n(t)},0)}function bV(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return JS(n.extent,n.constrainOnlyCenter,e)}const t=k_(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,JS(e,!1,!1)}return J3}function TV(n){let t,e,i,a=n.minZoom!==void 0?n.minZoom:Vp,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,c=n.showFullExtent!==void 0?n.showFullExtent:!1,f=k_(n.projection,"EPSG:3857"),d=f.getExtent();let g=n.constrainOnlyCenter,v=n.extent;if(!u&&!v&&f.isGlobal()&&(g=!1,v=d),n.resolutions!==void 0){const p=n.resolutions;e=p[a],i=p[o]!==void 0?p[o]:p[p.length-1],n.constrainResolution?t=Q3(p,h,!g&&v,c):t=QS(e,i,h,!g&&v,c)}else{const m=(d?Math.max(vt(d),fe(d)):360*E_.degrees/f.getMetersPerUnit())/C_/Math.pow(2,Vp),y=m/Math.pow(2,28-Vp);e=n.maxResolution,e!==void 0?a=0:e=m/Math.pow(l,a),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(l,o):i=m/Math.pow(l,o):i=y),o=a+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,o-a),n.constrainResolution?t=tV(l,e,i,h,!g&&v,c):t=QS(e,i,h,!g&&v,c)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:a,zoomFactor:l}}function CV(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?nV():e===!1?tb:typeof e=="number"?eV(e):tb}return F_}function EV(n){return!(n.sourceCenter&&n.targetCenter&&!kf(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Wp(n,t,e,i,r){const s=Math.cos(-r);let a=Math.sin(-r),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,a=-a;const u=o*s-l*a,h=l*s+o*a;return[u,h]}class $d extends pA{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Ct.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Ct.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Dt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ft(t,Q.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof ri?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;e.layerStatesArray?r=e.layerStatesArray.find(a=>a.layer===this):r=this.getLayerState();const s=this.getExtent();return X_(r,e.viewState)&&(!s||Ye(s,e.extent))}getAttributions(t){var s;if(!this.isVisible(t))return[];const e=(s=this.getSource())==null?void 0:s.getAttributions();if(!e)return[];const i=t instanceof ri?t.getViewStateAndExtent():t;let r=e(i);return Array.isArray(r)||(r=[r]),r}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Ct.MAP,t)}getMapInternal(){return this.get(Ct.MAP)}setMap(t){this.mapPrecomposeKey_&&(Dt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Dt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ft(t,Cn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ft(this,Q.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);gt(!e.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}setSource(t){this.set(Ct.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function X_(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}function YA(n,t,e=0,i=n.length-1,r=IV){for(;i>e;){if(i-e>600){const l=i-e+1,u=t-e+1,h=Math.log(l),c=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*c*(l-c)/l)*(u-l/2<0?-1:1),d=Math.max(e,Math.floor(t-u*c/l+f)),g=Math.min(i,Math.floor(t+(l-u)*c/l+f));YA(n,t,d,g,r)}const s=n[t];let a=e,o=i;for(bl(n,e,t),r(n[i],s)>0&&bl(n,e,i);a<o;){for(bl(n,a,o),a++,o--;r(n[a],s)<0;)a++;for(;r(n[o],s)>0;)o--}r(n[e],s)===0?bl(n,e,o):(o++,bl(n,o,i)),o<=t&&(e=o+1),t<=o&&(i=o-1)}}function bl(n,t,e){const i=n[t];n[t]=n[e],n[e]=i}function IV(n,t){return n<t?-1:n>t?1:0}let $A=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!bc(t,e))return i;const r=this.toBBox,s=[];for(;e;){for(let a=0;a<e.children.length;a++){const o=e.children[a],l=e.leaf?r(o):o;bc(t,l)&&(e.leaf?i.push(o):$p(t,l)?this._all(o,i):s.push(o))}e=s.pop()}return i}collides(t){let e=this.data;if(!bc(t,e))return!1;const i=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],a=e.leaf?this.toBBox(s):s;if(bc(t,a)){if(e.leaf||$p(t,a))return!0;i.push(s)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Oa([]),this}remove(t,e){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],a=[];let o,l,u;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),i.leaf){const h=AV(t,i.children,e);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&$p(i,r)?(s.push(i),a.push(o),o=0,l=i,i=i.children[0]):l?(o++,i=l.children[o],u=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,r){const s=i-e+1;let a=this._maxEntries,o;if(s<=a)return o=Oa(t.slice(e,i+1)),ba(o,this.toBBox),o;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),o=Oa([]),o.leaf=!1,o.height=r;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));sb(t,e,i,u,this.compareMinX);for(let h=e;h<=i;h+=u){const c=Math.min(h+u-1,i);sb(t,h,c,l,this.compareMinY);for(let f=h;f<=c;f+=l){const d=Math.min(f+l-1,c);o.children.push(this._build(t,f,d,r-1))}}return ba(o,this.toBBox),o}_chooseSubtree(t,e,i,r){for(;r.push(e),!(e.leaf||r.length-1===i);){let s=1/0,a=1/0,o;for(let l=0;l<e.children.length;l++){const u=e.children[l],h=Yp(u),c=LV(t,u)-h;c<a?(a=c,s=h<s?h:s,o=u):c===a&&h<s&&(s=h,o=u)}e=o||e.children[0]}return e}_insert(t,e,i){const r=i?t:this.toBBox(t),s=[],a=this._chooseSubtree(r,this.data,e,s);for(a.children.push(t),Gl(a,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)}_split(t,e){const i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const a=this._chooseSplitIndex(i,s,r),o=Oa(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,ba(i,this.toBBox),ba(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)}_splitRoot(t,e){this.data=Oa([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ba(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let r,s=1/0,a=1/0;for(let o=e;o<=i-e;o++){const l=Bl(t,0,o,this.toBBox),u=Bl(t,o,i,this.toBBox),h=DV(l,u),c=Yp(l)+Yp(u);h<s?(s=h,r=o,a=c<a?c:a):h===s&&c<a&&(a=c,r=o)}return r||i-e}_chooseSplitAxis(t,e,i){const r=t.leaf?this.compareMinX:RV,s=t.leaf?this.compareMinY:MV,a=this._allDistMargin(t,e,i,r),o=this._allDistMargin(t,e,i,s);a<o&&t.children.sort(r)}_allDistMargin(t,e,i,r){t.children.sort(r);const s=this.toBBox,a=Bl(t,0,e,s),o=Bl(t,i-e,i,s);let l=Sc(a)+Sc(o);for(let u=e;u<i-e;u++){const h=t.children[u];Gl(a,t.leaf?s(h):h),l+=Sc(a)}for(let u=i-e-1;u>=e;u--){const h=t.children[u];Gl(o,t.leaf?s(h):h),l+=Sc(o)}return l}_adjustParentBBoxes(t,e,i){for(let r=i;r>=0;r--)Gl(e[r],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():ba(t[e],this.toBBox)}};function AV(n,t,e){if(!e)return t.indexOf(n);for(let i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function ba(n,t){Bl(n,0,n.children.length,t,n)}function Bl(n,t,e,i,r){r||(r=Oa(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<e;s++){const a=n.children[s];Gl(r,n.leaf?i(a):a)}return r}function Gl(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function RV(n,t){return n.minX-t.minX}function MV(n,t){return n.minY-t.minY}function Yp(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Sc(n){return n.maxX-n.minX+(n.maxY-n.minY)}function LV(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function DV(n,t){const e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),r=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-i)}function $p(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function bc(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Oa(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sb(n,t,e,i,r){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=i)continue;const a=t+Math.ceil((e-t)/i/2)*i;YA(n,a,t,e,r),s.push(t,a,a,e)}}const at={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ab(n){return n[0]>0&&n[1]>0}function kV(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function He(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}class Hd{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=He(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Hd({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return J()}getImage(t){return J()}getHitDetectionImage(){return J()}getPixelRatio(t){return 1}getImageState(){return J()}getImageSize(){return J()}getOrigin(){return J()}getSize(){return J()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=He(t)}listenImageChange(t){J()}load(){J()}unlistenImageChange(t){J()}ready(){return Promise.resolve()}}const Bu={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var de={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};de.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};de.max=de.whitepoint[2].D65;de.rgb=function(n,t){t=t||de.whitepoint[2].E;var e=n[0]/t[0],i=n[1]/t[1],r=n[2]/t[2],s,a,o;return s=e*3.240969941904521+i*-1.537383177570093+r*-.498610760293,a=e*-.96924363628087+i*1.87596750150772+r*.041555057407175,o=e*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[s*255,a*255,o*255]};Bu.xyz=function(n,t){var e=n[0]/255,i=n[1]/255,r=n[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=e*.41239079926595+i*.35758433938387+r*.18048078840183,a=e*.21263900587151+i*.71516867876775+r*.072192315360733,o=e*.019330818715591+i*.11919477979462+r*.95053215224966;return t=t||de.whitepoint[2].E,[s*t[0],a*t[1],o*t[2]]};const K_={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,t,e){var i,r,s,a,o,l,u,h,c,f,d,g,v;if(s=n[0],a=n[1],o=n[2],s===0)return[0,0,0];var p=.0011070564598794539;return t=t||"D65",e=e||2,c=de.whitepoint[e][t][0],f=de.whitepoint[e][t][1],d=de.whitepoint[e][t][2],g=4*c/(c+15*f+3*d),v=9*f/(c+15*f+3*d),i=a/(13*s)+g||0,r=o/(13*s)+v||0,u=s>8?f*Math.pow((s+16)/116,3):f*s*p,l=u*9*i/(4*r)||0,h=u*(12-3*i-20*r)/(4*r)||0,[l,u,h]}};de.luv=function(n,t,e){var i,r,s,a,o,l,u,h,c,f,d,g,v,p=.008856451679035631,m=903.2962962962961;t=t||"D65",e=e||2,c=de.whitepoint[e][t][0],f=de.whitepoint[e][t][1],d=de.whitepoint[e][t][2],g=4*c/(c+15*f+3*d),v=9*f/(c+15*f+3*d),l=n[0],u=n[1],h=n[2],i=4*l/(l+15*u+3*h)||0,r=9*u/(l+15*u+3*h)||0;var y=u/f;return s=y<=p?m*y:116*Math.pow(y,1/3)-16,a=13*s*(i-g),o=13*s*(r-v),[s,a,o]};var HA={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var t=n[0],e=n[1],i=n[2],r,s,a;return a=i/360*2*Math.PI,r=e*Math.cos(a),s=e*Math.sin(a),[t,r,s]},xyz:function(n){return K_.xyz(HA.luv(n))}};K_.lchuv=function(n){var t=n[0],e=n[1],i=n[2],r=Math.sqrt(e*e+i*i),s=Math.atan2(i,e),a=s*360/2/Math.PI;return a<0&&(a+=360),[t,r,a]};de.lchuv=function(n){return K_.lchuv(de.luv(n))};const ob={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var lb={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function PV(n){var h,c;var t,e=[],i=1,r;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),ob[n])e=ob[n].slice(),r="rgb";else if(n==="transparent")i=0,r="rgb",e=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),a=s.length,o=a<=4;i=1,o?(e=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(i=parseInt(s[3]+s[3],16)/255)):(e=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(i=parseInt(s[6]+s[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),r="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var l=t[1];r=l.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=e.shift()),e=e.map(function(f,d){if(f[f.length-1]==="%")return f=parseFloat(f)/100,d===3?f:r==="rgb"?f*255:r[0]==="h"||r[0]==="l"&&!d?f*100:r==="lab"?f*125:r==="lch"?d<2?f*150:f*360:r[0]==="o"&&!d?f:r==="oklab"?f*.4:r==="oklch"?d<2?f*.4:f*360:f;if(r[d]==="h"||d===2&&r[r.length-1]==="h"){if(lb[f]!==void 0)return lb[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),i=e.length>u?e.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(e=n.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),r=((c=(h=n.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:c.toLowerCase())||"rgb");return{space:r,values:e,alpha:i}}const Hp={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var t=n[0]/360,e=n[1]/100,i=n[2]/100,r,s,a,o,l,u=0;if(e===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+e):i+e-i*e,r=2*i-s,o=[0,0,0];u<3;)a=t+1/3*-(u-1),a<0?a++:a>1&&a--,l=6*a<1?r+(s-r)*6*a:2*a<1?s:3*a<2?r+(s-r)*(2/3-a)*6:r,o[u++]=l*255;return o}};Bu.hsl=function(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255,r=Math.min(t,e,i),s=Math.max(t,e,i),a=s-r,o,l,u;return s===r?o=0:t===s?o=(e-i)/a:e===s?o=2+(i-t)/a:i===s&&(o=4+(t-e)/a),o=Math.min(o*60,360),o<0&&(o+=360),u=(r+s)/2,s===r?l=0:u<=.5?l=a/(s+r):l=a/(2-s-r),[o,l*100,u*100]};function OV(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var t,e=PV(n);if(!e.space)return[];const i=e.space[0]==="h"?Hp.min:Bu.min,r=e.space[0]==="h"?Hp.max:Bu.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],i[0]),r[0]),t[1]=Math.min(Math.max(e.values[1],i[1]),r[1]),t[2]=Math.min(Math.max(e.values[2],i[2]),r[2]),e.space[0]==="h"&&(t=Hp.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}const j_=[NaN,NaN,NaN,0];function NV(n){return typeof n=="string"?n:q_(n)}const FV=1024,Tl={};let Up=0;function BV(n){if(n.length===4)return n;const t=n.slice();return t[3]=1,t}function ub(n){const t=de.lchuv(Bu.xyz(n));return t[3]=n[3],t}function GV(n){const t=de.rgb(HA.xyz(n));return t[3]=n[3],t}function Z_(n){if(n==="none")return j_;if(Tl.hasOwnProperty(n))return Tl[n];if(Up>=FV){let e=0;for(const i in Tl)e++&3||(delete Tl[i],--Up)}const t=OV(n);if(t.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const e of t)if(isNaN(e))throw new Error('failed to parse "'+n+'" as color');return UA(t),Tl[n]=t,++Up,t}function Gu(n){return Array.isArray(n)?n:Z_(n)}function UA(n){return n[0]=Kt(n[0]+.5|0,0,255),n[1]=Kt(n[1]+.5|0,0,255),n[2]=Kt(n[2]+.5|0,0,255),n[3]=Kt(n[3],0,1),n}function q_(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+t+","+e+","+i+","+r+")"}const Wr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",zV=Wr.includes("firefox"),VV=Wr.includes("safari")&&!Wr.includes("chrom");VV&&(Wr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Wr));const WV=Wr.includes("webkit")&&!Wr.includes("edge"),XA=Wr.includes("macintosh"),KA=typeof devicePixelRatio<"u"?devicePixelRatio:1,jA=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ZA=typeof Image<"u"&&Image.prototype.decode,qA=function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();function Qt(n,t,e,i){let r;return e&&e.length?r=e.shift():jA?r=new OffscreenCanvas(n||300,t||300):r=document.createElement("canvas"),n&&(r.width=n),t&&(r.height=t),r.getContext("2d",i)}let Xp;function Of(){return Xp||(Xp=Qt(1,1)),Xp}function Co(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function hb(n,t){const e=t.parentNode;e&&e.replaceChild(n,t)}function YV(n){for(;n.lastChild;)n.lastChild.remove()}function $V(n,t){const e=n.childNodes;for(let i=0;;++i){const r=e[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}function HV(n,t,e){const i=n;let r=!0,s=!1,a=!1;const o=[Lf(i,Q.LOAD,function(){a=!0,s||t()})];return i.src&&ZA?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(a?t():e())})):o.push(Lf(i,Q.ERROR,e)),function(){r=!1,o.forEach(Dt)}}function UV(n,t){return new Promise((e,i)=>{function r(){a(),e(n)}function s(){a(),i(new Error("Image load error"))}function a(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s)})}function XV(n,t){return t&&(n.src=t),n.src&&ZA?new Promise((e,i)=>n.decode().then(()=>e(n)).catch(r=>n.complete&&n.width?e(n):i(r))):UV(n)}class KV{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];!(t++&3)&&!i.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const r=Kp(t,e,i);return r in this.cache_?this.cache_[r]:null}getPattern(t,e,i){const r=Kp(t,e,i);return r in this.patternCache_?this.patternCache_[r]:null}set(t,e,i,r,s){const a=Kp(t,e,i),o=a in this.cache_;this.cache_[a]=r,s&&(r.getImageState()===at.IDLE&&r.load(),r.getImageState()===at.LOADING?r.ready().then(()=>{this.patternCache_[a]=Of().createPattern(r.getImage(1),"repeat")}):this.patternCache_[a]=Of().createPattern(r.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Kp(n,t,e){const i=e?Gu(e):"null";return t+":"+n+":"+i}const ui=new KV;let Cl=null;class jV extends Od{constructor(t,e,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?at.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===at.LOADED){Cl||(Cl=Qt(1,1,void 0,{willReadFrequently:!0})),Cl.drawImage(this.image_,0,0);try{Cl.getImageData(0,0,1,1),this.tainted_=!1}catch{Cl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Q.CHANGE)}handleImageError_(){this.imageState_=at.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=at.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Qt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===at.IDLE){this.image_||this.initializeImage_(),this.imageState_=at.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&XV(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==at.LOADED)return;const e=this.image_,i=Qt(Math.ceil(e.width*t),Math.ceil(e.height*t)),r=i.canvas;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=NV(this.color_),i.fillRect(0,0,r.width/t,r.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=r}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===at.LOADED||this.imageState_===at.ERROR)t();else{const e=()=>{(this.imageState_===at.LOADED||this.imageState_===at.ERROR)&&(this.removeEventListener(Q.CHANGE,e),t())};this.addEventListener(Q.CHANGE,e)}})),this.ready_}}function J_(n,t,e,i,r,s){let a=t===void 0?void 0:ui.get(t,e,r);return a||(a=new jV(n,n&&"src"in n?n.src||void 0:t,e,i,r),ui.set(t,e,r,a,s)),s&&a&&!ui.getPattern(t,e,r)&&ui.set(t,e,r,a,s),a}function hi(n){return n?Array.isArray(n)?q_(n):typeof n=="object"&&"src"in n?ZV(n):n:null}function ZV(n){if(!n.offset||!n.size)return ui.getPattern(n.src,"anonymous",n.color);const t=n.src+":"+n.offset,e=ui.getPattern(t,void 0,n.color);if(e)return e;const i=ui.get(n.src,"anonymous",null);if(i.getImageState()!==at.LOADED)return null;const r=Qt(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),J_(r.canvas,t,void 0,at.LOADED,n.color,!0),ui.getPattern(t,void 0,n.color)}const Tc="ol-hidden",Ud="ol-unselectable",Q_="ol-control",cb="ol-collapsed",qV=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fb=["style","variant","weight","size","lineHeight","family"],JA=function(n){const t=n.match(qV);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=fb.length;i<r;++i){const s=t[i+1];s!==void 0&&(e[fb[i]]=s)}return e.families=e.family.split(/,\s?/),e},QA="10px sans-serif",ze="#000",Eo="round",zi=[],Vi=0,Io="round",zu=10,Vu="#000",Wu="center",Nf="middle",Is=[0,0,0,0],Yu=1,Mi=new xi;let Na=null,Lm;const Dm={},JV=function(){const t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(u,h,c){let f=!0;for(let d=0;d<i;++d){const g=e[d];if(a=Ff(u+" "+h+" "+t+g,r),c!=g){const v=Ff(u+" "+h+" "+t+c+","+g,r);f=f&&v!=a}}return!!f}function l(){let u=!0;const h=Mi.getKeys();for(let c=0,f=h.length;c<f;++c){const d=h[c];if(Mi.get(d)<100){const[g,v,p]=d.split(`
`);o(g,v,p)?(oh(Dm),Na=null,Lm=void 0,Mi.set(d,100)):(Mi.set(d,Mi.get(d)+1,!0),u=!1)}}u&&(clearInterval(s),s=void 0)}return function(u){const h=JA(u);if(!h)return;const c=h.families;for(let f=0,d=c.length;f<d;++f){const g=c[f],v=h.style+`
`+h.weight+`
`+g;Mi.get(v)===void 0&&(Mi.set(v,100,!0),o(h.style,h.weight,g)||(Mi.set(v,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),QV=function(){let n;return function(t){let e=Dm[t];if(e==null){if(jA){const i=JA(t),r=tR(t,"g");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);Dm[t]=e}return e}}();function tR(n,t){return Na||(Na=Qt(1,1)),n!=Lm&&(Na.font=n,Lm=Na.font),Na.measureText(t)}function Ff(n,t){return tR(n,t).width}function db(n,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,Ff(n,s)),0);return e[t]=i,i}function tW(n,t){const e=[],i=[],r=[];let s=0,a=0,o=0,l=0;for(let u=0,h=t.length;u<=h;u+=2){const c=t[u];if(c===`
`||u===h){s=Math.max(s,a),r.push(a),a=0,o+=l,l=0;continue}const f=t[u+1]||n.font,d=Ff(f,c);e.push(d),a+=d;const g=QV(f);i.push(g),l=Math.max(l,g)}return{width:s,height:o,widths:e,heights:i,lineWidths:r}}function eW(n,t,e,i,r,s,a,o,l,u,h){n.save(),e!==1&&(n.globalAlpha===void 0?n.globalAlpha=c=>c.globalAlpha*=e:n.globalAlpha*=e),t&&n.transform.apply(n,t),i.contextInstructions?(n.translate(l,u),n.scale(h[0],h[1]),nW(i,n)):h[0]<0||h[1]<0?(n.translate(l,u),n.scale(h[0],h[1]),n.drawImage(i,r,s,a,o,0,0,a,o)):n.drawImage(i,r,s,a,o,l,u,a*h[0],o*h[1]),n.restore()}function nW(n,t){const e=n.contextInstructions;for(let i=0,r=e.length;i<r;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class Xd extends Hd{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?at.LOADING:at.LOADED,this.imageState_===at.LOADING&&this.ready().then(()=>this.imageState_=at.LOADED),this.render()}clone(){const t=this.getScale(),e=new Xd({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const i=this.renderOptions_,r=Qt(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const x=r;r=s,s=x}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),h=r-u,c=Math.sqrt(l*l+h*h),f=c/l;if(t==="miter"&&f<=i)return f*e;const d=e/2/f,g=e/2*(h/c),p=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return p*2;const m=r*Math.sin(o),y=Math.sqrt(r*r-m*m),_=s-y,S=Math.sqrt(m*m+_*_)/m;if(S<=i){const x=S*e/2-s-r;return 2*Math.max(p,x)}return p*2}createRenderOptions(){let t=Eo,e=Io,i=0,r=null,s=0,a,o=0;this.stroke_&&(a=hi(this.stroke_.getColor()??Vu),o=this.stroke_.getWidth()??Yu,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??Io,t=this.stroke_.getLineCap()??Eo,i=this.stroke_.getMiterLimit()??zu);const l=this.calculateLineJoinSize_(e,o,i),u=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:h,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=ze),e.fillStyle=hi(r),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Gu(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(e=Qt(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let o=0;o<e;o++){const l=s+o*a,u=o%2===0?i:r;t.lineTo(u*Math.cos(l),u*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ze,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class fh extends Xd{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new fh({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Ji{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ji({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=J_(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===at.IDLE&&e.load(),e.getImageState()===at.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Vs{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Vs({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Wi{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=gb,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Wi({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=gb,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function iW(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(gt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let jp=null;function eR(n,t){if(!jp){const e=new Ji({color:"rgba(255,255,255,0.4)"}),i=new Vs({color:"#3399CC",width:1.25});jp=[new Wi({image:new fh({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return jp}function gb(n){return n.getGeometry()}function pb(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}class Kd extends Hd{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const a=t.img!==void 0?t.img:null;let o=t.src;gt(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||pt(a)),gt(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=at.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?at.LOADED:at.IDLE:l=at.LOADING:l=at.LOADED),this.color_=t.color!==void 0?Gu(t.color):null,this.iconImage_=J_(a,o,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let u,h;if(t.size)[u,h]=t.size;else{const c=this.getImage(1);if(c.width&&c.height)u=c.width,h=c.height;else if(c instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(pb(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}u!==void 0&&this.setScale(pb(u,h,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Kd({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==at.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==at.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Q.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Q.CHANGE,t)}ready(){return this.iconImage_.ready()}}const rW="#333";let t0=class nR{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=He(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ji({color:rW}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new nR({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=He(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},Qs=0;const Ie=1<<Qs++,ht=1<<Qs++,Ve=1<<Qs++,zn=1<<Qs++,Ws=1<<Qs++,zl=1<<Qs++,Cc=Math.pow(2,Qs)-1,e0={[Ie]:"boolean",[ht]:"number",[Ve]:"string",[zn]:"color",[Ws]:"number[]",[zl]:"size"},sW=Object.keys(e0).map(Number).sort(Gi);function aW(n){return n in e0}function Vl(n){const t=[];for(const e of sW)Wl(n,e)&&t.push(e0[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Wl(n,t){return(n&t)===t}function cr(n,t){return n===t}class re{constructor(t,e){if(!aW(t))throw new Error(`literal expressions must have a specific type, got ${Vl(t)}`);this.type=t,this.value=e}}class oW{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function iR(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function ge(n,t,e){switch(typeof n){case"boolean":{if(cr(t,Ve))return new re(Ve,n?"true":"false");if(!Wl(t,Ie))throw new Error(`got a boolean, but expected ${Vl(t)}`);return new re(Ie,n)}case"number":{if(cr(t,zl))return new re(zl,He(n));if(cr(t,Ie))return new re(Ie,!!n);if(cr(t,Ve))return new re(Ve,n.toString());if(!Wl(t,ht))throw new Error(`got a number, but expected ${Vl(t)}`);return new re(ht,n)}case"string":{if(cr(t,zn))return new re(zn,Z_(n));if(cr(t,Ie))return new re(Ie,!!n);if(!Wl(t,Ve))throw new Error(`got a string, but expected ${Vl(t)}`);return new re(Ve,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return yW(n,t,e);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(cr(t,zl)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new re(zl,n)}if(cr(t,zn)){if(n.length===3)return new re(zn,[...n,1]);if(n.length===4)return new re(zn,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Wl(t,Ws))throw new Error(`got an array of numbers, but expected ${Vl(t)}`);return new re(Ws,n)}const P={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},lW={[P.Get]:q(it(1,1/0),vb),[P.Var]:q(it(1,1),uW),[P.Has]:q(it(1,1/0),vb),[P.Id]:q(hW,Ta),[P.Concat]:q(it(2,1/0),yt(Ve)),[P.GeometryType]:q(cW,Ta),[P.LineMetric]:q(Ta),[P.Resolution]:q(Ta),[P.Zoom]:q(Ta),[P.Time]:q(Ta),[P.Any]:q(it(2,1/0),yt(Ie)),[P.All]:q(it(2,1/0),yt(Ie)),[P.Not]:q(it(1,1),yt(Ie)),[P.Equal]:q(it(2,2),yt(Cc)),[P.NotEqual]:q(it(2,2),yt(Cc)),[P.GreaterThan]:q(it(2,2),yt(ht)),[P.GreaterThanOrEqualTo]:q(it(2,2),yt(ht)),[P.LessThan]:q(it(2,2),yt(ht)),[P.LessThanOrEqualTo]:q(it(2,2),yt(ht)),[P.Multiply]:q(it(2,1/0),mb),[P.Coalesce]:q(it(2,1/0),mb),[P.Divide]:q(it(2,2),yt(ht)),[P.Add]:q(it(2,1/0),yt(ht)),[P.Subtract]:q(it(2,2),yt(ht)),[P.Clamp]:q(it(3,3),yt(ht)),[P.Mod]:q(it(2,2),yt(ht)),[P.Pow]:q(it(2,2),yt(ht)),[P.Abs]:q(it(1,1),yt(ht)),[P.Floor]:q(it(1,1),yt(ht)),[P.Ceil]:q(it(1,1),yt(ht)),[P.Round]:q(it(1,1),yt(ht)),[P.Sin]:q(it(1,1),yt(ht)),[P.Cos]:q(it(1,1),yt(ht)),[P.Atan]:q(it(1,2),yt(ht)),[P.Sqrt]:q(it(1,1),yt(ht)),[P.Match]:q(it(4,1/0),yb,dW),[P.Between]:q(it(3,3),yt(ht)),[P.Interpolate]:q(it(6,1/0),yb,gW),[P.Case]:q(it(3,1/0),fW,pW),[P.In]:q(it(2,2),vW),[P.Number]:q(it(1,1/0),yt(Cc)),[P.String]:q(it(1,1/0),yt(Cc)),[P.Array]:q(it(1,1/0),yt(ht)),[P.Color]:q(it(1,4),yt(ht)),[P.Band]:q(it(1,3),yt(ht)),[P.Palette]:q(it(2,2),mW),[P.ToString]:q(it(1,1),yt(Ie|ht|Ve|zn))};function vb(n,t,e){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const a=n[s+1];switch(typeof a){case"number":{r[s]=new re(ht,a);break}case"string":{r[s]=new re(Ve,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&e.properties.add(String(a))}return r}function uW(n,t,e){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return e.variables.add(i),[new re(Ve,i)]}function hW(n,t,e){e.featureId=!0}function cW(n,t,e){e.geometryType=!0}function Ta(n,t,e){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function it(n,t){return function(e,i,r){const s=e[0],a=e.length-1;if(n===t){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>t){const o=t===1/0?`${n} or more`:`${n} to ${t}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function mb(n,t,e){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const a=ge(n[s+1],t,e);r[s]=a}return r}function yt(n){return function(t,e,i){const r=t.length-1,s=new Array(r);for(let a=0;a<r;++a){const o=ge(t[a+1],n,i);s[a]=o}return s}}function fW(n,t,e){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function yb(n,t,e){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function dW(n,t,e){const i=n.length-1,r=Ve|ht|Ie,s=ge(n[1],r,e),a=ge(n[n.length-1],t,e),o=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const u=ge(n[l+2],s.type,e);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=ge(n[l+3],a.type,e);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function gW(n,t,e){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new re(ht,r);let a;try{a=ge(n[2],ht,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=ge(n[l+3],ht,e);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=ge(n[l+4],t,e);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function pW(n,t,e){const i=ge(n[n.length-1],t,e),r=new Array(n.length-1);for(let s=0;s<r.length-1;s+=2){try{const a=ge(n[s+1],Ie,e);r[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=ge(n[s+2],i.type,e);r[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return r[r.length-1]=i,r}function vW(n,t,e){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Ve}else r=ht;const s=new Array(i.length);for(let o=0;o<s.length;o++)try{const l=ge(i[o],r,e);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[ge(n[1],r,e),...s]}function mW(n,t,e){let i;try{i=ge(n[1],ht,e)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let a=0;a<s.length;a++){let o;try{o=ge(r[a],zn,e)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof re))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[i,...s]}function q(...n){return function(t,e,i){const r=t[0];let s;for(let a=0;a<n.length;a++){const o=n[a](t,e,i);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new oW(e,r,...s)}}function yW(n,t,e){const i=n[0],r=lW[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,t,e)}function rR(n){if(!n)return"";const t=n.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return rR(n.getGeometries()[0]);default:return""}}function sR(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ir(n,t,e){const i=ge(n,t,e);return $n(i)}function $n(n,t){if(n instanceof re){if(n.type===zn&&typeof n.value=="string"){const i=Z_(n.value);return function(){return i}}return function(){return n.value}}const e=n.operator;switch(e){case P.Number:case P.String:case P.Coalesce:return _W(n);case P.Get:case P.Var:case P.Has:return wW(n);case P.Id:return i=>i.featureId;case P.GeometryType:return i=>i.geometryType;case P.Concat:{const i=n.args.map(r=>$n(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case P.Resolution:return i=>i.resolution;case P.Any:case P.All:case P.Between:case P.In:case P.Not:return SW(n);case P.Equal:case P.NotEqual:case P.LessThan:case P.LessThanOrEqualTo:case P.GreaterThan:case P.GreaterThanOrEqualTo:return xW(n);case P.Multiply:case P.Divide:case P.Add:case P.Subtract:case P.Clamp:case P.Mod:case P.Pow:case P.Abs:case P.Floor:case P.Ceil:case P.Round:case P.Sin:case P.Cos:case P.Atan:case P.Sqrt:return bW(n);case P.Case:return TW(n);case P.Match:return CW(n);case P.Interpolate:return EW(n);case P.ToString:return IW(n);default:throw new Error(`Unsupported operator ${e}`)}}function _W(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$n(n.args[s]);switch(e){case P.Coalesce:return s=>{for(let a=0;a<i;++a){const o=r[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case P.Number:case P.String:return s=>{for(let a=0;a<i;++a){const o=r[a](s);if(typeof o===e)return o}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function wW(n,t){const i=n.args[0].value;switch(n.operator){case P.Get:return r=>{const s=n.args;let a=r.properties[i];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;a=a[h]}return a};case P.Var:return r=>r.variables[i];case P.Has:return r=>{const s=n.args;if(!(i in r.properties))return!1;let a=r.properties[i];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;if(!a||!Object.hasOwn(a,h))return!1;a=a[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function xW(n,t){const e=n.operator,i=$n(n.args[0]),r=$n(n.args[1]);switch(e){case P.Equal:return s=>i(s)===r(s);case P.NotEqual:return s=>i(s)!==r(s);case P.LessThan:return s=>i(s)<r(s);case P.LessThanOrEqualTo:return s=>i(s)<=r(s);case P.GreaterThan:return s=>i(s)>r(s);case P.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function SW(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$n(n.args[s]);switch(e){case P.Any:return s=>{for(let a=0;a<i;++a)if(r[a](s))return!0;return!1};case P.All:return s=>{for(let a=0;a<i;++a)if(!r[a](s))return!1;return!0};case P.Between:return s=>{const a=r[0](s),o=r[1](s),l=r[2](s);return a>=o&&a<=l};case P.In:return s=>{const a=r[0](s);for(let o=1;o<i;++o)if(a===r[o](s))return!0;return!1};case P.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function bW(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$n(n.args[s]);switch(e){case P.Multiply:return s=>{let a=1;for(let o=0;o<i;++o)a*=r[o](s);return a};case P.Divide:return s=>r[0](s)/r[1](s);case P.Add:return s=>{let a=0;for(let o=0;o<i;++o)a+=r[o](s);return a};case P.Subtract:return s=>r[0](s)-r[1](s);case P.Clamp:return s=>{const a=r[0](s),o=r[1](s);if(a<o)return o;const l=r[2](s);return a>l?l:a};case P.Mod:return s=>r[0](s)%r[1](s);case P.Pow:return s=>Math.pow(r[0](s),r[1](s));case P.Abs:return s=>Math.abs(r[0](s));case P.Floor:return s=>Math.floor(r[0](s));case P.Ceil:return s=>Math.ceil(r[0](s));case P.Round:return s=>Math.round(r[0](s));case P.Sin:return s=>Math.sin(r[0](s));case P.Cos:return s=>Math.cos(r[0](s));case P.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case P.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function TW(n,t){const e=n.args.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=$n(n.args[r]);return r=>{for(let s=0;s<e-1;s+=2)if(i[s](r))return i[s+1](r);return i[e-1](r)}}function CW(n,t){const e=n.args.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=$n(n.args[r]);return r=>{const s=i[0](r);for(let a=1;a<e;a+=2)if(s===i[a](r))return i[a+1](r);return i[e-1](r)}}function EW(n,t){const e=n.args.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=$n(n.args[r]);return r=>{const s=i[0](r),a=i[1](r);let o,l;for(let u=2;u<e;u+=2){const h=i[u](r);let c=i[u+1](r);const f=Array.isArray(c);if(f&&(c=BV(c)),h>=a)return u===2?c:f?AW(s,a,o,l,h,c):Yl(s,a,o,l,h,c);o=h,l=c}return l}}function IW(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$n(n.args[s]);switch(e){case P.ToString:return s=>{const a=r[0](s);return n.args[0].type===zn?q_(a):a.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Yl(n,t,e,i,r,s){const a=r-e;if(a===0)return i;const o=t-e,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return i+l*(s-i)}function AW(n,t,e,i,r,s){if(r-e===0)return i;const o=ub(i),l=ub(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const h=[Yl(n,t,e,o[0],r,l[0]),Yl(n,t,e,o[1],r,l[1]),o[2]+Yl(n,t,e,0,r,u),Yl(n,t,e,i[3],r,s[3])];return UA(GV(h))}function RW(n){return!0}function MW(n){const t=iR(),e=LW(n,t),i=sR();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,t.featureId){const a=r.getId();a!==void 0?i.featureId=a:i.featureId=null}return t.geometryType&&(i.geometryType=rR(r.getGeometry())),e(i)}}function _b(n){const t=iR(),e=n.length,i=new Array(e);for(let a=0;a<e;++a)i[a]=km(n[a],t);const r=sR(),s=new Array(e);return function(a,o){if(r.properties=a.getPropertiesInternal(),r.resolution=o,t.featureId){const u=a.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<e;++u){const h=i[u](r);h&&(s[l]=h,l+=1)}return s.length=l,s}}function LW(n,t){const e=n.length,i=new Array(e);for(let r=0;r<e;++r){const s=n[r],a="filter"in s?ir(s.filter,Ie,t):RW;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=km(s.style[u],t)}else o=[km(s.style,t)];i[r]={filter:a,styles:o}}return function(r){const s=[];let a=!1;for(let o=0;o<e;++o){const l=i[o].filter;if(l(r)&&!(n[o].else&&a)){a=!0;for(const u of i[o].styles){const h=u(r);h&&s.push(h)}}}return s}}function km(n,t){const e=$u(n,"",t),i=Hu(n,"",t),r=DW(n,t),s=kW(n,t),a=$e(n,"z-index",t);if(!e&&!i&&!r&&!s&&!Gs(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Wi;return function(l){let u=!0;if(e){const h=e(l);h&&(u=!1),o.setFill(h)}if(i){const h=i(l);h&&(u=!1),o.setStroke(h)}if(r){const h=r(l);h&&(u=!1),o.setText(h)}if(s){const h=s(l);h&&(u=!1),o.setImage(h)}return a&&o.setZIndex(a(l)),u?null:o}}function $u(n,t,e){let i;if(t+"fill-pattern-src"in n)i=FW(n,t+"fill-",e);else{if(n[t+"fill-color"]==="none")return s=>null;i=n0(n,t+"fill-color",e)}if(!i)return null;const r=new Ji;return function(s){const a=i(s);return a===j_?null:(r.setColor(a),r)}}function Hu(n,t,e){const i=$e(n,t+"stroke-width",e),r=n0(n,t+"stroke-color",e);if(!i&&!r)return null;const s=Di(n,t+"stroke-line-cap",e),a=Di(n,t+"stroke-line-join",e),o=aR(n,t+"stroke-line-dash",e),l=$e(n,t+"stroke-line-dash-offset",e),u=$e(n,t+"stroke-miter-limit",e),h=new Vs;return function(c){if(r){const f=r(c);if(f===j_)return null;h.setColor(f)}if(i&&h.setWidth(i(c)),s){const f=s(c);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(f)}if(a){const f=a(c);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(f)}return o&&h.setLineDash(o(c)),l&&h.setLineDashOffset(l(c)),u&&h.setMiterLimit(u(c)),h}}function DW(n,t){const e="text-",i=Di(n,e+"value",t);if(!i)return null;const r=$u(n,e,t),s=$u(n,e+"background-",t),a=Hu(n,e,t),o=Hu(n,e+"background-",t),l=Di(n,e+"font",t),u=$e(n,e+"max-angle",t),h=$e(n,e+"offset-x",t),c=$e(n,e+"offset-y",t),f=Uu(n,e+"overflow",t),d=Di(n,e+"placement",t),g=$e(n,e+"repeat",t),v=jd(n,e+"scale",t),p=Uu(n,e+"rotate-with-view",t),m=$e(n,e+"rotation",t),y=Di(n,e+"align",t),_=Di(n,e+"justify",t),w=Di(n,e+"baseline",t),S=aR(n,e+"padding",t),x=Zd(n,e+"declutter-mode"),b=new t0({declutterMode:x});return function(T){if(b.setText(i(T)),r&&b.setFill(r(T)),s&&b.setBackgroundFill(s(T)),a&&b.setStroke(a(T)),o&&b.setBackgroundStroke(o(T)),l&&b.setFont(l(T)),u&&b.setMaxAngle(u(T)),h&&b.setOffsetX(h(T)),c&&b.setOffsetY(c(T)),f&&b.setOverflow(f(T)),d){const C=d(T);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(C)}if(g&&b.setRepeat(g(T)),v&&b.setScale(v(T)),p&&b.setRotateWithView(p(T)),m&&b.setRotation(m(T)),y){const C=y(T);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(C)}if(_){const C=_(T);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(C)}if(w){const C=w(T);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(C)}return S&&b.setPadding(S(T)),b}}function kW(n,t){return"icon-src"in n?PW(n,t):"shape-points"in n?OW(n,t):"circle-radius"in n?NW(n,t):null}function PW(n,t){const e="icon-",i=e+"src",r=oR(n[i],i),s=Bf(n,e+"anchor",t),a=jd(n,e+"scale",t),o=$e(n,e+"opacity",t),l=Bf(n,e+"displacement",t),u=$e(n,e+"rotation",t),h=Uu(n,e+"rotate-with-view",t),c=xb(n,e+"anchor-origin"),f=Sb(n,e+"anchor-x-units"),d=Sb(n,e+"anchor-y-units"),g=VW(n,e+"color"),v=GW(n,e+"cross-origin"),p=zW(n,e+"offset"),m=xb(n,e+"offset-origin"),y=Gf(n,e+"width"),_=Gf(n,e+"height"),w=BW(n,e+"size"),S=Zd(n,e+"declutter-mode"),x=new Kd({src:r,anchorOrigin:c,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:v,offset:p,offsetOrigin:m,height:_,width:y,size:w,declutterMode:S});return function(b){return o&&x.setOpacity(o(b)),l&&x.setDisplacement(l(b)),u&&x.setRotation(u(b)),h&&x.setRotateWithView(h(b)),a&&x.setScale(a(b)),s&&x.setAnchor(s(b)),x}}function OW(n,t){const e="shape-",i=e+"points",r=e+"radius",s=Pm(n[i],i),a=Pm(n[r],r),o=$u(n,e,t),l=Hu(n,e,t),u=jd(n,e+"scale",t),h=Bf(n,e+"displacement",t),c=$e(n,e+"rotation",t),f=Uu(n,e+"rotate-with-view",t),d=Gf(n,e+"radius2"),g=Gf(n,e+"angle"),v=Zd(n,e+"declutter-mode"),p=new Xd({points:s,radius:a,radius2:d,angle:g,declutterMode:v});return function(m){return o&&p.setFill(o(m)),l&&p.setStroke(l(m)),h&&p.setDisplacement(h(m)),c&&p.setRotation(c(m)),f&&p.setRotateWithView(f(m)),u&&p.setScale(u(m)),p}}function NW(n,t){const e="circle-",i=$u(n,e,t),r=Hu(n,e,t),s=$e(n,e+"radius",t),a=jd(n,e+"scale",t),o=Bf(n,e+"displacement",t),l=$e(n,e+"rotation",t),u=Uu(n,e+"rotate-with-view",t),h=Zd(n,e+"declutter-mode"),c=new fh({radius:5,declutterMode:h});return function(f){return s&&c.setRadius(s(f)),i&&c.setFill(i(f)),r&&c.setStroke(r(f)),o&&c.setDisplacement(o(f)),l&&c.setRotation(l(f)),u&&c.setRotateWithView(u(f)),a&&c.setScale(a(f)),c}}function $e(n,t,e){if(!(t in n))return;const i=ir(n[t],ht,e);return function(r){return Pm(i(r),t)}}function Di(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ve,e);return function(r){return oR(i(r),t)}}function FW(n,t,e){const i=Di(n,t+"pattern-src",e),r=wb(n,t+"pattern-offset",e),s=wb(n,t+"pattern-size",e),a=n0(n,t+"color",e);return function(o){return{src:i(o),offset:r&&r(o),size:s&&s(o),color:a&&a(o)}}}function Uu(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ie,e);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function n0(n,t,e){if(!(t in n))return null;const i=ir(n[t],zn,e);return function(r){return lR(i(r),t)}}function aR(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ws,e);return function(r){return dh(i(r),t)}}function Bf(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ws,e);return function(r){const s=dh(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function wb(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ws,e);return function(r){return uR(i(r),t)}}function jd(n,t,e){if(!(t in n))return null;const i=ir(n[t],Ws|ht,e);return function(r){return WW(i(r),t)}}function Gf(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function BW(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return He(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function GW(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function xb(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function Sb(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function zW(n,t){const e=n[t];if(e!==void 0)return dh(e,t)}function Zd(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function VW(n,t){const e=n[t];if(e!==void 0)return lR(e,t)}function dh(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function oR(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function Pm(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function lR(n,t){if(typeof n=="string")return n;const e=dh(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function uR(n,t){const e=dh(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function WW(n,t){return typeof n=="number"?n:uR(n,t)}const bb={RENDER_ORDER:"renderOrder"};class hR extends $d{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(bb.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter();i in t.declutter||(t.declutter[i]=new $A(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(bb.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?eR:t;const e=YW(t);this.styleFunction_=t===null?void 0:iW(e),this.changed()}}function YW(n){if(n===void 0)return eR;if(!n)return null;if(typeof n=="function"||n instanceof Wi)return n;if(!Array.isArray(n))return _b([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof Wi){const r=new Array(t);for(let s=0;s<t;++s){const a=n[s];if(!(a instanceof Wi))throw new Error("Expected a list of style instances");r[s]=a}return r}if("style"in e){const r=new Array(t);for(let s=0;s<t;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");r[s]=a}return MW(r)}return _b(n)}class $W extends kd{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){J()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;qi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),LA(r,i)}forEachFeatureAtCoordinate(t,e,i,r,s,a,o,l){let u;const h=e.viewState;function c(w,S,x,b){return s.call(a,S,w?x:null,b)}const f=h.projection,d=CA(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&r){const w=f.getExtent(),S=vt(w);g.push([-S,0],[S,0])}const v=e.layerStatesArray,p=v.length,m=[],y=[];for(let w=0;w<g.length;w++)for(let S=p-1;S>=0;--S){const x=v[S],b=x.layer;if(b.hasRenderer()&&X_(x,h)&&o.call(l,b)){const T=b.getRenderer(),C=b.getSource();if(T&&C){const I=C.getWrapX()?d:t,E=c.bind(null,x.managed);y[0]=I[0]+g[w][0],y[1]=I[1]+g[w][1],u=T.forEachFeatureAtCoordinate(y,e,i,E,m)}if(u)return u}}if(m.length===0)return;const _=1/m.length;return m.forEach((w,S)=>w.distanceSq+=S*_),m.sort((w,S)=>w.distanceSq-S.distanceSq),m.some(w=>u=w.callback(w.feature,w.layer,w.geometry)),u}hasFeatureAtCoordinate(t,e,i,r,s,a){return this.forEachFeatureAtCoordinate(t,e,i,r,Du,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(t){J()}scheduleExpireIconCache(t){ui.canExpireCache()&&t.postRenderFunctions.push(HW)}}function HW(n,t){ui.expire()}class cR extends nr{constructor(t,e,i,r){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=r}}class UW extends $W{constructor(t){super(t),this.fontChangeListenerKey_=ft(Mi,So.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ud+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const r=new cR(t,void 0,e);i.dispatchEvent(r)}}disposeInternal(){Dt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Cn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((o,l)=>o.zIndex-l.zIndex);e.some(o=>o.layer instanceof hR&&o.layer.getDeclutter())&&(t.declutter={});const r=t.viewState;this.children_.length=0;const s=[];let a=null;for(let o=0,l=e.length;o<l;++o){const u=e[o];t.layerIndex=o;const h=u.layer,c=h.getSourceState();if(!X_(u,r)||c!="ready"&&c!="undefined"){h.unrender();continue}const f=h.render(t,a);f&&(f!==a&&(this.children_.push(f),a=f),s.push(u))}this.declutter(t,s),$V(this.element_,this.children_),this.dispatchRenderEvent(Cn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const r=e[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(t,r)}e.forEach(i=>i.layer.renderDeferred(t))}}}class xr extends nr{constructor(t,e){super(t),this.layer=e}}const Zp={LAYERS:"layers"};class Ho extends pA{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Zp.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new li(i.slice(),{unique:!0}):gt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new li(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Dt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ft(t,Ge.ADD,this.handleLayersAdd_,this),ft(t,Ge.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Dt);oh(this.listenerKeys_);const e=t.getArray();for(let i=0,r=e.length;i<r;i++){const s=e[i];this.registerLayerListeners_(s),this.dispatchEvent(new xr("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[ft(t,So.PROPERTYCHANGE,this.handleLayerChange_,this),ft(t,Q.CHANGE,this.handleLayerChange_,this)];t instanceof Ho&&e.push(ft(t,"addlayer",this.handleLayerGroupAdd_,this),ft(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[pt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new xr("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new xr("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new xr("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=pt(e);this.listenerKeys_[i].forEach(Dt),delete this.listenerKeys_[i],this.dispatchEvent(new xr("removelayer",e)),this.changed()}getLayers(){return this.get(Zp.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new xr("removelayer",i[r]))}this.set(Zp.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(e)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let a=i,o=e.length;a<o;a++){const l=e[a];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Wn(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}}class Fa extends nr{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}class yr extends Fa{constructor(t,e,i,r,s,a){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ut={SINGLECLICK:"singleclick",CLICK:Q.CLICK,DBLCLICK:Q.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Om={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class XW extends Od{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ft(i,Om.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ft(i,Om.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Q.TOUCHMOVE,this.boundHandleTouchMove_,qA?{passive:!1}:!1)}emulateClick_(t){let e=new yr(Ut.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new yr(Ut.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new yr(Ut.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Ut.POINTERUP||e.type==Ut.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==Ut.POINTERDOWN||e.type==Ut.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new yr(Ut.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Dt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new yr(Ut.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ft(i,Ut.POINTERMOVE,this.handlePointerMove_,this),ft(i,Ut.POINTERUP,this.handlePointerUp_,this),ft(this.element_,Ut.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ft(this.element_.getRootNode(),Ut.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new yr(Ut.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new yr(Ut.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Dt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Q.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Dt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Dt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const _r={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},me={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},zf=1/0;class KW{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,oh(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){gt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=zf?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,r=e.length,s=e[t],a=i[t],o=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),h=u<r&&i[u]<i[l]?u:l;e[t]=e[h],i[t]=i[h],t=h}e[t]=s,i[t]=a,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,r=this.priorities_,s=i[e],a=r[e];for(;e>t;){const o=this.getParentIndex_(e);if(r[o]>a)i[e]=i[o],r[e]=r[o],e=o;else break}i[e]=s,r[e]=a}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let r=0;const s=e.length;let a,o,l;for(o=0;o<s;++o)a=e[o],l=t(a),l==zf?delete this.queuedElements_[this.keyFunction_(a)]:(i[r]=l,e[r++]=a);e.length=r,i.length=r,this.heapify_()}}const Y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class jW extends KW{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Q.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Y.LOADED||i===Y.ERROR||i===Y.EMPTY){i!==Y.ERROR&&e.removeEventListener(Q.CHANGE,this.boundHandleTileChange_);const r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===Y.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}}function ZW(n,t,e,i,r){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return zf;const s=n.viewState.center,a=i[0]-s[0],o=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+o*o)/r}class i0 extends xi{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let i=0,r=this.listenerKeys.length;i<r;++i)Dt(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_??t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==bo&&this.listenerKeys.push(ft(t,_r.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class fR extends i0{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"",a=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=t.label!==void 0?t.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Q.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+Ud+" "+Q_+(this.collapsed_&&this.collapsible_?" "+cb:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),i=new Set(e.flatMap(r=>r.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!e.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(i)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(r=>C3(()=>r))),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!$r(e,this.renderedAttributions_)){YV(this.ulElement_);for(let r=0,s=e.length;r<s;++r){const a=document.createElement("li");a.innerHTML=e[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(cb),this.collapsed_?hb(this.collapseLabel_,this.label_):hb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class qW extends i0{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(Q.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+Ud+" "+Q_,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Tc)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:$o}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Tc);!s&&i===0?this.element.classList.add(Tc):s&&i!==0&&this.element.classList.remove(Tc)}this.label_.style.transform=r}this.rotation_=i}}class JW extends i0{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",o=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Q.CLICK,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=u,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(Q.CLICK,this.handleClick_.bind(this,-i),!1);const f=e+" "+Ud+" "+Q_,d=this.element;d.className=f,d.appendChild(h),d.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:$o})):i.setZoom(s)}}}function QW(n){n=n||{};const t=new li;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new JW(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new qW(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new fR(n.attributionOptions)),t}const Tb={ACTIVE:"active"};class gh extends xi{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Tb.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Tb.ACTIVE,t)}setMap(t){this.map_=t}}function tY(n,t,e){const i=n.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:iV,center:n.getConstrainedCenter(r)})}}function r0(n,t,e,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+t),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:e,duration:i!==void 0?i:250,easing:$o})}class eY extends gh{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Ut.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=r.getView();r0(o,a,s,this.duration_),i.preventDefault(),e=!0}return!e}}class ph extends gh{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ut.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ut.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ut.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Ut.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function s0(n){const t=n.length;let e=0,i=0;for(let r=0;r<t;r++)e+=n[r].clientX,i+=n[r].clientY;return{clientX:e/t,clientY:i/t}}function Nm(n){const t=arguments;return function(e){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](e),!!i);++r);return i}}const nY=function(n){const t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},iY=function(n){const t=n.map.getTargetElement(),e=t.getRootNode(),i=n.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(i):t.contains(i)},dR=function(n){const t=n.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?iY(n):!0},rY=Du,gR=function(n){const t=n.originalEvent;return t.button==0&&!(WV&&XA&&t.ctrlKey)},pR=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},sY=function(n){const t=n.originalEvent;return XA?t.metaKey:t.ctrlKey},aY=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},vR=function(n){const t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},qp=function(n){const t=n.originalEvent;return gt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},oY=function(n){const t=n.originalEvent;return gt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class lY extends ph{constructor(t){super({stopDown:Pd}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Nm(pR,oY);this.condition_=t.onFocusOnly?Nm(dR,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,r=e.getEventPixel(s0(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map.getView();TA(s,o.getResolution()),L_(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(a),l=e.getCoordinateFromPixelInternal([o[0]-r*Math.cos(s),o[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:$o})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class uY extends ph{constructor(t){t=t||{},super({stopDown:Pd}),this.condition_=t.condition?t.condition:nY,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!qp(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===F_)return;const r=e.getSize(),s=t.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(t){return qp(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return qp(t)&&gR(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class hY extends kd{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+i,r.top=Math.min(t[1],e[1])+i,r.width=Math.abs(e[0]-t[0])+i,r.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Vr([r])}getGeometry(){return this.geometry_}}const Ca={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class El extends nr{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class cY extends ph{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new hY(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??gR,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const r=i[0]-e[0],s=i[1]-e[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new El(Ca.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new El(e?Ca.BOXEND:Ca.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new El(Ca.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new El(Ca.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new El(Ca.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class fY extends cY{constructor(t){t=t||{};const e=t.condition?t.condition:aY;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),a=i.getResolutionForExtentInternal(s),o=i.getResolution()/a;r=r.clone(),r.scale(o*o)}i.fitInternal(r,{duration:this.duration_,easing:$o})}}const vs={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class dY extends gh{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return pR(e)&&vR(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Q.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==vs.DOWN||r==vs.LEFT||r==vs.RIGHT||r==vs.UP)){const a=t.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;r==vs.DOWN?u=-o:r==vs.LEFT?l=-o:r==vs.RIGHT?l=o:u=o;const h=[l,u];L_(h,a.getRotation()),tY(a,h,this.duration_),i.preventDefault(),e=!0}}return!e}}class gY extends gh{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!sY(e)&&vR(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==Q.KEYDOWN||t.type==Q.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,a=r==="+"?this.delta_:-this.delta_,o=s.getView();r0(o,a,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}class pY{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[e]-this.points_[i],a=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class vY extends gh{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:rY;this.condition_=t.onFocusOnly?Nm(dR,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==Q.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let s;if(t.type==Q.WHEEL&&(s=r.deltaY,zV&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=KA),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Kt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),r0(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class mY extends ph{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Pd),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=s;const a=t.map,o=a.getView();o.getConstraints().rotation!==F_&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(s0(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class yY extends ph{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Pd),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,a=i.clientY-r.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(e=this.lastDistance_/o),this.lastDistance_=o;const l=t.map,u=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(s0(this.targetPointers))),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function _Y(n){n=n||{};const t=new li,e=new pY(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new uY),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new eY({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new lY({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new mY),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new yY({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new dY),t.push(new gY({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new vY({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new fY({duration:n.zoomDuration})),t}function mR(n){if(n instanceof $d){n.setMapInternal(null);return}n instanceof Ho&&n.getLayers().forEach(mR)}function yR(n,t){if(n instanceof $d){n.setMapInternal(t);return}if(n instanceof Ho){const e=n.getLayers().getArray();for(let i=0,r=e.length;i<r;++i)yR(e[i],t)}}let wY=class extends xi{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=xY(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:KA,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yn(),this.pixelToCoordinateTransform_=Yn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||QW(),this.interactions=e.interactions||_Y({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(me.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(me.VIEW,this.handleViewChanged_),this.addChangeListener(me.SIZE,this.handleSizeChanged_),this.addChangeListener(me.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof ri)&&t.view.then(function(r){i.setView(new ri(r))}),this.controls.addEventListener(Ge.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Ge.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Ge.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Ge.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Ge.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Ge.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){yR(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:Du,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,o,e,null,a,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(r){r instanceof Ho?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const r=e.layerFilter!==void 0?e.layerFilter:Du,s=e.hitTolerance!==void 0?e.hitTolerance:0,a=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,a,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],a=i.height/r[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-i.left)/s,(o.clientY-i.top)/a]}getTarget(){return this.get(me.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Em(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?he(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(me.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof li){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Ri(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?he(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(me.SIZE)}getView(){return this.get(me.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,r){return ZW(this.frameState_,t,e,i,r)}handleBrowserEvent(t,e){e=e||t.type;const i=new yr(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Om.POINTERDOWN||i===Q.WHEEL||i===Q.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=e.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const a=t.viewHints;if(a[we.ANIMATING]||a[we.INTERACTING]){const o=Date.now()-t.time>8;r=o?0:8,s=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Cn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Cn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Fa(_r.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Fa(_r.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Dt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Q.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Q.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new UW(this)),this.mapBrowserEventHandler_=new XW(this,this.moveTolerance_);for(const s in Ut)this.mapBrowserEventHandler_.addEventListener(Ut[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Q.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Q.WHEEL,this.boundHandleBrowserEvent_,qA?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=e.getRootNode();i=s instanceof ShadowRoot?s.host:e}this.targetChangeHandlerKeys_=[ft(i,Q.KEYDOWN,this.handleBrowserEvent,this),ft(i,Q.KEYPRESS,this.handleBrowserEvent,this)];const r=e.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Dt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Dt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ft(t,So.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ft(t,Q.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Dt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new xr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ft(t,So.PROPERTYCHANGE,this.render,this),ft(t,Q.CHANGE,this.render,this),ft(t,"addlayer",this.handleLayerAdd_,this),ft(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){mR(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(e!==void 0&&ab(e)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Tm(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:pt(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Tm(o.nextCenter,o.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!zd(this.previousExtent_)&&!ku(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Fa(_r.MOVESTART,this,r)),this.previousExtent_=hh(this.previousExtent_)),this.previousExtent_&&!s.viewHints[we.ANIMATING]&&!s.viewHints[we.INTERACTING]&&!ku(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Fa(_r.MOVEEND,this,s)),mA(s.extent,this.previousExtent_))),this.dispatchEvent(new Fa(_r.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(_r.LOADSTART)||this.hasListener(_r.LOADEND)||this.hasListener(Cn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new xr("removelayer",e)),this.set(me.LAYERGROUP,t)}setSize(t){this.set(me.SIZE,t)}setTarget(t){this.set(me.TARGET,t)}setView(t){if(!t||t instanceof ri){this.set(me.VIEW,t);return}this.set(me.VIEW,new ri);const e=this;t.then(function(i){e.setView(new ri(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(e=[Math.max(0,s),Math.max(0,a)],!ab(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&EA("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!$r(e,i))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function xY(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Ho({layers:n.layers});e[me.LAYERGROUP]=i,e[me.TARGET]=n.target,e[me.VIEW]=n.view instanceof ri?n.view:new ri;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new li(n.controls.slice()):(gt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new li(n.interactions.slice()):(gt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new li(n.overlays.slice()):(gt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new li,{controls:r,interactions:s,keyboardEventTarget:t,overlays:a,values:e}}const Ec={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class SY extends $d{constructor(t){t=t||{};const e=Object.assign({},t),i=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ec.PRELOAD)}setPreload(t){this.set(Ec.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Ec.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Ec.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const bY=5;class TY extends lh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=bY}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return J()}getData(t){return null}prepareFrame(t){return J()}renderFrame(t,e){return J()}forEachFeatureAtCoordinate(t,e,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===at.LOADED||e.getState()===at.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=at.LOADED&&e!=at.ERROR&&t.addEventListener(Q.CHANGE,this.boundHandleImageChange_),e==at.IDLE&&(t.load(),e=t.getState()),e==at.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class _R{constructor(){It(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Of(),{get:(t,e)=>{if(typeof Of()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,i),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let i=0,r=e.length;i<r;++i){const s=e[i];if(typeof s=="function"){s(t);continue}const a=e[++i];if(typeof t[s]=="function")t[s](...a);else{if(typeof a=="function"){t[s]=a(t);continue}t[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Cb=[];let Ba=null;function CY(){Ba=Qt(1,1,void 0,{willReadFrequently:!0})}class wR extends TY{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Yn(),this.pixelTransform=Yn(),this.inversePixelTransform=Yn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,i){Ba||CY(),Ba.clearRect(0,0,1,1);let r;try{Ba.drawImage(t,e,i,1,1,0,0,1,1),r=Ba.getImageData(0,0,1,1).data}catch{return Ba=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const r=this.getLayer().getClassName();let s,a;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&$r(Gu(t.style.backgroundColor),Gu(i)))){const o=t.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===e?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Qt();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const r=Zs(i),s=Gd(i),a=Bd(i),o=Fd(i);he(e.coordinateToPixelTransform,r),he(e.coordinateToPixelTransform,s),he(e.coordinateToPixelTransform,a),he(e.coordinateToPixelTransform,o);const l=this.inversePixelTransform;he(l,r),he(l,s),he(l,a),he(l,o),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){const i=t.extent,r=t.viewState.resolution,s=t.viewState.rotation,a=t.pixelRatio,o=Math.round(vt(i)/r*a),l=Math.round(fe(i)/r*a);qi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,s,-o/2,-l/2),LA(this.inversePixelTransform,this.pixelTransform);const u=oV(this.pixelTransform);if(this.useContainer(e,u,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=o||h.height!=l?(h.width=o,h.height=l):this.context.clearRect(0,0,o,l),u!==h.style.transform&&(h.style.transform=u)}}dispatchRenderEvent_(t,e,i){const r=this.getLayer();if(r.hasListener(t)){const s=new cR(t,this.inversePixelTransform,i,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Cn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Cn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new _R),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Cn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Cn.POSTRENDER,this.context,t))}getRenderTransform(t,e,i,r,s,a,o){const l=s/2,u=a/2,h=r/e,c=-h,f=-t[0]+o,d=-t[1];return qi(this.tempTransform,l,u,h,c,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class a0 extends Od{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Q.CHANGE)}release(){this.state===Y.ERROR&&this.setState(Y.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Y.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){J()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=e-i+1e3/60;return r>=this.transition_?1:MA(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Vf(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function EY(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}const IY=new Error("disposed");let Ea=null;function AY(n){Ea||(Ea=Qt(n.width,n.height,void 0,{willReadFrequently:!0}));const t=Ea.canvas,e=n.width;t.width!==e&&(t.width=e);const i=n.height;return t.height!==i&&(t.height=i),Ea.clearRect(0,0,e,i),Ea.drawImage(n,0,0),Ea.getImageData(0,0,e,i).data}const RY=[256,256];class Fm extends a0{constructor(t){const e=Y.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=Vf(this.data_);return t?[t.width,t.height]:RY}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Y.IDLE&&this.state!==Y.ERROR)return;this.state=Y.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=Y.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=Y.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(IY),this.controller_=null),super.disposeInternal()}}class xR extends a0{constructor(t,e,i,r,s,a){super(t,e,a),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Y.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Y.ERROR,this.unlistenImage_(),this.image_=MY(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Y.LOADED:this.state=Y.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Y.ERROR&&(this.state=Y.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Y.IDLE&&(this.state=Y.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=HV(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function MY(){const n=Qt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class LY{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();){const e=this.pop();e instanceof kd&&e.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return gt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return gt(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){gt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const SR=.5,DY=10,Eb=.25;class bR{constructor(t,e,i,r,s,a){this.sourceProj_=t,this.targetProj_=e;let o={};const l=Ou(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const _=y[0]+"/"+y[1];return o[_]||(o[_]=l(y)),o[_]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&vt(r)>=vt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?vt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?vt(this.targetProj_.getExtent()):null;const u=Zs(i),h=Gd(i),c=Bd(i),f=Fd(i),d=this.transformInv_(u),g=this.transformInv_(h),v=this.transformInv_(c),p=this.transformInv_(f),m=DY+(a?Math.max(0,Math.ceil(Math.log2(Pu(i)/(a*a*256*256)))):0);if(this.addQuad_(u,h,c,f,d,g,v,p,m),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(_,w,S){y=Math.min(y,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(_=>{if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-y>this.sourceWorldWidth_/2){const w=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];w[0][0]-y>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-y>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-y>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const S=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-S<this.sourceWorldWidth_/2&&(_.source=w)}})}o={}}addTriangle_(t,e,i,r,s,a){this.triangles_.push({source:[r,s,a],target:[t,e,i]})}addQuad_(t,e,i,r,s,a,o,l,u){const h=KS([s,a,o,l]),c=this.sourceWorldWidth_?vt(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=KS([t,e,i,r]);g=vt(p)/this.targetWorldWidth_>Eb||g}!d&&this.sourceProj_.isGlobal()&&c&&(g=c>Eb||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ye(h,this.maxSourceExtent_))return;let v=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(u>0){if(!g){const p=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(p);let y;d?y=(Ns(s[0],f)+Ns(o[0],f))/2-Ns(m[0],f):y=(s[0]+o[0])/2-m[0];const _=(s[1]+o[1])/2-m[1];g=y*y+_*_>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const p=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(p),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],_=this.transformInv_(y);this.addQuad_(t,e,p,y,s,a,m,_,u-1),this.addQuad_(y,p,i,r,_,m,o,l,u-1)}else{const p=[(t[0]+e[0])/2,(t[1]+e[1])/2],m=this.transformInv_(p),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],_=this.transformInv_(y);this.addQuad_(t,p,y,r,s,m,_,l,u-1),this.addQuad_(p,e,i,y,m,a,o,_,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(t,i,r,s,o,l),v&14||this.addTriangle_(t,i,e,s,o,a),v&&(v&13||this.addTriangle_(e,r,t,a,l,s),v&7||this.addTriangle_(e,r,i,a,l,o))}calculateSourceExtent(){const t=Ze();return this.triangles_.forEach(function(e,i,r){const s=e.source;lu(t,s[0]),lu(t,s[1]),lu(t,s[2])}),t}getTriangles(){return this.triangles_}}let Jp;const Yi=[];function Ib(n,t,e,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,r)),n.restore()}function Qp(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function kY(){if(Jp===void 0){const n=Qt(6,6,Yi);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ib(n,4,5,4,0),Ib(n,4,5,0,5);const t=n.getImageData(0,0,3,3).data;Jp=Qp(t,0)||Qp(t,4)||Qp(t,8),Co(n),Yi.push(n.canvas)}return Jp}function Bm(n,t,e,i){const r=AA(e,t,n);let s=ZS(t,i,e);const a=t.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||To(l,r)){const u=ZS(n,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function TR(n,t,e,i){const r=Zi(e);let s=Bm(n,t,r,i);return(!isFinite(s)||s<=0)&&wA(e,function(a){return s=Bm(n,t,a,i),isFinite(s)&&s>0}),s}function CR(n,t,e,i,r,s,a,o,l,u,h,c,f,d){const g=Qt(Math.round(e*n),Math.round(e*t),Yi);if(c||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(e,e);function v(S){return Math.round(S*e)/e}g.globalCompositeOperation="lighter";const p=Ze();l.forEach(function(S,x,b){yA(p,S.extent)});let m;const y=e/i,_=(c?1:1+Math.pow(2,-24))/y;if(!f||l.length!==1||u!==0){if(m=Qt(Math.round(vt(p)*y),Math.round(fe(p)*y),Yi),c||(m.imageSmoothingEnabled=!1),r&&d){const S=(r[0]-p[0])*y,x=-(r[3]-p[3])*y,b=vt(r)*y,T=fe(r)*y;m.rect(S,x,b,T),m.clip()}l.forEach(function(S,x,b){if(S.image.width>0&&S.image.height>0){if(S.clipExtent){m.save();const R=(S.clipExtent[0]-p[0])*y,L=-(S.clipExtent[3]-p[3])*y,M=vt(S.clipExtent)*y,k=fe(S.clipExtent)*y;m.rect(c?R:Math.round(R),c?L:Math.round(L),c?M:Math.round(R+M)-Math.round(R),c?k:Math.round(L+k)-Math.round(L)),m.clip()}const T=(S.extent[0]-p[0])*y,C=-(S.extent[3]-p[3])*y,I=vt(S.extent)*y,E=fe(S.extent)*y;m.drawImage(S.image,u,u,S.image.width-2*u,S.image.height-2*u,c?T:Math.round(T),c?C:Math.round(C),c?I:Math.round(T+I)-Math.round(T),c?E:Math.round(C+E)-Math.round(C)),S.clipExtent&&m.restore()}})}const w=Zs(a);return o.getTriangles().forEach(function(S,x,b){const T=S.source,C=S.target;let I=T[0][0],E=T[0][1],R=T[1][0],L=T[1][1],M=T[2][0],k=T[2][1];const D=v((C[0][0]-w[0])/s),z=v(-(C[0][1]-w[1])/s),O=v((C[1][0]-w[0])/s),B=v(-(C[1][1]-w[1])/s),F=v((C[2][0]-w[0])/s),W=v(-(C[2][1]-w[1])/s),H=I,ct=E;I=0,E=0,R-=H,L-=ct,M-=H,k-=ct;const N=[[R,L,0,0,O-D],[M,k,0,0,F-D],[0,0,R,L,B-z],[0,0,M,k,W-z]],Vt=R3(N);if(!Vt)return;if(g.save(),g.beginPath(),kY()||!c){g.moveTo(O,B);const Ot=4,ue=D-O,Wt=z-B;for(let _t=0;_t<Ot;_t++)g.lineTo(O+v((_t+1)*ue/Ot),B+v(_t*Wt/(Ot-1))),_t!=Ot-1&&g.lineTo(O+v((_t+1)*ue/Ot),B+v((_t+1)*Wt/(Ot-1)));g.lineTo(F,W)}else g.moveTo(O,B),g.lineTo(D,z),g.lineTo(F,W);g.clip(),g.transform(Vt[0],Vt[2],Vt[1],Vt[3],D,z),g.translate(p[0]-H,p[3]-ct);let Bt;if(m)Bt=m.canvas,g.scale(_,-_);else{const Ot=l[0],ue=Ot.extent;Bt=Ot.image,g.scale(vt(ue)/Bt.width,-fe(ue)/Bt.height)}g.drawImage(Bt,0,0),g.restore()}),m&&(Co(m),Yi.push(m.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,o.getTriangles().forEach(function(S,x,b){const T=S.target,C=(T[0][0]-w[0])/s,I=-(T[0][1]-w[1])/s,E=(T[1][0]-w[0])/s,R=-(T[1][1]-w[1])/s,L=(T[2][0]-w[0])/s,M=-(T[2][1]-w[1])/s;g.beginPath(),g.moveTo(E,R),g.lineTo(C,I),g.lineTo(L,M),g.closePath(),g.stroke()}),g.restore()),g.canvas}class PY extends Fm{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,i=e.getExtent(),r=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?r?Wn(i,r):i:r;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let o=this.sourceTileGrid_.getExtent();const l=a?Wn(s,a):s;if(Pu(l)===0){this.state=Y.EMPTY;return}i&&(o?o=Wn(o,i):o=i);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=t.targetProj,c=TR(e,h,l,u);if(!isFinite(c)||c<=0){this.state=Y.EMPTY;return}const f=t.errorThreshold!==void 0?t.errorThreshold:SR;if(this.triangulation_=new bR(e,h,l,o,c*f,u),this.triangulation_.getTriangles().length===0){this.state=Y.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let d=this.triangulation_.calculateSourceExtent();if(o&&(e.canWrapX()?(d[1]=Kt(d[1],o[1],o[3]),d[3]=Kt(d[3],o[1],o[3])):d=Wn(d,o)),!Pu(d))this.state=Y.EMPTY;else{let g=0,v=0;e.canWrapX()&&(g=vt(i),v=Math.floor((d[0]-i[0])/g)),M_(d.slice(),e,!0).forEach(m=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),_=t.getTileFunction;for(let w=y.minX;w<=y.maxX;w++)for(let S=y.minY;S<=y.maxY;S++){const x=_(this.sourceZ_,w,S,this.pixelRatio_);if(x){const b=v*g;this.sourceTiles_.push({tile:x,offset:b})}}++v}),this.sourceTiles_.length===0&&(this.state=Y.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach(g=>{var z;const v=g.tile;if(!v||v.getState()!==Y.LOADED)return;const p=v.getSize(),m=this.gutter_;let y;const _=EY(v.getData());_?y=_:(e=!0,y=AY(Vf(v.getData())));const w=[p[0]+2*m,p[1]+2*m],S=y instanceof Float32Array,x=w[0]*w[1],b=S?Float32Array:Uint8ClampedArray,T=new b(y.buffer),C=b.BYTES_PER_ELEMENT,I=C*T.length/x,E=T.byteLength/w[1],R=Math.floor(E/C/w[0]),L=x*R;let M=T;if(T.length!==L){M=new b(L);let O=0,B=0;const F=w[0]*R;for(let W=0;W<w[1];++W){for(let H=0;H<F;++H)M[O++]=T[B+H];B+=E/C}}const k=this.sourceTileGrid_.getTileCoordExtent(v.tileCoord);k[0]+=g.offset,k[2]+=g.offset;const D=(z=this.clipExtent_)==null?void 0:z.slice();D&&(D[0]+=g.offset,D[2]+=g.offset),t.push({extent:k,clipExtent:D,data:new Uint8ClampedArray(M.buffer),dataType:b,bytesPerPixel:I,pixelSize:w})}),this.sourceTiles_.length=0,t.length===0){this.state=Y.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),s=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let h,c;const f=t[0].bytesPerPixel,d=Math.ceil(f/3);for(let g=d-1;g>=0;--g){const v=[];for(let S=0,x=t.length;S<x;++S){const b=t[S],T=b.data,C=b.pixelSize,I=C[0],E=C[1],R=Qt(I,E,Yi),L=R.createImageData(I,E),M=L.data;let k=g*3;for(let D=0,z=M.length;D<z;D+=4)M[D]=T[k],M[D+1]=T[k+1],M[D+2]=T[k+2],M[D+3]=255,k+=f;R.putImageData(L,0,0),v.push({extent:b.extent,clipExtent:b.clipExtent,image:R.canvas})}const p=CR(s,a,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,v,this.gutter_,!1,!1,!1);for(let S=0,x=v.length;S<x;++S){const T=v[S].image.getContext("2d");Co(T),Yi.push(T.canvas)}const m=p.getContext("2d"),y=m.getImageData(0,0,p.width,p.height);Co(m),Yi.push(p),h||(c=new Uint8ClampedArray(f*y.width*y.height),h=new t[0].dataType(c.buffer));const _=y.data;let w=g*3;for(let S=0,x=_.length;S<x;S+=4)_[S+3]===255?(c[w]=_[S],c[w+1]=_[S+1],c[w+2]=_[S+2]):(c[w]=0,c[w+1]=0,c[w+2]=0),w+=f}if(e){const g=Qt(s,a),v=new ImageData(h,s);g.putImageData(v,0,0),this.reprojData_=g.canvas}else this.reprojData_=h;this.reprojSize_=[Math.round(s*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=Y.LOADED,this.changed()}load(){if(this.state!==Y.IDLE&&this.state!==Y.ERROR)return;this.state=Y.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const i=e.getState();if(i!==Y.IDLE&&i!==Y.LOADING)return;t++;const r=ft(e,Q.CHANGE,()=>{const s=e.getState();(s==Y.LOADED||s==Y.ERROR||s==Y.EMPTY)&&(Dt(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e}){e.getState()==Y.IDLE&&e.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Dt),this.sourcesListenerKeys_=null}}class Gm extends a0{constructor(t,e,i,r,s,a,o,l,u,h,c,f){super(s,Y.IDLE,f),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const p=g?Wn(d,g):d;if(Pu(p)===0){this.state=Y.EMPTY;return}const m=t.getExtent();m&&(v?v=Wn(v,m):v=m);const y=r.getResolution(this.wrappedTileCoord_[0]),_=TR(t,i,p,y);if(!isFinite(_)||_<=0){this.state=Y.EMPTY;return}const w=h!==void 0?h:SR;if(this.triangulation_=new bR(t,i,p,v,_*w,y),this.triangulation_.getTriangles().length===0){this.state=Y.EMPTY;return}this.sourceZ_=e.getZForResolution(_);let S=this.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(S[1]=Kt(S[1],v[1],v[3]),S[3]=Kt(S[3],v[1],v[3])):S=Wn(S,v)),!Pu(S))this.state=Y.EMPTY;else{let x=0,b=0;t.canWrapX()&&(x=vt(m),b=Math.floor((S[0]-m[0])/x)),M_(S.slice(),t,!0).forEach(C=>{const I=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let E=I.minX;E<=I.maxX;E++)for(let R=I.minY;R<=I.maxY;R++){const L=u(this.sourceZ_,E,R,o);if(L){const M=b*x;this.sourceTiles_.push({tile:L,offset:M})}}++b}),this.sourceTiles_.length===0&&(this.state=Y.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var r;const i=e.tile;if(i&&i.getState()==Y.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=e.offset,s[2]+=e.offset;const a=(r=this.clipExtent_)==null?void 0:r.slice();a&&(a[0]+=e.offset,a[2]+=e.offset),t.push({extent:s,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=Y.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=CR(r,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Y.LOADED}this.changed()}load(){if(this.state==Y.IDLE){this.state=Y.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const i=e.getState();if(i==Y.IDLE||i==Y.LOADING){t++;const r=ft(e,Q.CHANGE,s=>{const a=e.getState();(a==Y.LOADED||a==Y.ERROR||a==Y.EMPTY)&&(Dt(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},i,r){e.getState()==Y.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Dt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Co(this.canvas_.getContext("2d")),Yi.push(this.canvas_),this.canvas_=null),super.release()}}class o0{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Ia(n,t,e,i,r){return r!==void 0?(r.minX=n,r.maxX=t,r.minY=e,r.maxY=i,r):new o0(n,t,e,i)}function Wf(n,t,e,i){return i!==void 0?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function OY(n,t,e){return n+"/"+t+"/"+e}function ER(n){return NY(n[0],n[1],n[2])}function NY(n,t,e){return(t<<n)+e}function FY(n,t){const e=n[0],i=n[1],r=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(i,r):!0}function tv(n,t,e,i){return`${n},${OY(t,e,i)}`}function ev(n,t,e){if(!(e in n))return n[e]=new Set([t]),!0;const i=n[e],r=i.has(t);return r||i.add(t),!r}function BY(n,t,e){const i=n[e];return i?i.delete(t):!1}function Ab(n,t){const e=n.layerStatesArray[n.layerIndex];e.extent&&(t=Wn(t,Tr(e.extent,n.viewState.projection)));const i=e.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(t=Wn(t,r))}return t}class GY extends wR{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Ze(),this.tempTileRange_=new o0(0,0,0,0),this.tempTileCoord_=Wf(0,0,0);const i=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new LY(i),this.renderedProjection_=void 0,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,i,r){const s=this.tileCache_,o=this.getLayer().getSource(),l=tv(o.getKey(),t,e,i);let u;if(s.containsKey(l))u=s.get(l);else{if(u=o.getTile(t,e,i,r.pixelRatio,r.viewState.projection),!u)return null;s.set(l,u)}return u}getTile(t,e,i,r){const s=this.getOrCreateTile(t,e,i,r);return s||null}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),r=he(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!To(s,r))return null;const a=e.viewState,o=i.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(e.pixelRatio);for(let h=l.getZForResolution(a.resolution);h>=l.getMinZoom();--h){const c=l.getTileCoordForCoordAndZ(r,h),f=this.getTile(h,c[1],c[2],e);if(!f||f.getState()!==Y.LOADED)continue;const d=l.getOrigin(h),g=He(l.getTileSize(h)),v=l.getResolution(h);let p;if(f instanceof xR||f instanceof Gm)p=f.getImage();else if(f instanceof Fm){if(p=Vf(f.getData()),!p)continue}else continue;const m=Math.floor(u*((r[0]-d[0])/v-c[1]*g[0])),y=Math.floor(u*((d[1]-r[1])/v-c[2]*g[1])),_=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(p,m+_,y+_)}return null}prepareFrame(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const i=e.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(t,e,i,r,s){const a=t.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),h=pt(l);h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],f=o.getMapInternal(),d=Math.max(i-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let g=i;g>=d;--g){const v=u.getTileRangeForExtentAndZ(e,g,this.tempTileRange_),p=u.getResolution(g);for(let m=v.minX;m<=v.maxX;++m)for(let y=v.minY;y<=v.maxY;++y){const _=this.getTile(g,m,y,t);if(!_||!ev(r,_,g))continue;const S=_.getKey();if(c[S]=!0,_.getState()===Y.IDLE&&!t.tileQueue.isKeyQueued(S)){const x=Wf(g,m,y,this.tempTileCoord_);t.tileQueue.enqueue([_,h,u.getTileCoordCenter(x),p])}}}}findStaleTile_(t,e){const i=this.tileCache_,r=t[0],s=t[1],a=t[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=tv(o[l],r,s,a);if(i.containsKey(u)){const h=i.get(u);if(h.getState()===Y.LOADED)return h.endTransition(pt(this)),ev(e,h,r),!0}}return!1}findAltTiles_(t,e,i,r){const s=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,u=this.getLayer().getRenderSource().getKey();for(let h=s.minX;h<=s.maxX;++h)for(let c=s.minY;c<=s.maxY;++c){const f=tv(u,i,h,c);let d=!1;if(o.containsKey(f)){const g=o.get(f);g.getState()===Y.LOADED&&(ev(r,g,i),d=!0)}d||(a=!1)}return a}renderFrame(t,e){this.renderComplete=!0;const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,a=r.resolution,o=r.center,l=t.pixelRatio,u=this.getLayer(),h=u.getSource(),c=h.getRevision(),f=h.getTileGridForProjection(s),d=f.getZForResolution(a,h.zDirection),g=f.getResolution(d),v=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==v&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=v):this.renderedSourceKey_=v;let p=t.extent;const m=h.getTilePixelRatio(l);this.prepareContainer(t,e);const y=this.context.canvas.width,_=this.context.canvas.height,w=i.extent&&Tr(i.extent);w&&(p=Wn(p,Tr(i.extent)));const S=g*y/2/m,x=g*_/2/m,b=[o[0]-S,o[1]-x,o[0]+S,o[1]+x],T={};this.renderedTiles.length=0;const C=u.getPreload();if(t.nextExtent){const F=f.getZForResolution(r.nextResolution,h.zDirection),W=Ab(t,t.nextExtent);this.enqueueTiles(t,W,F,T,C)}const I=Ab(t,p);if(this.enqueueTiles(t,I,d,T,0),C>0&&setTimeout(()=>{this.enqueueTiles(t,I,d-1,T,C-1)},0),!(d in T))return this.container;const E=pt(this),R=t.time;for(const F of T[d]){const W=F.getState();if((F instanceof Gm||F instanceof PY)&&W===Y.EMPTY)continue;const H=F.tileCoord;if(W===Y.LOADED&&F.getAlpha(E,R)===1){F.endTransition(E);continue}if(this.renderComplete=!1,this.findStaleTile_(H,T)){BY(T,F,d),t.animate=!0;continue}if(this.findAltTiles_(f,H,d+1,T))continue;const Vt=f.getMinZoom();for(let Bt=d-1;Bt>=Vt&&!this.findAltTiles_(f,H,Bt,T);--Bt);}const L=g/a*l/m,M=this.getRenderContext(t);qi(this.tempTransform,y/2,_/2,L,L,0,-y/2,-_/2),i.extent&&this.clipUnrotated(M,t,w),h.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,t);const k=Object.keys(T).map(Number);k.sort(Gi);let D;const z=[],O=[];for(let F=k.length-1;F>=0;--F){const W=k[F],H=h.getTilePixelSize(W,l,s),N=f.getResolution(W)/g,Vt=H[0]*N*L,Bt=H[1]*N*L,Ot=f.getTileCoordForCoordAndZ(Zs(b),W),ue=f.getTileCoordExtent(Ot),Wt=he(this.tempTransform,[m*(ue[0]-b[0])/g,m*(b[3]-ue[3])/g]),_t=m*h.getGutterForProjection(s);for(const K of T[W]){if(K.getState()!==Y.LOADED)continue;const rt=K.tileCoord,on=Ot[1]-rt[1],ie=Math.round(Wt[0]-(on-1)*Vt),rr=Ot[2]-rt[2],Zn=Math.round(Wt[1]-(rr-1)*Bt),ln=Math.round(Wt[0]-on*Vt),qn=Math.round(Wt[1]-rr*Bt),ea=ie-ln,na=Zn-qn,qo=k.length===1;let Hr=!1;D=[ln,qn,ln+ea,qn,ln+ea,qn+na,ln,qn+na];for(let ia=0,ra=z.length;ia<ra;++ia)if(!qo&&W<O[ia]){const oe=z[ia];Ye([ln,qn,ln+ea,qn+na],[oe[0],oe[3],oe[4],oe[7]])&&(Hr||(M.save(),Hr=!0),M.beginPath(),M.moveTo(D[0],D[1]),M.lineTo(D[2],D[3]),M.lineTo(D[4],D[5]),M.lineTo(D[6],D[7]),M.moveTo(oe[6],oe[7]),M.lineTo(oe[4],oe[5]),M.lineTo(oe[2],oe[3]),M.lineTo(oe[0],oe[1]),M.clip())}z.push(D),O.push(W),this.drawTile(K,t,ln,qn,ea,na,_t,qo),Hr&&M.restore(),this.renderedTiles.unshift(K),this.updateUsedTiles(t.usedTiles,h,K)}}this.renderedRevision=c,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!ku(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=l,this.renderedProjection=s,this.postRender(this.context,t),i.extent&&M.restore(),M.imageSmoothingEnabled=!0;const B=(F,W)=>{const H=pt(h),ct=W.wantedTiles[H],N=ct?Object.keys(ct).length:0;this.updateCacheSize(N),this.tileCache_.expireCache()};return t.postRenderFunctions.push(B),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,i,r,s,a,o,l){let u;if(t instanceof Fm){if(u=Vf(t.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(t);if(!u)return;const h=this.getRenderContext(e),c=pt(this),f=e.layerStatesArray[e.layerIndex],d=f.opacity*(l?t.getAlpha(c,e.time):1),g=d!==h.globalAlpha;g&&(h.save(),h.globalAlpha=d),h.drawImage(u,o,o,u.width-2*o,u.height-2*o,i,r,s,a),g&&h.restore(),d!==f.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,i){const r=pt(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}}class zm extends SY{constructor(t){super(t)}createRenderer(){return new GY(this,{cacheSize:this.getCacheSize()})}}const nv={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class IR extends xi{constructor(t){super(),this.projection=Jt(t.projection),this.attributions_=Rb(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,r){e.viewResolver=i,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Rb(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Rb(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),t=>n):null}const Aa=[0,0,0],fr=5;class AR{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,gt(T3(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,gt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Zs(i)),gt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,gt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:C_,gt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((r,s)=>{const a=new o0(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const r=this.getTileRangeForExtentAndZ(t,e);for(let s=r.minX,a=r.maxX;s<=a;++s)for(let o=r.minY,l=r.maxY;o<=l;++o)i([e,s,o])}forEachTileCoordParentTileRange(t,e,i,r){let s,a,o,l=null,u=t[0]-1;for(this.zoomFactor_===2?(a=t[1],o=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Ia(a,a,o,o,i)):s=this.getTileRangeForExtentAndZ(l,u,i),e(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,a=t[2]*2;return Ia(s,s+1,a,a+1,e)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],a=t[2];if(e===r)return Ia(s,a,s,a,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-r),u=Math.floor(s*l),h=Math.floor(a*l);if(e<r)return Ia(u,u,h,h,i);const c=Math.floor(l*(s+1))-1,f=Math.floor(l*(a+1))-1;return Ia(u,c,h,f,i)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Aa);const r=Aa[1],s=Aa[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Aa);const a=Aa[1],o=Aa[2];return Ia(r,a,s,o,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=He(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=He(this.getTileSize(t[0]),this.tmpSize_),a=i[0]+t[1]*s[0]*r,o=i[1]-(t[2]+1)*s[1]*r,l=a+s[0]*r,u=o+s[1]*r;return Gr(a,o,l,u,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,s){const a=this.getZForResolution(i),o=i/this.getResolution(a),l=this.getOrigin(a),u=He(this.getTileSize(a),this.tmpSize_);let h=o*(t-l[0])/i/u[0],c=o*(l[1]-e)/i/u[1];return r?(h=_c(h,fr)-1,c=_c(c,fr)-1):(h=yc(h,fr),c=yc(c,fr)),Wf(a,h,c,s)}getTileCoordForXYAndZ_(t,e,i,r,s){const a=this.getOrigin(i),o=this.getResolution(i),l=He(this.getTileSize(i),this.tmpSize_);let u=(t-a[0])/o/l[0],h=(a[1]-e)/o/l[1];return r?(u=_c(u,fr)-1,h=_c(h,fr)-1):(u=yc(u,fr),h=yc(h,fr)),Wf(i,u,h,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=T_(this.resolutions_,t,e||0);return Kt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return zA(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}function RR(n){let t=n.getDefaultTileGrid();return t||(t=YY(n),n.setDefaultTileGrid(t)),t}function zY(n,t,e){const i=t[0],r=n.getTileCoordCenter(t),s=l0(e);if(!To(s,r)){const a=vt(s),o=Math.ceil((s[0]-r[0])/a);return r[0]+=a*o,n.getTileCoordForCoordAndZ(r,i)}return t}function VY(n,t,e,i){i=i!==void 0?i:"top-left";const r=MR(n,t,e);return new AR({extent:n,origin:V3(n,i),resolutions:r,tileSize:e})}function WY(n){const t=n||{},e=t.extent||Jt("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:MR(e,t.maxZoom,t.tileSize,t.maxResolution)};return new AR(i)}function MR(n,t,e,i){t=t!==void 0?t:M3,e=He(e!==void 0?e:C_);const r=fe(n),s=vt(n);i=i>0?i:Math.max(s/e[0],r/e[1]);const a=t+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=i/Math.pow(2,l);return o}function YY(n,t,e,i){const r=l0(n);return VY(r,t,e,i)}function l0(n){n=Jt(n);let t=n.getExtent();if(!t){const e=180*E_.degrees/n.getMetersPerUnit();t=Gr(-e,-e,e,e)}return t}class $Y extends IR{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&He(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||pt(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,r,s){return J()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:RR(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),a=He(r.getTileSize(t),this.tmpSize);return s==1?a:kV(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=zY(i,t,e)),FY(t,i)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class HY extends nr{constructor(t,e){super(t),this.tile=e}}function LR(n,t){const e=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&e.push(r+"="+encodeURIComponent(t[r]))});const i=e.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+i}const UY=/\{z\}/g,XY=/\{x\}/g,KY=/\{y\}/g,jY=/\{-y\}/g;function ZY(n,t,e,i,r){return n.replace(UY,t.toString()).replace(XY,e.toString()).replace(KY,i.toString()).replace(jY,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function qY(n){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(n);if(e){const i=e[1].charCodeAt(0),r=e[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(n.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){const i=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=i;r++)t.push(n.replace(e[0],r.toString()));return t}return t.push(n),t}function JY(n,t){return function(e,i,r){if(!e)return;let s;const a=e[0];if(t){const o=t.getFullTileRange(a);o&&(s=o.getHeight()-1)}return ZY(n,a,e[1],e[2],s)}}function QY(n,t){const e=n.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=JY(n[r],t);return t$(i)}function t$(n){return n.length===1?n[0]:function(t,e,i){if(!t)return;const r=ER(t),s=Ns(r,n.length);return n[s](t,e,i)}}class u0 extends $Y{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===u0.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=pt(e),r=e.getState();let s;r==Y.LOADING?(this.tileLoadingKeys_[i]=!0,s=nv.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==Y.ERROR?nv.TILELOADERROR:r==Y.LOADED?nv.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new HY(s,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=qY(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(QY(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}class DR extends u0{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:e$,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:xR,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!qc(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||qc(e,t)))return this.tileGrid;const i=pt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=RR(t)),this.tileGridForProjection[i]}createTile_(t,e,i,r,s,a){const o=[t,e,i],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(o,u!==void 0?Y.IDLE:Y.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(Q.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,i,r,s){const a=this.getProjection();if(!a||!s||qc(a,s))return this.getTileInternal(t,e,i,r,a||s);const o=[t,e,i],l=this.getKey(),u=this.getTileGridForProjection(a),h=this.getTileGridForProjection(s),c=this.getTileCoordForTileUrlFunction(o,s),f=new Gm(a,u,s,h,o,c,this.getTilePixelRatio(r),this.getGutter(),(d,g,v,p)=>this.getTileInternal(d,g,v,p,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=l,f}getTileInternal(t,e,i,r,s){const a=this.getKey();return this.createTile_(t,e,i,r,s,a)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const i=Jt(t);if(i){const r=pt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}}function e$(n,t){n.getImage().src=t}const Mb=4,Vm="1.3.0";function n$(n,t,e,i,r){r.WIDTH=e[0],r.HEIGHT=e[1];const s=i.getAxisOrientation(),a=SA(r.VERSION,"1.3")>=0;r[a?"CRS":"SRS"]=i.getCode();const o=a&&s.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return r.BBOX=o.join(","),LR(n,r)}function i$(n,t,e,i,r,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=t/e,l=[$S(vt(n)/o,Mb),$S(fe(n)/o,Mb)];if(e!=1)switch(a){case"geoserver":const h=90*e+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":s.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return n$(r,n,l,i,s)}function Lb(n,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:Vm,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},n)}class kR extends DR{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Ze(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,r){const s=Jt(i),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=AA(t,s,a),u=Bm(a,s,t,e),h=o.getZForResolution(u,this.zDirection),c=o.getResolution(h),f=o.getTileCoordForCoordAndZ(l,h);if(o.getResolutions().length<=f[0])return;let d=o.getTileCoordExtent(f,this.tmpExtent_);const g=this.gutter_;g!==0&&(d=zs(d,c*g,d));const v={QUERY_LAYERS:this.params_.LAYERS};Object.assign(v,Lb(this.params_,"GetFeatureInfo"),r);const p=Math.floor((l[0]-d[0])/c),m=Math.floor((d[3]-l[1])/c);return v[this.v13_?"I":"X"]=p,v[this.v13_?"J":"Y"]=m,this.getRequestUrl_(f,d,1,a||s,v)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:Vm,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;i.LAYER=r}if(t!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=t*r/s}return Object.assign(i,e),LR(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=Ns(ER(t),a.length);o=a[l]}return i$(e,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,o,s,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||Vm;this.v13_=SA(t,"1.3")>=0}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const s=r.getResolution(t[0]);let a=r.getTileCoordExtent(t,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=zs(a,s*o,a));const l=Object.assign({},Lb(this.params_,"GetMap"));return this.getRequestUrl_(t,a,e,i,l)}}const r$=(n,t)=>{const e=t.getSource().getParams();e.LAYERS=n.layers,e.time=n.time,e.version="1.3.0",t.getSource().setUrl(n.url),t.getSource().updateParams(e),t.getSource().setAttributions(n.attribution)},s$=()=>new zm({properties:{name:"topicLayer"},source:new kR,visible:!1}),X={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ic=[X.FILL],Er=[X.STROKE],As=[X.BEGIN_PATH],Db=[X.CLOSE_PATH];class PR{drawCustom(t,e,i,r,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class vh extends PR{constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=t.length;o<l;o+=e)r[0]=t[o],r[1]=t[o+1],To(i,r)&&(s[a++]=r[0],s[a++]=r[1]);return a}appendFlatLineCoordinates(t,e,i,r,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(e+=r);let h=t[e],c=t[e+1];const f=this.tmpCoordinate_;let d=!0,g,v,p;for(g=e+r;g<i;g+=r)f[0]=t[g],f[1]=t[g+1],p=bm(u,f),p!==v?(d&&(o[l++]=h,o[l++]=c,d=!1),o[l++]=f[0],o[l++]=f[1]):p===le.INTERSECTING?(o[l++]=f[0],o[l++]=f[1],d=!1):d=!0,h=f[0],c=f[1],v=p;return(s&&d||g===e+r)&&(o[l++]=h,o[l++]=c),l}drawCustomCoordinates_(t,e,i,r,s){for(let a=0,o=i.length;a<o;++a){const l=i[a],u=this.appendFlatLineCoordinates(t,e,l,r,!1,!1);s.push(u),e=l}return e}drawCustom(t,e,i,r,s){this.beginGeometry(t,e,s);const a=t.getType(),o=t.getStride(),l=this.coordinates.length;let u,h,c,f,d;switch(a){case"MultiPolygon":u=t.getOrientedFlatCoordinates(),f=[];const g=t.getEndss();d=0;for(let v=0,p=g.length;v<p;++v){const m=[];d=this.drawCustomCoordinates_(u,d,g[v],o,m),f.push(m)}this.instructions.push([X.CUSTOM,l,f,t,i,Am,s]),this.hitDetectionInstructions.push([X.CUSTOM,l,f,t,r||i,Am,s]);break;case"Polygon":case"MultiLineString":c=[],u=a=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(u,0,t.getEnds(),o,c),this.instructions.push([X.CUSTOM,l,c,t,i,Nu,s]),this.hitDetectionInstructions.push([X.CUSTOM,l,c,t,r||i,Nu,s]);break;case"LineString":case"Circle":u=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([X.CUSTOM,l,h,t,i,Cr,s]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,r||i,Cr,s]);break;case"MultiPoint":u=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,o),h>l&&(this.instructions.push([X.CUSTOM,l,h,t,i,Cr,s]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,r||i,Cr,s]));break;case"Point":u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([X.CUSTOM,l,h,t,i,void 0,s]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,r||i,void 0,s]);break}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[X.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[X.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let r,s,a=-1;for(e=0;e<i;++e)r=t[e],s=r[0],s==X.END_GEOMETRY?a=e:s==X.BEGIN_GEOMETRY&&(r[2]=e,b3(this.hitDetectionInstructions,a,e),a=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const r=t.getColor();i.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,i.fillStyle=hi(r||ze)}else i.fillStyle=void 0;if(e){const r=e.getColor();i.strokeStyle=hi(r||Vu);const s=e.getLineCap();i.lineCap=s!==void 0?s:Eo;const a=e.getLineDash();i.lineDash=a?a.slice():zi;const o=e.getLineDashOffset();i.lineDashOffset=o||Vi;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:Io;const u=e.getWidth();i.lineWidth=u!==void 0?u:Yu;const h=e.getMiterLimit();i.miterLimit=h!==void 0?h:zu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[X.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[X.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,a=t.lineDashOffset,o=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!$r(t.currentLineDash,s)||t.currentLineDashOffset!=a||t.currentLineJoin!=o||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=a,t.currentLineJoin=o,t.currentLineWidth=l,t.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[X.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mA(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;zs(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class a$ extends vh{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!To(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const r=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(r,s);this.instructions.push([X.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const r=t.getFlatCoordinates(),s=[];for(let l=0,u=r.length;l<u;l+=t.getStride())(!this.maxExtent||To(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([X.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class o$ extends vh{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),o=[X.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e,i){const r=this.state,s=r.strokeStyle,a=r.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zi,Vi],As);const o=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Er),this.endGeometry(e)}drawMultiLineString(t,e,i){const r=this.state,s=r.strokeStyle,a=r.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zi,Vi],As);const o=t.getEnds(),l=t.getFlatCoordinates(),u=t.getStride();let h=0;for(let c=0,f=o.length;c<f;++c)h=this.drawFlatCoordinates_(l,h,o[c],u);this.hitDetectionInstructions.push(Er),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Er),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Er),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(As)}}class kb extends vh{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinatess_(t,e,i,r){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=i.length;this.instructions.push(As),this.hitDetectionInstructions.push(As);for(let u=0;u<l;++u){const h=i[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,h,r,!0,!o),d=[X.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),o&&(this.instructions.push(Db),this.hitDetectionInstructions.push(Db)),e=h}return a&&(this.instructions.push(Ic),this.hitDetectionInstructions.push(Ic)),o&&(this.instructions.push(Er),this.hitDetectionInstructions.push(Er)),e}drawCircle(t,e,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,ze]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zi,Vi]);const o=t.getFlatCoordinates(),l=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const h=[X.CIRCLE,u];this.instructions.push(As,h),this.hitDetectionInstructions.push(As,h),r.fillStyle!==void 0&&(this.instructions.push(Ic),this.hitDetectionInstructions.push(Ic)),r.strokeStyle!==void 0&&(this.instructions.push(Er),this.hitDetectionInstructions.push(Er)),this.endGeometry(e)}drawPolygon(t,e,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,ze]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zi,Vi]);const o=t.getEnds(),l=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(e)}drawMultiPolygon(t,e,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,ze]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zi,Vi]);const o=t.getEndss(),l=t.getOrientedFlatCoordinates(),u=t.getStride();let h=0;for(let c=0,f=o.length;c<f;++c)h=this.drawFlatCoordinatess_(l,h,o[c],u);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=ms(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function l$(n,t,e,i,r){const s=[];let a=e,o=0,l=t.slice(e,2);for(;o<n&&a+r<i;){const[u,h]=l.slice(-2),c=t[a+r],f=t[a+r+1],d=Math.sqrt((c-u)*(c-u)+(f-h)*(f-h));if(o+=d,o>=n){const g=(n-o+d)/d,v=nn(u,c,g),p=nn(h,f,g);l.push(v,p),s.push(l),l=[v,p],o==n&&(a+=r),o=0}else if(o<n)l.push(t[a+r],t[a+r+1]),a+=r;else{const g=d-o,v=nn(u,c,g/d),p=nn(h,f,g/d);l.push(v,p),s.push(l),l=[v,p],o=0,a+=r}}return o>0&&s.push(l),s}function u$(n,t,e,i,r){let s=e,a=e,o=0,l=0,u=e,h,c,f,d,g,v,p,m,y,_;for(c=e;c<i;c+=r){const w=t[c],S=t[c+1];g!==void 0&&(y=w-g,_=S-v,d=Math.sqrt(y*y+_*_),p!==void 0&&(l+=f,h=Math.acos((p*y+m*_)/(f*d)),h>n&&(l>o&&(o=l,s=u,a=c),l=0,u=c-r)),f=d,p=y,m=_),g=w,v=S}return l+=d,l>o?[u,c]:[s,a]}const Yf={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class h$ extends vh{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ze]={fillStyle:ze},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const r=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!r&&!s)return;const o=this.coordinates;let l=o.length;const u=t.getType();let h=null,c=t.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Ye(this.maxExtent,t.getExtent()))return;let f;if(h=t.getFlatCoordinates(),u=="LineString")f=[h.length];else if(u=="MultiLineString")f=t.getEnds();else if(u=="Polygon")f=t.getEnds().slice(0,1);else if(u=="MultiPolygon"){const p=t.getEndss();f=[];for(let m=0,y=p.length;m<y;++m)f.push(p[m][0])}this.beginGeometry(t,e,i);const d=a.repeat,g=d?void 0:a.textAlign;let v=0;for(let p=0,m=f.length;p<m;++p){let y;d?y=l$(d*this.resolution,h,v,f[p],c):y=[h.slice(v,f[p])];for(let _=0,w=y.length;_<w;++_){const S=y[_];let x=0,b=S.length;if(g==null){const C=u$(a.maxAngle,S,0,S.length,2);x=C[0],b=C[1]}for(let C=x;C<b;C+=c)o.push(S[C],S[C+1]);const T=o.length;v=f[p],this.drawChars_(l,T),l=T}}this.endGeometry(e)}else{let f=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),a.overflow||f.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();h=[];for(let _=0,w=y.length;_<w;_+=3)a.overflow||f.push(y[_+2]/this.resolution),h.push(y[_],y[_+1]);if(h.length===0)return;c=2;break}const d=this.appendFlatPointCoordinates(h,c);if(d===l)return;if(f&&(d-l)/2!==h.length/c){let y=l/2;f=f.filter((_,w)=>{const S=o[(y+w)*2]===h[w*c]&&o[(y+w)*2+1]===h[w*c+1];return S||--y,S})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let g=a.padding;if(g!=Is&&(a.scale[0]<0||a.scale[1]<0)){let y=a.padding[0],_=a.padding[1],w=a.padding[2],S=a.padding[3];a.scale[0]<0&&(_=-_,S=-S),a.scale[1]<0&&(y=-y,w=-w),g=[y,_,w,S]}const v=this.pixelRatio;this.instructions.push([X.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==Is?Is:g.map(function(y){return y*v}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const p=1/v,m=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=ze,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([X.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ze:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),a.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Wu,justify:e.justify,textBaseline:e.textBaseline||Nf,scale:e.scale});const a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Yf[r.textBaseline],h=this.textOffsetY_*l,c=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([X.DRAW_CHARS,t,e,u,r.overflow,o,r.maxAngle,l,h,s,f*l,c,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([X.DRAW_CHARS,t,e,u,r.overflow,o&&ze,r.maxAngle,l,h,s,f*l,c,a,1/l,this.declutterMode_])}setTextStyle(t,e){let i,r,s;if(!t)this.text_="";else{const a=t.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=hi(a.getColor()||ze)):(r=null,this.textFillState_=r);const o=t.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=o.getLineDash(),v=o.getLineDashOffset(),p=o.getWidth(),m=o.getMiterLimit();s.lineCap=o.getLineCap()||Eo,s.lineDash=g?g.slice():zi,s.lineDashOffset=v===void 0?Vi:v,s.lineJoin=o.getLineJoin()||Io,s.lineWidth=p===void 0?Yu:p,s.miterLimit=m===void 0?zu:m,s.strokeStyle=hi(o.getColor()||Vu)}i=this.textState_;const l=t.getFont()||QA;JV(l);const u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Nf,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Is,i.scale=u===void 0?[1,1]:u;const h=t.getOffsetX(),c=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:pt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+pt(r.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const c$={Circle:kb,Default:vh,Image:a$,LineString:o$,Polygon:kb,Text:h$};class f${constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const r in i){const s=i[r].finish();t[e][r]=s}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[e];if(s===void 0){const a=c$[e];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s}return s}}function d$(n,t,e,i,r,s,a,o,l,u,h,c){let f=n[t],d=n[t+1],g=0,v=0,p=0,m=0;function y(){g=f,v=d,t+=i,f=n[t],d=n[t+1],m+=p,p=Math.sqrt((f-g)*(f-g)+(d-v)*(d-v))}do y();while(t<e-i&&m+p<s);let _=p===0?0:(s-m)/p;const w=nn(g,f,_),S=nn(v,d,_),x=t-i,b=m,T=s+o*l(u,r,h);for(;t<e-i&&m+p<T;)y();_=p===0?0:(T-m)/p;const C=nn(g,f,_),I=nn(v,d,_);let E;if(c){const D=[w,S,C,I];DA(D,0,4,2,c,D,D),E=D[0]>D[2]}else E=w>C;const R=Math.PI,L=[],M=x+i===t;t=x,p=0,m=b,f=n[t],d=n[t+1];let k;if(M){y(),k=Math.atan2(d-v,f-g),E&&(k+=k>0?-R:R);const D=(C+w)/2,z=(I+S)/2;return L[0]=[D,z,(T-s)/2,k,r],L}r=r.replace(/\n/g," ");for(let D=0,z=r.length;D<z;){y();let O=Math.atan2(d-v,f-g);if(E&&(O+=O>0?-R:R),k!==void 0){let N=O-k;if(N+=N>R?-2*R:N<-R?2*R:0,Math.abs(N)>a)return null}k=O;const B=D;let F=0;for(;D<z;++D){const N=E?z-D-1:D,Vt=o*l(u,r[N],h);if(t+i<e&&m+p<s+F+Vt/2)break;F+=Vt}if(D===B)continue;const W=E?r.substring(z-B,z-D):r.substring(B,D);_=p===0?0:(s+F/2-m)/p;const H=nn(g,f,_),ct=nn(v,d,_);L.push([H,ct,F/2,O,W]),s+=F}return L}function OR(n,t,e,i){let r=n[t],s=n[t+1],a=0;for(let o=t+i;o<e;o+=i){const l=n[o],u=n[o+1];a+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return a}const Ra=Ze(),dr=[],Ii=[],Ai=[],gr=[];function Pb(n){return n[3].declutterBox}const Ob=new RegExp("[-----]");function iv(n,t){return t==="start"?t=Ob.test(n)?"right":"left":t==="end"&&(t=Ob.test(n)?"left":"right"),Yf[t]}function g$(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class p${constructor(t,e,i,r,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Yn(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new _R:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,r){const s=t+e+i+r;if(this.labels_[s])return this.labels_[s];const a=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,l=this.textStates[e],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],c=l.justify?Yf[l.justify]:iv(Array.isArray(t)?t[0]:t,l.textAlign||Wu),f=r&&a.lineWidth?a.lineWidth:0,d=Array.isArray(t)?t:String(t).split(`
`).reduce(g$,[]),{width:g,height:v,widths:p,heights:m,lineWidths:y}=tW(l,d),_=g+f,w=[],S=(_+2)*h[0],x=(v+f)*h[1],b={width:S<0?Math.floor(S):Math.ceil(S),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:w};(h[0]!=1||h[1]!=1)&&w.push("scale",h),r&&(w.push("strokeStyle",a.strokeStyle),w.push("lineWidth",f),w.push("lineCap",a.lineCap),w.push("lineJoin",a.lineJoin),w.push("miterLimit",a.miterLimit),w.push("setLineDash",[a.lineDash]),w.push("lineDashOffset",a.lineDashOffset)),i&&w.push("fillStyle",o.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");const T=.5-c;let C=c*_+T*f;const I=[],E=[];let R=0,L=0,M=0,k=0,D;for(let z=0,O=d.length;z<O;z+=2){const B=d[z];if(B===`
`){L+=R,R=0,C=c*_+T*f,++k;continue}const F=d[z+1]||l.font;F!==D&&(r&&I.push("font",F),i&&E.push("font",F),D=F),R=Math.max(R,m[M]);const W=[B,C+T*p[M]+c*(p[M]-y[k]),.5*(f+R)+L];C+=p[M],r&&I.push("strokeText",W),i&&E.push("fillText",W),++M}return Array.prototype.push.apply(w,I),Array.prototype.push.apply(w,E),this.labels_[s]=b,b}replayTextBackground_(t,e,i,r,s,a,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),a&&(this.alignAndScaleFill_=a[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,s,a,o,l,u,h,c,f,d,g,v,p){o*=f[0],l*=f[1];let m=i-o,y=r-l;const _=s+u>t?t-u:s,w=a+h>e?e-h:a,S=g[3]+_*f[0]+g[1],x=g[0]+w*f[1]+g[2],b=m-g[3],T=y-g[0];(v||c!==0)&&(dr[0]=b,gr[0]=b,dr[1]=T,Ii[1]=T,Ii[0]=b+S,Ai[0]=Ii[0],Ai[1]=T+x,gr[1]=Ai[1]);let C;return c!==0?(C=qi(Yn(),i,r,1,1,c,-i,-r),he(C,dr),he(C,Ii),he(C,Ai),he(C,gr),Gr(Math.min(dr[0],Ii[0],Ai[0],gr[0]),Math.min(dr[1],Ii[1],Ai[1],gr[1]),Math.max(dr[0],Ii[0],Ai[0],gr[0]),Math.max(dr[1],Ii[1],Ai[1],gr[1]),Ra)):Gr(Math.min(b,b+S),Math.min(T,T+x),Math.max(b,b+S),Math.max(T,T+x),Ra),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:_,drawImageH:w,originX:u,originY:h,declutterBox:{minX:Ra[0],minY:Ra[1],maxX:Ra[2],maxY:Ra[3],value:p},canvasTransform:C,scale:f}}replayImageOrLabel_(t,e,i,r,s,a,o){const l=!!(a||o),u=r.declutterBox,h=o?o[2]*r.scale[0]/2:0;return u.minX-h<=e[0]&&u.maxX+h>=0&&u.minY-h<=e[1]&&u.maxY+h>=0&&(l&&this.replayTextBackground_(t,dr,Ii,Ai,gr,a,o),eW(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=he(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(i[0]%r,i[1]%r),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){const s=this.textStates[e],a=this.createLabel(t,e,r,i),o=this.strokeStates[i],l=this.pixelRatio,u=iv(Array.isArray(t)?t[0]:t,s.textAlign||Wu),h=Yf[s.textBaseline||Nf],c=o&&o.lineWidth?o.lineWidth:0,f=a.width/l-2*s.scale[0],d=u*f+2*(.5-u)*c,g=h*a.height/l+2*(.5-h)*c;return{label:a,anchorX:d,anchorY:g}}execute_(t,e,i,r,s,a,o,l){const u=this.zIndexContext_;let h;this.pixelCoordinates_&&$r(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Dr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),sV(this.renderedTransform_,i));let c=0;const f=r.length;let d=0,g,v,p,m,y,_,w,S,x,b,T,C,I,E=0,R=0,L=null,M=null;const k=this.coordinateCache_,D=this.viewRotation_,z=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,O={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},B=this.instructions!=r||this.overlaps?0:200;let F,W,H,ct;for(;c<f;){const N=r[c];switch(N[0]){case X.BEGIN_GEOMETRY:F=N[1],ct=N[3],F.getGeometry()?o!==void 0&&!Ye(o,ct.getExtent())?c=N[2]+1:++c:c=N[2],u&&(u.zIndex=N[4]);break;case X.BEGIN_PATH:E>B&&(this.fill_(t),E=0),R>B&&(t.stroke(),R=0),!E&&!R&&(t.beginPath(),y=NaN,_=NaN),++c;break;case X.CIRCLE:d=N[1];const Bt=h[d],Ot=h[d+1],ue=h[d+2],Wt=h[d+3],_t=ue-Bt,K=Wt-Ot,rt=Math.sqrt(_t*_t+K*K);t.moveTo(Bt+rt,Ot),t.arc(Bt,Ot,rt,0,2*Math.PI,!0),++c;break;case X.CLOSE_PATH:t.closePath(),++c;break;case X.CUSTOM:d=N[1],g=N[2];const on=N[3],ie=N[4],rr=N[5];O.geometry=on,O.feature=F,c in k||(k[c]=[]);const Zn=k[c];rr?rr(h,d,g,2,Zn):(Zn[0]=h[d],Zn[1]=h[d+1],Zn.length=2),u&&(u.zIndex=N[6]),ie(Zn,O),++c;break;case X.DRAW_IMAGE:d=N[1],g=N[2],x=N[3],v=N[4],p=N[5];let ln=N[6];const qn=N[7],ea=N[8],na=N[9],qo=N[10];let Hr=N[11];const ia=N[12];let ra=N[13];m=N[14]||"declutter";const oe=N[15];if(!x&&N.length>=20){b=N[19],T=N[20],C=N[21],I=N[22];const un=this.drawLabelWithPointPlacement_(b,T,C,I);x=un.label,N[3]=x;const Ur=N[23];v=(un.anchorX-Ur)*this.pixelRatio,N[4]=v;const hn=N[24];p=(un.anchorY-hn)*this.pixelRatio,N[5]=p,ln=x.height,N[6]=ln,ra=x.width,N[13]=ra}let ug;N.length>25&&(ug=N[25]);let hg,bh,Th;N.length>17?(hg=N[16],bh=N[17],Th=N[18]):(hg=Is,bh=!1,Th=!1),qo&&z?Hr+=D:!qo&&!z&&(Hr-=D);let OM=0;for(;d<g;d+=2){if(ug&&ug[OM++]<ra/this.pixelRatio)continue;const un=this.calculateImageOrLabelDimensions_(x.width,x.height,h[d],h[d+1],ra,ln,v,p,ea,na,Hr,ia,s,hg,bh||Th,F),Ur=[t,e,x,un,qn,bh?L:null,Th?M:null];if(l){let hn,Jn,cn;if(oe){const Ht=g-d;if(!oe[Ht]){oe[Ht]={args:Ur,declutterMode:m};continue}const Se=oe[Ht];hn=Se.args,Jn=Se.declutterMode,delete oe[Ht],cn=Pb(hn)}let Si,bi;if(hn&&(Jn!=="declutter"||!l.collides(cn))&&(Si=!0),(m!=="declutter"||!l.collides(un.declutterBox))&&(bi=!0),Jn==="declutter"&&m==="declutter"){const Ht=Si&&bi;Si=Ht,bi=Ht}Si&&(Jn!=="none"&&l.insert(cn),this.replayImageOrLabel_.apply(this,hn)),bi&&(m!=="none"&&l.insert(un.declutterBox),this.replayImageOrLabel_.apply(this,Ur))}else this.replayImageOrLabel_.apply(this,Ur)}++c;break;case X.DRAW_CHARS:const N0=N[1],F0=N[2],cg=N[3],NM=N[4];I=N[5];const FM=N[6],B0=N[7],G0=N[8];C=N[9];const fg=N[10];b=N[11],T=N[12];const z0=[N[13],N[13]];m=N[14]||"declutter";const dg=this.textStates[T],Jo=dg.font,Qo=[dg.scale[0]*B0,dg.scale[1]*B0];let tl;Jo in this.widths_?tl=this.widths_[Jo]:(tl={},this.widths_[Jo]=tl);const V0=OR(h,N0,F0,2),W0=Math.abs(Qo[0])*db(Jo,b,tl);if(NM||W0<=V0){const un=this.textStates[T].textAlign,Ur=(V0-W0)*iv(b,un),hn=d$(h,N0,F0,2,b,Ur,FM,Math.abs(Qo[0]),db,Jo,tl,z?0:this.viewRotation_);t:if(hn){const Jn=[];let cn,Si,bi,Ht,Se;if(C)for(cn=0,Si=hn.length;cn<Si;++cn){Se=hn[cn],bi=Se[4],Ht=this.createLabel(bi,T,"",C),v=Se[2]+(Qo[0]<0?-fg:fg),p=cg*Ht.height+(.5-cg)*2*fg*Qo[1]/Qo[0]-G0;const Ti=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Se[0],Se[1],Ht.width,Ht.height,v,p,0,0,Se[3],z0,!1,Is,!1,F);if(l&&m==="declutter"&&l.collides(Ti.declutterBox))break t;Jn.push([t,e,Ht,Ti,1,null,null])}if(I)for(cn=0,Si=hn.length;cn<Si;++cn){Se=hn[cn],bi=Se[4],Ht=this.createLabel(bi,T,I,""),v=Se[2],p=cg*Ht.height-G0;const Ti=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Se[0],Se[1],Ht.width,Ht.height,v,p,0,0,Se[3],z0,!1,Is,!1,F);if(l&&m==="declutter"&&l.collides(Ti.declutterBox))break t;Jn.push([t,e,Ht,Ti,1,null,null])}l&&m!=="none"&&l.load(Jn.map(Pb));for(let Ti=0,BM=Jn.length;Ti<BM;++Ti)this.replayImageOrLabel_.apply(this,Jn[Ti])}}++c;break;case X.END_GEOMETRY:if(a!==void 0){F=N[1];const un=a(F,ct,m);if(un)return un}++c;break;case X.FILL:B?E++:this.fill_(t),++c;break;case X.MOVE_TO_LINE_TO:for(d=N[1],g=N[2],W=h[d],H=h[d+1],t.moveTo(W,H),y=W+.5|0,_=H+.5|0,d+=2;d<g;d+=2)W=h[d],H=h[d+1],w=W+.5|0,S=H+.5|0,(d==g-2||w!==y||S!==_)&&(t.lineTo(W,H),y=w,_=S);++c;break;case X.SET_FILL_STYLE:L=N,this.alignAndScaleFill_=N[2],E&&(this.fill_(t),E=0,R&&(t.stroke(),R=0)),t.fillStyle=N[1],++c;break;case X.SET_STROKE_STYLE:M=N,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,N),++c;break;case X.STROKE:B?R++:t.stroke(),++c;break;default:++c;break}}E&&this.fill_(t),R&&t.stroke()}execute(t,e,i,r,s,a){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,s,void 0,void 0,a)}executeHitDetection(t,e,i,r,s){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,r,s)}}const Ua=["Polygon","Circle","LineString","Image","Text","Default"],NR=["Image","Text"],v$=Ua.filter(n=>!NR.includes(n));class m${constructor(t,e,i,r,s,a,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=t[i];for(const a in s){const o=s[a];r[a]=new p$(this.resolution_,this.pixelRatio_,this.overlaps_,o,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,s,a){r=Math.round(r);const o=r*2+1,l=qi(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Qt(o,o,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):u||h.clearRect(0,0,o,o);let c;this.renderBuffer_!==void 0&&(c=Ze(),lu(c,t),zs(c,e*(this.renderBuffer_+r),c));const f=y$(r);let d;function g(S,x,b){const T=h.getImageData(0,0,o,o).data;for(let C=0,I=f.length;C<I;C++)if(T[f[C]]>0){if(!a||b==="none"||d!=="Image"&&d!=="Text"||a.includes(S)){const E=(f[C]-3)/4,R=r-E%o,L=r-(E/o|0),M=s(S,x,R*R+L*L);if(M)return M}h.clearRect(0,0,o,o);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Gi);let p,m,y,_,w;for(p=v.length-1;p>=0;--p){const S=v[p].toString();for(y=this.executorsByZIndex_[S],m=Ua.length-1;m>=0;--m)if(d=Ua[m],_=y[d],_!==void 0&&(w=_.executeHitDetection(h,l,i,g,c),w))return w}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],r=e[1],s=e[2],a=e[3],o=[i,r,i,a,s,a,s,r];return Dr(o,0,8,2,t,o),o}isEmpty(){return Gs(this.executorsByZIndex_)}execute(t,e,i,r,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Gi),a=a||Ua;const u=Ua.length;let h,c,f,d,g;for(o&&l.reverse(),h=0,c=l.length;h<c;++h){const v=l[h].toString();for(g=this.executorsByZIndex_[v],f=0,d=a.length;f<d;++f){const p=a[f],m=g[p];if(m!==void 0){const y=o===null?void 0:m.getZIndexContext(),_=y?y.getContext():t,w=this.maxExtent_&&p!=="Image"&&p!=="Text";if(w&&(_.save(),this.clip(_,i)),!y||p==="Text"||p==="Image"?m.execute(_,e,i,r,s,o):y.pushFunction(S=>m.execute(S,e,i,r,s,o)),w&&_.restore(),y){y.offset();const S=l[h]*u+f;this.deferredZIndexContexts_[S]||(this.deferredZIndexContexts_[S]=[]),this.deferredZIndexContexts_[S].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(Gi);for(let i=0,r=e.length;i<r;++i)t[e[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[e[i]].length=0}}const rv={};function y$(n){if(rv[n]!==void 0)return rv[n];const t=n*2+1,e=n*n,i=new Array(e+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>e)break;let l=i[o];l||(l=[],i[o]=l),l.push(((n+s)*t+(n+a))*4+3),s>0&&l.push(((n-s)*t+(n+a))*4+3),a>0&&(l.push(((n+s)*t+(n-a))*4+3),s>0&&l.push(((n-s)*t+(n-a))*4+3))}const r=[];for(let s=0,a=i.length;s<a;++s)i[s]&&r.push(...i[s]);return rv[n]=r,r}class _$ extends PR{constructor(t,e,i,r,s,a,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.transformRotation_=r?Nd(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yn()}drawImages_(t,e,i,r){if(!this.image_)return;const s=Dr(t,e,i,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,c=s.length;h<c;h+=2){const f=s[h]-this.imageAnchorX_,d=s[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,v=d+this.imageAnchorY_;qi(o,g,v,1,1,u,-g,-v),a.save(),a.transform.apply(a,o),a.translate(g,v),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(t,e,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Dr(t,e,i,r,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=r){const l=s[e]+this.textOffsetX_,u=s[e+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(t,e,i,r,s){const a=this.context_,o=Dr(t,e,i,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),i}drawRings_(t,e,i,r){for(let s=0,a=i.length;s<a;++s)e=this.moveToLineTo_(t,e,i[s],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ye(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=hV(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],s=Math.sqrt(i*i+r*r),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ye(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ye(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const a=t.getEnds(),o=t.getStride();i.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(r,s,a[l],o,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ye(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ye(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),a=t.getStride();e.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];r=this.drawRings_(i,r,u,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),$r(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:Wu;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:hi(i||ze)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),o=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),h=s||zi;this.strokeState_={lineCap:r!==void 0?r:Eo,lineDash:this.pixelRatio_===1?h:h.map(c=>c*this.pixelRatio_),lineDashOffset:(a||Vi)*this.pixelRatio_,lineJoin:o!==void 0?o:Io,lineWidth:(l!==void 0?l:Yu)*this.pixelRatio_,miterLimit:u!==void 0?u:zu,strokeStyle:hi(i||Vu)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const d=e.getColor();this.textFillState_={fillStyle:hi(d||ze)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),v=i.getLineDash(),p=i.getLineDashOffset(),m=i.getLineJoin(),y=i.getWidth(),_=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Eo,lineDash:v||zi,lineDashOffset:p||Vi,lineJoin:m!==void 0?m:Io,lineWidth:y!==void 0?y:Yu,miterLimit:_!==void 0?_:zu,strokeStyle:hi(d||Vu)}}const r=t.getFont(),s=t.getOffsetX(),a=t.getOffsetY(),o=t.getRotateWithView(),l=t.getRotation(),u=t.getScaleArray(),h=t.getText(),c=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:r!==void 0?r:QA,textAlign:c!==void 0?c:Wu,textBaseline:f!==void 0?f:Nf},this.text_=h!==void 0?Array.isArray(h)?h.reduce((d,g,v)=>d+=v%2?" ":g,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const si=.5;function w$(n,t,e,i,r,s,a,o,l){const u=r,h=n[0]*si,c=n[1]*si,f=Qt(h,c);f.imageSmoothingEnabled=!1;const d=f.canvas,g=new _$(f,si,r,null,a,o,null),v=e.length,p=Math.floor((256*256*256-1)/v),m={};for(let _=1;_<=v;++_){const w=e[_-1],S=w.getStyleFunction()||i;if(!S)continue;let x=S(w,s);if(!x)continue;Array.isArray(x)||(x=[x]);const T=(_*p).toString(16).padStart(7,"#00000");for(let C=0,I=x.length;C<I;++C){const E=x[C],R=E.getGeometryFunction()(w);if(!R||!Ye(u,R.getExtent()))continue;const L=E.clone(),M=L.getFill();M&&M.setColor(T);const k=L.getStroke();k&&(k.setColor(T),k.setLineDash(null)),L.setText(void 0);const D=E.getImage();if(D){const F=D.getImageSize();if(!F)continue;const W=Qt(F[0],F[1],void 0,{alpha:!1}),H=W.canvas;W.fillStyle=T,W.fillRect(0,0,H.width,H.height),L.setImage(new Kd({img:H,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}const z=L.getZIndex()||0;let O=m[z];O||(O={},m[z]=O,O.Polygon=[],O.Circle=[],O.LineString=[],O.Point=[]);const B=R.getType();if(B==="GeometryCollection"){const F=R.getGeometriesArrayRecursive();for(let W=0,H=F.length;W<H;++W){const ct=F[W];O[ct.getType().replace("Multi","")].push(ct,L)}}else O[B.replace("Multi","")].push(R,L)}}const y=Object.keys(m).map(Number).sort(Gi);for(let _=0,w=y.length;_<w;++_){const S=m[y[_]];for(const x in S){const b=S[x];for(let T=0,C=b.length;T<C;T+=2){g.setStyle(b[T+1]);for(let I=0,E=t.length;I<E;++I)g.setTransform(t[I]),g.drawGeometry(b[T])}}}return f.getImageData(0,0,d.width,d.height)}function x$(n,t,e){const i=[];if(e){const r=Math.floor(Math.round(n[0])*si),s=Math.floor(Math.round(n[1])*si),a=(Kt(r,0,e.width-1)+Kt(s,0,e.height-1)*e.width)*4,o=e.data[a],l=e.data[a+1],h=e.data[a+2]+256*(l+256*o),c=Math.floor((256*256*256-1)/t.length);h&&h%c===0&&i.push(t[h/c-1])}return i}const S$=.5,FR={Point:M$,LineString:I$,Polygon:D$,MultiPoint:L$,MultiLineString:A$,MultiPolygon:R$,GeometryCollection:E$,Circle:T$};function b$(n,t){return parseInt(pt(n),10)-parseInt(pt(t),10)}function Nb(n,t){const e=BR(n,t);return e*e}function BR(n,t){return S$*n/t}function T$(n,t,e,i,r){const s=e.getFill(),a=e.getStroke();if(s||a){const l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(t,i,r)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i)}}function Fb(n,t,e,i,r,s,a,o){const l=[],u=e.getImage();if(u){let f=!0;const d=u.getImageState();d==at.LOADED||d==at.ERROR?f=!1:d==at.IDLE&&u.load(),f&&l.push(u.ready())}const h=e.getFill();h&&h.loading()&&l.push(h.ready());const c=l.length>0;return c&&Promise.all(l).then(()=>r(null)),C$(n,t,e,i,s,a,o),c}function C$(n,t,e,i,r,s,a){const o=e.getGeometryFunction()(t);if(!o)return;const l=o.simplifyTransformed(i,r);if(e.getRenderer())GR(n,l,e,t,a);else{const h=FR[l.getType()];h(n,l,e,t,a,s)}}function GR(n,t,e,i,r){if(t.getType()=="GeometryCollection"){const a=t.getGeometries();for(let o=0,l=a.length;o<l;++o)GR(n,a[o],e,i,r);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer(),r)}function E$(n,t,e,i,r,s){const a=t.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=FR[a[o].getType()];u(n,a[o],e,i,r,s)}}function I$(n,t,e,i,r){const s=e.getStroke();if(s){const o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,i,r)}const a=e.getText();if(a&&a.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i,r)}}function A$(n,t,e,i,r){const s=e.getStroke();if(s){const o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,i,r)}const a=e.getText();if(a&&a.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i,r)}}function R$(n,t,e,i,r){const s=e.getFill(),a=e.getStroke();if(a||s){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(t,i,r)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i,r)}}function M$(n,t,e,i,r,s){const a=e.getImage(),o=e.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=at.LOADED)return;const h=n.getBuilder(e.getZIndex(),"Image");h.setImageStyle(a,u),h.drawPoint(t,i,r)}if(l){const h=n.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,u),h.drawText(t,i,r)}}function L$(n,t,e,i,r,s){const a=e.getImage(),o=a&&a.getOpacity()!==0,l=e.getText(),u=l&&l.getText(),h=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=at.LOADED)return;const c=n.getBuilder(e.getZIndex(),"Image");c.setImageStyle(a,h),c.drawMultiPoint(t,i,r)}if(u){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l,h),c.drawText(t,i,r)}}function D$(n,t,e,i,r){const s=e.getFill(),a=e.getStroke();if(s||a){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(t,i,r)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i,r)}}class k$ extends wR{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ze(),this.wrappedRenderedExtent_=Ze(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const r=e.extent,s=e.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,h=l.getExtent(),c=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),d=e.pixelRatio,g=e.viewHints,v=!(g[we.ANIMATING]||g[we.INTERACTING]),p=this.context,m=Math.round(vt(r)/o*d),y=Math.round(fe(r)/o*d),_=c.getWrapX()&&l.canWrapX(),w=_?vt(h):null,S=_?Math.ceil((r[2]-h[2])/w)+1:1;let x=_?Math.floor((r[0]-h[0])/w):0;do{let b=this.getRenderTransform(a,o,0,d,m,y,x*w);e.declutter&&(b=b.slice(0)),t.execute(p,[p.canvas.width,p.canvas.height],b,u,v,i===void 0?Ua:i?NR:v$,i?f&&e.declutter[f]:void 0)}while(++x<S)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Qt(this.context.canvas.width,this.context.canvas.height,Cb))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Co(this.context),Cb.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const r=t.viewState;this.prepareContainer(t,e);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Cn.PRERENDER)||this.getLayer().hasListener(Cn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,t),r.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const l=Tr(i.extent);o=Ye(l,t.extent),this.clipped_=o&&!Ha(l,t.extent),this.clipped_&&this.clipUnrotated(s,t,l)}return o&&this.renderWorlds(a,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],c=i[0]*si,f=i[1]*si;h.push(this.getRenderTransform(r,s,a,si,c,f,0).slice());const d=u.getSource(),g=o.getExtent();if(d.getWrapX()&&o.canWrapX()&&!Ha(g,l)){let v=l[0];const p=vt(g);let m=0,y;for(;v<g[0];)--m,y=p*m,h.push(this.getRenderTransform(r,s,a,si,c,f,y).slice()),v+=p;for(m=0,v=l[2];v>g[2];)++m,y=p*m,h.push(this.getRenderTransform(r,s,a,si,c,f,y).slice()),v-=p}this.hitDetectionImageData_=w$(i,h,this.renderedFeatures_,u.getStyleFunction(),l,s,a,Nb(s,this.renderedPixelRatio_))}e(x$(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,r,s){if(!this.replayGroup_)return;const a=e.viewState.resolution,o=e.viewState.rotation,l=this.getLayer(),u={},h=function(g,v,p){const m=pt(g),y=u[m];if(y){if(y!==!0&&p<y.distanceSq){if(p===0)return u[m]=!0,s.splice(s.lastIndexOf(y),1),r(g,l,v);y.geometry=v,y.distanceSq=p}}else{if(p===0)return u[m]=!0,r(g,l,v);s.push(u[m]={feature:g,layer:l,geometry:v,distanceSq:p,callback:r})}};let c;const f=[this.replayGroup_],d=this.getLayer().getDeclutter();return f.some(g=>c=g.forEachFeatureAtCoordinate(t,a,o,i,h,d&&e.declutter[d]?e.declutter[d].all().map(v=>v.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const r=t.viewHints[we.ANIMATING],s=t.viewHints[we.INTERACTING],a=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,u=t.viewState,h=u.projection,c=u.resolution,f=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer();let v=e.getRenderOrder();v===void 0&&(v=b$);const p=u.center.slice(),m=zs(l,g*c),y=m.slice(),_=[m.slice()],w=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Ha(w,t.extent)){const M=vt(w),k=Math.max(vt(m)/2,M);m[0]=w[0]-k,m[2]=w[2]+k,CA(p,h);const D=xA(_[0],h);D[0]<w[0]&&D[2]<w[2]?_.push([D[0]+M,D[1],D[2]+M,D[3]]):D[0]>w[0]&&D[2]>w[2]&&_.push([D[0]-M,D[1],D[2]-M,D[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!t.declutter&&Ha(this.wrappedRenderedExtent_,m))return $r(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new f$(BR(c,f),m,c,f);let x;for(let M=0,k=_.length;M<k;++M)i.loadFeatures(_[M],c,h);const b=Nb(c,f);let T=!0;const C=(M,k)=>{let D;const z=M.getStyleFunction()||e.getStyleFunction();if(z&&(D=z(M,c)),D){const O=this.renderFeature(M,b,D,S,x,this.getLayer().getDeclutter(),k);T=T&&!O}},I=RA(m),E=i.getFeaturesInExtent(I);v&&E.sort(v);for(let M=0,k=E.length;M<k;++M)C(E[M],M);this.renderedFeatures_=E,this.ready=T;const R=S.finish(),L=new m$(m,c,f,i.getOverlaps(),R,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=p,this.renderedProjection_=h,this.renderedPixelRatio_=f,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,s,a,o){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,h=i.length;u<h;++u)l=Fb(r,t,i[u],e,this.boundHandleStyleImageChange_,s,a,o)||l;else l=Fb(r,t,i,e,this.boundHandleStyleImageChange_,s,a,o);return l}}class zR extends hR{constructor(t){super(t)}createRenderer(){return new k$(this)}}class Bb{constructor(t){this.rbush_=new $A(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[pt(e)]=i}load(t,e){const i=new Array(e.length);for(let r=0,s=e.length;r<s;r++){const a=t[r],o=e[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};i[r]=l,this.items_[pt(o)]=l}this.rbush_.load(i)}remove(t){const e=pt(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[pt(e)],r=[i.minX,i.minY,i.maxX,i.maxY];ku(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,s=t.length;r<s;r++)if(i=e(t[r]),i)return i;return i}isEmpty(){return Gs(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Gr(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class Uo extends xi{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Uo(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Dt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ft(t,Q.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?P$(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function P$(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(gt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}class $f extends kA{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Dt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(ft(t[e],Q.CHANGE,this.changed,this))}clone(){const t=new $f(sv(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<js(this.getExtent(),t,e))return r;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)r=s[a].closestPointXY(t,e,i,r);return r}containsXY(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,e))return!0;return!1}computeExtent(t){hh(t);const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)yA(t,e[i].getExtent());return t}getGeometries(){return sv(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let r=!1;for(let s=0,a=i.length;s<a;++s){const o=i[s],l=o.getSimplifiedGeometry(t);e.push(l),l!==o&&(r=!0)}return r?new $f(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Zi(this.getExtent()));const r=this.geometries_;for(let s=0,a=r.length;s<a;++s)r[s].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(sv(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function sv(n){return n.map(t=>t.clone())}function Hf(n,t,e,i,r,s,a){let o,l;const u=(e-t)/i;if(u===1)o=t;else if(u===2)o=t,l=r;else if(u!==0){let h=n[t],c=n[t+1],f=0;const d=[0];for(let p=t+i;p<e;p+=i){const m=n[p],y=n[p+1];f+=Math.sqrt((m-h)*(m-h)+(y-c)*(y-c)),d.push(f),h=m,c=y}const g=r*f,v=S3(d,g);v<0?(l=(g-d[-v-2])/(d[-v-1]-d[-v-2]),o=t+(-v-2)*i):o=t+v*i}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:nn(n[o+h],n[o+i+h],l);return s}function Wm(n,t,e,i,r,s){if(e==t)return null;let a;if(r<n[t+i-1])return s?(a=n.slice(t,t+i),a[i-1]=r,a):null;if(n[e-1]<r)return s?(a=n.slice(e-i,e),a[i-1]=r,a):null;if(r==n[t+i-1])return n.slice(t,t+i);let o=t/i,l=e/i;for(;o<l;){const f=o+l>>1;r<n[(f+1)*i-1]?l=f:o=f+1}const u=n[o*i-1];if(r==u)return n.slice((o-1)*i,(o-1)*i+i);const h=n[(o+1)*i-1],c=(r-u)/(h-u);a=[];for(let f=0;f<i-1;++f)a.push(nn(n[(o-1)*i+f],n[o*i+f],c));return a.push(r),a}function O$(n,t,e,i,r,s,a){if(a)return Wm(n,t,e[e.length-1],i,r,s);let o;if(r<n[i-1])return s?(o=n.slice(0,i),o[i-1]=r,o):null;if(n[n.length-1]<r)return s?(o=n.slice(n.length-i),o[i-1]=r,o):null;for(let l=0,u=e.length;l<u;++l){const h=e[l];if(t!=h){if(r<n[t+i-1])return null;if(r<=n[h-1])return Wm(n,t,h,i,r,!1);t=h}}return null}class Ao extends qs{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){di(this.flatCoordinates,t),this.changed()}clone(){const t=new Ao(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<js(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(B_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))}forEachSegment(t){return GA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Wm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Cr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Hf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return OR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ao(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vd(this.flatCoordinates,0,t,this.stride),this.changed()}}class Uf extends qs{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const r=t,s=[],a=[];for(let l=0,u=r.length;l<u;++l){const h=r[l];di(s,h.getFlatCoordinates()),a.push(s.length)}const o=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(t){di(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Uf(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<js(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(G_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),V_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,O$(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return Nu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ao(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[];let s=0;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=new Ao(t.slice(s,l),i);r.push(u),s=l}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=Hf(e,i,l,s,.5);di(t,u),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=OA(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Uf(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return _V(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class qd extends qs{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){di(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new qd(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<js(this.getExtent(),t,e))return r;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=Os(t,e,s[o],s[o+1]);if(u<r){r=u;for(let h=0;h<a;++h)i[h]=s[o+h];i.length=a}}return r}getCoordinates(){return Cr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new zr(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,r=[];for(let s=0,a=t.length;s<a;s+=i){const o=new zr(t.slice(s,s+i),e);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let r=0,s=e.length;r<s;r+=i){const a=e[r],o=e[r+1];if(I_(t,a,o))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vd(this.flatCoordinates,0,t,this.stride),this.changed()}}function VR(n,t,e,i){const r=[];let s=Ze();for(let a=0,o=e.length;a<o;++a){const l=e[a];s=R_(n,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Xf extends qs{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const r=t,s=[],a=[];for(let o=0,l=r.length;o<l;++o){const u=r[o],h=s.length,c=u.getEnds();for(let f=0,d=c.length;f<d;++f)c[f]+=h;di(s,u.getFlatCoordinates()),a.push(c)}e=r.length===0?this.getLayout():r[0].getLayout(),t=s,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;di(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,s=e.length;r<s;++r)e[r]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const i=new Xf(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,r){return r<js(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cV(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fV(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return yV(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return vV(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Rm(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Am(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=VR(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=BA(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new qd(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;WA(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Rm(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=pV(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Xf(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(e!==0)for(let s=0,a=i.length;s<a;++s)i[s]-=e;return new Vr(this.flatCoordinates.slice(e,r),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a].slice(),u=l[l.length-1];if(s!==0)for(let c=0,f=l.length;c<f;++c)l[c]-=s;const h=new Vr(e.slice(s,u),t,l);r.push(h),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return wV(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=PA(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Gb=Yn();class rn{constructor(t,e,i,r,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?A_(this.flatCoordinates_):R_(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Zi(this.getExtent());this.flatInteriorPoints_=$_(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=SV(this.flatCoordinates_,this.ends_),e=VR(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=BA(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Hf(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const a=i[r],o=Hf(t,e,a,2,.5);di(this.flatMidpoints_,o),e=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=Jt(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const r=fe(i)/fe(e);qi(Gb,i[0],i[3],r,-r,0,0,0),Dr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Gb,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new rn(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=gA((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=Wd(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=OA(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,r);break;case"Polygon":r=[],i.length=W_(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,r);break}return r&&(this.simplifiedGeometry_=new rn(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}rn.prototype.getFlatCoordinates=rn.prototype.getOrientedFlatCoordinates;const gn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function N$(n,t){return[[-1/0,-1/0,1/0,1/0]]}let F$=!1;function B$(n,t,e,i,r,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(e,i,r):n,!0),t.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=F$,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=t.getType();try{let h;u=="text"||u=="json"?h=o.responseText:u=="xml"?h=o.responseXML||o.responseText:u=="arraybuffer"&&(h=o.response),h?s(t.readFeatures(h,{extent:e,featureProjection:r}),t.readProjection(h)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function zb(n,t){return function(e,i,r,s,a){const o=this;B$(n,t,e,i,r,function(l,u){o.addFeatures(l),s!==void 0&&s(l)},a||bo)}}class pr extends nr{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class h0 extends IR{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=bo,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(gt(this.format_,"`format` must be set when `url` is set"),this.loader_=zb(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:N$;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Bb:null,this.loadedExtentsRtree_=new Bb,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!e&&i===void 0&&(i=new li(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=pt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new pr(gn.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof rn||(this.featureChangeKeys_[t]=[ft(e,Q.CHANGE,this.handleFeatureChange_,this),ft(e,So.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(e.getId()!==void 0){const r=String(e.getId());if(!(r in this.idIndex_))this.idIndex_[r]=e;else if(e instanceof rn){const s=this.idIndex_[r];s instanceof rn?Array.isArray(s)?s.push(e):this.idIndex_[r]=[s,e]:i=!1}else i=!1}return i&&(gt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],r=[];for(let s=0,a=t.length;s<a;s++){const o=t[s],l=pt(o);this.addToIndex_(l,o)&&i.push(o)}for(let s=0,a=i.length;s<a;s++){const o=i[s],l=pt(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const h=u.getExtent();e.push(h),r.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(gn.ADDFEATURE))for(let s=0,a=i.length;s<a;s++)this.dispatchEvent(new pr(gn.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(gn.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(gn.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Ge.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(Ge.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Dt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new pr(gn.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof rn||s.intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const r=i.getGeometry();if(r instanceof rn||r.intersectsExtent(t)){const s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Gs(this.nullGeometryFeatures_)||di(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=M_(t,e);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],r=t[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||Du,this.featuresRtree_.forEachInExtent(l,function(u){if(e(u)){const h=u.getGeometry(),c=o;if(o=h instanceof rn?0:h.closestPointXY(i,r,a,o),o<c){s=u;const f=Math.sqrt(o);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=pt(e),r=e.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const a=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}const s=e.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new pr(gn.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:pt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Gs(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let a=0,o=s.length;a<o;++a){const l=s[a];r.forEachInExtent(l,function(h){return Ha(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new pr(gn.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new pr(gn.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new pr(gn.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(r){if(ku(r.extent,t))return i=r,!0}),i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,r=t.length;i<r;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=pt(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i==null||i.forEach(Dt),delete this.featureChangeKeys_[e];const r=t.getId();if(r!==void 0){const s=r.toString(),a=this.idIndex_[s];a===t?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(t),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[e],this.hasListener(gn.REMOVEFEATURE)&&this.dispatchEvent(new pr(gn.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){gt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(zb(t,this.format_))}}const G$=(n,t)=>{var o;const e=new zr(n.coordinates),i=zs(e.getExtent(),5e3),r=Mm(i),s=(o=t.getSource())==null?void 0:o.getFeatures()[0];s.setGeometry(r);const a=[new Wi({stroke:new Vs({color:n.strokeColor,width:n.strokeWidth}),fill:new Ji({color:"rgba(0, 0, 255, 0.1)"}),text:new t0({text:n.name,font:"25px Rosario,sans-serif",fill:new Ji({color:"#000"}),stroke:new Vs({color:"#fff",width:4})})})];s.setStyle(a)},z$=()=>{const n=new Uo;return new zR({source:new h0({features:[n]}),visible:!1,properties:{name:"highlightLayer"}})},Vb=(n,t)=>{!n||!t||t.animate({center:n.center},{zoom:n.zoom},{rotation:n.rotation||0},{easing:rV},{duration:2e3})};class V$ extends h0{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(e){const i=e.getGeometry();return gt(!i||i.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),i},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,i){var r;(r=this.source)==null||r.loadFeatures(t,e,i),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Q.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Q.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const i=t===0?0:Math.min(e,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=e,this.interpolationRatio=i,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=Ze(),e=this.distance*this.resolution,i=this.source.getFeatures(),r={};for(let s=0,a=i.length;s<a;s++){const o=i[s];if(!(pt(o)in r)){const l=this.geometryFunction(o);if(l){const u=l.getCoordinates();A_(u,t),zs(t,e,t);const h=this.source.getFeaturesInExtent(t).filter(function(c){const f=pt(c);return f in r?!1:(r[f]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,e){const i=[0,0];for(let o=t.length-1;o>=0;--o){const l=this.geometryFunction(t[o]);l?bA(i,l.getCoordinates()):t.splice(o,1)}TA(i,1/t.length);const r=Zi(e),s=this.interpolationRatio,a=new zr([i[0]*(1-s)+r[0]*s,i[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(a,t):new Uo({geometry:a,features:t})}}class W${constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Uo,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Jt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Jt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return J()}readFeature(t,e){return J()}readFeatures(t,e){return J()}readGeometry(t,e){return J()}readProjection(t){return J()}writeFeature(t,e){return J()}writeFeatures(t,e){return J()}writeGeometry(t,e){return J()}}function c0(n,t,e){const i=e?Jt(e.featureProjection):null,r=e?Jt(e.dataProjection):null;let s=n;if(i&&r&&!qc(i,r)){t&&(s=n.clone());const a=t?i:r,o=t?r:i;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Ou(a,o))}if(t&&e&&e.decimals!==void 0){const a=Math.pow(10,e.decimals),o=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Y$={Point:zr,LineString:Ao,Polygon:Vr,MultiPoint:qd,MultiLineString:Uf,MultiPolygon:Xf};function $$(n,t,e){return Array.isArray(t[0])?(WA(n,0,t,e)||(n=n.slice(),Rm(n,0,t,e)),n):(U_(n,0,t,e)||(n=n.slice(),Pf(n,0,t,e)),n)}function WR(n,t){var s;const e=n.geometry;if(!e)return[];if(Array.isArray(e))return e.map(a=>WR({...n,geometry:a})).flat();const i=e.type==="MultiPolygon"?"Polygon":e.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=e.layout.length;return c0(new rn(i,i==="Polygon"?$$(e.flatCoordinates,e.ends,r):e.flatCoordinates,(s=e.ends)==null?void 0:s.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,t)}function f0(n,t){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>f0(r,t));return new $f(i)}const e=Y$[n.type];return c0(new e(n.flatCoordinates,n.layout,n.ends),!1,t)}class H$ extends W${constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Ac(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Ac(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return J()}readFeaturesFromObject(t,e){return J()}readGeometry(t,e){return this.readGeometryFromObject(Ac(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return J()}readProjection(t){return this.readProjectionFromObject(Ac(t))}readProjectionFromObject(t){return J()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return J()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return J()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return J()}}function Ac(n){if(typeof n=="string"){const t=JSON.parse(n);return t||null}return n!==null?n:null}class U$ extends H${constructor(t){t=t||{},super(),this.dataProjection=Jt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Jt(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=d0(i.geometry);if(this.featureClass===rn)return WR({geometry:r,id:i.id,properties:i.properties},e);const s=new Uo;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(f0(r,e)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],e);u&&r.push(u)}}else r=[this.readFeatureFromObject(t,e)];return r.flat()}readGeometryFromObject(t,e){return X$(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=Jt(e.properties.name);else if(e.type==="EPSG")i=Jt("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),a=t.getGeometry();return a&&(i.geometry=Ym(a,e),delete s[t.getGeometryName()]),Gs(s)||(i.properties=s),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Ym(t,this.adaptOptions(e))}}function d0(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=j$(n);break}case"LineString":{e=Z$(n);break}case"Polygon":{e=tH(n);break}case"MultiPoint":{e=J$(n);break}case"MultiLineString":{e=q$(n);break}case"MultiPolygon":{e=Q$(n);break}case"GeometryCollection":{e=K$(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return e}function X$(n,t){const e=d0(n);return f0(e,t)}function K$(n,t){return n.geometries.map(function(i){return d0(i)})}function j$(n){const t=n.coordinates;return{type:"Point",flatCoordinates:t,layout:Js(t.length)}}function Z$(n){var i;const t=n.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Js(((i=t[0])==null?void 0:i.length)||2)}}function q$(n){var s,a;const t=n.coordinates,e=((a=(s=t[0])==null?void 0:s[0])==null?void 0:a.length)||2,i=[],r=ch(i,0,t,e);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:Js(e)}}function J$(n){var e;const t=n.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Js(((e=t[0])==null?void 0:e.length)||2)}}function Q$(n){var s,a;const t=n.coordinates,e=[],i=((a=(s=t[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,r=PA(e,0,t,i);return{type:"MultiPolygon",flatCoordinates:e,ends:r,layout:Js(i)}}function tH(n){var s,a;const t=n.coordinates,e=[],i=(a=(s=t[0])==null?void 0:s[0])==null?void 0:a.length,r=ch(e,0,t,i);return{type:"Polygon",flatCoordinates:e,ends:r,layout:Js(i)}}function Ym(n,t){n=c0(n,!0,t);const e=n.getType();let i;switch(e){case"Point":{i=aH(n);break}case"LineString":{i=nH(n);break}case"Polygon":{i=oH(n,t);break}case"MultiPoint":{i=rH(n);break}case"MultiLineString":{i=iH(n);break}case"MultiPolygon":{i=sH(n,t);break}case"GeometryCollection":{i=eH(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function eH(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return Ym(i,t)})}}function nH(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function iH(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function rH(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function sH(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function aH(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function oH(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}const Wb=[],lH=(n,t)=>{t.getSource().getSource().setUrl(n.dataLayer.url)},Yb=()=>{const n=new h0({format:new U$}),t=new V$({distance:50,minDistance:50,source:n}),e=i=>{const r=i.get("features").length;let s=Wb[r];return s||(s=new Wi({image:new fh({radius:30,stroke:new Vs({color:"#e59812",width:2}),fill:new Ji({color:"#fff"})}),text:new t0({text:r.toString(),font:"25px Rosario,sans-serif",fill:new Ji({color:"#e59812"})})}),Wb[r]=s),s};return new zR({source:t,style:e,visible:!1,properties:{name:"dataLayer"}})},uH=[{type:"wms",name:"topplus-bkg",url:"https://sgx.geodatenzentrum.de/wms_topplus_open",layers:"web",version:"1.3.0",attributions:` Bundesamt fr Kartographie und Geodsie (${new Date().getFullYear()})`},{type:"wms",name:"sen2europe",url:"https://sgx.geodatenzentrum.de/wms_sen2europe",layers:"rgb",version:"1.3.0",attributions:` Europische Union, enthlt vernderte Copernicus Sentinel-Daten (${new Date().getFullYear()})`},{type:"wms",name:"sentinel-rgb",url:"https://geoserver.mundialis.de/geoserver/wms",layers:"sentinelMosaic:art_040302",version:"1.3.0",attributions:"mundialis - Contains modified Copernicus Sentinel data (2015-2017)/ESA"},{type:"wms",name:"sentinel-comp",url:"https://geoserver.mundialis.de/geoserver/wms",layers:"sentinel-rgbMosaic:art_8A1104",version:"1.3.0",attributions:"mundialis - Contains modified Copernicus Sentinel data (2015-2017)/ESA"}];class hH extends DR{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:WY({extent:l0(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const cH='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class fH extends hH{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[cH];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const $b=n=>{if(n==="osm"){const i=new zm({source:new fH});return i.set("id","baseLayer"),i.set("name",n),i}const t=uH.filter(i=>i.name===n)[0],e=new zm({source:new kR({url:t.url,params:{LAYERS:t.layers,version:t.version},attributions:t.attributions})});return e.set("id","baseLayer"),e.set("name",n),e};var dH=Qi('<div class="map svelte-18czejg"></div>');function gH(n,t){Qu(t,!1);let e="scrollymap-1",i=ki(t,"steps",8),r=xs(null),s,a=xs(),o=xs(),l=xs();const u=c=>(s=$b("osm"),se(r,new wY({controls:[new fR({collapsed:!1})],interactions:[],target:c.id,layers:[s],view:new ri({center:[0,0],zoom:9})})),{destroy(){$(r)&&($(r).setTarget(void 0),se(r,null))}});xm.subscribe(c=>{var f;if(c>=0&&$(r)&&i()){const d=i()[c];if(!d)return;if(d.baseLayer&&d.baseLayer!==(s==null?void 0:s.get("name"))){const g=(f=$b(d.baseLayer))===null||f===void 0?void 0:f.getSource(),v=$(r).getAllLayers().filter(p=>p.get("id")==="baseLayer")[0];v==null||v.setSource(g),v.set("name",d.baseLayer)}d.topicLayer&&$(a)?(r$(d.topicLayer,$(a)),$(a).setVisible(!0)):$(a)&&$(a).setVisible(!1),d.dataLayer&&$(l)?(lH(d,$(l)),$(l).setVisible(!0)):$(l)&&$(l).setVisible(!1),d.highlight&&$(o)?(G$(d.highlight,$(o)),$(o).setVisible(!0)):$(o)&&$(o).setVisible(!1),Vb(d,$(r).getView())}}),iy(()=>($(r),vu(i()),$(a),$(o),$(l),Yb),()=>{$(r)&&i()&&(Vb(i()[0],$(r).getView()),i().some(c=>c.topicLayer)&&(se(a,s$()),$(r).addLayer($(a))),i().some(c=>c.highlight)&&(se(o,z$()),$(r).addLayer($(o))),i().some(c=>c.dataLayer)&&(se(l,Yb()),$(r).addLayer($(l))))}),ry(),rd();var h=dH();ly(h,"id",e),BT(h,c=>u(c)),Oe(n,h),th()}var pH=Qi("<div><!></div>");function vH(n,t){Qu(t,!1);let e=ki(t,"root",8,null),i=ki(t,"top",8,0),r=ki(t,"bottom",8,0),s=ki(t,"increments",8,100),a=ki(t,"value",12,0);const o=[],l=[];let u=document.querySelectorAll(".dummySelector"),h=[],c=xs();const f=()=>{u.length&&u.forEach((m,y)=>g(m,y))},d=()=>{let m=0,y=0;for(let _=0;_<o.length;(_+=1)-1)o[_]>m&&(m=o[_],y=_);a(m>0?y:0)},g=(m,y)=>{const _=C=>{const I=C[0].intersectionRatio;o[y]=I,d()},w=i()?i()*-1:0,S=r()?r()*-1:0,x=`${w}px 0px ${S}px 0px`,b={root:e(),rootMargin:x,threshold:l};h[y]&&h[y].disconnect();const T=new IntersectionObserver(_,b);T.observe(m),h[y]=T};e2(()=>{for(let m=0;m<s()+1;(m+=1)-1)l.push(m/s());u=$(c).querySelectorAll(":scope > *"),f()}),iy(()=>(vu(i()),vu(r())),()=>{i(),r(),f()}),ry(),rd();var v=pH();ZL(v,m=>se(c,m),()=>$(c));var p=yn(v);XL(p,t,"default",{}),Oe(n,v),th()}function g0(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ta=g0();function YR(n){ta=n}const $R=/[&<>"']/,mH=new RegExp($R.source,"g"),HR=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,yH=new RegExp(HR.source,"g"),_H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hb=n=>_H[n];function tn(n,t){if(t){if($R.test(n))return n.replace(mH,Hb)}else if(HR.test(n))return n.replace(yH,Hb);return n}const wH=/(^|[^\[])\^/g;function Mt(n,t){let e=typeof n=="string"?n:n.source;t=t||"";const i={replace:(r,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(wH,"$1"),e=e.replace(r,a),i},getRegex:()=>new RegExp(e,t)};return i}function Ub(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const uu={exec:()=>null};function Xb(n,t){const e=n.replace(/\|/g,(s,a,o)=>{let l=!1,u=a;for(;--u>=0&&o[u]==="\\";)l=!l;return l?"|":" |"}),i=e.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function Il(n,t,e){const i=n.length;if(i===0)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s===t&&!e)r++;else if(s!==t&&e)r++;else break}return n.slice(0,i-r)}function xH(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===t[0])e++;else if(n[i]===t[1]&&(e--,e<0))return i;return-1}function Kb(n,t,e,i){const r=t.href,s=t.title?tn(t.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const o={type:"link",raw:e,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,o}return{type:"image",raw:e,href:r,title:s,text:tn(a)}}function SH(n,t){const e=n.match(/^(\s+)(?:```)/);if(e===null)return t;const i=e[1];return t.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[a]=s;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}class Kf{constructor(t){It(this,"options");It(this,"rules");It(this,"lexer");this.options=t||ta}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const i=e[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Il(i,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const i=e[0],r=SH(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(/#$/.test(i)){const r=Il(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Il(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let i=Il(e[0],`
`).split(`
`),r="",s="";const a=[];for(;i.length>0;){let o=!1;const l=[];let u;for(u=0;u<i.length;u++)if(/^ {0,3}>/.test(i[u]))l.push(i[u]),o=!0;else if(!o)l.push(i[u]);else break;i=i.slice(u);const h=l.join(`
`),c=h.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${h}`:h,s=s?`${s}
${c}`:c;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,a,!0),this.lexer.state.top=f,i.length===0)break;const d=a[a.length-1];if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const g=d,v=g.raw+`
`+i.join(`
`),p=this.blockquote(v);a[a.length-1]=p,r=r.substring(0,r.length-g.raw.length)+p.raw,s=s.substring(0,s.length-g.text.length)+p.text;break}else if((d==null?void 0:d.type)==="list"){const g=d,v=g.raw+`
`+i.join(`
`),p=this.list(v);a[a.length-1]=p,r=r.substring(0,r.length-d.raw.length)+p.raw,s=s.substring(0,s.length-g.raw.length)+p.raw,i=v.substring(a[a.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const a=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;t;){let l=!1,u="",h="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let c=e[2].split(`
`,1)[0].replace(/^\t+/,m=>" ".repeat(3*m.length)),f=t.split(`
`,1)[0],d=!c.trim(),g=0;if(this.options.pedantic?(g=2,h=c.trimStart()):d?g=e[1].length+1:(g=e[2].search(/[^ ]/),g=g>4?1:g,h=c.slice(g),g+=e[1].length),d&&/^[ \t]*$/.test(f)&&(u+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const m=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,g-1)}}#`),S=new RegExp(`^ {0,${Math.min(3,g-1)}}<[a-z].*>`,"i");for(;t;){const x=t.split(`
`,1)[0];let b;if(f=x,this.options.pedantic?(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),b=f):b=f.replace(/\t/g,"    "),_.test(f)||w.test(f)||S.test(f)||m.test(f)||y.test(f))break;if(b.search(/[^ ]/)>=g||!f.trim())h+=`
`+b.slice(g);else{if(d||c.replace(/\t/g,"    ").search(/[^ ]/)>=4||_.test(c)||w.test(c)||y.test(c))break;h+=`
`+f}!d&&!f.trim()&&(d=!0),u+=x+`
`,t=t.substring(x.length+1),c=b.slice(g)}}s.loose||(o?s.loose=!0:/\n[ \t]*\n[ \t]*$/.test(u)&&(o=!0));let v=null,p;this.options.gfm&&(v=/^\[[ xX]\] /.exec(h),v&&(p=v[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:u,task:!!v,checked:p,loose:!1,text:h,tokens:[]}),s.raw+=u}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const u=s.items[l].tokens.filter(c=>c.type==="space"),h=u.length>0&&u.some(c=>/\n.*\n/.test(c.raw));s.loose=h}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:r,title:s}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const i=Xb(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),s=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?a.align.push("right"):/^ *:-+: *$/.test(o)?a.align.push("center"):/^ *:-+ *$/.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<i.length;o++)a.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:a.align[o]});for(const o of s)a.rows.push(Xb(o,a.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[u]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:tn(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const a=Il(i.slice(0,-1),"\\");if((i.length-a.length)%2===0)return}else{const a=xH(e[2],"()");if(a>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);a&&(r=a[1],s=a[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),Kb(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=e[r.toLowerCase()];if(!s){const a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return Kb(i,s,i[0],this.lexer)}}emStrong(t,e,i=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const a=[...r[0]].length-1;let o,l,u=a,h=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+a);(r=c.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(l=[...o].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&a%3&&!((a+l)%3)){h+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+h);const f=[...r[0]][0].length,d=t.slice(0,a+r.index+f+l);if(Math.min(a,l)%2){const v=d.slice(1,-1);return{type:"em",raw:d,text:v,tokens:this.lexer.inlineTokens(v)}}const g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=tn(i,!0),{type:"codespan",raw:e[0],text:i}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let i,r;return e[2]==="@"?(i=tn(e[1]),r="mailto:"+i):(i=tn(e[1]),r=i),{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=tn(e[0]),s="mailto:"+r;else{let a;do a=e[0],e[0]=((i=this.rules.inline._backpedal.exec(e[0]))==null?void 0:i[0])??"";while(a!==e[0]);r=tn(e[0]),e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let i;return this.lexer.state.inRawBlock?i=e[0]:i=tn(e[0]),{type:"text",raw:e[0],text:i}}}}const bH=/^(?:[ \t]*(?:\n|$))+/,TH=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,CH=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,mh=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,EH=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,UR=/(?:[*+-]|\d{1,9}[.)])/,XR=Mt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,UR).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),p0=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,IH=/^[^\n]+/,v0=/(?!\s*\])(?:\\.|[^\[\]\\])+/,AH=Mt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",v0).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),RH=Mt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,UR).getRegex(),Jd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",m0=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,MH=Mt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",m0).replace("tag",Jd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),KR=Mt(p0).replace("hr",mh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex(),LH=Mt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",KR).getRegex(),y0={blockquote:LH,code:TH,def:AH,fences:CH,heading:EH,hr:mh,html:MH,lheading:XR,list:RH,newline:bH,paragraph:KR,table:uu,text:IH},jb=Mt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",mh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex(),DH={...y0,table:jb,paragraph:Mt(p0).replace("hr",mh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jb).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex()},kH={...y0,html:Mt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",m0).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:uu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Mt(p0).replace("hr",mh).replace("heading",` *#{1,6} *[^
]`).replace("lheading",XR).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jR=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,PH=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ZR=/^( {2,}|\\)\n(?!\s*$)/,OH=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yh="\\p{P}\\p{S}",NH=Mt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,yh).getRegex(),FH=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,BH=Mt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,yh).getRegex(),GH=Mt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,yh).getRegex(),zH=Mt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,yh).getRegex(),VH=Mt(/\\([punct])/,"gu").replace(/punct/g,yh).getRegex(),WH=Mt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),YH=Mt(m0).replace("(?:-->|$)","-->").getRegex(),$H=Mt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",YH).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),jf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,HH=Mt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",jf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qR=Mt(/^!?\[(label)\]\[(ref)\]/).replace("label",jf).replace("ref",v0).getRegex(),JR=Mt(/^!?\[(ref)\](?:\[\])?/).replace("ref",v0).getRegex(),UH=Mt("reflink|nolink(?!\\()","g").replace("reflink",qR).replace("nolink",JR).getRegex(),_0={_backpedal:uu,anyPunctuation:VH,autolink:WH,blockSkip:FH,br:ZR,code:PH,del:uu,emStrongLDelim:BH,emStrongRDelimAst:GH,emStrongRDelimUnd:zH,escape:jR,link:HH,nolink:JR,punctuation:NH,reflink:qR,reflinkSearch:UH,tag:$H,text:OH,url:uu},XH={..._0,link:Mt(/^!?\[(label)\]\((.*?)\)/).replace("label",jf).getRegex(),reflink:Mt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",jf).getRegex()},$m={..._0,escape:Mt(jR).replace("])","~|])").getRegex(),url:Mt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},KH={...$m,br:Mt(ZR).replace("{2,}","*").getRegex(),text:Mt($m.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Rc={normal:y0,gfm:DH,pedantic:kH},Al={normal:_0,gfm:$m,breaks:KH,pedantic:XH};class En{constructor(t){It(this,"tokens");It(this,"options");It(this,"state");It(this,"tokenizer");It(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ta,this.options.tokenizer=this.options.tokenizer||new Kf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Rc.normal,inline:Al.normal};this.options.pedantic?(e.block=Rc.pedantic,e.inline=Al.pedantic):this.options.gfm&&(e.block=Rc.gfm,this.options.breaks?e.inline=Al.breaks:e.inline=Al.gfm),this.tokenizer.rules=e}static get rules(){return{block:Rc,inline:Al}}static lex(t,e){return new En(e).lex(t)}static lexInline(t,e){return new En(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){this.options.pedantic&&(t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""));let r,s,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},l),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(a=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){s=e[e.length-1],i&&(s==null?void 0:s.type)==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(r),i=a.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),s=e[e.length-1],s&&s.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(r);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i,r,s,a=t,o,l,u;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)h.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(i=h.call({lexer:this},t,e))?(t=t.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),r=e[e.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),r=e[e.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(t,a,u)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),e.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const c=t.slice(1);let f;this.options.extensions.startInline.forEach(d=>{f=d.call({lexer:this},c),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(s=t.substring(0,h+1))}if(i=this.tokenizer.inlineText(s)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return e}}class Zf{constructor(t){It(this,"options");It(this,"parser");this.options=t||ta}space(t){return""}code({text:t,lang:e,escaped:i}){var a;const r=(a=(e||"").match(/^\S*/))==null?void 0:a[0],s=t.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+tn(r)+'">'+(i?s:tn(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:tn(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,i=t.start;let r="";for(let o=0;o<t.items.length;o++){const l=t.items[o];r+=this.listitem(l)}const s=e?"ol":"ul",a=e&&i!==1?' start="'+i+'"':"";return"<"+s+a+`>
`+r+"</"+s+`>
`}listitem(t){let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&t.tokens[0].type==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",i="";for(let s=0;s<t.header.length;s++)i+=this.tablecell(t.header[s]);e+=this.tablerow({text:i});let r="";for(let s=0;s<t.rows.length;s++){const a=t.rows[s];i="";for(let o=0;o<a.length;o++)i+=this.tablecell(a[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){const r=this.parser.parseInline(i),s=Ub(t);if(s===null)return r;t=s;let a='<a href="'+t+'"';return e&&(a+=' title="'+e+'"'),a+=">"+r+"</a>",a}image({href:t,title:e,text:i}){const r=Ub(t);if(r===null)return i;t=r;let s=`<img src="${t}" alt="${i}"`;return e&&(s+=` title="${e}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}}class w0{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class In{constructor(t){It(this,"options");It(this,"renderer");It(this,"textRenderer");this.options=t||ta,this.options.renderer=this.options.renderer||new Zf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new w0}static parse(t,e){return new In(e).parse(t)}static parseInline(t,e){return new In(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=l||"";continue}}const a=s;switch(a.type){case"space":{i+=this.renderer.space(a);continue}case"hr":{i+=this.renderer.hr(a);continue}case"heading":{i+=this.renderer.heading(a);continue}case"code":{i+=this.renderer.code(a);continue}case"table":{i+=this.renderer.table(a);continue}case"blockquote":{i+=this.renderer.blockquote(a);continue}case"list":{i+=this.renderer.list(a);continue}case"html":{i+=this.renderer.html(a);continue}case"paragraph":{i+=this.renderer.paragraph(a);continue}case"text":{let o=a,l=this.renderer.text(o);for(;r+1<t.length&&t[r+1].type==="text";)o=t[++r],l+=`
`+this.renderer.text(o);e?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):i+=l;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(t,e){e=e||this.renderer;let i="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}const a=s;switch(a.type){case"escape":{i+=e.text(a);break}case"html":{i+=e.html(a);break}case"link":{i+=e.link(a);break}case"image":{i+=e.image(a);break}case"strong":{i+=e.strong(a);break}case"em":{i+=e.em(a);break}case"codespan":{i+=e.codespan(a);break}case"br":{i+=e.br(a);break}case"del":{i+=e.del(a);break}case"text":{i+=e.text(a);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class hu{constructor(t){It(this,"options");It(this,"block");this.options=t||ta}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?En.lex:En.lexInline}provideParser(){return this.block?In.parse:In.parseInline}}It(hu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class jH{constructor(...t){It(this,"defaults",g0());It(this,"options",this.setOptions);It(this,"parse",this.parseMarkdown(!0));It(this,"parseInline",this.parseMarkdown(!1));It(this,"Parser",In);It(this,"Renderer",Zf);It(this,"TextRenderer",w0);It(this,"Lexer",En);It(this,"Tokenizer",Kf);It(this,"Hooks",hu);this.use(...t)}walkTokens(t,e){var r,s;let i=[];for(const a of t)switch(i=i.concat(e.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)i=i.concat(this.walkTokens(l.tokens,e));for(const l of o.rows)for(const u of l)i=i.concat(this.walkTokens(u.tokens,e));break}case"list":{const o=a;i=i.concat(this.walkTokens(o.items,e));break}default:{const o=a;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const u=o[l].flat(1/0);i=i.concat(this.walkTokens(u,e))}):o.tokens&&(i=i.concat(this.walkTokens(o.tokens,e)))}}return i}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const a=e.renderers[s.name];a?e.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[s.level];a?a.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),i.renderer){const s=this.defaults.renderer||new Zf(this.defaults);for(const a in i.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const o=a,l=i.renderer[o],u=s[o];s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Kf(this.defaults);for(const a in i.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=i.tokenizer[o],u=s[o];s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new hu;for(const a in i.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const o=a,l=i.hooks[o],u=s[o];hu.passThroughHooks.has(a)?s[o]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(f=>u.call(s,f));const c=l.call(s,h);return u.call(s,c)}:s[o]=(...h)=>{let c=l.apply(s,h);return c===!1&&(c=u.apply(s,h)),c}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,a=i.walkTokens;r.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return En.lex(t,e??this.defaults)}parser(t,e){return In.parse(t,e??this.defaults)}parseMarkdown(t){return(i,r)=>{const s={...r},a={...this.defaults,...s},o=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const l=a.hooks?a.hooks.provideLexer():t?En.lex:En.lexInline,u=a.hooks?a.hooks.provideParser():t?In.parse:In.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(i):i).then(h=>l(h,a)).then(h=>a.hooks?a.hooks.processAllTokens(h):h).then(h=>a.walkTokens?Promise.all(this.walkTokens(h,a.walkTokens)).then(()=>h):h).then(h=>u(h,a)).then(h=>a.hooks?a.hooks.postprocess(h):h).catch(o);try{a.hooks&&(i=a.hooks.preprocess(i));let h=l(i,a);a.hooks&&(h=a.hooks.processAllTokens(h)),a.walkTokens&&this.walkTokens(h,a.walkTokens);let c=u(h,a);return a.hooks&&(c=a.hooks.postprocess(c)),c}catch(h){return o(h)}}}onError(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+tn(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(i);throw i}}}const Ys=new jH;function Et(n,t){return Ys.parse(n,t)}Et.options=Et.setOptions=function(n){return Ys.setOptions(n),Et.defaults=Ys.defaults,YR(Et.defaults),Et};Et.getDefaults=g0;Et.defaults=ta;Et.use=function(...n){return Ys.use(...n),Et.defaults=Ys.defaults,YR(Et.defaults),Et};Et.walkTokens=function(n,t){return Ys.walkTokens(n,t)};Et.parseInline=Ys.parseInline;Et.Parser=In;Et.parser=In.parse;Et.Renderer=Zf;Et.TextRenderer=w0;Et.Lexer=En;Et.lexer=En.lex;Et.Tokenizer=Kf;Et.Hooks=hu;Et.parse=Et;Et.options;Et.setOptions;Et.use;Et.walkTokens;Et.parseInline;In.parse;En.lex;const x0=Symbol.for("yaml.alias"),Hm=Symbol.for("yaml.document"),kr=Symbol.for("yaml.map"),QR=Symbol.for("yaml.pair"),mi=Symbol.for("yaml.scalar"),Xo=Symbol.for("yaml.seq"),Ln=Symbol.for("yaml.node.type"),Ko=n=>!!n&&typeof n=="object"&&n[Ln]===x0,Qd=n=>!!n&&typeof n=="object"&&n[Ln]===Hm,_h=n=>!!n&&typeof n=="object"&&n[Ln]===kr,ee=n=>!!n&&typeof n=="object"&&n[Ln]===QR,Ft=n=>!!n&&typeof n=="object"&&n[Ln]===mi,wh=n=>!!n&&typeof n=="object"&&n[Ln]===Xo;function qt(n){if(n&&typeof n=="object")switch(n[Ln]){case kr:case Xo:return!0}return!1}function te(n){if(n&&typeof n=="object")switch(n[Ln]){case x0:case kr:case mi:case Xo:return!0}return!1}const ZH=n=>(Ft(n)||qt(n))&&!!n.anchor,ys=Symbol("break visit"),qH=Symbol("skip children"),cu=Symbol("remove node");function $s(n,t){const e=JH(t);Qd(n)?Xa(null,n.contents,e,Object.freeze([n]))===cu&&(n.contents=null):Xa(null,n,e,Object.freeze([]))}$s.BREAK=ys;$s.SKIP=qH;$s.REMOVE=cu;function Xa(n,t,e,i){const r=QH(n,t,e,i);if(te(r)||ee(r))return tU(n,i,r),Xa(n,r,e,i);if(typeof r!="symbol"){if(qt(t)){i=Object.freeze(i.concat(t));for(let s=0;s<t.items.length;++s){const a=Xa(s,t.items[s],e,i);if(typeof a=="number")s=a-1;else{if(a===ys)return ys;a===cu&&(t.items.splice(s,1),s-=1)}}}else if(ee(t)){i=Object.freeze(i.concat(t));const s=Xa("key",t.key,e,i);if(s===ys)return ys;s===cu&&(t.key=null);const a=Xa("value",t.value,e,i);if(a===ys)return ys;a===cu&&(t.value=null)}}return r}function JH(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function QH(n,t,e,i){var r,s,a,o,l;if(typeof e=="function")return e(n,t,i);if(_h(t))return(r=e.Map)==null?void 0:r.call(e,n,t,i);if(wh(t))return(s=e.Seq)==null?void 0:s.call(e,n,t,i);if(ee(t))return(a=e.Pair)==null?void 0:a.call(e,n,t,i);if(Ft(t))return(o=e.Scalar)==null?void 0:o.call(e,n,t,i);if(Ko(t))return(l=e.Alias)==null?void 0:l.call(e,n,t,i)}function tU(n,t,e){const i=t[t.length-1];if(qt(i))i.items[n]=e;else if(ee(i))n==="key"?i.key=e:i.value=e;else if(Qd(i))i.contents=e;else{const r=Ko(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const eU={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},nU=n=>n.replace(/[!,[\]{}]/g,t=>eU[t]);class Ce{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ce.defaultYaml,t),this.tags=Object.assign({},Ce.defaultTags,e)}clone(){const t=new Ce(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Ce(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ce.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ce.defaultTags);break}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:Ce.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ce.defaultTags),this.atNextDocument=!1);const i=t.trim().split(/[ \t]+/),r=i.shift();switch(r){case"%TAG":{if(i.length!==2&&(e(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;const[s,a]=i;return this.tags[s]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return e(0,"%YAML directive should contain exactly one part"),!1;const[s]=i;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const a=/^\d+\.\d+$/.test(s);return e(6,`Unsupported YAML version ${s}`,a),!1}}default:return e(0,`Unknown directive ${r}`,!0),!1}}tagName(t,e){if(t==="!")return"!";if(t[0]!=="!")return e(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const a=t.slice(2,-1);return a==="!"||a==="!!"?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&e("Verbatim tags must end with a >"),a)}const[,i,r]=t.match(/^(.*!)([^!]*)$/s);r||e(`The ${t} tag has no suffix`);const s=this.tags[i];if(s)try{return s+decodeURIComponent(r)}catch(a){return e(String(a)),null}return i==="!"?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,i]of Object.entries(this.tags))if(t.startsWith(i))return e+nU(t.substring(i.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags);let r;if(t&&i.length>0&&te(t.contents)){const s={};$s(t.contents,(a,o)=>{te(o)&&o.tag&&(s[o.tag]=!0)}),r=Object.keys(s)}else r=[];for(const[s,a]of i)s==="!!"&&a==="tag:yaml.org,2002:"||(!t||r.some(o=>o.startsWith(a)))&&e.push(`%TAG ${s} ${a}`);return e.join(`
`)}}Ce.defaultYaml={explicit:!1,version:"1.2"};Ce.defaultTags={"!!":"tag:yaml.org,2002:"};function tM(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const e=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(e)}return!0}function eM(n){const t=new Set;return $s(n,{Value(e,i){i.anchor&&t.add(i.anchor)}}),t}function nM(n,t){for(let e=1;;++e){const i=`${n}${e}`;if(!t.has(i))return i}}function iU(n,t){const e=[],i=new Map;let r=null;return{onAnchor:s=>{e.push(s),r||(r=eM(n));const a=nM(t,r);return r.add(a),a},setAnchors:()=>{for(const s of e){const a=i.get(s);if(typeof a=="object"&&a.anchor&&(Ft(a.node)||qt(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=s,o}}},sourceObjects:i}}function Ka(n,t,e,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r){const a=i[r],o=Ka(n,i,String(r),a);o===void 0?delete i[r]:o!==a&&(i[r]=o)}else if(i instanceof Map)for(const r of Array.from(i.keys())){const s=i.get(r),a=Ka(n,i,r,s);a===void 0?i.delete(r):a!==s&&i.set(r,a)}else if(i instanceof Set)for(const r of Array.from(i)){const s=Ka(n,i,r,r);s===void 0?i.delete(r):s!==r&&(i.delete(r),i.add(s))}else for(const[r,s]of Object.entries(i)){const a=Ka(n,i,r,s);a===void 0?delete i[r]:a!==s&&(i[r]=a)}return n.call(t,e,i)}function Rn(n,t,e){if(Array.isArray(n))return n.map((i,r)=>Rn(i,String(r),e));if(n&&typeof n.toJSON=="function"){if(!e||!ZH(n))return n.toJSON(t,e);const i={aliasCount:0,count:1,res:void 0};e.anchors.set(n,i),e.onCreate=s=>{i.res=s,delete e.onCreate};const r=n.toJSON(t,e);return e.onCreate&&e.onCreate(r),r}return typeof n=="bigint"&&!(e!=null&&e.keep)?Number(n):n}class S0{constructor(t){Object.defineProperty(this,Ln,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:i,onAnchor:r,reviver:s}={}){if(!Qd(t))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:t,keep:!0,mapAsMap:e===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},o=Rn(this,"",a);if(typeof r=="function")for(const{count:l,res:u}of a.anchors.values())r(u,l);return typeof s=="function"?Ka(s,{"":o},"",o):o}}class b0 extends S0{constructor(t){super(x0),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return $s(t,{Node:(i,r)=>{if(r===this)return $s.BREAK;r.anchor===this.source&&(e=r)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:i,doc:r,maxAliasCount:s}=e,a=this.resolve(r);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=i.get(a);if(o||(Rn(a,null,e),o=i.get(a)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=Jc(r,a,i)),o.count*o.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(t,e,i){const r=`*${this.source}`;if(t){if(tM(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(t.implicitKey)return`${r} `}return r}}function Jc(n,t,e){if(Ko(t)){const i=t.resolve(n),r=e&&i&&e.get(i);return r?r.count*r.aliasCount:0}else if(qt(t)){let i=0;for(const r of t.items){const s=Jc(n,r,e);s>i&&(i=s)}return i}else if(ee(t)){const i=Jc(n,t.key,e),r=Jc(n,t.value,e);return Math.max(i,r)}return 1}const iM=n=>!n||typeof n!="function"&&typeof n!="object";class nt extends S0{constructor(t){super(mi),this.value=t}toJSON(t,e){return e!=null&&e.keep?this.value:Rn(this.value,t,e)}toString(){return String(this.value)}}nt.BLOCK_FOLDED="BLOCK_FOLDED";nt.BLOCK_LITERAL="BLOCK_LITERAL";nt.PLAIN="PLAIN";nt.QUOTE_DOUBLE="QUOTE_DOUBLE";nt.QUOTE_SINGLE="QUOTE_SINGLE";const rU="tag:yaml.org,2002:";function sU(n,t,e){if(t){const i=e.filter(s=>s.tag===t),r=i.find(s=>!s.format)??i[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return e.find(i=>{var r;return((r=i.identify)==null?void 0:r.call(i,n))&&!i.format})}function Xu(n,t,e){var c,f,d;if(Qd(n)&&(n=n.contents),te(n))return n;if(ee(n)){const g=(f=(c=e.schema[kr]).createNode)==null?void 0:f.call(c,e.schema,null,e);return g.items.push(n),g}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:i,onAnchor:r,onTagObj:s,schema:a,sourceObjects:o}=e;let l;if(i&&n&&typeof n=="object"){if(l=o.get(n),l)return l.anchor||(l.anchor=r(n)),new b0(l.anchor);l={anchor:null,node:null},o.set(n,l)}t!=null&&t.startsWith("!!")&&(t=rU+t.slice(2));let u=sU(n,t,a.tags);if(!u){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const g=new nt(n);return l&&(l.node=g),g}u=n instanceof Map?a[kr]:Symbol.iterator in Object(n)?a[Xo]:a[kr]}s&&(s(u),delete e.onTagObj);const h=u!=null&&u.createNode?u.createNode(e.schema,n,e):typeof((d=u==null?void 0:u.nodeClass)==null?void 0:d.from)=="function"?u.nodeClass.from(e.schema,n,e):new nt(n);return t?h.tag=t:u.default||(h.tag=u.tag),l&&(l.node=h),h}function qf(n,t,e){let i=e;for(let r=t.length-1;r>=0;--r){const s=t[r];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const a=[];a[s]=i,i=a}else i=new Map([[s,i]])}return Xu(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const $l=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class rM extends S0{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map(i=>te(i)||ee(i)?i.clone(t):i),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if($l(t))this.add(e);else{const[i,...r]=t,s=this.get(i,!0);if(qt(s))s.addIn(r,e);else if(s===void 0&&this.schema)this.set(i,qf(this.schema,r,e));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`)}}deleteIn(t){const[e,...i]=t;if(i.length===0)return this.delete(e);const r=this.get(e,!0);if(qt(r))return r.deleteIn(i);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${i}`)}getIn(t,e){const[i,...r]=t,s=this.get(i,!0);return r.length===0?!e&&Ft(s)?s.value:s:qt(s)?s.getIn(r,e):void 0}hasAllNullValues(t){return this.items.every(e=>{if(!ee(e))return!1;const i=e.value;return i==null||t&&Ft(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(t){const[e,...i]=t;if(i.length===0)return this.has(e);const r=this.get(e,!0);return qt(r)?r.hasIn(i):!1}setIn(t,e){const[i,...r]=t;if(r.length===0)this.set(i,e);else{const s=this.get(i,!0);if(qt(s))s.setIn(r,e);else if(s===void 0&&this.schema)this.set(i,qf(this.schema,r,e));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`)}}}const aU=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function Oi(n,t){return/^\n+$/.test(n)?n.substring(1):t?n.replace(/^(?! *$)/gm,t):n}const Rs=(n,t,e)=>n.endsWith(`
`)?Oi(e,t):e.includes(`
`)?`
`+Oi(e,t):(n.endsWith(" ")?"":" ")+e,sM="flow",Um="block",Qc="quoted";function tg(n,t,e="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:s=20,onFold:a,onOverflow:o}={}){if(!r||r<0)return n;r<s&&(s=0);const l=Math.max(1+s,1+r-t.length);if(n.length<=l)return n;const u=[],h={};let c=r-t.length;typeof i=="number"&&(i>r-Math.max(2,s)?u.push(0):c=r-i);let f,d,g=!1,v=-1,p=-1,m=-1;e===Um&&(v=Zb(n,v,t.length),v!==-1&&(c=v+l));for(let _;_=n[v+=1];){if(e===Qc&&_==="\\"){switch(p=v,n[v+1]){case"x":v+=3;break;case"u":v+=5;break;case"U":v+=9;break;default:v+=1}m=v}if(_===`
`)e===Um&&(v=Zb(n,v,t.length)),c=v+t.length+l,f=void 0;else{if(_===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){const w=n[v+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(f=v)}if(v>=c)if(f)u.push(f),c=f+l,f=void 0;else if(e===Qc){for(;d===" "||d==="	";)d=_,_=n[v+=1],g=!0;const w=v>m+1?v-2:p-1;if(h[w])return n;u.push(w),h[w]=!0,c=w+l,f=void 0}else g=!0}d=_}if(g&&o&&o(),u.length===0)return n;a&&a();let y=n.slice(0,u[0]);for(let _=0;_<u.length;++_){const w=u[_],S=u[_+1]||n.length;w===0?y=`
${t}${n.slice(0,S)}`:(e===Qc&&h[w]&&(y+=`${n[w]}\\`),y+=`
${t}${n.slice(w+1,S)}`)}return y}function Zb(n,t,e){let i=t,r=t+1,s=n[r];for(;s===" "||s==="	";)if(t<r+e)s=n[++t];else{do s=n[++t];while(s&&s!==`
`);i=t,r=t+1,s=n[r]}return i}const eg=(n,t)=>({indentAtStart:t?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),ng=n=>/^(%|---|\.\.\.)/m.test(n);function oU(n,t,e){if(!t||t<0)return!1;const i=t-e,r=n.length;if(r<=i)return!1;for(let s=0,a=0;s<r;++s)if(n[s]===`
`){if(s-a>i)return!0;if(a=s+1,r-a<=i)return!1}return!0}function fu(n,t){const e=JSON.stringify(n);if(t.options.doubleQuotedAsJSON)return e;const{implicitKey:i}=t,r=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(ng(n)?"  ":"");let a="",o=0;for(let l=0,u=e[l];u;u=e[++l])if(u===" "&&e[l+1]==="\\"&&e[l+2]==="n"&&(a+=e.slice(o,l)+"\\ ",l+=1,o=l,u="\\"),u==="\\")switch(e[l+1]){case"u":{a+=e.slice(o,l);const h=e.substr(l+2,4);switch(h){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:h.substr(0,2)==="00"?a+="\\x"+h.substr(2):a+=e.substr(l,6)}l+=5,o=l+1}break;case"n":if(i||e[l+2]==='"'||e.length<r)l+=1;else{for(a+=e.slice(o,l)+`

`;e[l+2]==="\\"&&e[l+3]==="n"&&e[l+4]!=='"';)a+=`
`,l+=2;a+=s,e[l+2]===" "&&(a+="\\"),l+=1,o=l+1}break;default:l+=1}return a=o?a+e.slice(o):e,i?a:tg(a,s,Qc,eg(t,!1))}function Xm(n,t){if(t.options.singleQuote===!1||t.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return fu(n,t);const e=t.indent||(ng(n)?"  ":""),i="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${e}`)+"'";return t.implicitKey?i:tg(i,e,sM,eg(t,!1))}function ja(n,t){const{singleQuote:e}=t.options;let i;if(e===!1)i=fu;else{const r=n.includes('"'),s=n.includes("'");r&&!s?i=Xm:s&&!r?i=fu:i=e?Xm:fu}return i(n,t)}let Km;try{Km=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Km=/\n+(?!\n|$)/g}function tf({comment:n,type:t,value:e},i,r,s){const{blockQuote:a,commentString:o,lineWidth:l}=i.options;if(!a||/\n[\t ]+$/.test(e)||/^\s*$/.test(e))return ja(e,i);const u=i.indent||(i.forceBlockIndent||ng(e)?"  ":""),h=a==="literal"?!0:a==="folded"||t===nt.BLOCK_FOLDED?!1:t===nt.BLOCK_LITERAL?!0:!oU(e,l,u.length);if(!e)return h?`|
`:`>
`;let c,f;for(f=e.length;f>0;--f){const x=e[f-1];if(x!==`
`&&x!=="	"&&x!==" ")break}let d=e.substring(f);const g=d.indexOf(`
`);g===-1?c="-":e===d||g!==d.length-1?(c="+",s&&s()):c="",d&&(e=e.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(Km,`$&${u}`));let v=!1,p,m=-1;for(p=0;p<e.length;++p){const x=e[p];if(x===" ")v=!0;else if(x===`
`)m=p;else break}let y=e.substring(0,m<p?m+1:p);y&&(e=e.substring(y.length),y=y.replace(/\n+/g,`$&${u}`));let w=(h?"|":">")+(v?u?"2":"1":"")+c;if(n&&(w+=" "+o(n.replace(/ ?[\r\n]+/g," ")),r&&r()),h)return e=e.replace(/\n+/g,`$&${u}`),`${w}
${u}${y}${e}${d}`;e=e.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);const S=tg(`${y}${e}${d}`,u,Um,eg(i,!0));return`${w}
${u}${S}`}function lU(n,t,e,i){const{type:r,value:s}=n,{actualString:a,implicitKey:o,indent:l,indentStep:u,inFlow:h}=t;if(o&&s.includes(`
`)||h&&/[[\]{},]/.test(s))return ja(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return o||h||!s.includes(`
`)?ja(s,t):tf(n,t,e,i);if(!o&&!h&&r!==nt.PLAIN&&s.includes(`
`))return tf(n,t,e,i);if(ng(s)){if(l==="")return t.forceBlockIndent=!0,tf(n,t,e,i);if(o&&l===u)return ja(s,t)}const c=s.replace(/\n+/g,`$&
${l}`);if(a){const f=v=>{var p;return v.default&&v.tag!=="tag:yaml.org,2002:str"&&((p=v.test)==null?void 0:p.test(c))},{compat:d,tags:g}=t.doc.schema;if(g.some(f)||d!=null&&d.some(f))return ja(s,t)}return o?c:tg(c,l,sM,eg(t,!1))}function T0(n,t,e,i){const{implicitKey:r,inFlow:s}=t,a=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:o}=n;o!==nt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=nt.QUOTE_DOUBLE);const l=h=>{switch(h){case nt.BLOCK_FOLDED:case nt.BLOCK_LITERAL:return r||s?ja(a.value,t):tf(a,t,e,i);case nt.QUOTE_DOUBLE:return fu(a.value,t);case nt.QUOTE_SINGLE:return Xm(a.value,t);case nt.PLAIN:return lU(a,t,e,i);default:return null}};let u=l(o);if(u===null){const{defaultKeyType:h,defaultStringType:c}=t.options,f=r&&h||c;if(u=l(f),u===null)throw new Error(`Unsupported default string type ${f}`)}return u}function aM(n,t){const e=Object.assign({blockQuote:!0,commentString:aU,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,t);let i;switch(e.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:n,flowCollectionPadding:e.flowCollectionPadding?" ":"",indent:"",indentStep:typeof e.indent=="number"?" ".repeat(e.indent):"  ",inFlow:i,options:e}}function uU(n,t){var r;if(t.tag){const s=n.filter(a=>a.tag===t.tag);if(s.length>0)return s.find(a=>a.format===t.format)??s[0]}let e,i;if(Ft(t)){i=t.value;let s=n.filter(a=>{var o;return(o=a.identify)==null?void 0:o.call(a,i)});if(s.length>1){const a=s.filter(o=>o.test);a.length>0&&(s=a)}e=s.find(a=>a.format===t.format)??s.find(a=>!a.format)}else i=t,e=n.find(s=>s.nodeClass&&i instanceof s.nodeClass);if(!e){const s=((r=i==null?void 0:i.constructor)==null?void 0:r.name)??typeof i;throw new Error(`Tag not resolved for ${s} value`)}return e}function hU(n,t,{anchors:e,doc:i}){if(!i.directives)return"";const r=[],s=(Ft(n)||qt(n))&&n.anchor;s&&tM(s)&&(e.add(s),r.push(`&${s}`));const a=n.tag?n.tag:t.default?null:t.tag;return a&&r.push(i.directives.tagString(a)),r.join(" ")}function Ro(n,t,e,i){var l;if(ee(n))return n.toString(t,e,i);if(Ko(n)){if(t.doc.directives)return n.toString(t);if((l=t.resolvedAliases)!=null&&l.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(n):t.resolvedAliases=new Set([n]),n=n.resolve(t.doc)}let r;const s=te(n)?n:t.doc.createNode(n,{onTagObj:u=>r=u});r||(r=uU(t.doc.schema.tags,s));const a=hU(s,r,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);const o=typeof r.stringify=="function"?r.stringify(s,t,e,i):Ft(s)?T0(s,t,e,i):s.toString(t,e,i);return a?Ft(s)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${t.indent}${o}`:o}function cU({key:n,value:t},e,i,r){const{allNullValues:s,doc:a,indent:o,indentStep:l,options:{commentString:u,indentSeq:h,simpleKeys:c}}=e;let f=te(n)&&n.comment||null;if(c){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(qt(n)||!te(n)&&typeof n=="object"){const b="With simple keys, collection cannot be used as a key value";throw new Error(b)}}let d=!c&&(!n||f&&t==null&&!e.inFlow||qt(n)||(Ft(n)?n.type===nt.BLOCK_FOLDED||n.type===nt.BLOCK_LITERAL:typeof n=="object"));e=Object.assign({},e,{allNullValues:!1,implicitKey:!d&&(c||!s),indent:o+l});let g=!1,v=!1,p=Ro(n,e,()=>g=!0,()=>v=!0);if(!d&&!e.inFlow&&p.length>1024){if(c)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(e.inFlow){if(s||t==null)return g&&i&&i(),p===""?"?":d?`? ${p}`:p}else if(s&&!c||t==null&&d)return p=`? ${p}`,f&&!g?p+=Rs(p,e.indent,u(f)):v&&r&&r(),p;g&&(f=null),d?(f&&(p+=Rs(p,e.indent,u(f))),p=`? ${p}
${o}:`):(p=`${p}:`,f&&(p+=Rs(p,e.indent,u(f))));let m,y,_;te(t)?(m=!!t.spaceBefore,y=t.commentBefore,_=t.comment):(m=!1,y=null,_=null,t&&typeof t=="object"&&(t=a.createNode(t))),e.implicitKey=!1,!d&&!f&&Ft(t)&&(e.indentAtStart=p.length+1),v=!1,!h&&l.length>=2&&!e.inFlow&&!d&&wh(t)&&!t.flow&&!t.tag&&!t.anchor&&(e.indent=e.indent.substring(2));let w=!1;const S=Ro(t,e,()=>w=!0,()=>v=!0);let x=" ";if(f||m||y){if(x=m?`
`:"",y){const b=u(y);x+=`
${Oi(b,e.indent)}`}S===""&&!e.inFlow?x===`
`&&(x=`

`):x+=`
${e.indent}`}else if(!d&&qt(t)){const b=S[0],T=S.indexOf(`
`),C=T!==-1,I=e.inFlow??t.flow??t.items.length===0;if(C||!I){let E=!1;if(C&&(b==="&"||b==="!")){let R=S.indexOf(" ");b==="&"&&R!==-1&&R<T&&S[R+1]==="!"&&(R=S.indexOf(" ",R+1)),(R===-1||T<R)&&(E=!0)}E||(x=`
${e.indent}`)}}else(S===""||S[0]===`
`)&&(x="");return p+=x+S,e.inFlow?w&&i&&i():_&&!w?p+=Rs(p,e.indent,u(_)):v&&r&&r(),p}function oM(n,t){(n==="debug"||n==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(t):console.warn(t))}const Mc="<<",$i={identify:n=>n===Mc||typeof n=="symbol"&&n.description===Mc,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new nt(Symbol(Mc)),{addToJSMap:lM}),stringify:()=>Mc},fU=(n,t)=>($i.identify(t)||Ft(t)&&(!t.type||t.type===nt.PLAIN)&&$i.identify(t.value))&&(n==null?void 0:n.doc.schema.tags.some(e=>e.tag===$i.tag&&e.default));function lM(n,t,e){if(e=n&&Ko(e)?e.resolve(n.doc):e,wh(e))for(const i of e.items)av(n,t,i);else if(Array.isArray(e))for(const i of e)av(n,t,i);else av(n,t,e)}function av(n,t,e){const i=n&&Ko(e)?e.resolve(n.doc):e;if(!_h(i))throw new Error("Merge sources must be maps or map aliases");const r=i.toJSON(null,n,Map);for(const[s,a]of r)t instanceof Map?t.has(s)||t.set(s,a):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0});return t}function uM(n,t,{key:e,value:i}){if(te(e)&&e.addToJSMap)e.addToJSMap(n,t,i);else if(fU(n,e))lM(n,t,i);else{const r=Rn(e,"",n);if(t instanceof Map)t.set(r,Rn(i,r,n));else if(t instanceof Set)t.add(r);else{const s=dU(e,r,n),a=Rn(i,s,n);s in t?Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[s]=a}}return t}function dU(n,t,e){if(t===null)return"";if(typeof t!="object")return String(t);if(te(n)&&(e!=null&&e.doc)){const i=aM(e.doc,{});i.anchors=new Set;for(const s of e.anchors.keys())i.anchors.add(s.anchor);i.inFlow=!0,i.inStringifyKey=!0;const r=n.toString(i);if(!e.mapKeyWarned){let s=JSON.stringify(r);s.length>40&&(s=s.substring(0,36)+'..."'),oM(e.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),e.mapKeyWarned=!0}return r}return JSON.stringify(t)}function C0(n,t,e){const i=Xu(n,void 0,e),r=Xu(t,void 0,e);return new Re(i,r)}class Re{constructor(t,e=null){Object.defineProperty(this,Ln,{value:QR}),this.key=t,this.value=e}clone(t){let{key:e,value:i}=this;return te(e)&&(e=e.clone(t)),te(i)&&(i=i.clone(t)),new Re(e,i)}toJSON(t,e){const i=e!=null&&e.mapAsMap?new Map:{};return uM(e,i,this)}toString(t,e,i){return t!=null&&t.doc?cU(this,t,e,i):JSON.stringify(this)}}function hM(n,t,e){return(t.inFlow??n.flow?pU:gU)(n,t,e)}function gU({comment:n,items:t},e,{blockItemPrefix:i,flowChars:r,itemIndent:s,onChompKeep:a,onComment:o}){const{indent:l,options:{commentString:u}}=e,h=Object.assign({},e,{indent:s,type:null});let c=!1;const f=[];for(let g=0;g<t.length;++g){const v=t[g];let p=null;if(te(v))!c&&v.spaceBefore&&f.push(""),Jf(e,f,v.commentBefore,c),v.comment&&(p=v.comment);else if(ee(v)){const y=te(v.key)?v.key:null;y&&(!c&&y.spaceBefore&&f.push(""),Jf(e,f,y.commentBefore,c))}c=!1;let m=Ro(v,h,()=>p=null,()=>c=!0);p&&(m+=Rs(m,s,u(p))),c&&p&&(c=!1),f.push(i+m)}let d;if(f.length===0)d=r.start+r.end;else{d=f[0];for(let g=1;g<f.length;++g){const v=f[g];d+=v?`
${l}${v}`:`
`}}return n?(d+=`
`+Oi(u(n),l),o&&o()):c&&a&&a(),d}function pU({items:n},t,{flowChars:e,itemIndent:i}){const{indent:r,indentStep:s,flowCollectionPadding:a,options:{commentString:o}}=t;i+=s;const l=Object.assign({},t,{indent:i,inFlow:!0,type:null});let u=!1,h=0;const c=[];for(let g=0;g<n.length;++g){const v=n[g];let p=null;if(te(v))v.spaceBefore&&c.push(""),Jf(t,c,v.commentBefore,!1),v.comment&&(p=v.comment);else if(ee(v)){const y=te(v.key)?v.key:null;y&&(y.spaceBefore&&c.push(""),Jf(t,c,y.commentBefore,!1),y.comment&&(u=!0));const _=te(v.value)?v.value:null;_?(_.comment&&(p=_.comment),_.commentBefore&&(u=!0)):v.value==null&&(y!=null&&y.comment)&&(p=y.comment)}p&&(u=!0);let m=Ro(v,l,()=>p=null);g<n.length-1&&(m+=","),p&&(m+=Rs(m,i,o(p))),!u&&(c.length>h||m.includes(`
`))&&(u=!0),c.push(m),h=c.length}const{start:f,end:d}=e;if(c.length===0)return f+d;if(!u){const g=c.reduce((v,p)=>v+p.length+2,2);u=t.options.lineWidth>0&&g>t.options.lineWidth}if(u){let g=f;for(const v of c)g+=v?`
${s}${r}${v}`:`
`;return`${g}
${r}${d}`}else return`${f}${a}${c.join(" ")}${a}${d}`}function Jf({indent:n,options:{commentString:t}},e,i,r){if(i&&r&&(i=i.replace(/^\n+/,"")),i){const s=Oi(t(i),n);e.push(s.trimStart())}}function Ms(n,t){const e=Ft(t)?t.value:t;for(const i of n)if(ee(i)&&(i.key===t||i.key===e||Ft(i.key)&&i.key.value===e))return i}class Tn extends rM{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(kr,t),this.items=[]}static from(t,e,i){const{keepUndefined:r,replacer:s}=i,a=new this(t),o=(l,u)=>{if(typeof s=="function")u=s.call(e,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||r)&&a.items.push(C0(l,u,i))};if(e instanceof Map)for(const[l,u]of e)o(l,u);else if(e&&typeof e=="object")for(const l of Object.keys(e))o(l,e[l]);return typeof t.sortMapEntries=="function"&&a.items.sort(t.sortMapEntries),a}add(t,e){var a;let i;ee(t)?i=t:!t||typeof t!="object"||!("key"in t)?i=new Re(t,t==null?void 0:t.value):i=new Re(t.key,t.value);const r=Ms(this.items,i.key),s=(a=this.schema)==null?void 0:a.sortMapEntries;if(r){if(!e)throw new Error(`Key ${i.key} already set`);Ft(r.value)&&iM(i.value)?r.value.value=i.value:r.value=i.value}else if(s){const o=this.items.findIndex(l=>s(i,l)<0);o===-1?this.items.push(i):this.items.splice(o,0,i)}else this.items.push(i)}delete(t){const e=Ms(this.items,t);return e?this.items.splice(this.items.indexOf(e),1).length>0:!1}get(t,e){const i=Ms(this.items,t),r=i==null?void 0:i.value;return(!e&&Ft(r)?r.value:r)??void 0}has(t){return!!Ms(this.items,t)}set(t,e){this.add(new Re(t,e),!0)}toJSON(t,e,i){const r=i?new i:e!=null&&e.mapAsMap?new Map:{};e!=null&&e.onCreate&&e.onCreate(r);for(const s of this.items)uM(e,r,s);return r}toString(t,e,i){if(!t)return JSON.stringify(this);for(const r of this.items)if(!ee(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),hM(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:i,onComment:e})}}const jo={collection:"map",default:!0,nodeClass:Tn,tag:"tag:yaml.org,2002:map",resolve(n,t){return _h(n)||t("Expected a mapping for this tag"),n},createNode:(n,t,e)=>Tn.from(n,t,e)};class Hs extends rM{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(Xo,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=Lc(t);return typeof e!="number"?!1:this.items.splice(e,1).length>0}get(t,e){const i=Lc(t);if(typeof i!="number")return;const r=this.items[i];return!e&&Ft(r)?r.value:r}has(t){const e=Lc(t);return typeof e=="number"&&e<this.items.length}set(t,e){const i=Lc(t);if(typeof i!="number")throw new Error(`Expected a valid index, not ${t}.`);const r=this.items[i];Ft(r)&&iM(e)?r.value=e:this.items[i]=e}toJSON(t,e){const i=[];e!=null&&e.onCreate&&e.onCreate(i);let r=0;for(const s of this.items)i.push(Rn(s,String(r++),e));return i}toString(t,e,i){return t?hM(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:i,onComment:e}):JSON.stringify(this)}static from(t,e,i){const{replacer:r}=i,s=new this(t);if(e&&Symbol.iterator in Object(e)){let a=0;for(let o of e){if(typeof r=="function"){const l=e instanceof Set?o:String(a++);o=r.call(e,l,o)}s.items.push(Xu(o,void 0,i))}}return s}}function Lc(n){let t=Ft(n)?n.value:n;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const Zo={collection:"seq",default:!0,nodeClass:Hs,tag:"tag:yaml.org,2002:seq",resolve(n,t){return wh(n)||t("Expected a sequence for this tag"),n},createNode:(n,t,e)=>Hs.from(n,t,e)},ig={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify(n,t,e,i){return t=Object.assign({actualString:!0},t),T0(n,t,e,i)}},rg={identify:n=>n==null,createNode:()=>new nt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new nt(null),stringify:({source:n},t)=>typeof n=="string"&&rg.test.test(n)?n:t.options.nullStr},E0={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>new nt(n[0]==="t"||n[0]==="T"),stringify({source:n,value:t},e){if(n&&E0.test.test(n)){const i=n[0]==="t"||n[0]==="T";if(t===i)return n}return t?e.options.trueStr:e.options.falseStr}};function jn({format:n,minFractionDigits:t,tag:e,value:i}){if(typeof i=="bigint")return String(i);const r=typeof i=="number"?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(i);if(!n&&t&&(!e||e==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let a=s.indexOf(".");a<0&&(a=s.length,s+=".");let o=t-(s.length-a-1);for(;o-- >0;)s+="0"}return s}const cM={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:jn},fM={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify(n){const t=Number(n.value);return isFinite(t)?t.toExponential():jn(n)}},dM={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(n){const t=new nt(parseFloat(n)),e=n.indexOf(".");return e!==-1&&n[n.length-1]==="0"&&(t.minFractionDigits=n.length-e-1),t},stringify:jn},sg=n=>typeof n=="bigint"||Number.isInteger(n),I0=(n,t,e,{intAsBigInt:i})=>i?BigInt(n):parseInt(n.substring(t),e);function gM(n,t,e){const{value:i}=n;return sg(i)&&i>=0?e+i.toString(t):jn(n)}const pM={identify:n=>sg(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(n,t,e)=>I0(n,2,8,e),stringify:n=>gM(n,8,"0o")},vM={identify:sg,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(n,t,e)=>I0(n,0,10,e),stringify:jn},mM={identify:n=>sg(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(n,t,e)=>I0(n,2,16,e),stringify:n=>gM(n,16,"0x")},vU=[jo,Zo,ig,rg,E0,pM,vM,mM,cM,fM,dM];function qb(n){return typeof n=="bigint"||Number.isInteger(n)}const Dc=({value:n})=>JSON.stringify(n),mU=[{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify:Dc},{identify:n=>n==null,createNode:()=>new nt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Dc},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:n=>n==="true",stringify:Dc},{identify:qb,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(n,t,{intAsBigInt:e})=>e?BigInt(n):parseInt(n,10),stringify:({value:n})=>qb(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:Dc}],yU={default:!0,tag:"",test:/^/,resolve(n,t){return t(`Unresolved plain scalar ${JSON.stringify(n)}`),n}},_U=[jo,Zo].concat(mU,yU),A0={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(n,t){if(typeof Buffer=="function")return Buffer.from(n,"base64");if(typeof atob=="function"){const e=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(e.length);for(let r=0;r<e.length;++r)i[r]=e.charCodeAt(r);return i}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),n},stringify({comment:n,type:t,value:e},i,r,s){const a=e;let o;if(typeof Buffer=="function")o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t||(t=nt.BLOCK_LITERAL),t!==nt.QUOTE_DOUBLE){const l=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),u=Math.ceil(o.length/l),h=new Array(u);for(let c=0,f=0;c<u;++c,f+=l)h[c]=o.substr(f,l);o=h.join(t===nt.BLOCK_LITERAL?`
`:" ")}return T0({comment:n,type:t,value:o},i,r,s)}};function yM(n,t){if(wh(n))for(let e=0;e<n.items.length;++e){let i=n.items[e];if(!ee(i)){if(_h(i)){i.items.length>1&&t("Each pair must have its own sequence indicator");const r=i.items[0]||new Re(new nt(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){const s=r.value??r.key;s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment}i=r}n.items[e]=ee(i)?i:new Re(i)}}else t("Expected a sequence for this tag");return n}function _M(n,t,e){const{replacer:i}=e,r=new Hs(n);r.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let a of t){typeof i=="function"&&(a=i.call(t,String(s++),a));let o,l;if(Array.isArray(a))if(a.length===2)o=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const u=Object.keys(a);if(u.length===1)o=u[0],l=a[o];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else o=a;r.items.push(C0(o,l,e))}return r}const R0={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:yM,createNode:_M};class co extends Hs{constructor(){super(),this.add=Tn.prototype.add.bind(this),this.delete=Tn.prototype.delete.bind(this),this.get=Tn.prototype.get.bind(this),this.has=Tn.prototype.has.bind(this),this.set=Tn.prototype.set.bind(this),this.tag=co.tag}toJSON(t,e){if(!e)return super.toJSON(t);const i=new Map;e!=null&&e.onCreate&&e.onCreate(i);for(const r of this.items){let s,a;if(ee(r)?(s=Rn(r.key,"",e),a=Rn(r.value,s,e)):s=Rn(r,"",e),i.has(s))throw new Error("Ordered maps must not include duplicate keys");i.set(s,a)}return i}static from(t,e,i){const r=_M(t,e,i),s=new this;return s.items=r.items,s}}co.tag="tag:yaml.org,2002:omap";const M0={collection:"seq",identify:n=>n instanceof Map,nodeClass:co,default:!1,tag:"tag:yaml.org,2002:omap",resolve(n,t){const e=yM(n,t),i=[];for(const{key:r}of e.items)Ft(r)&&(i.includes(r.value)?t(`Ordered maps must not include duplicate keys: ${r.value}`):i.push(r.value));return Object.assign(new co,e)},createNode:(n,t,e)=>co.from(n,t,e)};function wM({value:n,source:t},e){return t&&(n?xM:SM).test.test(t)?t:n?e.options.trueStr:e.options.falseStr}const xM={identify:n=>n===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new nt(!0),stringify:wM},SM={identify:n=>n===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new nt(!1),stringify:wM},wU={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:jn},xU={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify(n){const t=Number(n.value);return isFinite(t)?t.toExponential():jn(n)}},SU={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(n){const t=new nt(parseFloat(n.replace(/_/g,""))),e=n.indexOf(".");if(e!==-1){const i=n.substring(e+1).replace(/_/g,"");i[i.length-1]==="0"&&(t.minFractionDigits=i.length)}return t},stringify:jn},xh=n=>typeof n=="bigint"||Number.isInteger(n);function ag(n,t,e,{intAsBigInt:i}){const r=n[0];if((r==="-"||r==="+")&&(t+=1),n=n.substring(t).replace(/_/g,""),i){switch(e){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}const a=BigInt(n);return r==="-"?BigInt(-1)*a:a}const s=parseInt(n,e);return r==="-"?-1*s:s}function L0(n,t,e){const{value:i}=n;if(xh(i)){const r=i.toString(t);return i<0?"-"+e+r.substr(1):e+r}return jn(n)}const bU={identify:xh,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(n,t,e)=>ag(n,2,2,e),stringify:n=>L0(n,2,"0b")},TU={identify:xh,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(n,t,e)=>ag(n,1,8,e),stringify:n=>L0(n,8,"0")},CU={identify:xh,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(n,t,e)=>ag(n,0,10,e),stringify:jn},EU={identify:xh,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(n,t,e)=>ag(n,2,16,e),stringify:n=>L0(n,16,"0x")};class fo extends Tn{constructor(t){super(t),this.tag=fo.tag}add(t){let e;ee(t)?e=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?e=new Re(t.key,null):e=new Re(t,null),Ms(this.items,e.key)||this.items.push(e)}get(t,e){const i=Ms(this.items,t);return!e&&ee(i)?Ft(i.key)?i.key.value:i.key:i}set(t,e){if(typeof e!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof e}`);const i=Ms(this.items,t);i&&!e?this.items.splice(this.items.indexOf(i),1):!i&&e&&this.items.push(new Re(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,i){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,i);throw new Error("Set items must all have null values")}static from(t,e,i){const{replacer:r}=i,s=new this(t);if(e&&Symbol.iterator in Object(e))for(let a of e)typeof r=="function"&&(a=r.call(e,a,a)),s.items.push(C0(a,null,i));return s}}fo.tag="tag:yaml.org,2002:set";const D0={collection:"map",identify:n=>n instanceof Set,nodeClass:fo,default:!1,tag:"tag:yaml.org,2002:set",createNode:(n,t,e)=>fo.from(n,t,e),resolve(n,t){if(_h(n)){if(n.hasAllNullValues(!0))return Object.assign(new fo,n);t("Set items must all have null values")}else t("Expected a mapping for this tag");return n}};function k0(n,t){const e=n[0],i=e==="-"||e==="+"?n.substring(1):n,r=a=>t?BigInt(a):Number(a),s=i.replace(/_/g,"").split(":").reduce((a,o)=>a*r(60)+r(o),r(0));return e==="-"?r(-1)*s:s}function bM(n){let{value:t}=n,e=a=>a;if(typeof t=="bigint")e=a=>BigInt(a);else if(isNaN(t)||!isFinite(t))return jn(n);let i="";t<0&&(i="-",t*=e(-1));const r=e(60),s=[t%r];return t<60?s.unshift(0):(t=(t-s[0])/r,s.unshift(t%r),t>=60&&(t=(t-s[0])/r,s.unshift(t))),i+s.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const TM={identify:n=>typeof n=="bigint"||Number.isInteger(n),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(n,t,{intAsBigInt:e})=>k0(n,e),stringify:bM},CM={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:n=>k0(n,!1),stringify:bM},og={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(n){const t=n.match(og.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,e,i,r,s,a,o]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let u=Date.UTC(e,i-1,r,s||0,a||0,o||0,l);const h=t[8];if(h&&h!=="Z"){let c=k0(h,!1);Math.abs(c)<30&&(c*=60),u-=6e4*c}return new Date(u)},stringify:({value:n})=>n.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Jb=[jo,Zo,ig,rg,xM,SM,bU,TU,CU,EU,wU,xU,SU,A0,$i,M0,R0,D0,TM,CM,og],Qb=new Map([["core",vU],["failsafe",[jo,Zo,ig]],["json",_U],["yaml11",Jb],["yaml-1.1",Jb]]),tT={binary:A0,bool:E0,float:dM,floatExp:fM,floatNaN:cM,floatTime:CM,int:vM,intHex:mM,intOct:pM,intTime:TM,map:jo,merge:$i,null:rg,omap:M0,pairs:R0,seq:Zo,set:D0,timestamp:og},IU={"tag:yaml.org,2002:binary":A0,"tag:yaml.org,2002:merge":$i,"tag:yaml.org,2002:omap":M0,"tag:yaml.org,2002:pairs":R0,"tag:yaml.org,2002:set":D0,"tag:yaml.org,2002:timestamp":og};function ov(n,t,e){const i=Qb.get(t);if(i&&!n)return e&&!i.includes($i)?i.concat($i):i.slice();let r=i;if(!r)if(Array.isArray(n))r=[];else{const s=Array.from(Qb.keys()).filter(a=>a!=="yaml11").map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${s} or define customTags array`)}if(Array.isArray(n))for(const s of n)r=r.concat(s);else typeof n=="function"&&(r=n(r.slice()));return e&&(r=r.concat($i)),r.reduce((s,a)=>{const o=typeof a=="string"?tT[a]:a;if(!o){const l=JSON.stringify(a),u=Object.keys(tT).map(h=>JSON.stringify(h)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${u}`)}return s.includes(o)||s.push(o),s},[])}const AU=(n,t)=>n.key<t.key?-1:n.key>t.key?1:0;class P0{constructor({compat:t,customTags:e,merge:i,resolveKnownTags:r,schema:s,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(t)?ov(t,"compat"):t?ov(null,t):null,this.name=typeof s=="string"&&s||"core",this.knownTags=r?IU:{},this.tags=ov(e,this.name,i),this.toStringOptions=o??null,Object.defineProperty(this,kr,{value:jo}),Object.defineProperty(this,mi,{value:ig}),Object.defineProperty(this,Xo,{value:Zo}),this.sortMapEntries=typeof a=="function"?a:a===!0?AU:null}clone(){const t=Object.create(P0.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function RU(n,t){var l;const e=[];let i=t.directives===!0;if(t.directives!==!1&&n.directives){const u=n.directives.toString(n);u?(e.push(u),i=!0):n.directives.docStart&&(i=!0)}i&&e.push("---");const r=aM(n,t),{commentString:s}=r.options;if(n.commentBefore){e.length!==1&&e.unshift("");const u=s(n.commentBefore);e.unshift(Oi(u,""))}let a=!1,o=null;if(n.contents){if(te(n.contents)){if(n.contents.spaceBefore&&i&&e.push(""),n.contents.commentBefore){const c=s(n.contents.commentBefore);e.push(Oi(c,""))}r.forceBlockIndent=!!n.comment,o=n.contents.comment}const u=o?void 0:()=>a=!0;let h=Ro(n.contents,r,()=>o=null,u);o&&(h+=Rs(h,"",s(o))),(h[0]==="|"||h[0]===">")&&e[e.length-1]==="---"?e[e.length-1]=`--- ${h}`:e.push(h)}else e.push(Ro(n.contents,r));if((l=n.directives)!=null&&l.docEnd)if(n.comment){const u=s(n.comment);u.includes(`
`)?(e.push("..."),e.push(Oi(u,""))):e.push(`... ${u}`)}else e.push("...");else{let u=n.comment;u&&a&&(u=u.replace(/^\n+/,"")),u&&((!a||o)&&e[e.length-1]!==""&&e.push(""),e.push(Oi(s(u),"")))}return e.join(`
`)+`
`}class lg{constructor(t,e,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Ln,{value:Hm});let r=null;typeof e=="function"||Array.isArray(e)?r=e:i===void 0&&e&&(i=e,e=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=s;let{version:a}=s;i!=null&&i._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new Ce({version:a}),this.setSchema(a,i),this.contents=t===void 0?null:this.createNode(t,r,i)}clone(){const t=Object.create(lg.prototype,{[Ln]:{value:Hm}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=te(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){Ma(this.contents)&&this.contents.add(t)}addIn(t,e){Ma(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const i=eM(this);t.anchor=!e||i.has(e)?nM(e||"a",i):e}return new b0(t.anchor)}createNode(t,e,i){let r;if(typeof e=="function")t=e.call({"":t},"",t),r=e;else if(Array.isArray(e)){const p=y=>typeof y=="number"||y instanceof String||y instanceof Number,m=e.filter(p).map(String);m.length>0&&(e=e.concat(m)),r=e}else i===void 0&&e&&(i=e,e=void 0);const{aliasDuplicateObjects:s,anchorPrefix:a,flow:o,keepUndefined:l,onTagObj:u,tag:h}=i??{},{onAnchor:c,setAnchors:f,sourceObjects:d}=iU(this,a||"a"),g={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:c,onTagObj:u,replacer:r,schema:this.schema,sourceObjects:d},v=Xu(t,h,g);return o&&qt(v)&&(v.flow=!0),f(),v}createPair(t,e,i={}){const r=this.createNode(t,null,i),s=this.createNode(e,null,i);return new Re(r,s)}delete(t){return Ma(this.contents)?this.contents.delete(t):!1}deleteIn(t){return $l(t)?this.contents==null?!1:(this.contents=null,!0):Ma(this.contents)?this.contents.deleteIn(t):!1}get(t,e){return qt(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return $l(t)?!e&&Ft(this.contents)?this.contents.value:this.contents:qt(this.contents)?this.contents.getIn(t,e):void 0}has(t){return qt(this.contents)?this.contents.has(t):!1}hasIn(t){return $l(t)?this.contents!==void 0:qt(this.contents)?this.contents.hasIn(t):!1}set(t,e){this.contents==null?this.contents=qf(this.schema,[t],e):Ma(this.contents)&&this.contents.set(t,e)}setIn(t,e){$l(t)?this.contents=e:this.contents==null?this.contents=qf(this.schema,Array.from(t),e):Ma(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){typeof t=="number"&&(t=String(t));let i;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ce({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Ce({version:t}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{const r=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(e.schema instanceof Object)this.schema=e.schema;else if(i)this.schema=new P0(Object.assign(i,e));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:e,mapAsMap:i,maxAliasCount:r,onAnchor:s,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!t,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=Rn(this.contents,e??"",o);if(typeof s=="function")for(const{count:u,res:h}of o.anchors.values())s(h,u);return typeof a=="function"?Ka(a,{"":l},"",l):l}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return RU(this,t)}}function Ma(n){if(qt(n))return!0;throw new Error("Expected a YAML collection as document contents")}class EM extends Error{constructor(t,e,i,r){super(),this.name=t,this.code=i,this.message=r,this.pos=e}}class Hl extends EM{constructor(t,e,i){super("YAMLParseError",t,e,i)}}class MU extends EM{constructor(t,e,i){super("YAMLWarning",t,e,i)}}const eT=(n,t)=>e=>{if(e.pos[0]===-1)return;e.linePos=e.pos.map(o=>t.linePos(o));const{line:i,col:r}=e.linePos[0];e.message+=` at line ${i}, column ${r}`;let s=r-1,a=n.substring(t.lineStarts[i-1],t.lineStarts[i]).replace(/[\n\r]+$/,"");if(s>=60&&a.length>80){const o=Math.min(s-39,a.length-79);a=""+a.substring(o),s-=o-1}if(a.length>80&&(a=a.substring(0,79)+""),i>1&&/^ *$/.test(a.substring(0,s))){let o=n.substring(t.lineStarts[i-2],t.lineStarts[i-1]);o.length>80&&(o=o.substring(0,79)+`
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const l=e.linePos[1];l&&l.line===i&&l.col>r&&(o=Math.max(1,Math.min(l.col-r,80-s)));const u=" ".repeat(s)+"^".repeat(o);e.message+=`:

${a}
${u}
`}};function Mo(n,{flow:t,indicator:e,next:i,offset:r,onError:s,parentIndent:a,startOnNewline:o}){let l=!1,u=o,h=o,c="",f="",d=!1,g=!1,v=null,p=null,m=null,y=null,_=null,w=null,S=null;for(const T of n)switch(g&&(T.type!=="space"&&T.type!=="newline"&&T.type!=="comma"&&s(T.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g=!1),v&&(u&&T.type!=="comment"&&T.type!=="newline"&&s(v,"TAB_AS_INDENT","Tabs are not allowed as indentation"),v=null),T.type){case"space":!t&&(e!=="doc-start"||(i==null?void 0:i.type)!=="flow-collection")&&T.source.includes("	")&&(v=T),h=!0;break;case"comment":{h||s(T,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const C=T.source.substring(1)||" ";c?c+=f+C:c=C,f="",u=!1;break}case"newline":u?c?c+=T.source:l=!0:f+=T.source,u=!0,d=!0,(p||m)&&(y=T),h=!0;break;case"anchor":p&&s(T,"MULTIPLE_ANCHORS","A node can have at most one anchor"),T.source.endsWith(":")&&s(T.offset+T.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),p=T,S===null&&(S=T.offset),u=!1,h=!1,g=!0;break;case"tag":{m&&s(T,"MULTIPLE_TAGS","A node can have at most one tag"),m=T,S===null&&(S=T.offset),u=!1,h=!1,g=!0;break}case e:(p||m)&&s(T,"BAD_PROP_ORDER",`Anchors and tags must be after the ${T.source} indicator`),w&&s(T,"UNEXPECTED_TOKEN",`Unexpected ${T.source} in ${t??"collection"}`),w=T,u=e==="seq-item-ind"||e==="explicit-key-ind",h=!1;break;case"comma":if(t){_&&s(T,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),_=T,u=!1,h=!1;break}default:s(T,"UNEXPECTED_TOKEN",`Unexpected ${T.type} token`),u=!1,h=!1}const x=n[n.length-1],b=x?x.offset+x.source.length:r;return g&&i&&i.type!=="space"&&i.type!=="newline"&&i.type!=="comma"&&(i.type!=="scalar"||i.source!=="")&&s(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),v&&(u&&v.indent<=a||(i==null?void 0:i.type)==="block-map"||(i==null?void 0:i.type)==="block-seq")&&s(v,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:_,found:w,spaceBefore:l,comment:c,hasNewline:d,anchor:p,tag:m,newlineAfterProp:y,end:b,start:S??b}}function Ku(n){if(!n)return null;switch(n.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(n.source.includes(`
`))return!0;if(n.end){for(const t of n.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of n.items){for(const e of t.start)if(e.type==="newline")return!0;if(t.sep){for(const e of t.sep)if(e.type==="newline")return!0}if(Ku(t.key)||Ku(t.value))return!0}return!1;default:return!0}}function jm(n,t,e){if((t==null?void 0:t.type)==="flow-collection"){const i=t.end[0];i.indent===n&&(i.source==="]"||i.source==="}")&&Ku(t)&&e(i,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function IM(n,t,e){const{uniqueKeys:i}=n.options;if(i===!1)return!1;const r=typeof i=="function"?i:(s,a)=>s===a||Ft(s)&&Ft(a)&&s.value===a.value;return t.some(s=>r(s.key,e))}const nT="All mapping items must start at the same column";function LU({composeNode:n,composeEmptyNode:t},e,i,r,s){var h;const a=(s==null?void 0:s.nodeClass)??Tn,o=new a(e.schema);e.atRoot&&(e.atRoot=!1);let l=i.offset,u=null;for(const c of i.items){const{start:f,key:d,sep:g,value:v}=c,p=Mo(f,{indicator:"explicit-key-ind",next:d??(g==null?void 0:g[0]),offset:l,onError:r,parentIndent:i.indent,startOnNewline:!0}),m=!p.found;if(m){if(d&&(d.type==="block-seq"?r(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in d&&d.indent!==i.indent&&r(l,"BAD_INDENT",nT)),!p.anchor&&!p.tag&&!g){u=p.end,p.comment&&(o.comment?o.comment+=`
`+p.comment:o.comment=p.comment);continue}(p.newlineAfterProp||Ku(d))&&r(d??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((h=p.found)==null?void 0:h.indent)!==i.indent&&r(l,"BAD_INDENT",nT);e.atKey=!0;const y=p.end,_=d?n(e,d,p,r):t(e,y,f,null,p,r);e.schema.compat&&jm(i.indent,d,r),e.atKey=!1,IM(e,o.items,_)&&r(y,"DUPLICATE_KEY","Map keys must be unique");const w=Mo(g??[],{indicator:"map-value-ind",next:v,offset:_.range[2],onError:r,parentIndent:i.indent,startOnNewline:!d||d.type==="block-scalar"});if(l=w.end,w.found){m&&((v==null?void 0:v.type)==="block-map"&&!w.hasNewline&&r(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),e.options.strict&&p.start<w.found.offset-1024&&r(_.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const S=v?n(e,v,w,r):t(e,l,g,null,w,r);e.schema.compat&&jm(i.indent,v,r),l=S.range[2];const x=new Re(_,S);e.options.keepSourceTokens&&(x.srcToken=c),o.items.push(x)}else{m&&r(_.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),w.comment&&(_.comment?_.comment+=`
`+w.comment:_.comment=w.comment);const S=new Re(_);e.options.keepSourceTokens&&(S.srcToken=c),o.items.push(S)}}return u&&u<l&&r(u,"IMPOSSIBLE","Map comment with trailing content"),o.range=[i.offset,l,u??l],o}function DU({composeNode:n,composeEmptyNode:t},e,i,r,s){const a=(s==null?void 0:s.nodeClass)??Hs,o=new a(e.schema);e.atRoot&&(e.atRoot=!1),e.atKey&&(e.atKey=!1);let l=i.offset,u=null;for(const{start:h,value:c}of i.items){const f=Mo(h,{indicator:"seq-item-ind",next:c,offset:l,onError:r,parentIndent:i.indent,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||c)c&&c.type==="block-seq"?r(f.end,"BAD_INDENT","All sequence items must start at the same column"):r(l,"MISSING_CHAR","Sequence item without - indicator");else{u=f.end,f.comment&&(o.comment=f.comment);continue}const d=c?n(e,c,f,r):t(e,f.end,h,null,f,r);e.schema.compat&&jm(i.indent,c,r),l=d.range[2],o.items.push(d)}return o.range=[i.offset,l,u??l],o}function Sh(n,t,e,i){let r="";if(n){let s=!1,a="";for(const o of n){const{source:l,type:u}=o;switch(u){case"space":s=!0;break;case"comment":{e&&!s&&i(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const h=l.substring(1)||" ";r?r+=a+h:r=h,a="";break}case"newline":r&&(a+=l),s=!0;break;default:i(o,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}t+=l.length}}return{comment:r,offset:t}}const lv="Block collections are not allowed within flow collections",uv=n=>n&&(n.type==="block-map"||n.type==="block-seq");function kU({composeNode:n,composeEmptyNode:t},e,i,r,s){const a=i.start.source==="{",o=a?"flow map":"flow sequence",l=(s==null?void 0:s.nodeClass)??(a?Tn:Hs),u=new l(e.schema);u.flow=!0;const h=e.atRoot;h&&(e.atRoot=!1),e.atKey&&(e.atKey=!1);let c=i.offset+i.start.source.length;for(let p=0;p<i.items.length;++p){const m=i.items[p],{start:y,key:_,sep:w,value:S}=m,x=Mo(y,{flow:o,indicator:"explicit-key-ind",next:_??(w==null?void 0:w[0]),offset:c,onError:r,parentIndent:i.indent,startOnNewline:!1});if(!x.found){if(!x.anchor&&!x.tag&&!w&&!S){p===0&&x.comma?r(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):p<i.items.length-1&&r(x.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),x.comment&&(u.comment?u.comment+=`
`+x.comment:u.comment=x.comment),c=x.end;continue}!a&&e.options.strict&&Ku(_)&&r(_,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(p===0)x.comma&&r(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(x.comma||r(x.start,"MISSING_CHAR",`Missing , between ${o} items`),x.comment){let b="";t:for(const T of y)switch(T.type){case"comma":case"space":break;case"comment":b=T.source.substring(1);break t;default:break t}if(b){let T=u.items[u.items.length-1];ee(T)&&(T=T.value??T.key),T.comment?T.comment+=`
`+b:T.comment=b,x.comment=x.comment.substring(b.length+1)}}if(!a&&!w&&!x.found){const b=S?n(e,S,x,r):t(e,x.end,w,null,x,r);u.items.push(b),c=b.range[2],uv(S)&&r(b.range,"BLOCK_IN_FLOW",lv)}else{e.atKey=!0;const b=x.end,T=_?n(e,_,x,r):t(e,b,y,null,x,r);uv(_)&&r(T.range,"BLOCK_IN_FLOW",lv),e.atKey=!1;const C=Mo(w??[],{flow:o,indicator:"map-value-ind",next:S,offset:T.range[2],onError:r,parentIndent:i.indent,startOnNewline:!1});if(C.found){if(!a&&!x.found&&e.options.strict){if(w)for(const R of w){if(R===C.found)break;if(R.type==="newline"){r(R,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}x.start<C.found.offset-1024&&r(C.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else S&&("source"in S&&S.source&&S.source[0]===":"?r(S,"MISSING_CHAR",`Missing space after : in ${o}`):r(C.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const I=S?n(e,S,C,r):C.found?t(e,C.end,w,null,C,r):null;I?uv(S)&&r(I.range,"BLOCK_IN_FLOW",lv):C.comment&&(T.comment?T.comment+=`
`+C.comment:T.comment=C.comment);const E=new Re(T,I);if(e.options.keepSourceTokens&&(E.srcToken=m),a){const R=u;IM(e,R.items,T)&&r(b,"DUPLICATE_KEY","Map keys must be unique"),R.items.push(E)}else{const R=new Tn(e.schema);R.flow=!0,R.items.push(E);const L=(I??T).range;R.range=[T.range[0],L[1],L[2]],u.items.push(R)}c=I?I.range[2]:C.end}}const f=a?"}":"]",[d,...g]=i.end;let v=c;if(d&&d.source===f)v=d.offset+d.source.length;else{const p=o[0].toUpperCase()+o.substring(1),m=h?`${p} must end with a ${f}`:`${p} in block collection must be sufficiently indented and end with a ${f}`;r(c,h?"MISSING_CHAR":"BAD_INDENT",m),d&&d.source.length!==1&&g.unshift(d)}if(g.length>0){const p=Sh(g,v,e.options.strict,r);p.comment&&(u.comment?u.comment+=`
`+p.comment:u.comment=p.comment),u.range=[i.offset,v,p.offset]}else u.range=[i.offset,v,v];return u}function hv(n,t,e,i,r,s){const a=e.type==="block-map"?LU(n,t,e,i,s):e.type==="block-seq"?DU(n,t,e,i,s):kU(n,t,e,i,s),o=a.constructor;return r==="!"||r===o.tagName?(a.tag=o.tagName,a):(r&&(a.tag=r),a)}function PU(n,t,e,i,r){var f;const s=i.tag,a=s?t.directives.tagName(s.source,d=>r(s,"TAG_RESOLVE_FAILED",d)):null;if(e.type==="block-seq"){const{anchor:d,newlineAfterProp:g}=i,v=d&&s?d.offset>s.offset?d:s:d??s;v&&(!g||g.offset<v.offset)&&r(v,"MISSING_CHAR","Missing newline after block sequence props")}const o=e.type==="block-map"?"map":e.type==="block-seq"?"seq":e.start.source==="{"?"map":"seq";if(!s||!a||a==="!"||a===Tn.tagName&&o==="map"||a===Hs.tagName&&o==="seq")return hv(n,t,e,r,a);let l=t.schema.tags.find(d=>d.tag===a&&d.collection===o);if(!l){const d=t.schema.knownTags[a];if(d&&d.collection===o)t.schema.tags.push(Object.assign({},d,{default:!1})),l=d;else return d!=null&&d.collection?r(s,"BAD_COLLECTION_TYPE",`${d.tag} used for ${o} collection, but expects ${d.collection}`,!0):r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),hv(n,t,e,r,a)}const u=hv(n,t,e,r,a,l),h=((f=l.resolve)==null?void 0:f.call(l,u,d=>r(s,"TAG_RESOLVE_FAILED",d),t.options))??u,c=te(h)?h:new nt(h);return c.range=u.range,c.tag=a,l!=null&&l.format&&(c.format=l.format),c}function OU(n,t,e){const i=t.offset,r=NU(t,n.options.strict,e);if(!r)return{value:"",type:null,comment:"",range:[i,i,i]};const s=r.mode===">"?nt.BLOCK_FOLDED:nt.BLOCK_LITERAL,a=t.source?FU(t.source):[];let o=a.length;for(let v=a.length-1;v>=0;--v){const p=a[v][1];if(p===""||p==="\r")o=v;else break}if(o===0){const v=r.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let p=i+r.length;return t.source&&(p+=t.source.length),{value:v,type:s,comment:r.comment,range:[i,p,p]}}let l=t.indent+r.indent,u=t.offset+r.length,h=0;for(let v=0;v<o;++v){const[p,m]=a[v];if(m===""||m==="\r")r.indent===0&&p.length>l&&(l=p.length);else{p.length<l&&e(u+p.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(l=p.length),h=v,l===0&&!n.atRoot&&e(u,"BAD_INDENT","Block scalar values in collections must be indented");break}u+=p.length+m.length+1}for(let v=a.length-1;v>=o;--v)a[v][0].length>l&&(o=v+1);let c="",f="",d=!1;for(let v=0;v<h;++v)c+=a[v][0].slice(l)+`
`;for(let v=h;v<o;++v){let[p,m]=a[v];u+=p.length+m.length+1;const y=m[m.length-1]==="\r";if(y&&(m=m.slice(0,-1)),m&&p.length<l){const w=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;e(u-m.length-(y?2:1),"BAD_INDENT",w),p=""}s===nt.BLOCK_LITERAL?(c+=f+p.slice(l)+m,f=`
`):p.length>l||m[0]==="	"?(f===" "?f=`
`:!d&&f===`
`&&(f=`

`),c+=f+p.slice(l)+m,f=`
`,d=!0):m===""?f===`
`?c+=`
`:f=`
`:(c+=f+m,f=" ",d=!1)}switch(r.chomp){case"-":break;case"+":for(let v=o;v<a.length;++v)c+=`
`+a[v][0].slice(l);c[c.length-1]!==`
`&&(c+=`
`);break;default:c+=`
`}const g=i+r.length+t.source.length;return{value:c,type:s,comment:r.comment,range:[i,g,g]}}function NU({offset:n,props:t},e,i){if(t[0].type!=="block-scalar-header")return i(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=t[0],s=r[0];let a=0,o="",l=-1;for(let f=1;f<r.length;++f){const d=r[f];if(!o&&(d==="-"||d==="+"))o=d;else{const g=Number(d);!a&&g?a=g:l===-1&&(l=n+f)}}l!==-1&&i(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let u=!1,h="",c=r.length;for(let f=1;f<t.length;++f){const d=t[f];switch(d.type){case"space":u=!0;case"newline":c+=d.source.length;break;case"comment":e&&!u&&i(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),c+=d.source.length,h=d.source.substring(1);break;case"error":i(d,"UNEXPECTED_TOKEN",d.message),c+=d.source.length;break;default:{const g=`Unexpected token in block scalar header: ${d.type}`;i(d,"UNEXPECTED_TOKEN",g);const v=d.source;v&&typeof v=="string"&&(c+=v.length)}}}return{mode:s,indent:a,chomp:o,comment:h,length:c}}function FU(n){const t=n.split(/\n( *)/),e=t[0],i=e.match(/^( *)/),s=[i!=null&&i[1]?[i[1],e.slice(i[1].length)]:["",e]];for(let a=1;a<t.length;a+=2)s.push([t[a],t[a+1]]);return s}function BU(n,t,e){const{offset:i,type:r,source:s,end:a}=n;let o,l;const u=(f,d,g)=>e(i+f,d,g);switch(r){case"scalar":o=nt.PLAIN,l=GU(s,u);break;case"single-quoted-scalar":o=nt.QUOTE_SINGLE,l=zU(s,u);break;case"double-quoted-scalar":o=nt.QUOTE_DOUBLE,l=VU(s,u);break;default:return e(n,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[i,i+s.length,i+s.length]}}const h=i+s.length,c=Sh(a,h,t,e);return{value:l,type:o,comment:c.comment,range:[i,h,c.offset]}}function GU(n,t){let e="";switch(n[0]){case"	":e="a tab character";break;case",":e="flow indicator character ,";break;case"%":e="directive indicator character %";break;case"|":case">":{e=`block scalar indicator ${n[0]}`;break}case"@":case"`":{e=`reserved character ${n[0]}`;break}}return e&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${e}`),AM(n)}function zU(n,t){return(n[n.length-1]!=="'"||n.length===1)&&t(n.length,"MISSING_CHAR","Missing closing 'quote"),AM(n.slice(1,-1)).replace(/''/g,"'")}function AM(n){let t,e;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),e=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,e=/[ \t]*(.*?)[ \t]*\r?\n/sy}let i=t.exec(n);if(!i)return n;let r=i[1],s=" ",a=t.lastIndex;for(e.lastIndex=a;i=e.exec(n);)i[1]===""?s===`
`?r+=s:s=`
`:(r+=s+i[1],s=" "),a=e.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,i=o.exec(n),r+s+((i==null?void 0:i[1])??"")}function VU(n,t){let e="";for(let i=1;i<n.length-1;++i){const r=n[i];if(!(r==="\r"&&n[i+1]===`
`))if(r===`
`){const{fold:s,offset:a}=WU(n,i);e+=s,i=a}else if(r==="\\"){let s=n[++i];const a=YU[s];if(a)e+=a;else if(s===`
`)for(s=n[i+1];s===" "||s==="	";)s=n[++i+1];else if(s==="\r"&&n[i+1]===`
`)for(s=n[++i+1];s===" "||s==="	";)s=n[++i+1];else if(s==="x"||s==="u"||s==="U"){const o={x:2,u:4,U:8}[s];e+=$U(n,i+1,o,t),i+=o}else{const o=n.substr(i-1,2);t(i-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),e+=o}}else if(r===" "||r==="	"){const s=i;let a=n[i+1];for(;a===" "||a==="	";)a=n[++i+1];a!==`
`&&!(a==="\r"&&n[i+2]===`
`)&&(e+=i>s?n.slice(s,i+1):r)}else e+=r}return(n[n.length-1]!=='"'||n.length===1)&&t(n.length,"MISSING_CHAR",'Missing closing "quote'),e}function WU(n,t){let e="",i=n[t+1];for(;(i===" "||i==="	"||i===`
`||i==="\r")&&!(i==="\r"&&n[t+2]!==`
`);)i===`
`&&(e+=`
`),t+=1,i=n[t+1];return e||(e=" "),{fold:e,offset:t}}const YU={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function $U(n,t,e,i){const r=n.substr(t,e),a=r.length===e&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(a)){const o=n.substr(t-2,e+2);return i(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function RM(n,t,e,i){const{value:r,type:s,comment:a,range:o}=t.type==="block-scalar"?OU(n,t,i):BU(t,n.options.strict,i),l=e?n.directives.tagName(e.source,c=>i(e,"TAG_RESOLVE_FAILED",c)):null;let u;n.options.stringKeys&&n.atKey?u=n.schema[mi]:l?u=HU(n.schema,r,l,e,i):t.type==="scalar"?u=UU(n,r,t,i):u=n.schema[mi];let h;try{const c=u.resolve(r,f=>i(e??t,"TAG_RESOLVE_FAILED",f),n.options);h=Ft(c)?c:new nt(c)}catch(c){const f=c instanceof Error?c.message:String(c);i(e??t,"TAG_RESOLVE_FAILED",f),h=new nt(r)}return h.range=o,h.source=r,s&&(h.type=s),l&&(h.tag=l),u.format&&(h.format=u.format),a&&(h.comment=a),h}function HU(n,t,e,i,r){var o;if(e==="!")return n[mi];const s=[];for(const l of n.tags)if(!l.collection&&l.tag===e)if(l.default&&l.test)s.push(l);else return l;for(const l of s)if((o=l.test)!=null&&o.test(t))return l;const a=n.knownTags[e];return a&&!a.collection?(n.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${e}`,e!=="tag:yaml.org,2002:str"),n[mi])}function UU({atKey:n,directives:t,schema:e},i,r,s){const a=e.tags.find(o=>{var l;return(o.default===!0||n&&o.default==="key")&&((l=o.test)==null?void 0:l.test(i))})||e[mi];if(e.compat){const o=e.compat.find(l=>{var u;return l.default&&((u=l.test)==null?void 0:u.test(i))})??e[mi];if(a.tag!==o.tag){const l=t.tagString(a.tag),u=t.tagString(o.tag),h=`Value may be parsed as either ${l} or ${u}`;s(r,"TAG_RESOLVE_FAILED",h,!0)}}return a}function XU(n,t,e){if(t){e===null&&(e=t.length);for(let i=e-1;i>=0;--i){let r=t[i];switch(r.type){case"space":case"comment":case"newline":n-=r.source.length;continue}for(r=t[++i];(r==null?void 0:r.type)==="space";)n+=r.source.length,r=t[++i];break}}return n}const KU={composeNode:MM,composeEmptyNode:O0};function MM(n,t,e,i){const r=n.atKey,{spaceBefore:s,comment:a,anchor:o,tag:l}=e;let u,h=!0;switch(t.type){case"alias":u=jU(n,t,i),(o||l)&&i(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=RM(n,t,l,i),o&&(u.anchor=o.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=PU(KU,n,t,e,i),o&&(u.anchor=o.source.substring(1));break;default:{const c=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;i(t,"UNEXPECTED_TOKEN",c),u=O0(n,t.offset,void 0,null,e,i),h=!1}}return o&&u.anchor===""&&i(o,"BAD_ALIAS","Anchor cannot be an empty string"),r&&n.options.stringKeys&&(!Ft(u)||typeof u.value!="string"||u.tag&&u.tag!=="tag:yaml.org,2002:str")&&i(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(u.spaceBefore=!0),a&&(t.type==="scalar"&&t.source===""?u.comment=a:u.commentBefore=a),n.options.keepSourceTokens&&h&&(u.srcToken=t),u}function O0(n,t,e,i,{spaceBefore:r,comment:s,anchor:a,tag:o,end:l},u){const h={type:"scalar",offset:XU(t,e,i),indent:-1,source:""},c=RM(n,h,o,u);return a&&(c.anchor=a.source.substring(1),c.anchor===""&&u(a,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(c.spaceBefore=!0),s&&(c.comment=s,c.range[2]=l),c}function jU({options:n},{offset:t,source:e,end:i},r){const s=new b0(e.substring(1));s.source===""&&r(t,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&r(t+e.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=t+e.length,o=Sh(i,a,n.strict,r);return s.range=[t,a,o.offset],o.comment&&(s.comment=o.comment),s}function ZU(n,t,{offset:e,start:i,value:r,end:s},a){const o=Object.assign({_directives:t},n),l=new lg(void 0,o),u={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=Mo(i,{indicator:"doc-start",next:r??(s==null?void 0:s[0]),offset:e,onError:a,parentIndent:0,startOnNewline:!0});h.found&&(l.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!h.hasNewline&&a(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?MM(u,r,h,a):O0(u,h.end,i,null,h,a);const c=l.contents.range[2],f=Sh(s,c,!1,a);return f.comment&&(l.comment=f.comment),l.range=[e,c,f.offset],l}function Rl(n){if(typeof n=="number")return[n,n+1];if(Array.isArray(n))return n.length===2?n:[n[0],n[1]];const{offset:t,source:e}=n;return[t,t+(typeof e=="string"?e.length:1)]}function iT(n){var r;let t="",e=!1,i=!1;for(let s=0;s<n.length;++s){const a=n[s];switch(a[0]){case"#":t+=(t===""?"":i?`

`:`
`)+(a.substring(1)||" "),e=!0,i=!1;break;case"%":((r=n[s+1])==null?void 0:r[0])!=="#"&&(s+=1),e=!1;break;default:e||(i=!0),e=!1}}return{comment:t,afterEmptyLine:i}}class qU{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,i,r,s)=>{const a=Rl(e);s?this.warnings.push(new MU(a,i,r)):this.errors.push(new Hl(a,i,r))},this.directives=new Ce({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:i,afterEmptyLine:r}=iT(this.prelude);if(i){const s=t.contents;if(e)t.comment=t.comment?`${t.comment}
${i}`:i;else if(r||t.directives.docStart||!s)t.commentBefore=i;else if(qt(s)&&!s.flow&&s.items.length>0){let a=s.items[0];ee(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${i}
${o}`:i}else{const a=s.commentBefore;s.commentBefore=a?`${i}
${a}`:i}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:iT(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,i=-1){for(const r of t)yield*this.next(r);yield*this.end(e,i)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(e,i,r)=>{const s=Rl(t);s[0]+=e,this.onError(s,"BAD_DIRECTIVE",i,r)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=ZU(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,i=new Hl(Rl(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(i):this.doc.errors.push(i);break}case"doc-end":{if(!this.doc){const i="Unexpected doc-end without preceding document";this.errors.push(new Hl(Rl(t),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=!0;const e=Sh(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const i=this.doc.comment;this.doc.comment=i?`${i}
${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new Hl(Rl(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const i=Object.assign({_directives:this.directives},this.options),r=new lg(void 0,i);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,e,e],this.decorate(r,!1),yield r}}}const LM="\uFEFF",DM="",kM="",Zm="";function JU(n){switch(n){case LM:return"byte-order-mark";case DM:return"doc-mode";case kM:return"flow-error-end";case Zm:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(n[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Nn(n){switch(n){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const rT=new Set("0123456789ABCDEFabcdef"),QU=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),kc=new Set(",[]{}"),tX=new Set(` ,[]{}
\r	`),cv=n=>!n||tX.has(n);class eX{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!e;let i=this.next??"stream";for(;i&&(e||this.hasChars(1));)i=yield*this.parseNext(i)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;e===" "||e==="	";)e=this.buffer[++t];return!e||e==="#"||e===`
`?!0:e==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let i=0;for(;e===" ";)e=this.buffer[++i+t];if(e==="\r"){const r=this.buffer[i+t+1];if(r===`
`||!r&&!this.atEnd)return t+i+1}return e===`
`||i>=this.indentNext||!e&&!this.atEnd?t+i:-1}if(e==="-"||e==="."){const i=this.buffer.substr(t,3);if((i==="---"||i==="...")&&Nn(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===LM&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let e=t.length,i=t.indexOf("#");for(;i!==-1;){const s=t[i-1];if(s===" "||s==="	"){e=i-1;break}else i=t.indexOf("#",i+1)}for(;;){const s=t[e-1];if(s===" "||s==="	")e-=1;else break}const r=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield DM,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if((e==="---"||e==="...")&&Nn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,e==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Nn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&Nn(e)){const i=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=i,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(cv),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=yield*this.parseBlockScalarHeader(),e+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,i=-1;do t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=i=e):e=0,e+=yield*this.pushSpaces(!0);while(t+e>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((i!==-1&&i<this.indentNext&&r[0]!=="#"||i===0&&(r.startsWith("---")||r.startsWith("..."))&&Nn(r[3]))&&!(i===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield kM,yield*this.parseLineStart();let s=0;for(;r[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),r[s]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(cv),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||Nn(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;e!==-1&&this.buffer[e+1]==="'";)e=this.buffer.indexOf("'",e+2);else for(;e!==-1;){let s=0;for(;this.buffer[e-1-s]==="\\";)s+=1;if(s%2===0)break;e=this.buffer.indexOf('"',e+1)}const i=this.buffer.substring(0,e);let r=i.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const s=this.continueScalar(r+1);if(s===-1)break;r=i.indexOf(`
`,s)}r!==-1&&(e=r-(i[r-1]==="\r"?2:1))}if(e===-1){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if(e==="+")this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if(e!=="-")break}return yield*this.pushUntil(e=>Nn(e)||e==="#")}*parseBlockScalar(){let t=this.pos-1,e=0,i;t:for(let s=this.pos;i=this.buffer[s];++s)switch(i){case" ":e+=1;break;case`
`:t=s,e=0;break;case"\r":{const a=this.buffer[s+1];if(!a&&!this.atEnd)return this.setNext("block-scalar");if(a===`
`)break}default:break t}if(!i&&!this.atEnd)return this.setNext("block-scalar");if(e>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=e:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(t+1);if(s===-1)break;t=this.buffer.indexOf(`
`,s)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let r=t+1;for(i=this.buffer[r];i===" ";)i=this.buffer[++r];if(i==="	"){for(;i==="	"||i===" "||i==="\r"||i===`
`;)i=this.buffer[++r];t=r-1}else if(!this.blockScalarKeep)do{let s=t-1,a=this.buffer[s];a==="\r"&&(a=this.buffer[--s]);const o=s;for(;a===" ";)a=this.buffer[--s];if(a===`
`&&s>=this.pos&&s+1+e>o)t=s;else break}while(!0);return yield Zm,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e=this.pos-1,i=this.pos-1,r;for(;r=this.buffer[++i];)if(r===":"){const s=this.buffer[i+1];if(Nn(s)||t&&kc.has(s))break;e=i}else if(Nn(r)){let s=this.buffer[i+1];if(r==="\r"&&(s===`
`?(i+=1,r=`
`,s=this.buffer[i+1]):e=i),s==="#"||t&&kc.has(s))break;if(r===`
`){const a=this.continueScalar(i+1);if(a===-1)break;i=Math.max(i,a-2)}}else{if(t&&kc.has(r))break;e=i}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Zm,yield*this.pushToIndex(e+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const i=this.buffer.slice(this.pos,t);return i?(yield i,this.pos+=i.length,i.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(cv))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(Nn(e)||t&&kc.has(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,e=this.buffer[t];for(;!Nn(e)&&e!==">";)e=this.buffer[++t];return yield*this.pushToIndex(e===">"?t+1:t,!1)}else{let t=this.pos+1,e=this.buffer[t];for(;e;)if(QU.has(e))e=this.buffer[++t];else if(e==="%"&&rT.has(this.buffer[t+1])&&rT.has(this.buffer[t+2]))e=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let e=this.pos-1,i;do i=this.buffer[++e];while(i===" "||t&&i==="	");const r=e-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=e),r}*pushUntil(t){let e=this.pos,i=this.buffer[e];for(;!t(i);)i=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class nX{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,i=this.lineStarts.length;for(;e<i;){const s=e+i>>1;this.lineStarts[s]<t?e=s+1:i=s}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(e===0)return{line:0,col:t};const r=this.lineStarts[e-1];return{line:e,col:t-r+1}}}}function ws(n,t){for(let e=0;e<n.length;++e)if(n[e].type===t)return!0;return!1}function sT(n){for(let t=0;t<n.length;++t)switch(n[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function PM(n){switch(n==null?void 0:n.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Pc(n){switch(n.type){case"document":return n.start;case"block-map":{const t=n.items[n.items.length-1];return t.sep??t.start}case"block-seq":return n.items[n.items.length-1].start;default:return[]}}function La(n){var e;if(n.length===0)return[];let t=n.length;t:for(;--t>=0;)switch(n[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;((e=n[++t])==null?void 0:e.type)==="space";);return n.splice(t,n.length)}function aT(n){if(n.start.type==="flow-seq-start")for(const t of n.items)t.sep&&!t.value&&!ws(t.start,"explicit-key-ind")&&!ws(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,PM(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class iX{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new eX,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const i of this.lexer.lex(t,e))yield*this.next(i);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const e=JU(t);if(e)if(e==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const i=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(!e)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield e;else{const i=this.peek(1);switch(e.type==="block-scalar"?e.indent="indent"in i?i.indent:0:e.type==="flow-collection"&&i.type==="document"&&(e.indent=0),e.type==="flow-collection"&&aT(e),i.type){case"document":i.value=e;break;case"block-scalar":i.props.push(e);break;case"block-map":{const r=i.items[i.items.length-1];if(r.value){i.items.push({start:[],key:e,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=e;else{Object.assign(r,{key:e,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=i.items[i.items.length-1];r.value?i.items.push({start:[],value:e}):r.value=e;break}case"flow-collection":{const r=i.items[i.items.length-1];!r||r.value?i.items.push({start:[],key:e,sep:[]}):r.sep?r.value=e:Object.assign(r,{key:e,sep:[]});return}default:yield*this.pop(),yield*this.pop(e)}if((i.type==="document"||i.type==="block-map"||i.type==="block-seq")&&(e.type==="block-map"||e.type==="block-seq")){const r=e.items[e.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&sT(r.start)===-1&&(e.indent===0||r.start.every(s=>s.type!=="comment"||s.indent<e.indent))&&(i.type==="document"?i.end=r.start:i.items.push({start:r.start}),e.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{sT(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const e=Pc(this.peek(2)),i=La(e);let r;t.end?(r=t.end,r.push(this.sourceToken),delete t.end):r=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:i,key:t,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;e!==0;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){var i;const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const r="end"in e.value?e.value.end:void 0,s=Array.isArray(r)?r[r.length-1]:void 0;(s==null?void 0:s.type)==="comment"?r==null||r.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const r=t.items[t.items.length-2],s=(i=r==null?void 0:r.value)==null?void 0:i.end;if(Array.isArray(s)){Array.prototype.push.apply(s,e.start),s.push(this.sourceToken),t.items.pop();return}}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const r=!this.onKeyLine&&this.indent===t.indent,s=r&&(e.sep||e.explicitKey)&&this.type!=="seq-item-ind";let a=[];if(s&&e.sep&&!e.value){const o=[];for(let l=0;l<e.sep.length;++l){const u=e.sep[l];switch(u.type){case"newline":o.push(l);break;case"space":break;case"comment":u.indent>t.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(a=e.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":s||e.value?(a.push(this.sourceToken),t.items.push({start:a}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"explicit-key-ind":!e.sep&&!e.explicitKey?(e.start.push(this.sourceToken),e.explicitKey=!0):s||e.value?(a.push(this.sourceToken),t.items.push({start:a,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(e.explicitKey)if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(ws(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]});else if(PM(e.key)&&!ws(e.sep,"newline")){const o=La(e.start),l=e.key,u=e.sep;u.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:l,sep:u}]})}else a.length>0?e.sep=e.sep.concat(a,this.sourceToken):e.sep.push(this.sourceToken);else if(ws(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const o=La(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||s?t.items.push({start:a,key:null,sep:[this.sourceToken]}):ws(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);s||e.value?(t.items.push({start:a,key:o,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(o):(Object.assign(e,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(t);if(o){r&&o.type!=="block-seq"&&t.items.push({start:a}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){var i;const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const r="end"in e.value?e.value.end:void 0,s=Array.isArray(r)?r[r.length-1]:void 0;(s==null?void 0:s.type)==="comment"?r==null||r.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const r=t.items[t.items.length-2],s=(i=r==null?void 0:r.value)==null?void 0:i.end;if(Array.isArray(s)){Array.prototype.push.apply(s,e.start),s.push(this.sourceToken),t.items.pop();return}}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;e.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;e.value||ws(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken);return}if(this.indent>t.indent){const r=this.startBlockValue(t);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if(this.type==="flow-error-end"){let i;do yield*this.pop(),i=this.peek(1);while(i&&i.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken);return;case"map-value-ind":!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!e||e.value?t.items.push({start:[],key:r,sep:[]}):e.sep?this.stack.push(r):Object.assign(e,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const i=this.startBlockValue(t);i?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{const i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===t.indent||this.type==="newline"&&!i.items[i.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){const r=Pc(i),s=La(r);aT(t);const a=t.end.splice(1,t.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:s,key:t,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;e!==0;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=Pc(t),i=La(e);return i.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const e=Pc(t),i=La(e);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return this.type!=="comment"||this.indent<=e?!1:t.every(i=>i.type==="newline"||i.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function rX(n){const t=n.prettyErrors!==!1;return{lineCounter:n.lineCounter||t&&new nX||null,prettyErrors:t}}function sX(n,t={}){const{lineCounter:e,prettyErrors:i}=rX(t),r=new iX(e==null?void 0:e.addNewLine),s=new qU(t);let a=null;for(const o of s.compose(r.parse(n),!0,n.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new Hl(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return i&&e&&(a.errors.forEach(eT(n,e)),a.warnings.forEach(eT(n,e))),a}function aX(n,t,e){let i;const r=sX(n,e);if(!r)return null;if(r.warnings.forEach(s=>oM(r.options.logLevel,s)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},e))}var oX=Qi('<div class="error"><div><p>Please define config path as search param, e.g.:</p> <a></a></div></div>'),lX=Qi('<span class="attribution"><!></span>'),uX=Qi('<div class="step svelte-1qx0jlg"><div class="step-content svelte-1qx0jlg"><!> <!></div> <p></p></div>'),hX=Qi('<div class="map svelte-1qx0jlg"><!></div> <section><!> <div class="section-container svelte-1qx0jlg"><!></div></section>',1),cX=Qi("<div>Waiting</div>");function fX(n,t){Qu(t,!1);const e=t2(),i=()=>JL(xm,"$step",e),s=(()=>{const c=new URL(window.location.href).searchParams.get("config");if(!c){console.error("No config path defined.");return}return c})();let a=xs();s&&se(a,fetch(s).then(h=>h.text()).then(h=>aX(h)));const o=location.origin+location.pathname;rd();var l=el(),u=sa(l);nl(u,()=>!s,h=>{var c=oX(),f=yn(c),d=Ml(yn(f),2);ly(d,"href",`${o??""}?config=/scrollymap/storyBoard.yml`),d.textContent=`${o??""}?config=/scrollymap/storyBoard.yaml`,Oe(h,c)},h=>{var c=el(),f=sa(c);zL(f,()=>$(a),d=>{var g=cX();Oe(d,g)},(d,g)=>{var v=hX(),p=sa(v),m=yn(p);gH(m,{get steps(){return $(g).steps}});var y=Ml(p,2),_=yn(y);nl(_,()=>$(g).title,x=>{w3(x,{get title(){return $(g).title},get subTitle(){return $(g).subTitle}})});var w=Ml(_,2),S=yn(w);vH(S,{get value(){return i()},set value(x){QL(xm,x)},children:(x,b)=>{var T=el(),C=sa(T);YL(C,1,()=>$(g).steps,VL,(I,E,R)=>{var L=uX(),M=yn(L),k=yn(M);nl(k,()=>$(E).content,z=>{var O=el(),B=sa(O);J0(B,()=>Et.parse($(E).content)),Oe(z,O)},z=>{var O=el(),B=sa(O);nl(B,()=>$(E).chart,F=>{y3(F,{get config(){return $(E).chart}})},null,!0),Oe(z,O)});var D=Ml(k,2);nl(D,()=>$(E).attribution,z=>{var O=lX(),B=yn(O);J0(B,()=>$(E).attribution),Oe(z,O)}),sy(()=>jL(L,"active",i()===R)),Oe(I,L)}),Oe(x,T)},$$slots:{default:!0},$$legacy:!0}),Oe(d,v)}),Oe(h,c)}),Oe(n,l),th()}BL(fX,{target:document.body});
